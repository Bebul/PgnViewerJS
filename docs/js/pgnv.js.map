{"version":3,"sources":["webpack://PGNV/webpack/bootstrap","webpack://PGNV/./node_modules/chessground/util.js","webpack://PGNV/./node_modules/chessground/board.js","webpack://PGNV/(webpack)/buildin/global.js","webpack://PGNV/./node_modules/chessground/types.js","webpack://PGNV/./node_modules/chessground/fen.js","webpack://PGNV/./node_modules/chessground/drag.js","webpack://PGNV//home/mliebelt/priv/dev/PgnViewerJS/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://PGNV//home/mliebelt/priv/dev/PgnViewerJS/node_modules/css-loader/dist/runtime/api.js","webpack://PGNV/./node_modules/@mliebelt/pgn-reader/lib/pgn.js","webpack://PGNV/./node_modules/chessground/config.js","webpack://PGNV/./node_modules/chessground/anim.js","webpack://PGNV/./node_modules/chessground/draw.js","webpack://PGNV/./node_modules/chessground/svg.js","webpack://PGNV//home/mliebelt/priv/dev/PgnViewerJS/node_modules/timers-browserify/main.js","webpack://PGNV/./node_modules/i18next-localstorage-cache/index.js","webpack://PGNV/./node_modules/smoothscroll-polyfill/dist/smoothscroll.js","webpack://PGNV/./node_modules/chessground/chessground.js","webpack://PGNV/./node_modules/mousetrap/mousetrap.js","webpack://PGNV/./node_modules/sweetalert/dist/sweetalert.min.js","webpack://PGNV/./node_modules/i18next-localstorage-cache/dist/commonjs/index.js","webpack://PGNV/./node_modules/i18next-localstorage-cache/dist/commonjs/utils.js","webpack://PGNV/./node_modules/chessground/api.js","webpack://PGNV/./node_modules/chessground/premove.js","webpack://PGNV/./node_modules/chessground/explosion.js","webpack://PGNV/./node_modules/chessground/state.js","webpack://PGNV/./node_modules/chessground/wrap.js","webpack://PGNV/./node_modules/chessground/events.js","webpack://PGNV/./node_modules/chessground/drop.js","webpack://PGNV/./node_modules/chessground/render.js","webpack://PGNV//home/mliebelt/priv/dev/PgnViewerJS/node_modules/setimmediate/setImmediate.js","webpack://PGNV//home/mliebelt/priv/dev/PgnViewerJS/node_modules/process/browser.js","webpack://PGNV/./src/css/chessground.css?de1c","webpack://PGNV/./src/css/chessground.css","webpack://PGNV/./src/css/theme.css?9917","webpack://PGNV/./src/css/theme.css","webpack://PGNV/./src/css/pgnvjs.css?cf9c","webpack://PGNV/./src/css/pgnvjs.css","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/objectSpread.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/toArray.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://PGNV/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://PGNV/./node_modules/i18next/dist/esm/i18next.js","webpack://PGNV/./node_modules/i18next-xhr-backend/dist/esm/i18nextXHRBackend.js","webpack://PGNV/./src/Timer.js","webpack://PGNV/./src/pgnvjs.js","webpack://PGNV/./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","cg","colors","invRanks","allKeys","Array","concat","files","map","ranks","pos2key","pos","key2pos","k","charCodeAt","memo","f","v","ret","undefined","clear","timer","startAt","performance","now","time","opposite","containsX","xs","x","indexOf","distanceSq","pos1","pos2","Math","pow","samePiece","p1","p2","role","color","posToTranslateBase","asWhite","xFactor","yFactor","posToTranslateAbs","bounds","width","height","posToTranslateRel","translateAbs","el","style","transform","translateRel","percents","setVisible","visibility","eventPosition","e","clientX","clientY","touches","targetTouches","isRightButton","buttons","button","createEl","tagName","className","document","createElement","util_1","premove_1","callUserFunction","args","setTimeout","unsetPremove","state","premovable","current","events","unset","unsetPredrop","pd","predroppable","baseMove","orig","dest","origPiece","pieces","destPiece","captured","selected","unselect","move","autoCastle","king","origPos","destPos","oldRookPos","newRookPos","newKingPos","rook","tryAutoCastle","lastMove","check","change","baseNewPiece","piece","force","dropNewPiece","movable","dests","turnColor","baseUserMove","result","animation","userMove","canMove","holdTime","hold","stop","metadata","premove","ctrlKey","stats","after","isPremovable","default","castle","canPremove","meta","set","setPremove","setSelected","cancel","isMovable","free","enabled","cancelMove","toggleOrientation","orientation","draggable","reset","setPieces","setCheck","canDrop","afterNewPiece","predrop","canPredrop","setPredrop","selectSquare","select","selectable","dragged","start","isDraggable","playPremove","success","playPredrop","validate","drop","getKeyAtDomPos","file","ceil","left","rank","top","whitePov","g","this","Function","window","initial","roles","b","q","letters","pawn","knight","bishop","queen","read","fen","row","col","promoted","nb","toLowerCase","write","y","letter","toUpperCase","join","replace","length","toString","board","util","draw_1","anim_1","pieceCloseTo","dom","radiusSq","squareBounds","computeSquareBounds","center","processDrag","requestAnimationFrame","cur","plan","anims","started","epos","rel","distance","element","found","cgDragging","classList","add","translation","dec","newPiece","removeDragElements","redraw","elements","ghost","pieceElementByKey","firstChild","cgKey","nextSibling","position","previouslySelected","drawable","eraseOnClick","cancelable","preventDefault","hadPremove","hadPredrop","anim","stillSelected","centerPiece","autoDistance","originTarget","target","dragNewPiece","end","type","eventPos","deleteOnDropOff","isOldIE","Boolean","all","atob","getTarget","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","stylesInDom","getIndexByIdentifier","identifier","modulesToDom","list","options","idCountMap","identifiers","item","id","base","count","index","obj","css","media","sourceMap","references","updater","push","addStyle","insertStyleElement","attributes","nonce","keys","forEach","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","btoa","unescape","encodeURIComponent","JSON","stringify","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","lastIdentifiers","newList","newLastIdentifiers","_i","_index","splice","useSourceMap","content","cssMapping","sourceMapping","base64","data","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","message","expected","location","captureStackTrace","constructor","buildMessage","literal","text","class","parts","inverted","any","other","description","sort","slice","SyntaxError","parse","pgn","jt","tags","Lt","game","Et","moves","u","a","_t","h","A","C","E","S","N","T","_","O","w","P","G","L","R","I","D","U","B","$","M","F","j","W","Q","Ot","K","V","xt","Y","H","Z","z","X","J","nn","tn","en","rn","on","un","an","ln","cn","parseInt","sn","fn","vn","pn","hn","gn","dn","mn","An","bn","Cn","En","yn","Sn","Nn","Tn","_n","xn","On","kn","wn","Pn","Gn","Ln","Rn","In","Dn","Un","Bn","$n","Mn","Fn","jn","qn","Wn","Qn","Kn","Vn","Yn","Hn","Zn","zn","Xn","Jn","nt","tt","et","rt","ot","it","ut","at","lt","ct","st","ft","vt","pt","ht","gt","dt","mt","At","bt","Ct","yt","line","column","St","Nt","Tt","startRule","ignoreCase","kt","wt","offset","Pt","It","Rt","re","substr","Dt","$t","Ut","Mt","Ft","oe","test","charAt","Bt","Wt","Qt","unshift","qt","se","Vt","le","ve","ge","Ht","ue","ae","turn","moveNumber","notation","commentBefore","commentAfter","commentMove","variations","nag","commentDiag","Kt","Yt","te","ee","trim","Zt","zt","colorFields","Xt","colorArrows","ie","clock","Jt","ne","Ae","be","ce","fe","me","de","Ce","he","pe","fig","disc","strike","promotion","Gt","NORMAL","CAPTURE","BIG_PAWN","EP_CAPTURE","PROMOTION","KSIDE_CASTLE","QSIDE_CASTLE","a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1","square","flag","split","valid","error_number","error","isNaN","SetUp","FEN","from","to","flags","legal","pop","kings","castling","ep_square","half_moves","move_number","match","substring","san","WHITE","BLACK","PAWN","KNIGHT","BISHOP","ROOK","QUEEN","KING","SQUARES","FLAGS","load","verbose","in_check","in_checkmate","in_stalemate","in_draw","insufficient_material","in_threefold_repetition","game_over","validate_fen","newline_char","max_width","Result","load_pgn","sloppy","RegExp","exec","header","arguments","ascii","undo","put","perft","square_color","history","Chess","strings","append","isEmpty","lastChar","isArray","pvEach","pvIsElement","nodeType","pvIsEmpty","configuration","pgnFile","XMLHttpRequest","open","send","status","responseText","assign","locale","startMove","PGN_TAGS","event","site","date","round","white","black","eco","whitemyelo","blackmyelo","whitedays","blackdays","mychessno","annotator","plycount","timecontrol","termination","setup","PROMOTIONS","NAGs","PGN_NAGS","mate","endGame","startPlay","hideMovesBefore","variationLevel","next","prev","firstMove","deleteMove","deleteMovesBefore","isDeleted","promoteMove","readMoves","findMove","startsWith","getMoves","getOrderedMoves","getMove","getEndGame","getTags","getParser","movesMainLine","write_pgn","nag_to_symbol","startVariation","startMainLine","endVariation","afterMoveWithVariation","changeNag","clearNags","addMove","includes","ep","has_diagram_nag","NAGS","sanWithNags","possibleMoves","setShapes","brush","board_1","fen_1","isObject","configure","config","merge","extend","shapes","duration","rookCastle","kingStartPos","render","mutation","makePiece","isObjectEmpty","prevPieces","animedOrigs","fadings","missings","news","prePieces","curP","preP","vector","newP","computePlan","alreadyRunning","frequency","step","destroyed","redrawNow","rest","ease","cfg","animate","brushes","processDraw","mouseSq","eventBrush","shiftKey","altKey","onChange","stopPropagation","sameShape","similar","addShape","createElementNS","shapeHash","modifiers","arrowDests","pieceHash","lineWidth","scale","renderMarker","marker","setAttributes","orient","markerWidth","markerHeight","refX","refY","fill","attrs","makeCustomBrush","opacity","pos2px","renderSvg","root","curD","autoShapes","shape","hash","fullHash","sc","prevSvgHash","defsEl","keysInDom","getAttribute","syncDefs","hashesInDom","toRemove","elHash","baseUrl","size","href","renderPiece","shorten","arrowMargin","dx","dy","angle","atan2","xo","cos","yo","sin","stroke","x1","y1","x2","y2","renderArrow","widths","circleWidth","radius","cx","cy","renderCircle","renderShape","syncShapes","self","apply","Timeout","clearFn","_id","_clearFn","scope","clearTimeout","setInterval","clearInterval","timeout","close","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","setImmediate","global","clearImmediate","polyfill","documentElement","__forceSmoothScrollPolyfill__","userAgent","Element","HTMLElement","original","scroll","scrollTo","scrollBy","elementScroll","scrollElement","scrollIntoView","Date","ROUNDING_TOLERANCE","navigator","shouldBailOut","smoothScroll","body","scrollX","pageXOffset","scrollY","pageYOffset","scrollLeft","scrollTop","behavior","scrollableParent","findScrollableParent","parentRects","getBoundingClientRect","clientRects","getComputedStyle","firstArg","TypeError","hasScrollableSpace","axis","clientHeight","scrollHeight","clientWidth","scrollWidth","canOverflow","overflowValue","isScrollable","isScrollableY","isScrollableX","host","context","currentX","currentY","elapsed","startTime","PI","startX","startY","method","scrollable","api_1","config_1","state_1","wrap_1","render_1","svg","debounceRedraw","redrawing","Chessground","defaults","redrawAll","prevUnbind","unbind","relative","viewOnly","visible","skipSvg","bindBoard","bindDocument","_REVERSE_MAP","_MAP","8","9","13","16","17","18","20","27","32","33","34","35","36","37","38","39","40","45","46","91","93","224","_KEYCODE_MAP","106","107","109","110","111","186","187","188","189","190","191","192","219","220","221","222","_SHIFT_MAP","_SPECIAL_ALIASES","platform","Mousetrap","callback","action","_bindMultiple","trigger","_directMap","_callbacks","stopCallback","_belongsTo","ancestor","composedPath","initialEventTarget","isContentEditable","handleKey","_handleKey","addKeycodes","init","documentMousetrap","_addEvent","addEventListener","attachEvent","_characterFromEvent","character","String","fromCharCode","which","_isModifier","_pickBestAction","_getReverseMap","_getKeyInfo","combination","_keysFromString","targetElement","_resetTimer","_sequenceLevels","_ignoreNextKeyup","_ignoreNextKeypress","_nextExpectedAction","_resetSequences","doNotReset","activeSequences","_getMatches","sequenceName","level","modifiers1","modifiers2","matches","seq","metaKey","deleteCombo","combo","deleteSequence","_fireCallback","sequence","srcElement","returnValue","_preventDefault","cancelBubble","_stopPropagation","_handleKeyEvent","keyCode","_eventModifiers","_bindSequence","_increaseSequence","nextAction","_callbackAndReset","wrappedCallback","_bindSingle","info","callbacks","maxLevel","processedSequenceCallback","max","ignoreThisKeypress","combinations","configurable","CLASS_NAMES","MODAL","OVERLAY","SHOW_MODAL","MODAL_TITLE","MODAL_TEXT","ICON","ICON_CUSTOM","CONTENT","FOOTER","BUTTON_CONTAINER","BUTTON","CONFIRM_BUTTON","CANCEL_BUTTON","DANGER_BUTTON","BUTTON_LOADING","BUTTON_LOADER","getNode","stringToNode","innerHTML","insertAfter","removeNode","parentElement","throwErr","isPlainObject","getPrototypeOf","ordinalSuffixOf","overlayMarkup","iconMarkup","titleMarkup","textMarkup","footerMarkup","CONFIRM_KEY","CANCEL_KEY","closeModal","defaultButtonList","confirm","getButtonListOpts","injectElIntoModal","textContent","initModalContent","icon","initTitle","title","initText","dangerMode","modalMarkup","isOpen","promise","actions","resetState","setActionValue","setActionOptionsFor","openModal","onAction","resolve","getState","stopLoading","querySelectorAll","eval","sweetAlert","swal","insertAt","locals","refs","insertInto","URL","createObjectURL","revokeObjectURL","Blob","convertToAbsoluteUrls","DEBUG","protocol","pathname","Promise","abs","CharacterData","DocumentType","writable","_state","_handled","_value","_deferreds","_immediateFn","onFulfilled","onRejected","then","_unhandledRejectionFn","catch","reject","race","console","warn","_setImmediateFn","_setUnhandledRejectionFn","process","nextTick","postMessage","importScripts","onmessage","random","MessageChannel","port1","port2","onreadystatechange","run","fun","array","browser","env","argv","version","versions","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","getOwnPropertyDescriptor","getOpts","setDefaults","errorIconMarkup","warningIconMarkup","successIconMarkup","contentMarkup","buttonMarkup","warning","src","display","offsetHeight","createDocumentFragment","children","focus","tabIndex","closeOnEsc","removeEventListener","closeOnClickOutside","getContentOpts","DEPRECATED_OPTS","logDeprecation","placeholder","onlyRename","subOption","link","imageUrl","customClass","imageSize","showCancelButton","showConfirmButton","confirmButtonText","confirmButtonColor","cancelButtonText","closeOnConfirm","closeOnCancel","showLoaderOnConfirm","inputType","inputValue","inputPlaceholder","html","allowEscapeKey","allowClickOutside","_createClass","defineProperties","props","descriptor","Constructor","protoProps","staticProps","utils","_interopRequireWildcard","_classCallCheck","instance","storage","localStorage","setItem","getItem","Cache","services","debouncedStore","debounce","store","prefix","expirationTime","lngs","_this","nowMS","getTime","todo","lng","local","i18nStamp","i18nVersion","storeParam","each","prop","func","wait","immediate","later","callNow","arr","drag_1","explosion_1","getFen","diff","xd","yd","allPos","canCastle","mobility","rookFiles","backrank","rookFilesOf","setStage","stage","exploding","coordinates","disableContextMenu","resizable","addPieceZIndex","pieceKey","highlight","showDests","showGhost","dropmode","green","red","blue","yellow","paleBlue","paleGreen","paleRed","paleGrey","types_1","svg_1","renderCoords","elems","toggle","helper","container","orientClass","drag","draw","drop_1","unbindable","eventName","dragOrDraw","withDrag","withDraw","boardEl","onStart","startDragOrDraw","passive","unbinds","onResize","onmove","onend","ev","onScroll","setDropMode","cancelDropMode","a0","isPieceNode","isSquareNode","removeNodes","nodes","posZIndex","pieceNameOf","addSquare","squares","klass","posToTranslate","translate","curAnim","curDrag","pDests","computeSquareClasses","samePieces","sameSquares","movedPieces","movedSquares","piecesKeys","pieceAtKey","elPieceName","fading","pMvdset","pMvd","sMvdset","sMvd","cgPiece","cgFading","cgAnimating","zIndex","sk","squareNode","pieceName","pieceNode","registerImmediate","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","handle","runIfPresent","postMessageIsAsynchronous","oldOnMessage","canUsePostMessage","script","task","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","len","runClearTimeout","Item","noop","dir","api","___CSS_LOADER_API_IMPORT___","_typeof","iterator","_defineProperty","_objectSpread","ownKeys","getOwnPropertySymbols","sym","_defineProperties","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","_getPrototypeOf","setPrototypeOf","__proto__","_setPrototypeOf","_inherits","subClass","superClass","_arrayLikeToArray","arr2","_iterableToArray","iter","_unsupportedIterableToArray","minLen","_toConsumableArray","_arrayWithHoles","_nonIterableRest","_toArray","_slicedToArray","_arr","_d","_e","_s","done","err","consoleLogger","log","output","_console","baseLogger","Logger","concreteLogger","logger","debug","bool","_len","_key","forward","_len2","_key2","_len3","_key3","_len4","_key4","lvl","debugOnly","moduleName","EventEmitter","observers","listener","cloned","observer","_cloned","defer","res","rej","makeString","copy","getLastOfPath","path","Empty","cleanKey","canNotTraverseDeeper","stack","shift","setPath","newValue","_getLastOfPath","getPath","_getLastOfPath3","getPathWithDefaults","defaultData","deepExtend","overwrite","regexEscape","str","_entityMap","isIE10","_EventEmitter","ResourceStore","defaultNS","keySeparator","silent","addNamespaces","resources","addResource","deep","pack","hasResourceBundle","removeNamespaces","getResource","compatibilityAPI","postProcessor","processors","addPostProcessor","translator","processor","checkedLoadedFor","Translator","language","interpolation","resolved","nsSeparator","namespaces","_this2","overloadTranslationOptionHandler","_this$extractFromKey","extractFromKey","namespace","appendNamespaceToCIMode","resUsedKey","usedKey","resExactUsedKey","exactUsedKey","resType","noObject","joinArrays","handleAsObjectInI18nFormat","i18nFormat","handleAsObject","returnObjects","returnedObjectHandler","resTypeIsArray","copy$$1","newKeyToUse","deepKey","extendTranslation","usedDefault","isValidLookup","defaultValue","suffix","pluralResolver","getSuffix","updateMissing","fallbackLngs","languageUtils","getFallbackCodes","fallbackLng","saveMissingTo","toResolveHierarchy","missingKeyHandler","backendConnector","saveMissing","needsPluralHandling","saveMissingPlurals","getPluralFormsOfKey","appendNamespaceToMissingKey","parseMissingKeyHandler","_this3","usedLng","usedNS","skipInterpolation","interpolator","defaultVariables","interpolate","nest","postProcess","postProcessorNames","applyPostProcessor","postProcessPassResolved","i18nResolved","_this4","extracted","fallbackNS","needsContextHandling","codes","hasLoadedNamespace","code","pluralSuffix","possibleKey","finalKey","finalKeys","addLookupKeys","contextSeparator","returnNull","returnEmptyString","resourceStore","capitalize","string","LanguageUtil","whitelist","formatLanguageCode","specialCases","lowerCaseLng","part","cleanCode","nonExplicitWhitelist","getLanguagePartFromCode","fallbacks","getScriptPartFromCode","fallbackCode","fallbackCodes","addCode","isWhitelisted","fc","sets","nr","_rulesPluralsTypes","1","Number","2","3","4","5","6","7","10","11","12","14","15","19","21","22","createRules","rules","numbers","plurals","PluralResolver","rule","getRule","idx","noAbs","simplifyPluralSuffix","returnSuffix","prepend","compatibilityJSON","Interpolator","format","escapeValue","iOpts","escape","useRawValueToEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapePrefix","unescapeSuffix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","resetRegExp","regexpStr","regexp","regexpUnescapeStr","regexpUnescape","nestingRegexpStr","nestingRegexp","replaces","regexSafe","val","handleFormat","missingInterpolationHandler","temp","lastIndex","_temp","clonedOptions","handleHasOptions","inheritedOptions","sep","optionsString","formatters","doReduce","_match$1$split$map","elem","_match$1$split$map2","reduce","Connector","backend","languages","toLoad","pending","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","reload","loaded","errors","_name$split2","addResourceBundle","_getLastOfPath2","what","fcName","tried","queueLoad","loadOne","prepareLoading","_this5","_name$split3","_name$split4","fallbackValue","isUpdate","initImmediate","preload","pluralSeparator","partialBundledLanguages","tDescription","_format","transformOptions","I18n","external","isInitialized","isClone","createClassOnDemand","ClassOrObject","lu","languageDetector","detection","storeApi","_this2$store","deferred","changeLanguage","usedCallback","isLanguageChangingTo","setLng","cacheUserLanguage","loadResources","async","detect","fixedT","opts","_this$translator","_this$translator2","exists","_this6","lastLng","loadNotPending","loadState","_this7","preloaded","newLngs","_this8","mergedOptions","clone","membersToCopy","addQueryString","url","params","queryString","paramName","ajax","cache","queryStringParams","ActiveXObject","crossDomain","setRequestHeader","withCredentials","overrideMimeType","customHeaders","readyState","getDefaults","loadPath","addPath","allowMultiLoading","parsePayload","Backend","loadUrl","xhr","payload","timeStringToMilliseconds","timeString","parseFloat","Timer","resolution","_notifications","_resolution","_running","_ticks","_timer","_drift","loopsyloop","ticks","running","when","milliseconds","drift","timeDrift","every","pgnBase","boardId","that","promMappings","showCoords","showFen","layout","headers","timerTime","colorMarker","showResult","timeAnnotation","PgnBaseDefaults","mypgn","theme","markup","hasMarkup","hasMode","innerBoardId","headersId","movesId","buttonsId","fenId","colorMarkerId","loadLanguages","logError","node","textnode","errorDiv","addClass","elementOrId","ele","getElementById","removeClass","toggleColorMarker","contains","createEle","kind","clazz","my_theme","father","i18nSan","i18nFig","new_san","move_fig","moveSpan","generateMove","currentCounter","prevCounter","movesDiv","varStack","generateCommentSpan","comment","span","clAttr","varDiv","varHead","clock_span","colorClass","newElement","parent","lastChild","append_to_current_div","makeMove","currentMove","diaID","diaDiv","generateHTML","generateBoard","localBoard","unmarkMark","updateUI","act","eachNag","curr","myMove","myFen","aMove","promPiece","handlePromotion","colOfDiag","comm","getShapes","child","parentRect","parentViewableArea","childRect","scrollParentToChild","scrollToView","checked","fillComment","fenView","chess","getPgn","addButton","pair","buttonDiv","l_theme","generateViewButtons","entry","generateEditButtons","generateNagMenu","nagEle","generateRow","rowClass","myDiv","nagDiv","myLink","generateIcon","iNode","moveIndex","updateMoveSAN","generateLink","inner","editButton","divBoard","outerInnerBoardDiv","boardAndDiv","boardSize","gridTemplateColumns","topInnerBoardDiv","bottomInnerBoardDiv","onpaste","pastedData","originalEvent","clipboardData","getData","pgnEdit","readonly","fenSize","movesWidth","movesHeight","commentDiv","radio","mc","mb","ma","generateCommentDiv","boardConfiguration","coordsInner","coordsFactor","pieceStyle","currentWidth","smallerWidth","fontSize","rankFontSize","dispatchEvent","Event","toMove","generateMoves","sta","pgnStr","myMoves","fenField","computePgn","showPgn","regenerateMoves","bind_key","to_call","key_ID","form","evt","nextMove","prevMove","togglePgn","toggleNagMenu","myNode","onchange","rad","onclick","playButton","clString","togglePlay","bindFunctions","hd","div_h","White","Black","Site","Round","ECO","separator","appendHeader","generateHeaders","postGenerateMoves","onSnapEnd","primMove","sel","GLOB_SCHED","schedule","loc","my_res","myLoc","pgnTestRegistry","localesPattern","i18n_option","localPath","jsFileLocation","use","i18nextXHRBackend","initI18n","pgnView","pgnBoard","pgnPrint"],"mappings":"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AAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI2Y,EAAE,CAAC,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,IAAI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","file":"pgnv.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/lib/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 37);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cg = require(\"./types\");\nexports.colors = ['white', 'black'];\nexports.invRanks = [8, 7, 6, 5, 4, 3, 2, 1];\nexports.allKeys = Array.prototype.concat(...cg.files.map(c => cg.ranks.map(r => c + r)));\nexports.pos2key = (pos) => exports.allKeys[8 * pos[0] + pos[1] - 9];\nexports.key2pos = (k) => [k.charCodeAt(0) - 96, k.charCodeAt(1) - 48];\nfunction memo(f) {\n    let v;\n    const ret = () => {\n        if (v === undefined)\n            v = f();\n        return v;\n    };\n    ret.clear = () => { v = undefined; };\n    return ret;\n}\nexports.memo = memo;\nexports.timer = () => {\n    let startAt;\n    return {\n        start() { startAt = performance.now(); },\n        cancel() { startAt = undefined; },\n        stop() {\n            if (!startAt)\n                return 0;\n            const time = performance.now() - startAt;\n            startAt = undefined;\n            return time;\n        }\n    };\n};\nexports.opposite = (c) => c === 'white' ? 'black' : 'white';\nfunction containsX(xs, x) {\n    return xs !== undefined && xs.indexOf(x) !== -1;\n}\nexports.containsX = containsX;\nexports.distanceSq = (pos1, pos2) => {\n    return Math.pow(pos1[0] - pos2[0], 2) + Math.pow(pos1[1] - pos2[1], 2);\n};\nexports.samePiece = (p1, p2) => p1.role === p2.role && p1.color === p2.color;\nconst posToTranslateBase = (pos, asWhite, xFactor, yFactor) => [\n    (asWhite ? pos[0] - 1 : 8 - pos[0]) * xFactor,\n    (asWhite ? 8 - pos[1] : pos[1] - 1) * yFactor\n];\nexports.posToTranslateAbs = (bounds) => {\n    const xFactor = bounds.width / 8, yFactor = bounds.height / 8;\n    return (pos, asWhite) => posToTranslateBase(pos, asWhite, xFactor, yFactor);\n};\nexports.posToTranslateRel = (pos, asWhite) => posToTranslateBase(pos, asWhite, 100, 100);\nexports.translateAbs = (el, pos) => {\n    el.style.transform = `translate(${pos[0]}px,${pos[1]}px)`;\n};\nexports.translateRel = (el, percents) => {\n    el.style.transform = `translate(${percents[0]}%,${percents[1]}%)`;\n};\nexports.setVisible = (el, v) => {\n    el.style.visibility = v ? 'visible' : 'hidden';\n};\nexports.eventPosition = e => {\n    if (e.clientX || e.clientX === 0)\n        return [e.clientX, e.clientY];\n    if (e.touches && e.targetTouches[0])\n        return [e.targetTouches[0].clientX, e.targetTouches[0].clientY];\n    return undefined;\n};\nexports.isRightButton = (e) => e.buttons === 2 || e.button === 2;\nexports.createEl = (tagName, className) => {\n    const el = document.createElement(tagName);\n    if (className)\n        el.className = className;\n    return el;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNyYy91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsOEJBQThCO0FBRWpCLFFBQUEsTUFBTSxHQUFlLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBRXhDLFFBQUEsUUFBUSxHQUFjLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBRS9DLFFBQUEsT0FBTyxHQUFhLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFFekYsUUFBQSxPQUFPLEdBQUcsQ0FBQyxHQUFXLEVBQUUsRUFBRSxDQUFDLGVBQU8sQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUU1RCxRQUFBLE9BQU8sR0FBRyxDQUFDLENBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBVyxDQUFDO0FBRTdGLFNBQWdCLElBQUksQ0FBSSxDQUFVO0lBQ2hDLElBQUksQ0FBZ0IsQ0FBQztJQUNyQixNQUFNLEdBQUcsR0FBUSxHQUFHLEVBQUU7UUFDcEIsSUFBSSxDQUFDLEtBQUssU0FBUztZQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztRQUM3QixPQUFPLENBQUMsQ0FBQztJQUNY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Q0FBQyxDQUFDLENBQUMsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQztBQUVyRSxRQUFBLFFBQVEsR0FBRyxDQUFDLE9BQWUsRUFBRSxTQUFrQixFQUFFLEVBQUU7SUFDOUQsTUFBTSxFQUFFLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMzQyxJQUFJLFNBQVM7UUFBRSxFQUFFLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUN4QyxPQUFPLEVBQUUsQ0FBQztBQUNaLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGNnIGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgY29sb3JzOiBjZy5Db2xvcltdID0gWyd3aGl0ZScsICdibGFjayddO1xuXG5leHBvcnQgY29uc3QgaW52UmFua3M6IGNnLlJhbmtbXSA9IFs4LCA3LCA2LCA1LCA0LCAzLCAyLCAxXTtcblxuZXhwb3J0IGNvbnN0IGFsbEtleXM6IGNnLktleVtdID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdCguLi5jZy5maWxlcy5tYXAoYyA9PiBjZy5yYW5rcy5tYXAociA9PiBjK3IpKSk7XG5cbmV4cG9ydCBjb25zdCBwb3Mya2V5ID0gKHBvczogY2cuUG9zKSA9PiBhbGxLZXlzWzggKiBwb3NbMF0gKyBwb3NbMV0gLSA5XTtcblxuZXhwb3J0IGNvbnN0IGtleTJwb3MgPSAoazogY2cuS2V5KSA9PiBbay5jaGFyQ29kZUF0KDApIC0gOTYsIGsuY2hhckNvZGVBdCgxKSAtIDQ4XSBhcyBjZy5Qb3M7XG5cbmV4cG9ydCBmdW5jdGlvbiBtZW1vPEE+KGY6ICgpID0+IEEpOiBjZy5NZW1vPEE+IHtcbiAgbGV0IHY6IEEgfCB1bmRlZmluZWQ7XG4gIGNvbnN0IHJldDogYW55ID0gKCkgPT4ge1xuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHYgPSBmKCk7XG4gICAgcmV0dXJuIHY7XG4gIH07XG4gIHJldC5jbGVhciA9ICgpID0+IHsgdiA9IHVuZGVmaW5lZCB9O1xuICByZXR1cm4gcmV0O1xufVxuXG5leHBvcnQgY29uc3QgdGltZXI6ICgpID0+IGNnLlRpbWVyID0gKCkgPT4ge1xuICBsZXQgc3RhcnRBdDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICByZXR1cm4ge1xuICAgIHN0YXJ0KCkgeyBzdGFydEF0ID0gcGVyZm9ybWFuY2Uubm93KCkgfSxcbiAgICBjYW5jZWwoKSB7IHN0YXJ0QXQgPSB1bmRlZmluZWQgfSxcbiAgICBzdG9wKCkge1xuICAgICAgaWYgKCFzdGFydEF0KSByZXR1cm4gMDtcbiAgICAgIGNvbnN0IHRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0QXQ7XG4gICAgICBzdGFydEF0ID0gdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuIHRpbWU7XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgY29uc3Qgb3Bwb3NpdGUgPSAoYzogY2cuQ29sb3IpID0+IGMgPT09ICd3aGl0ZScgPyAnYmxhY2snIDogJ3doaXRlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zWDxYPih4czogWFtdIHwgdW5kZWZpbmVkLCB4OiBYKTogYm9vbGVhbiB7XG4gIHJldHVybiB4cyAhPT0gdW5kZWZpbmVkICYmIHhzLmluZGV4T2YoeCkgIT09IC0xO1xufVxuXG5leHBvcnQgY29uc3QgZGlzdGFuY2VTcTogKHBvczE6IGNnLlBvcywgcG9zMjogY2cuUG9zKSA9PiBudW1iZXIgPSAocG9zMSwgcG9zMikgPT4ge1xuICByZXR1cm4gTWF0aC5wb3cocG9zMVswXSAtIHBvczJbMF0sIDIpICsgTWF0aC5wb3cocG9zMVsxXSAtIHBvczJbMV0sIDIpO1xufVxuXG5leHBvcnQgY29uc3Qgc2FtZVBpZWNlOiAocDE6IGNnLlBpZWNlLCBwMjogY2cuUGllY2UpID0+IGJvb2xlYW4gPSAocDEsIHAyKSA9PlxuICBwMS5yb2xlID09PSBwMi5yb2xlICYmIHAxLmNvbG9yID09PSBwMi5jb2xvcjtcblxuY29uc3QgcG9zVG9UcmFuc2xhdGVCYXNlOiAocG9zOiBjZy5Qb3MsIGFzV2hpdGU6IGJvb2xlYW4sIHhGYWN0b3I6IG51bWJlciwgeUZhY3RvcjogbnVtYmVyKSA9PiBjZy5OdW1iZXJQYWlyID1cbihwb3MsIGFzV2hpdGUsIHhGYWN0b3IsIHlGYWN0b3IpID0+IFtcbiAgKGFzV2hpdGUgPyBwb3NbMF0gLSAxIDogOCAtIHBvc1swXSkgKiB4RmFjdG9yLFxuICAoYXNXaGl0ZSA/IDggLSBwb3NbMV0gOiBwb3NbMV0gLSAxKSAqIHlGYWN0b3Jcbl07XG5cbmV4cG9ydCBjb25zdCBwb3NUb1RyYW5zbGF0ZUFicyA9IChib3VuZHM6IENsaWVudFJlY3QpID0+IHtcbiAgY29uc3QgeEZhY3RvciA9IGJvdW5kcy53aWR0aCAvIDgsXG4gIHlGYWN0b3IgPSBib3VuZHMuaGVpZ2h0IC8gODtcbiAgcmV0dXJuIChwb3M6IGNnLlBvcywgYXNXaGl0ZTogYm9vbGVhbikgPT4gcG9zVG9UcmFuc2xhdGVCYXNlKHBvcywgYXNXaGl0ZSwgeEZhY3RvciwgeUZhY3Rvcik7XG59O1xuXG5leHBvcnQgY29uc3QgcG9zVG9UcmFuc2xhdGVSZWw6IChwb3M6IGNnLlBvcywgYXNXaGl0ZTogYm9vbGVhbikgPT4gY2cuTnVtYmVyUGFpciA9XG4gIChwb3MsIGFzV2hpdGUpID0+IHBvc1RvVHJhbnNsYXRlQmFzZShwb3MsIGFzV2hpdGUsIDEwMCwgMTAwKTtcblxuZXhwb3J0IGNvbnN0IHRyYW5zbGF0ZUFicyA9IChlbDogSFRNTEVsZW1lbnQsIHBvczogY2cuTnVtYmVyUGFpcikgPT4ge1xuICBlbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7cG9zWzBdfXB4LCR7cG9zWzFdfXB4KWA7XG59XG5cbmV4cG9ydCBjb25zdCB0cmFuc2xhdGVSZWwgPSAoZWw6IEhUTUxFbGVtZW50LCBwZXJjZW50czogY2cuTnVtYmVyUGFpcikgPT4ge1xuICBlbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7cGVyY2VudHNbMF19JSwke3BlcmNlbnRzWzFdfSUpYDtcbn1cblxuZXhwb3J0IGNvbnN0IHNldFZpc2libGUgPSAoZWw6IEhUTUxFbGVtZW50LCB2OiBib29sZWFuKSA9PiB7XG4gIGVsLnN0eWxlLnZpc2liaWxpdHkgPSB2ID8gJ3Zpc2libGUnIDogJ2hpZGRlbic7XG59XG5cbi8vIHRvdWNoZW5kIGhhcyBubyBwb3NpdGlvbiFcbmV4cG9ydCBjb25zdCBldmVudFBvc2l0aW9uOiAoZTogY2cuTW91Y2hFdmVudCkgPT4gY2cuTnVtYmVyUGFpciB8IHVuZGVmaW5lZCA9IGUgPT4ge1xuICBpZiAoZS5jbGllbnRYIHx8IGUuY2xpZW50WCA9PT0gMCkgcmV0dXJuIFtlLmNsaWVudFgsIGUuY2xpZW50WV07XG4gIGlmIChlLnRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzWzBdKSByZXR1cm4gW2UudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRYLCBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WV07XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBjb25zdCBpc1JpZ2h0QnV0dG9uID0gKGU6IE1vdXNlRXZlbnQpID0+IGUuYnV0dG9ucyA9PT0gMiB8fCBlLmJ1dHRvbiA9PT0gMjtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUVsID0gKHRhZ05hbWU6IHN0cmluZywgY2xhc3NOYW1lPzogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcbiAgaWYgKGNsYXNzTmFtZSkgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICByZXR1cm4gZWw7XG59XG4iXX0=","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"./util\");\nconst premove_1 = require(\"./premove\");\nfunction callUserFunction(f, ...args) {\n    if (f)\n        setTimeout(() => f(...args), 1);\n}\nexports.callUserFunction = callUserFunction;\nfunction toggleOrientation(state) {\n    state.orientation = util_1.opposite(state.orientation);\n    state.animation.current =\n        state.draggable.current =\n            state.selected = undefined;\n}\nexports.toggleOrientation = toggleOrientation;\nfunction reset(state) {\n    state.lastMove = undefined;\n    unselect(state);\n    unsetPremove(state);\n    unsetPredrop(state);\n}\nexports.reset = reset;\nfunction setPieces(state, pieces) {\n    for (let key in pieces) {\n        const piece = pieces[key];\n        if (piece)\n            state.pieces[key] = piece;\n        else\n            delete state.pieces[key];\n    }\n}\nexports.setPieces = setPieces;\nfunction setCheck(state, color) {\n    state.check = undefined;\n    if (color === true)\n        color = state.turnColor;\n    if (color)\n        for (let k in state.pieces) {\n            if (state.pieces[k].role === 'king' && state.pieces[k].color === color) {\n                state.check = k;\n            }\n        }\n}\nexports.setCheck = setCheck;\nfunction setPremove(state, orig, dest, meta) {\n    unsetPredrop(state);\n    state.premovable.current = [orig, dest];\n    callUserFunction(state.premovable.events.set, orig, dest, meta);\n}\nfunction unsetPremove(state) {\n    if (state.premovable.current) {\n        state.premovable.current = undefined;\n        callUserFunction(state.premovable.events.unset);\n    }\n}\nexports.unsetPremove = unsetPremove;\nfunction setPredrop(state, role, key) {\n    unsetPremove(state);\n    state.predroppable.current = { role, key };\n    callUserFunction(state.predroppable.events.set, role, key);\n}\nfunction unsetPredrop(state) {\n    const pd = state.predroppable;\n    if (pd.current) {\n        pd.current = undefined;\n        callUserFunction(pd.events.unset);\n    }\n}\nexports.unsetPredrop = unsetPredrop;\nfunction tryAutoCastle(state, orig, dest) {\n    if (!state.autoCastle)\n        return false;\n    const king = state.pieces[orig];\n    if (!king || king.role !== 'king')\n        return false;\n    const origPos = util_1.key2pos(orig);\n    if (origPos[0] !== 5)\n        return false;\n    if (origPos[1] !== 1 && origPos[1] !== 8)\n        return false;\n    const destPos = util_1.key2pos(dest);\n    let oldRookPos, newRookPos, newKingPos;\n    if (destPos[0] === 7 || destPos[0] === 8) {\n        oldRookPos = util_1.pos2key([8, origPos[1]]);\n        newRookPos = util_1.pos2key([6, origPos[1]]);\n        newKingPos = util_1.pos2key([7, origPos[1]]);\n    }\n    else if (destPos[0] === 3 || destPos[0] === 1) {\n        oldRookPos = util_1.pos2key([1, origPos[1]]);\n        newRookPos = util_1.pos2key([4, origPos[1]]);\n        newKingPos = util_1.pos2key([3, origPos[1]]);\n    }\n    else\n        return false;\n    const rook = state.pieces[oldRookPos];\n    if (!rook || rook.role !== 'rook')\n        return false;\n    delete state.pieces[orig];\n    delete state.pieces[oldRookPos];\n    state.pieces[newKingPos] = king;\n    state.pieces[newRookPos] = rook;\n    return true;\n}\nfunction baseMove(state, orig, dest) {\n    const origPiece = state.pieces[orig], destPiece = state.pieces[dest];\n    if (orig === dest || !origPiece)\n        return false;\n    const captured = (destPiece && destPiece.color !== origPiece.color) ? destPiece : undefined;\n    if (dest == state.selected)\n        unselect(state);\n    callUserFunction(state.events.move, orig, dest, captured);\n    if (!tryAutoCastle(state, orig, dest)) {\n        state.pieces[dest] = origPiece;\n        delete state.pieces[orig];\n    }\n    state.lastMove = [orig, dest];\n    state.check = undefined;\n    callUserFunction(state.events.change);\n    return captured || true;\n}\nexports.baseMove = baseMove;\nfunction baseNewPiece(state, piece, key, force) {\n    if (state.pieces[key]) {\n        if (force)\n            delete state.pieces[key];\n        else\n            return false;\n    }\n    callUserFunction(state.events.dropNewPiece, piece, key);\n    state.pieces[key] = piece;\n    state.lastMove = [key];\n    state.check = undefined;\n    callUserFunction(state.events.change);\n    state.movable.dests = undefined;\n    state.turnColor = util_1.opposite(state.turnColor);\n    return true;\n}\nexports.baseNewPiece = baseNewPiece;\nfunction baseUserMove(state, orig, dest) {\n    const result = baseMove(state, orig, dest);\n    if (result) {\n        state.movable.dests = undefined;\n        state.turnColor = util_1.opposite(state.turnColor);\n        state.animation.current = undefined;\n    }\n    return result;\n}\nfunction userMove(state, orig, dest) {\n    if (canMove(state, orig, dest)) {\n        const result = baseUserMove(state, orig, dest);\n        if (result) {\n            const holdTime = state.hold.stop();\n            unselect(state);\n            const metadata = {\n                premove: false,\n                ctrlKey: state.stats.ctrlKey,\n                holdTime\n            };\n            if (result !== true)\n                metadata.captured = result;\n            callUserFunction(state.movable.events.after, orig, dest, metadata);\n            return true;\n        }\n    }\n    else if (canPremove(state, orig, dest)) {\n        setPremove(state, orig, dest, {\n            ctrlKey: state.stats.ctrlKey\n        });\n        unselect(state);\n        return true;\n    }\n    unselect(state);\n    return false;\n}\nexports.userMove = userMove;\nfunction dropNewPiece(state, orig, dest, force) {\n    if (canDrop(state, orig, dest) || force) {\n        const piece = state.pieces[orig];\n        delete state.pieces[orig];\n        baseNewPiece(state, piece, dest, force);\n        callUserFunction(state.movable.events.afterNewPiece, piece.role, dest, {\n            predrop: false\n        });\n    }\n    else if (canPredrop(state, orig, dest)) {\n        setPredrop(state, state.pieces[orig].role, dest);\n    }\n    else {\n        unsetPremove(state);\n        unsetPredrop(state);\n    }\n    delete state.pieces[orig];\n    unselect(state);\n}\nexports.dropNewPiece = dropNewPiece;\nfunction selectSquare(state, key, force) {\n    callUserFunction(state.events.select, key);\n    if (state.selected) {\n        if (state.selected === key && !state.draggable.enabled) {\n            unselect(state);\n            state.hold.cancel();\n            return;\n        }\n        else if ((state.selectable.enabled || force) && state.selected !== key) {\n            if (userMove(state, state.selected, key)) {\n                state.stats.dragged = false;\n                return;\n            }\n        }\n    }\n    if (isMovable(state, key) || isPremovable(state, key)) {\n        setSelected(state, key);\n        state.hold.start();\n    }\n}\nexports.selectSquare = selectSquare;\nfunction setSelected(state, key) {\n    state.selected = key;\n    if (isPremovable(state, key)) {\n        state.premovable.dests = premove_1.default(state.pieces, key, state.premovable.castle);\n    }\n    else\n        state.premovable.dests = undefined;\n}\nexports.setSelected = setSelected;\nfunction unselect(state) {\n    state.selected = undefined;\n    state.premovable.dests = undefined;\n    state.hold.cancel();\n}\nexports.unselect = unselect;\nfunction isMovable(state, orig) {\n    const piece = state.pieces[orig];\n    return !!piece && (state.movable.color === 'both' || (state.movable.color === piece.color &&\n        state.turnColor === piece.color));\n}\nfunction canMove(state, orig, dest) {\n    return orig !== dest && isMovable(state, orig) && (state.movable.free || (!!state.movable.dests && util_1.containsX(state.movable.dests[orig], dest)));\n}\nexports.canMove = canMove;\nfunction canDrop(state, orig, dest) {\n    const piece = state.pieces[orig];\n    return !!piece && dest && (orig === dest || !state.pieces[dest]) && (state.movable.color === 'both' || (state.movable.color === piece.color &&\n        state.turnColor === piece.color));\n}\nfunction isPremovable(state, orig) {\n    const piece = state.pieces[orig];\n    return !!piece && state.premovable.enabled &&\n        state.movable.color === piece.color &&\n        state.turnColor !== piece.color;\n}\nfunction canPremove(state, orig, dest) {\n    return orig !== dest &&\n        isPremovable(state, orig) &&\n        util_1.containsX(premove_1.default(state.pieces, orig, state.premovable.castle), dest);\n}\nfunction canPredrop(state, orig, dest) {\n    const piece = state.pieces[orig];\n    const destPiece = state.pieces[dest];\n    return !!piece && dest &&\n        (!destPiece || destPiece.color !== state.movable.color) &&\n        state.predroppable.enabled &&\n        (piece.role !== 'pawn' || (dest[1] !== '1' && dest[1] !== '8')) &&\n        state.movable.color === piece.color &&\n        state.turnColor !== piece.color;\n}\nfunction isDraggable(state, orig) {\n    const piece = state.pieces[orig];\n    return !!piece && state.draggable.enabled && (state.movable.color === 'both' || (state.movable.color === piece.color && (state.turnColor === piece.color || state.premovable.enabled)));\n}\nexports.isDraggable = isDraggable;\nfunction playPremove(state) {\n    const move = state.premovable.current;\n    if (!move)\n        return false;\n    const orig = move[0], dest = move[1];\n    let success = false;\n    if (canMove(state, orig, dest)) {\n        const result = baseUserMove(state, orig, dest);\n        if (result) {\n            const metadata = { premove: true };\n            if (result !== true)\n                metadata.captured = result;\n            callUserFunction(state.movable.events.after, orig, dest, metadata);\n            success = true;\n        }\n    }\n    unsetPremove(state);\n    return success;\n}\nexports.playPremove = playPremove;\nfunction playPredrop(state, validate) {\n    let drop = state.predroppable.current, success = false;\n    if (!drop)\n        return false;\n    if (validate(drop)) {\n        const piece = {\n            role: drop.role,\n            color: state.movable.color\n        };\n        if (baseNewPiece(state, piece, drop.key)) {\n            callUserFunction(state.movable.events.afterNewPiece, drop.role, drop.key, {\n                predrop: true\n            });\n            success = true;\n        }\n    }\n    unsetPredrop(state);\n    return success;\n}\nexports.playPredrop = playPredrop;\nfunction cancelMove(state) {\n    unsetPremove(state);\n    unsetPredrop(state);\n    unselect(state);\n}\nexports.cancelMove = cancelMove;\nfunction stop(state) {\n    state.movable.color =\n        state.movable.dests =\n            state.animation.current = undefined;\n    cancelMove(state);\n}\nexports.stop = stop;\nfunction getKeyAtDomPos(pos, asWhite, bounds) {\n    let file = Math.ceil(8 * ((pos[0] - bounds.left) / bounds.width));\n    if (!asWhite)\n        file = 9 - file;\n    let rank = Math.ceil(8 - (8 * ((pos[1] - bounds.top) / bounds.height)));\n    if (!asWhite)\n        rank = 9 - rank;\n    return (file > 0 && file < 9 && rank > 0 && rank < 9) ? util_1.pos2key([file, rank]) : undefined;\n}\nexports.getKeyAtDomPos = getKeyAtDomPos;\nfunction whitePov(s) {\n    return s.orientation === 'white';\n}\nexports.whitePov = whitePov;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm9hcmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzcmMvYm9hcmQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxpQ0FBOEQ7QUFDOUQsdUNBQStCO0FBSy9CLFNBQWdCLGdCQUFnQixDQUFDLENBQXVCLEVBQUUsR0FBRyxJQUFXO0lBQ3RFLElBQUksQ0FBQztRQUFFLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN6QyxDQUFDO0FBRkQsNENBRUM7QUFFRCxTQUFnQixpQkFBaUIsQ0FBQyxLQUFZO0lBQzVDLEtBQUssQ0FBQyxXQUFXLEdBQUcsZUFBUSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUNoRCxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU87UUFDdkIsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPO1lBQ3ZCLEtBQUssQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDO0FBQzdCLENBQUM7QUFMRCw4Q0FLQztBQUVELFNBQWdCLEtBQUssQ0FBQyxLQUFZO0lBQ2hDLEtBQUssQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDO0lBQzNCLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNoQixZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDcEIsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3RCLENBQUM7QUFMRCxzQkFLQztBQUVELFNBQWdCLFNBQVMsQ0FBQyxLQUFZLEVBQUUsTUFBcUI7SUFDM0QsS0FBSyxJQUFJLEdBQUcsSUFBSSxNQUFNLEVBQUU7UUFDdEIsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzFCLElBQUksS0FBSztZQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDOztZQUNoQyxPQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7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QyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDeEUsSUFBSSxDQUFDLE9BQU87UUFBRSxJQUFJLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUM5QixPQUFPLENBQUMsSUFBSSxHQUFHLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxjQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO0FBQzVGLENBQUM7QUFORCx3Q0FNQztBQUVELFNBQWdCLFFBQVEsQ0FBQyxDQUFRO0lBQy9CLE9BQU8sQ0FBQyxDQUFDLFdBQVcsS0FBSyxPQUFPLENBQUM7QUFDbkMsQ0FBQztBQUZELDRCQUVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuL3N0YXRlJ1xuaW1wb3J0IHsgcG9zMmtleSwga2V5MnBvcywgb3Bwb3NpdGUsIGNvbnRhaW5zWCB9IGZyb20gJy4vdXRpbCdcbmltcG9ydCBwcmVtb3ZlIGZyb20gJy4vcHJlbW92ZSdcbmltcG9ydCAqIGFzIGNnIGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCB0eXBlIENhbGxiYWNrID0gKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkO1xuXG5leHBvcnQgZnVuY3Rpb24gY2FsbFVzZXJGdW5jdGlvbihmOiBDYWxsYmFjayB8IHVuZGVmaW5lZCwgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgaWYgKGYpIHNldFRpbWVvdXQoKCkgPT4gZiguLi5hcmdzKSwgMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVPcmllbnRhdGlvbihzdGF0ZTogU3RhdGUpOiB2b2lkIHtcbiAgc3RhdGUub3JpZW50YXRpb24gPSBvcHBvc2l0ZShzdGF0ZS5vcmllbnRhdGlvbik7XG4gIHN0YXRlLmFuaW1hdGlvbi5jdXJyZW50ID1cbiAgc3RhdGUuZHJhZ2dhYmxlLmN1cnJlbnQgPVxuICBzdGF0ZS5zZWxlY3RlZCA9IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0KHN0YXRlOiBTdGF0ZSk6IHZvaWQge1xuICBzdGF0ZS5sYXN0TW92ZSA9IHVuZGVmaW5lZDtcbiAgdW5zZWxlY3Qoc3RhdGUpO1xuICB1bnNldFByZW1vdmUoc3RhdGUpO1xuICB1bnNldFByZWRyb3Aoc3RhdGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0UGllY2VzKHN0YXRlOiBTdGF0ZSwgcGllY2VzOiBjZy5QaWVjZXNEaWZmKTogdm9pZCB7XG4gIGZvciAobGV0IGtleSBpbiBwaWVjZXMpIHtcbiAgICBjb25zdCBwaWVjZSA9IHBpZWNlc1trZXldO1xuICAgIGlmIChwaWVjZSkgc3RhdGUucGllY2VzW2tleV0gPSBwaWVjZTtcbiAgICBlbHNlIGRlbGV0ZSBzdGF0ZS5waWVjZXNba2V5XTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0Q2hlY2soc3RhdGU6IFN0YXRlLCBjb2xvcjogY2cuQ29sb3IgfCBib29sZWFuKTogdm9pZCB7XG4gIHN0YXRlLmNoZWNrID0gdW5kZWZpbmVkO1xuICBpZiAoY29sb3IgPT09IHRydWUpIGNvbG9yID0gc3RhdGUudHVybkNvbG9yO1xuICBpZiAoY29sb3IpIGZvciAobGV0IGsgaW4gc3RhdGUucGllY2VzKSB7XG4gICAgaWYgKHN0YXRlLnBpZWNlc1trXSEucm9sZSA9PT0gJ2tpbmcnICYmIHN0YXRlLnBpZWNlc1trXSEuY29sb3IgPT09IGNvbG9yKSB7XG4gICAgICBzdGF0ZS5jaGVjayA9IGsgYXMgY2cuS2V5O1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRQcmVtb3ZlKHN0YXRlOiBTdGF0ZSwgb3JpZzogY2cuS2V5LCBkZXN0OiBjZy5LZXksIG1ldGE6IGNnLlNldFByZW1vdmVNZXRhZGF0YSk6IHZvaWQge1xuICB1bnNldFByZWRyb3Aoc3RhdGUpO1xuICBzdGF0ZS5wcmVtb3ZhYmxlLmN1cnJlbnQgPSBbb3JpZywgZGVzdF07XG4gIGNhbGxVc2VyRnVuY3Rpb24oc3RhdGUucHJlbW92YWJsZS5ldmVudHMuc2V0LCBvcmlnLCBkZXN0LCBtZXRhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuc2V0UHJlbW92ZShzdGF0ZTogU3RhdGUpOiB2b2lkIHtcbiAgaWYgKHN0YXRlLnByZW1vdmFibGUuY3VycmVudCkge1xuICAgIHN0YXRlLnByZW1vdmFibGUuY3VycmVudCA9IHVuZGVmaW5lZDtcbiAgICBjYWxsVXNlckZ1bmN0aW9uKHN0YXRlLnByZW1vdmFibGUuZXZlbnRzLnVuc2V0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRQcmVkcm9wKHN0YXRlOiBTdGF0ZSwgcm9sZTogY2cuUm9sZSwga2V5OiBjZy5LZXkpOiB2b2lkIHtcbiAgdW5zZXRQcmVtb3ZlKHN0YXRlKTtcbiAgc3RhdGUucHJlZHJvcHBhYmxlLmN1cnJlbnQgPSB7IHJvbGUsIGtleSB9O1xuICBjYWxsVXNlckZ1bmN0aW9uKHN0YXRlLnByZWRyb3BwYWJsZS5ldmVudHMuc2V0LCByb2xlLCBrZXkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5zZXRQcmVkcm9wKHN0YXRlOiBTdGF0ZSk6IHZvaWQge1xuICBjb25zdCBwZCA9IHN0YXRlLnByZWRyb3BwYWJsZTtcbiAgaWYgKHBkLmN1cnJlbnQpIHtcbiAgICBwZC5jdXJyZW50ID0gdW5kZWZpbmVkO1xuICAgIGNhbGxVc2VyRnVuY3Rpb24ocGQuZXZlbnRzLnVuc2V0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlBdXRvQ2FzdGxlKHN0YXRlOiBTdGF0ZSwgb3JpZzogY2cuS2V5LCBkZXN0OiBjZy5LZXkpOiBib29sZWFuIHtcbiAgaWYgKCFzdGF0ZS5hdXRvQ2FzdGxlKSByZXR1cm4gZmFsc2U7XG4gIGNvbnN0IGtpbmcgPSBzdGF0ZS5waWVjZXNbb3JpZ107XG4gIGlmICgha2luZyB8fCBraW5nLnJvbGUgIT09ICdraW5nJykgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBvcmlnUG9zID0ga2V5MnBvcyhvcmlnKTtcbiAgaWYgKG9yaWdQb3NbMF0gIT09IDUpIHJldHVybiBmYWxzZTtcbiAgaWYgKG9yaWdQb3NbMV0gIT09IDEgJiYgb3JpZ1Bvc1sxXSAhPT0gOCkgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBkZXN0UG9zID0ga2V5MnBvcyhkZXN0KTtcbiAgbGV0IG9sZFJvb2tQb3MsIG5ld1Jvb2tQb3MsIG5ld0tpbmdQb3M7XG4gIGlmIChkZXN0UG9zWzBdID09PSA3IHx8IGRlc3RQb3NbMF0gPT09IDgpIHtcbiAgICBvbGRSb29rUG9zID0gcG9zMmtleShbOCwgb3JpZ1Bvc1sxXV0pO1xuICAgIG5ld1Jvb2tQb3MgPSBwb3Mya2V5KFs2LCBvcmlnUG9zWzFdXSk7XG4gICAgbmV3S2luZ1BvcyA9IHBvczJrZXkoWzcsIG9yaWdQb3NbMV1dKTtcbiAgfSBlbHNlIGlmIChkZXN0UG9zWzBdID09PSAzIHx8IGRlc3RQb3NbMF0gPT09IDEpIHtcbiAgICBvbGRSb29rUG9zID0gcG9zMmtleShbMSwgb3JpZ1Bvc1sxXV0pO1xuICAgIG5ld1Jvb2tQb3MgPSBwb3Mya2V5KFs0LCBvcmlnUG9zWzFdXSk7XG4gICAgbmV3S2luZ1BvcyA9IHBvczJrZXkoWzMsIG9yaWdQb3NbMV1dKTtcbiAgfSBlbHNlIHJldHVybiBmYWxzZTtcblxuICBjb25zdCByb29rID0gc3RhdGUucGllY2VzW29sZFJvb2tQb3NdO1xuICBpZiAoIXJvb2sgfHwgcm9vay5yb2xlICE9PSAncm9vaycpIHJldHVybiBmYWxzZTtcblxuICBkZWxldGUgc3RhdGUucGllY2VzW29yaWddO1xuICBkZWxldGUgc3RhdGUucGllY2VzW29sZFJvb2tQb3NdO1xuXG4gIHN0YXRlLnBpZWNlc1tuZXdLaW5nUG9zXSA9IGtpbmdcbiAgc3RhdGUucGllY2VzW25ld1Jvb2tQb3NdID0gcm9vaztcbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiYXNlTW92ZShzdGF0ZTogU3RhdGUsIG9yaWc6IGNnLktleSwgZGVzdDogY2cuS2V5KTogY2cuUGllY2UgfCBib29sZWFuIHtcbiAgY29uc3Qgb3JpZ1BpZWNlID0gc3RhdGUucGllY2VzW29yaWddLCBkZXN0UGllY2UgPSBzdGF0ZS5waWVjZXNbZGVzdF07XG4gIGlmIChvcmlnID09PSBkZXN0IHx8ICFvcmlnUGllY2UpIHJldHVybiBmYWxzZTtcbiAgY29uc3QgY2FwdHVyZWQgPSAoZGVzdFBpZWNlICYmIGRlc3RQaWVjZS5jb2xvciAhPT0gb3JpZ1BpZWNlLmNvbG9yKSA/IGRlc3RQaWVjZSA6IHVuZGVmaW5lZDtcbiAgaWYgKGRlc3QgPT0gc3RhdGUuc2VsZWN0ZWQpIHVuc2VsZWN0KHN0YXRlKTtcbiAgY2FsbFVzZXJGdW5jdGlvbihzdGF0ZS5ldmVudHMubW92ZSwgb3JpZywgZGVzdCwgY2FwdHVyZWQpO1xuICBpZiAoIXRyeUF1dG9DYXN0bGUoc3RhdGUsIG9yaWcsIGRlc3QpKSB7XG4gICAgc3RhdGUucGllY2VzW2Rlc3RdID0gb3JpZ1BpZWNlO1xuICAgIGRlbGV0ZSBzdGF0ZS5waWVjZXNbb3JpZ107XG4gIH1cbiAgc3RhdGUubGFzdE1vdmUgPSBbb3JpZywgZGVzdF07XG4gIHN0YXRlLmNoZWNrID0gdW5kZWZpbmVkO1xuICBjYWxsVXNlckZ1bmN0aW9uKHN0YXRlLmV2ZW50cy5jaGFuZ2UpO1xuICByZXR1cm4gY2FwdHVyZWQgfHwgdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJhc2VOZXdQaWVjZShzdGF0ZTogU3RhdGUsIHBpZWNlOiBjZy5QaWVjZSwga2V5OiBjZy5LZXksIGZvcmNlPzogYm9vbGVhbik6IGJvb2xlYW4ge1xuICBpZiAoc3RhdGUucGllY2VzW2tleV0pIHtcbiAgICBpZiAoZm9yY2UpIGRlbGV0ZSBzdGF0ZS5waWVjZXNba2V5XTtcbiAgICBlbHNlIHJldHVybiBmYWxzZTtcbiAgfVxuICBjYWxsVXNlckZ1bmN0aW9uKHN0YXRlLmV2ZW50cy5kcm9wTmV3UGllY2UsIHBpZWNlLCBrZXkpO1xuICBzdGF0ZS5waWVjZXNba2V5XSA9IHBpZWNlO1xuICBzdGF0ZS5sYXN0TW92ZSA9IFtrZXldO1xuICBzdGF0ZS5jaGVjayA9IHVuZGVmaW5lZDtcbiAgY2FsbFVzZXJGdW5jdGlvbihzdGF0ZS5ldmVudHMuY2hhbmdlKTtcbiAgc3RhdGUubW92YWJsZS5kZXN0cyA9IHVuZGVmaW5lZDtcbiAgc3RhdGUudHVybkNvbG9yID0gb3Bwb3NpdGUoc3RhdGUudHVybkNvbG9yKTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGJhc2VVc2VyTW92ZShzdGF0ZTogU3RhdGUsIG9yaWc6IGNnLktleSwgZGVzdDogY2cuS2V5KTogY2cuUGllY2UgfCBib29sZWFuIHtcbiAgY29uc3QgcmVzdWx0ID0gYmFzZU1vdmUoc3RhdGUsIG9yaWcsIGRlc3QpO1xuICBpZiAocmVzdWx0KSB7XG4gICAgc3RhdGUubW92YWJsZS5kZXN0cyA9IHVuZGVmaW5lZDtcbiAgICBzdGF0ZS50dXJuQ29sb3IgPSBvcHBvc2l0ZShzdGF0ZS50dXJuQ29sb3IpO1xuICAgIHN0YXRlLmFuaW1hdGlvbi5jdXJyZW50ID0gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VyTW92ZShzdGF0ZTogU3RhdGUsIG9yaWc6IGNnLktleSwgZGVzdDogY2cuS2V5KTogYm9vbGVhbiB7XG4gIGlmIChjYW5Nb3ZlKHN0YXRlLCBvcmlnLCBkZXN0KSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGJhc2VVc2VyTW92ZShzdGF0ZSwgb3JpZywgZGVzdCk7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgY29uc3QgaG9sZFRpbWUgPSBzdGF0ZS5ob2xkLnN0b3AoKTtcbiAgICAgIHVuc2VsZWN0KHN0YXRlKTtcbiAgICAgIGNvbnN0IG1ldGFkYXRhOiBjZy5Nb3ZlTWV0YWRhdGEgPSB7XG4gICAgICAgIHByZW1vdmU6IGZhbHNlLFxuICAgICAgICBjdHJsS2V5OiBzdGF0ZS5zdGF0cy5jdHJsS2V5LFxuICAgICAgICBob2xkVGltZVxuICAgICAgfTtcbiAgICAgIGlmIChyZXN1bHQgIT09IHRydWUpIG1ldGFkYXRhLmNhcHR1cmVkID0gcmVzdWx0O1xuICAgICAgY2FsbFVzZXJGdW5jdGlvbihzdGF0ZS5tb3ZhYmxlLmV2ZW50cy5hZnRlciwgb3JpZywgZGVzdCwgbWV0YWRhdGEpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9IGVsc2UgaWYgKGNhblByZW1vdmUoc3RhdGUsIG9yaWcsIGRlc3QpKSB7XG4gICAgc2V0UHJlbW92ZShzdGF0ZSwgb3JpZywgZGVzdCwge1xuICAgICAgY3RybEtleTogc3RhdGUuc3RhdHMuY3RybEtleVxuICAgIH0pO1xuICAgIHVuc2VsZWN0KHN0YXRlKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB1bnNlbGVjdChzdGF0ZSk7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyb3BOZXdQaWVjZShzdGF0ZTogU3RhdGUsIG9yaWc6IGNnLktleSwgZGVzdDogY2cuS2V5LCBmb3JjZT86IGJvb2xlYW4pOiB2b2lkIHtcbiAgaWYgKGNhbkRyb3Aoc3RhdGUsIG9yaWcsIGRlc3QpIHx8IGZvcmNlKSB7XG4gICAgY29uc3QgcGllY2UgPSBzdGF0ZS5waWVjZXNbb3JpZ10hO1xuICAgIGRlbGV0ZSBzdGF0ZS5waWVjZXNbb3JpZ107XG4gICAgYmFzZU5ld1BpZWNlKHN0YXRlLCBwaWVjZSwgZGVzdCwgZm9yY2UpO1xuICAgIGNhbGxVc2VyRnVuY3Rpb24oc3RhdGUubW92YWJsZS5ldmVudHMuYWZ0ZXJOZXdQaWVjZSwgcGllY2Uucm9sZSwgZGVzdCwge1xuICAgICAgcHJlZHJvcDogZmFsc2VcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChjYW5QcmVkcm9wKHN0YXRlLCBvcmlnLCBkZXN0KSkge1xuICAgIHNldFByZWRyb3Aoc3RhdGUsIHN0YXRlLnBpZWNlc1tvcmlnXSEucm9sZSwgZGVzdCk7XG4gIH0gZWxzZSB7XG4gICAgdW5zZXRQcmVtb3ZlKHN0YXRlKTtcbiAgICB1bnNldFByZWRyb3Aoc3RhdGUpO1xuICB9XG4gIGRlbGV0ZSBzdGF0ZS5waWVjZXNbb3JpZ107XG4gIHVuc2VsZWN0KHN0YXRlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdFNxdWFyZShzdGF0ZTogU3RhdGUsIGtleTogY2cuS2V5LCBmb3JjZT86IGJvb2xlYW4pOiB2b2lkIHtcbiAgY2FsbFVzZXJGdW5jdGlvbihzdGF0ZS5ldmVudHMuc2VsZWN0LCBrZXkpO1xuICBpZiAoc3RhdGUuc2VsZWN0ZWQpIHtcbiAgICBpZiAoc3RhdGUuc2VsZWN0ZWQgPT09IGtleSAmJiAhc3RhdGUuZHJhZ2dhYmxlLmVuYWJsZWQpIHtcbiAgICAgIHVuc2VsZWN0KHN0YXRlKTtcbiAgICAgIHN0YXRlLmhvbGQuY2FuY2VsKCk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmICgoc3RhdGUuc2VsZWN0YWJsZS5lbmFibGVkIHx8IGZvcmNlKSAmJiBzdGF0ZS5zZWxlY3RlZCAhPT0ga2V5KSB7XG4gICAgICBpZiAodXNlck1vdmUoc3RhdGUsIHN0YXRlLnNlbGVjdGVkLCBrZXkpKSB7XG4gICAgICAgIHN0YXRlLnN0YXRzLmRyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoaXNNb3ZhYmxlKHN0YXRlLCBrZXkpIHx8IGlzUHJlbW92YWJsZShzdGF0ZSwga2V5KSkge1xuICAgIHNldFNlbGVjdGVkKHN0YXRlLCBrZXkpO1xuICAgIHN0YXRlLmhvbGQuc3RhcnQoKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0U2VsZWN0ZWQoc3RhdGU6IFN0YXRlLCBrZXk6IGNnLktleSk6IHZvaWQge1xuICBzdGF0ZS5zZWxlY3RlZCA9IGtleTtcbiAgaWYgKGlzUHJlbW92YWJsZShzdGF0ZSwga2V5KSkge1xuICAgIHN0YXRlLnByZW1vdmFibGUuZGVzdHMgPSBwcmVtb3ZlKHN0YXRlLnBpZWNlcywga2V5LCBzdGF0ZS5wcmVtb3ZhYmxlLmNhc3RsZSk7XG4gIH1cbiAgZWxzZSBzdGF0ZS5wcmVtb3ZhYmxlLmRlc3RzID0gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5zZWxlY3Qoc3RhdGU6IFN0YXRlKTogdm9pZCB7XG4gIHN0YXRlLnNlbGVjdGVkID0gdW5kZWZpbmVkO1xuICBzdGF0ZS5wcmVtb3ZhYmxlLmRlc3RzID0gdW5kZWZpbmVkO1xuICBzdGF0ZS5ob2xkLmNhbmNlbCgpO1xufVxuXG5mdW5jdGlvbiBpc01vdmFibGUoc3RhdGU6IFN0YXRlLCBvcmlnOiBjZy5LZXkpOiBib29sZWFuIHtcbiAgY29uc3QgcGllY2UgPSBzdGF0ZS5waWVjZXNbb3JpZ107XG4gIHJldHVybiAhIXBpZWNlICYmIChcbiAgICBzdGF0ZS5tb3ZhYmxlLmNvbG9yID09PSAnYm90aCcgfHwgKFxuICAgICAgc3RhdGUubW92YWJsZS5jb2xvciA9PT0gcGllY2UuY29sb3IgJiZcbiAgICAgICAgc3RhdGUudHVybkNvbG9yID09PSBwaWVjZS5jb2xvclxuICAgICkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuTW92ZShzdGF0ZTogU3RhdGUsIG9yaWc6IGNnLktleSwgZGVzdDogY2cuS2V5KTogYm9vbGVhbiB7XG4gIHJldHVybiBvcmlnICE9PSBkZXN0ICYmIGlzTW92YWJsZShzdGF0ZSwgb3JpZykgJiYgKFxuICAgIHN0YXRlLm1vdmFibGUuZnJlZSB8fCAoISFzdGF0ZS5tb3ZhYmxlLmRlc3RzICYmIGNvbnRhaW5zWChzdGF0ZS5tb3ZhYmxlLmRlc3RzW29yaWddLCBkZXN0KSlcbiAgKTtcbn1cblxuZnVuY3Rpb24gY2FuRHJvcChzdGF0ZTogU3RhdGUsIG9yaWc6IGNnLktleSwgZGVzdDogY2cuS2V5KTogYm9vbGVhbiB7XG4gIGNvbnN0IHBpZWNlID0gc3RhdGUucGllY2VzW29yaWddO1xuICByZXR1cm4gISFwaWVjZSAmJiBkZXN0ICYmIChvcmlnID09PSBkZXN0IHx8ICFzdGF0ZS5waWVjZXNbZGVzdF0pICYmIChcbiAgICBzdGF0ZS5tb3ZhYmxlLmNvbG9yID09PSAnYm90aCcgfHwgKFxuICAgICAgc3RhdGUubW92YWJsZS5jb2xvciA9PT0gcGllY2UuY29sb3IgJiZcbiAgICAgICAgc3RhdGUudHVybkNvbG9yID09PSBwaWVjZS5jb2xvclxuICAgICkpO1xufVxuXG5cbmZ1bmN0aW9uIGlzUHJlbW92YWJsZShzdGF0ZTogU3RhdGUsIG9yaWc6IGNnLktleSk6IGJvb2xlYW4ge1xuICBjb25zdCBwaWVjZSA9IHN0YXRlLnBpZWNlc1tvcmlnXTtcbiAgcmV0dXJuICEhcGllY2UgJiYgc3RhdGUucHJlbW92YWJsZS5lbmFibGVkICYmXG4gIHN0YXRlLm1vdmFibGUuY29sb3IgPT09IHBpZWNlLmNvbG9yICYmXG4gICAgc3RhdGUudHVybkNvbG9yICE9PSBwaWVjZS5jb2xvcjtcbn1cblxuZnVuY3Rpb24gY2FuUHJlbW92ZShzdGF0ZTogU3RhdGUsIG9yaWc6IGNnLktleSwgZGVzdDogY2cuS2V5KTogYm9vbGVhbiB7XG4gIHJldHVybiBvcmlnICE9PSBkZXN0ICYmXG4gIGlzUHJlbW92YWJsZShzdGF0ZSwgb3JpZykgJiZcbiAgY29udGFpbnNYKHByZW1vdmUoc3RhdGUucGllY2VzLCBvcmlnLCBzdGF0ZS5wcmVtb3ZhYmxlLmNhc3RsZSksIGRlc3QpO1xufVxuXG5mdW5jdGlvbiBjYW5QcmVkcm9wKHN0YXRlOiBTdGF0ZSwgb3JpZzogY2cuS2V5LCBkZXN0OiBjZy5LZXkpOiBib29sZWFuIHtcbiAgY29uc3QgcGllY2UgPSBzdGF0ZS5waWVjZXNbb3JpZ107XG4gIGNvbnN0IGRlc3RQaWVjZSA9IHN0YXRlLnBpZWNlc1tkZXN0XTtcbiAgcmV0dXJuICEhcGllY2UgJiYgZGVzdCAmJlxuICAoIWRlc3RQaWVjZSB8fCBkZXN0UGllY2UuY29sb3IgIT09IHN0YXRlLm1vdmFibGUuY29sb3IpICYmXG4gIHN0YXRlLnByZWRyb3BwYWJsZS5lbmFibGVkICYmXG4gIChwaWVjZS5yb2xlICE9PSAncGF3bicgfHwgKGRlc3RbMV0gIT09ICcxJyAmJiBkZXN0WzFdICE9PSAnOCcpKSAmJlxuICBzdGF0ZS5tb3ZhYmxlLmNvbG9yID09PSBwaWVjZS5jb2xvciAmJlxuICAgIHN0YXRlLnR1cm5Db2xvciAhPT0gcGllY2UuY29sb3I7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0RyYWdnYWJsZShzdGF0ZTogU3RhdGUsIG9yaWc6IGNnLktleSk6IGJvb2xlYW4ge1xuICBjb25zdCBwaWVjZSA9IHN0YXRlLnBpZWNlc1tvcmlnXTtcbiAgcmV0dXJuICEhcGllY2UgJiYgc3RhdGUuZHJhZ2dhYmxlLmVuYWJsZWQgJiYgKFxuICAgIHN0YXRlLm1vdmFibGUuY29sb3IgPT09ICdib3RoJyB8fCAoXG4gICAgICBzdGF0ZS5tb3ZhYmxlLmNvbG9yID09PSBwaWVjZS5jb2xvciAmJiAoXG4gICAgICAgIHN0YXRlLnR1cm5Db2xvciA9PT0gcGllY2UuY29sb3IgfHwgc3RhdGUucHJlbW92YWJsZS5lbmFibGVkXG4gICAgICApXG4gICAgKVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGxheVByZW1vdmUoc3RhdGU6IFN0YXRlKTogYm9vbGVhbiB7XG4gIGNvbnN0IG1vdmUgPSBzdGF0ZS5wcmVtb3ZhYmxlLmN1cnJlbnQ7XG4gIGlmICghbW92ZSkgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBvcmlnID0gbW92ZVswXSwgZGVzdCA9IG1vdmVbMV07XG4gIGxldCBzdWNjZXNzID0gZmFsc2U7XG4gIGlmIChjYW5Nb3ZlKHN0YXRlLCBvcmlnLCBkZXN0KSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGJhc2VVc2VyTW92ZShzdGF0ZSwgb3JpZywgZGVzdCk7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgY29uc3QgbWV0YWRhdGE6IGNnLk1vdmVNZXRhZGF0YSA9IHsgcHJlbW92ZTogdHJ1ZSB9O1xuICAgICAgaWYgKHJlc3VsdCAhPT0gdHJ1ZSkgbWV0YWRhdGEuY2FwdHVyZWQgPSByZXN1bHQ7XG4gICAgICBjYWxsVXNlckZ1bmN0aW9uKHN0YXRlLm1vdmFibGUuZXZlbnRzLmFmdGVyLCBvcmlnLCBkZXN0LCBtZXRhZGF0YSk7XG4gICAgICBzdWNjZXNzID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgdW5zZXRQcmVtb3ZlKHN0YXRlKTtcbiAgcmV0dXJuIHN1Y2Nlc3M7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwbGF5UHJlZHJvcChzdGF0ZTogU3RhdGUsIHZhbGlkYXRlOiAoZHJvcDogY2cuRHJvcCkgPT4gYm9vbGVhbik6IGJvb2xlYW4ge1xuICBsZXQgZHJvcCA9IHN0YXRlLnByZWRyb3BwYWJsZS5jdXJyZW50LFxuICBzdWNjZXNzID0gZmFsc2U7XG4gIGlmICghZHJvcCkgcmV0dXJuIGZhbHNlO1xuICBpZiAodmFsaWRhdGUoZHJvcCkpIHtcbiAgICBjb25zdCBwaWVjZSA9IHtcbiAgICAgIHJvbGU6IGRyb3Aucm9sZSxcbiAgICAgIGNvbG9yOiBzdGF0ZS5tb3ZhYmxlLmNvbG9yXG4gICAgfSBhcyBjZy5QaWVjZTtcbiAgICBpZiAoYmFzZU5ld1BpZWNlKHN0YXRlLCBwaWVjZSwgZHJvcC5rZXkpKSB7XG4gICAgICBjYWxsVXNlckZ1bmN0aW9uKHN0YXRlLm1vdmFibGUuZXZlbnRzLmFmdGVyTmV3UGllY2UsIGRyb3Aucm9sZSwgZHJvcC5rZXksIHtcbiAgICAgICAgcHJlZHJvcDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBzdWNjZXNzID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgdW5zZXRQcmVkcm9wKHN0YXRlKTtcbiAgcmV0dXJuIHN1Y2Nlc3M7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYW5jZWxNb3ZlKHN0YXRlOiBTdGF0ZSk6IHZvaWQge1xuICB1bnNldFByZW1vdmUoc3RhdGUpO1xuICB1bnNldFByZWRyb3Aoc3RhdGUpO1xuICB1bnNlbGVjdChzdGF0ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9wKHN0YXRlOiBTdGF0ZSk6IHZvaWQge1xuICBzdGF0ZS5tb3ZhYmxlLmNvbG9yID1cbiAgc3RhdGUubW92YWJsZS5kZXN0cyA9XG4gIHN0YXRlLmFuaW1hdGlvbi5jdXJyZW50ID0gdW5kZWZpbmVkO1xuICBjYW5jZWxNb3ZlKHN0YXRlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEtleUF0RG9tUG9zKHBvczogY2cuTnVtYmVyUGFpciwgYXNXaGl0ZTogYm9vbGVhbiwgYm91bmRzOiBDbGllbnRSZWN0KTogY2cuS2V5IHwgdW5kZWZpbmVkIHtcbiAgbGV0IGZpbGUgPSBNYXRoLmNlaWwoOCAqICgocG9zWzBdIC0gYm91bmRzLmxlZnQpIC8gYm91bmRzLndpZHRoKSk7XG4gIGlmICghYXNXaGl0ZSkgZmlsZSA9IDkgLSBmaWxlO1xuICBsZXQgcmFuayA9IE1hdGguY2VpbCg4IC0gKDggKiAoKHBvc1sxXSAtIGJvdW5kcy50b3ApIC8gYm91bmRzLmhlaWdodCkpKTtcbiAgaWYgKCFhc1doaXRlKSByYW5rID0gOSAtIHJhbms7XG4gIHJldHVybiAoZmlsZSA+IDAgJiYgZmlsZSA8IDkgJiYgcmFuayA+IDAgJiYgcmFuayA8IDkpID8gcG9zMmtleShbZmlsZSwgcmFua10pIDogdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2hpdGVQb3YoczogU3RhdGUpOiBib29sZWFuIHtcbiAgcmV0dXJuIHMub3JpZW50YXRpb24gPT09ICd3aGl0ZSc7XG59XG4iXX0=","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.files = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];\nexports.ranks = [1, 2, 3, 4, 5, 6, 7, 8];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzcmMvdHlwZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUE0RmEsUUFBQSxLQUFLLEdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDekQsUUFBQSxLQUFLLEdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdHlwZSBDb2xvciA9ICd3aGl0ZScgfCAnYmxhY2snO1xuZXhwb3J0IHR5cGUgUm9sZSA9ICdraW5nJyB8ICdxdWVlbicgfCAncm9vaycgfCAnYmlzaG9wJyB8ICdrbmlnaHQnIHwgJ3Bhd24nO1xuZXhwb3J0IHR5cGUgS2V5ID0gJ2EwJyB8ICdhMScgfCAnYjEnIHwgJ2MxJyB8ICdkMScgfCAnZTEnIHwgJ2YxJyB8ICdnMScgfCAnaDEnIHwgJ2EyJyB8ICdiMicgfCAnYzInIHwgJ2QyJyB8ICdlMicgfCAnZjInIHwgJ2cyJyB8ICdoMicgfCAnYTMnIHwgJ2IzJyB8ICdjMycgfCAnZDMnIHwgJ2UzJyB8ICdmMycgfCAnZzMnIHwgJ2gzJyB8ICdhNCcgfCAnYjQnIHwgJ2M0JyB8ICdkNCcgfCAnZTQnIHwgJ2Y0JyB8ICdnNCcgfCAnaDQnIHwgJ2E1JyB8ICdiNScgfCAnYzUnIHwgJ2Q1JyB8ICdlNScgfCAnZjUnIHwgJ2c1JyB8ICdoNScgfCAnYTYnIHwgJ2I2JyB8ICdjNicgfCAnZDYnIHwgJ2U2JyB8ICdmNicgfCAnZzYnIHwgJ2g2JyB8ICdhNycgfCAnYjcnIHwgJ2M3JyB8ICdkNycgfCAnZTcnIHwgJ2Y3JyB8ICdnNycgfCAnaDcnIHwgJ2E4JyB8ICdiOCcgfCAnYzgnIHwgJ2Q4JyB8ICdlOCcgfCAnZjgnIHwgJ2c4JyB8ICdoOCc7XG5leHBvcnQgdHlwZSBGaWxlID0gJ2EnIHwgJ2InIHwgJ2MnIHwgJ2QnIHwgJ2UnIHwgJ2YnIHwgJ2cnIHwgJ2gnO1xuZXhwb3J0IHR5cGUgUmFuayA9IDEgfCAyIHwgMyB8IDQgfCA1IHwgNiB8IDcgfCA4O1xuZXhwb3J0IHR5cGUgRkVOID0gc3RyaW5nO1xuZXhwb3J0IHR5cGUgUG9zID0gW251bWJlciwgbnVtYmVyXTtcbmV4cG9ydCBpbnRlcmZhY2UgUGllY2Uge1xuICByb2xlOiBSb2xlO1xuICBjb2xvcjogQ29sb3I7XG4gIHByb21vdGVkPzogYm9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgRHJvcCB7XG4gIHJvbGU6IFJvbGU7XG4gIGtleTogS2V5O1xufVxuZXhwb3J0IGludGVyZmFjZSBQaWVjZXMge1xuICBba2V5OiBzdHJpbmddOiBQaWVjZSB8IHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUGllY2VzRGlmZiB7XG4gIFtrZXk6IHN0cmluZ106IFBpZWNlIHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgdHlwZSBLZXlQYWlyID0gW0tleSwgS2V5XTtcblxuZXhwb3J0IHR5cGUgTnVtYmVyUGFpciA9IFtudW1iZXIsIG51bWJlcl07XG5cbmV4cG9ydCB0eXBlIE51bWJlclF1YWQgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcblxuZXhwb3J0IGludGVyZmFjZSBEZXN0cyB7XG4gIFtrZXk6IHN0cmluZ106IEtleVtdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWxlbWVudHMge1xuICBib2FyZDogSFRNTEVsZW1lbnQ7XG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIGdob3N0PzogSFRNTEVsZW1lbnQ7XG4gIHN2Zz86IFNWR0VsZW1lbnQ7XG59XG5leHBvcnQgaW50ZXJmYWNlIERvbSB7XG4gIGVsZW1lbnRzOiBFbGVtZW50cyxcbiAgYm91bmRzOiBNZW1vPENsaWVudFJlY3Q+O1xuICByZWRyYXc6ICgpID0+IHZvaWQ7XG4gIHJlZHJhd05vdzogKHNraXBTdmc/OiBib29sZWFuKSA9PiB2b2lkO1xuICB1bmJpbmQ/OiBVbmJpbmQ7XG4gIGRlc3Ryb3llZD86IGJvb2xlYW47XG4gIHJlbGF0aXZlPzogYm9vbGVhbjsgLy8gZG9uJ3QgY29tcHV0ZSBib3VuZHMsIHVzZSByZWxhdGl2ZSAlIHRvIHBsYWNlIHBpZWNlc1xufVxuZXhwb3J0IGludGVyZmFjZSBFeHBsb2Rpbmcge1xuICBzdGFnZTogbnVtYmVyO1xuICBrZXlzOiBLZXlbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb3ZlTWV0YWRhdGEge1xuICBwcmVtb3ZlOiBib29sZWFuO1xuICBjdHJsS2V5PzogYm9vbGVhbjtcbiAgaG9sZFRpbWU/OiBudW1iZXI7XG4gIGNhcHR1cmVkPzogUGllY2U7XG4gIHByZWRyb3A/OiBib29sZWFuO1xufVxuZXhwb3J0IGludGVyZmFjZSBTZXRQcmVtb3ZlTWV0YWRhdGEge1xuICBjdHJsS2V5PzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IHR5cGUgV2luZG93RXZlbnQgPSAnb25zY3JvbGwnIHwgJ29ucmVzaXplJztcblxuZXhwb3J0IHR5cGUgTW91Y2hFdmVudCA9IE1vdXNlRXZlbnQgJiBUb3VjaEV2ZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIEtleWVkTm9kZSBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgY2dLZXk6IEtleTtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUGllY2VOb2RlIGV4dGVuZHMgS2V5ZWROb2RlIHtcbiAgY2dQaWVjZTogc3RyaW5nO1xuICBjZ0FuaW1hdGluZz86IGJvb2xlYW47XG4gIGNnRmFkaW5nPzogYm9vbGVhbjtcbiAgY2dEcmFnZ2luZz86IGJvb2xlYW47XG59XG5leHBvcnQgaW50ZXJmYWNlIFNxdWFyZU5vZGUgZXh0ZW5kcyBLZXllZE5vZGUgeyB9XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVtbzxBPiB7ICgpOiBBOyBjbGVhcjogKCkgPT4gdm9pZDsgfVxuXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVyIHtcbiAgc3RhcnQ6ICgpID0+IHZvaWQ7XG4gIGNhbmNlbDogKCkgPT4gdm9pZDtcbiAgc3RvcDogKCkgPT4gbnVtYmVyO1xufVxuXG5leHBvcnQgdHlwZSBSZWRyYXcgPSAoKSA9PiB2b2lkO1xuZXhwb3J0IHR5cGUgVW5iaW5kID0gKCkgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIE1pbGxpc2Vjb25kcyA9IG51bWJlcjtcbmV4cG9ydCB0eXBlIEtIeiA9IG51bWJlcjtcblxuZXhwb3J0IGNvbnN0IGZpbGVzOiBGaWxlW10gPSBbJ2EnLCAnYicsICdjJywgJ2QnLCAnZScsICdmJywgJ2cnLCAnaCddO1xuZXhwb3J0IGNvbnN0IHJhbmtzOiBSYW5rW10gPSBbMSwgMiwgMywgNCwgNSwgNiwgNywgOF07XG4iXX0=","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"./util\");\nconst cg = require(\"./types\");\nexports.initial = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR';\nconst roles = { p: 'pawn', r: 'rook', n: 'knight', b: 'bishop', q: 'queen', k: 'king' };\nconst letters = { pawn: 'p', rook: 'r', knight: 'n', bishop: 'b', queen: 'q', king: 'k' };\nfunction read(fen) {\n    if (fen === 'start')\n        fen = exports.initial;\n    const pieces = {};\n    let row = 8, col = 0;\n    for (const c of fen) {\n        switch (c) {\n            case ' ': return pieces;\n            case '/':\n                --row;\n                if (row === 0)\n                    return pieces;\n                col = 0;\n                break;\n            case '~':\n                const piece = pieces[util_1.pos2key([col, row])];\n                if (piece)\n                    piece.promoted = true;\n                break;\n            default:\n                const nb = c.charCodeAt(0);\n                if (nb < 57)\n                    col += nb - 48;\n                else {\n                    ++col;\n                    const role = c.toLowerCase();\n                    pieces[util_1.pos2key([col, row])] = {\n                        role: roles[role],\n                        color: (c === role ? 'black' : 'white')\n                    };\n                }\n        }\n    }\n    return pieces;\n}\nexports.read = read;\nfunction write(pieces) {\n    return util_1.invRanks.map(y => cg.ranks.map(x => {\n        const piece = pieces[util_1.pos2key([x, y])];\n        if (piece) {\n            const letter = letters[piece.role];\n            return piece.color === 'white' ? letter.toUpperCase() : letter;\n        }\n        else\n            return '1';\n    }).join('')).join('/').replace(/1{2,}/g, s => s.length.toString());\n}\nexports.write = write;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmVuLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL2Zlbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlDQUEwQztBQUMxQyw4QkFBNkI7QUFFaEIsUUFBQSxPQUFPLEdBQVcsNkNBQTZDLENBQUM7QUFFN0UsTUFBTSxLQUFLLEdBQWtDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQztBQUV2SCxNQUFNLE9BQU8sR0FBRyxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUM7QUFFMUYsU0FBZ0IsSUFBSSxDQUFDLEdBQVc7SUFDOUIsSUFBSSxHQUFHLEtBQUssT0FBTztRQUFFLEdBQUcsR0FBRyxlQUFPLENBQUM7SUFDbkMsTUFBTSxNQUFNLEdBQWMsRUFBRSxDQUFDO0lBQzdCLElBQUksR0FBRyxHQUFXLENBQUMsRUFBRSxHQUFHLEdBQVcsQ0FBQyxDQUFDO0lBQ3JDLEtBQUssTUFBTSxDQUFDLElBQUksR0FBRyxFQUFFO1FBQ25CLFFBQVEsQ0FBQyxFQUFFO1lBQ1QsS0FBSyxHQUFHLENBQUMsQ0FBQyxPQUFPLE1BQU0sQ0FBQztZQUN4QixLQUFLLEdBQUc7Z0JBQ04sRUFBRSxHQUFHLENBQUM7Z0JBQ04sSUFBSSxHQUFHLEtBQUssQ0FBQztvQkFBRSxPQUFPLE1BQU0sQ0FBQztnQkFDN0IsR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFDUixNQUFNO1lBQ1IsS0FBSyxHQUFHO2dCQUNOLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxjQUFPLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMxQyxJQUFJLEtBQUs7b0JBQUUsS0FBSyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7Z0JBQ2pDLE1BQU07WUFDUjtnQkFDRSxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMzQixJQUFJLEVBQUUsR0FBRyxFQUFFO29CQUFFLEdBQUcsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDO3FCQUN2QjtvQkFDSCxFQUFFLEdBQUcsQ0FBQztvQkFDTixNQUFNLElBQUksR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7b0JBQzdCLE1BQU0sQ0FBQyxjQUFPLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHO3dCQUM1QixJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQzt3QkFDakIsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQWE7cUJBQ3BELENBQUM7aUJBQ0g7U0FDSjtLQUNGO0lBQ0QsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQztBQTlCRCxvQkE4QkM7QUFFRCxTQUFnQixLQUFLLENBQUMsTUFBaUI7SUFDckMsT0FBTyxlQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDdEMsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLGNBQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEMsSUFBSSxLQUFLLEVBQUU7WUFDVCxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ25DLE9BQU8sS0FBSyxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO1NBQ2hFOztZQUFNLE9BQU8sR0FBRyxDQUFDO0lBQ3BCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FDWixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQzFELENBQUM7QUFURCxzQkFTQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBvczJrZXksIGludlJhbmtzIH0gZnJvbSAnLi91dGlsJ1xuaW1wb3J0ICogYXMgY2cgZnJvbSAnLi90eXBlcydcblxuZXhwb3J0IGNvbnN0IGluaXRpYWw6IGNnLkZFTiA9ICdybmJxa2Juci9wcHBwcHBwcC84LzgvOC84L1BQUFBQUFBQL1JOQlFLQk5SJztcblxuY29uc3Qgcm9sZXM6IHsgW2xldHRlcjogc3RyaW5nXTogY2cuUm9sZSB9ID0geyBwOiAncGF3bicsIHI6ICdyb29rJywgbjogJ2tuaWdodCcsIGI6ICdiaXNob3AnLCBxOiAncXVlZW4nLCBrOiAna2luZycgfTtcblxuY29uc3QgbGV0dGVycyA9IHsgcGF3bjogJ3AnLCByb29rOiAncicsIGtuaWdodDogJ24nLCBiaXNob3A6ICdiJywgcXVlZW46ICdxJywga2luZzogJ2snIH07XG5cbmV4cG9ydCBmdW5jdGlvbiByZWFkKGZlbjogY2cuRkVOKTogY2cuUGllY2VzIHtcbiAgaWYgKGZlbiA9PT0gJ3N0YXJ0JykgZmVuID0gaW5pdGlhbDtcbiAgY29uc3QgcGllY2VzOiBjZy5QaWVjZXMgPSB7fTtcbiAgbGV0IHJvdzogbnVtYmVyID0gOCwgY29sOiBudW1iZXIgPSAwO1xuICBmb3IgKGNvbnN0IGMgb2YgZmVuKSB7XG4gICAgc3dpdGNoIChjKSB7XG4gICAgICBjYXNlICcgJzogcmV0dXJuIHBpZWNlcztcbiAgICAgIGNhc2UgJy8nOlxuICAgICAgICAtLXJvdztcbiAgICAgICAgaWYgKHJvdyA9PT0gMCkgcmV0dXJuIHBpZWNlcztcbiAgICAgICAgY29sID0gMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd+JzpcbiAgICAgICAgY29uc3QgcGllY2UgPSBwaWVjZXNbcG9zMmtleShbY29sLCByb3ddKV07XG4gICAgICAgIGlmIChwaWVjZSkgcGllY2UucHJvbW90ZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnN0IG5iID0gYy5jaGFyQ29kZUF0KDApO1xuICAgICAgICBpZiAobmIgPCA1NykgY29sICs9IG5iIC0gNDg7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICsrY29sO1xuICAgICAgICAgIGNvbnN0IHJvbGUgPSBjLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgcGllY2VzW3BvczJrZXkoW2NvbCwgcm93XSldID0ge1xuICAgICAgICAgICAgcm9sZTogcm9sZXNbcm9sZV0sXG4gICAgICAgICAgICBjb2xvcjogKGMgPT09IHJvbGUgPyAnYmxhY2snIDogJ3doaXRlJykgYXMgY2cuQ29sb3JcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBwaWVjZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3cml0ZShwaWVjZXM6IGNnLlBpZWNlcyk6IGNnLkZFTiB7XG4gIHJldHVybiBpbnZSYW5rcy5tYXAoeSA9PiBjZy5yYW5rcy5tYXAoeCA9PiB7XG4gICAgICBjb25zdCBwaWVjZSA9IHBpZWNlc1twb3Mya2V5KFt4LCB5XSldO1xuICAgICAgaWYgKHBpZWNlKSB7XG4gICAgICAgIGNvbnN0IGxldHRlciA9IGxldHRlcnNbcGllY2Uucm9sZV07XG4gICAgICAgIHJldHVybiBwaWVjZS5jb2xvciA9PT0gJ3doaXRlJyA/IGxldHRlci50b1VwcGVyQ2FzZSgpIDogbGV0dGVyO1xuICAgICAgfSBlbHNlIHJldHVybiAnMSc7XG4gICAgfSkuam9pbignJylcbiAgKS5qb2luKCcvJykucmVwbGFjZSgvMXsyLH0vZywgcyA9PiBzLmxlbmd0aC50b1N0cmluZygpKTtcbn1cbiJdfQ==","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst board = require(\"./board\");\nconst util = require(\"./util\");\nconst draw_1 = require(\"./draw\");\nconst anim_1 = require(\"./anim\");\nfunction start(s, e) {\n    if (e.button !== undefined && e.button !== 0)\n        return;\n    if (e.touches && e.touches.length > 1)\n        return;\n    const bounds = s.dom.bounds(), position = util.eventPosition(e), orig = board.getKeyAtDomPos(position, board.whitePov(s), bounds);\n    if (!orig)\n        return;\n    const piece = s.pieces[orig];\n    const previouslySelected = s.selected;\n    if (!previouslySelected && s.drawable.enabled && (s.drawable.eraseOnClick || (!piece || piece.color !== s.turnColor)))\n        draw_1.clear(s);\n    if (e.cancelable !== false &&\n        (!e.touches || !s.movable.color || piece || previouslySelected || pieceCloseTo(s, position)))\n        e.preventDefault();\n    const hadPremove = !!s.premovable.current;\n    const hadPredrop = !!s.predroppable.current;\n    s.stats.ctrlKey = e.ctrlKey;\n    if (s.selected && board.canMove(s, s.selected, orig)) {\n        anim_1.anim(state => board.selectSquare(state, orig), s);\n    }\n    else {\n        board.selectSquare(s, orig);\n    }\n    const stillSelected = s.selected === orig;\n    const element = pieceElementByKey(s, orig);\n    if (piece && element && stillSelected && board.isDraggable(s, orig)) {\n        const squareBounds = computeSquareBounds(orig, board.whitePov(s), bounds);\n        s.draggable.current = {\n            orig,\n            origPos: util.key2pos(orig),\n            piece,\n            rel: position,\n            epos: position,\n            pos: [0, 0],\n            dec: s.draggable.centerPiece ? [\n                position[0] - (squareBounds.left + squareBounds.width / 2),\n                position[1] - (squareBounds.top + squareBounds.height / 2)\n            ] : [0, 0],\n            started: s.draggable.autoDistance && s.stats.dragged,\n            element,\n            previouslySelected,\n            originTarget: e.target\n        };\n        element.cgDragging = true;\n        element.classList.add('dragging');\n        const ghost = s.dom.elements.ghost;\n        if (ghost) {\n            ghost.className = `ghost ${piece.color} ${piece.role}`;\n            util.translateAbs(ghost, util.posToTranslateAbs(bounds)(util.key2pos(orig), board.whitePov(s)));\n            util.setVisible(ghost, true);\n        }\n        processDrag(s);\n    }\n    else {\n        if (hadPremove)\n            board.unsetPremove(s);\n        if (hadPredrop)\n            board.unsetPredrop(s);\n    }\n    s.dom.redraw();\n}\nexports.start = start;\nfunction pieceCloseTo(s, pos) {\n    const asWhite = board.whitePov(s), bounds = s.dom.bounds(), radiusSq = Math.pow(bounds.width / 8, 2);\n    for (let key in s.pieces) {\n        const squareBounds = computeSquareBounds(key, asWhite, bounds), center = [\n            squareBounds.left + squareBounds.width / 2,\n            squareBounds.top + squareBounds.height / 2\n        ];\n        if (util.distanceSq(center, pos) <= radiusSq)\n            return true;\n    }\n    return false;\n}\nexports.pieceCloseTo = pieceCloseTo;\nfunction dragNewPiece(s, piece, e, force) {\n    const key = 'a0';\n    s.pieces[key] = piece;\n    s.dom.redraw();\n    const position = util.eventPosition(e), asWhite = board.whitePov(s), bounds = s.dom.bounds(), squareBounds = computeSquareBounds(key, asWhite, bounds);\n    const rel = [\n        (asWhite ? 0 : 7) * squareBounds.width + bounds.left,\n        (asWhite ? 8 : -1) * squareBounds.height + bounds.top\n    ];\n    s.draggable.current = {\n        orig: key,\n        origPos: util.key2pos(key),\n        piece,\n        rel,\n        epos: position,\n        pos: [position[0] - rel[0], position[1] - rel[1]],\n        dec: [-squareBounds.width / 2, -squareBounds.height / 2],\n        started: true,\n        element: () => pieceElementByKey(s, key),\n        originTarget: e.target,\n        newPiece: true,\n        force: !!force\n    };\n    processDrag(s);\n}\nexports.dragNewPiece = dragNewPiece;\nfunction processDrag(s) {\n    requestAnimationFrame(() => {\n        const cur = s.draggable.current;\n        if (!cur)\n            return;\n        if (s.animation.current && s.animation.current.plan.anims[cur.orig])\n            s.animation.current = undefined;\n        const origPiece = s.pieces[cur.orig];\n        if (!origPiece || !util.samePiece(origPiece, cur.piece))\n            cancel(s);\n        else {\n            if (!cur.started && util.distanceSq(cur.epos, cur.rel) >= Math.pow(s.draggable.distance, 2))\n                cur.started = true;\n            if (cur.started) {\n                if (typeof cur.element === 'function') {\n                    const found = cur.element();\n                    if (!found)\n                        return;\n                    found.cgDragging = true;\n                    found.classList.add('dragging');\n                    cur.element = found;\n                }\n                cur.pos = [\n                    cur.epos[0] - cur.rel[0],\n                    cur.epos[1] - cur.rel[1]\n                ];\n                const translation = util.posToTranslateAbs(s.dom.bounds())(cur.origPos, board.whitePov(s));\n                translation[0] += cur.pos[0] + cur.dec[0];\n                translation[1] += cur.pos[1] + cur.dec[1];\n                util.translateAbs(cur.element, translation);\n            }\n        }\n        processDrag(s);\n    });\n}\nfunction move(s, e) {\n    if (s.draggable.current && (!e.touches || e.touches.length < 2)) {\n        s.draggable.current.epos = util.eventPosition(e);\n    }\n}\nexports.move = move;\nfunction end(s, e) {\n    const cur = s.draggable.current;\n    if (!cur)\n        return;\n    if (e.type === 'touchend' && e.cancelable !== false)\n        e.preventDefault();\n    if (e.type === 'touchend' && cur && cur.originTarget !== e.target && !cur.newPiece) {\n        s.draggable.current = undefined;\n        return;\n    }\n    board.unsetPremove(s);\n    board.unsetPredrop(s);\n    const eventPos = util.eventPosition(e) || cur.epos;\n    const dest = board.getKeyAtDomPos(eventPos, board.whitePov(s), s.dom.bounds());\n    if (dest && cur.started && cur.orig !== dest) {\n        if (cur.newPiece)\n            board.dropNewPiece(s, cur.orig, dest, cur.force);\n        else {\n            s.stats.ctrlKey = e.ctrlKey;\n            if (board.userMove(s, cur.orig, dest))\n                s.stats.dragged = true;\n        }\n    }\n    else if (cur.newPiece) {\n        delete s.pieces[cur.orig];\n    }\n    else if (s.draggable.deleteOnDropOff && !dest) {\n        delete s.pieces[cur.orig];\n        board.callUserFunction(s.events.change);\n    }\n    if (cur && cur.orig === cur.previouslySelected && (cur.orig === dest || !dest))\n        board.unselect(s);\n    else if (!s.selectable.enabled)\n        board.unselect(s);\n    removeDragElements(s);\n    s.draggable.current = undefined;\n    s.dom.redraw();\n}\nexports.end = end;\nfunction cancel(s) {\n    const cur = s.draggable.current;\n    if (cur) {\n        if (cur.newPiece)\n            delete s.pieces[cur.orig];\n        s.draggable.current = undefined;\n        board.unselect(s);\n        removeDragElements(s);\n        s.dom.redraw();\n    }\n}\nexports.cancel = cancel;\nfunction removeDragElements(s) {\n    const e = s.dom.elements;\n    if (e.ghost)\n        util.setVisible(e.ghost, false);\n}\nfunction computeSquareBounds(key, asWhite, bounds) {\n    const pos = util.key2pos(key);\n    if (!asWhite) {\n        pos[0] = 9 - pos[0];\n        pos[1] = 9 - pos[1];\n    }\n    return {\n        left: bounds.left + bounds.width * (pos[0] - 1) / 8,\n        top: bounds.top + bounds.height * (8 - pos[1]) / 8,\n        width: bounds.width / 8,\n        height: bounds.height / 8\n    };\n}\nfunction pieceElementByKey(s, key) {\n    let el = s.dom.elements.board.firstChild;\n    while (el) {\n        if (el.cgKey === key && el.tagName === 'PIECE')\n            return el;\n        el = el.nextSibling;\n    }\n    return undefined;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJhZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNyYy9kcmFnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsaUNBQWdDO0FBQ2hDLCtCQUE4QjtBQUM5QixpQ0FBMkM7QUFFM0MsaUNBQTZCO0FBa0I3QixTQUFnQixLQUFLLENBQUMsQ0FBUSxFQUFFLENBQWdCO0lBQzlDLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxTQUFTLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDO1FBQUUsT0FBTztJQUNyRCxJQUFJLENBQUMsQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQztRQUFFLE9BQU87SUFDOUMsTUFBTSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFDN0IsUUFBUSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFrQixFQUNqRCxJQUFJLEdBQUcsS0FBSyxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUNqRSxJQUFJLENBQUMsSUFBSTtRQUFFLE9BQU87SUFDbEIsTUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM3QixNQUFNLGtCQUFrQixHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUM7SUFDdEMsSUFBSSxDQUFDLGtCQUFrQixJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxJQUFJLENBQy9DLENBQUMsQ0FBQyxRQUFRLENBQUMsWUFBWSxJQUFJLENBQUMsQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQ25FO1FBQUUsWUFBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBS2hCLElBQUksQ0FBQyxDQUFDLFVBQVUsS0FBSyxLQUFLO1FBQ3RCLENBQUMs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cyBib2FyZCBmcm9tICcuL2JvYXJkJ1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuL3V0aWwnXG5pbXBvcnQgeyBjbGVhciBhcyBkcmF3Q2xlYXIgfSBmcm9tICcuL2RyYXcnXG5pbXBvcnQgKiBhcyBjZyBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgYW5pbSB9IGZyb20gJy4vYW5pbSdcblxuZXhwb3J0IGludGVyZmFjZSBEcmFnQ3VycmVudCB7XG4gIG9yaWc6IGNnLktleTsgLy8gb3JpZyBrZXkgb2YgZHJhZ2dpbmcgcGllY2VcbiAgb3JpZ1BvczogY2cuUG9zO1xuICBwaWVjZTogY2cuUGllY2U7XG4gIHJlbDogY2cuTnVtYmVyUGFpcjsgLy8geDsgeSBvZiB0aGUgcGllY2UgYXQgb3JpZ2luYWwgcG9zaXRpb25cbiAgZXBvczogY2cuTnVtYmVyUGFpcjsgLy8gaW5pdGlhbCBldmVudCBwb3NpdGlvblxuICBwb3M6IGNnLk51bWJlclBhaXI7IC8vIHJlbGF0aXZlIGN1cnJlbnQgcG9zaXRpb25cbiAgZGVjOiBjZy5OdW1iZXJQYWlyOyAvLyBwaWVjZSBjZW50ZXIgZGVjYXlcbiAgc3RhcnRlZDogYm9vbGVhbjsgLy8gd2hldGhlciB0aGUgZHJhZyBoYXMgc3RhcnRlZDsgYXMgcGVyIHRoZSBkaXN0YW5jZSBzZXR0aW5nXG4gIGVsZW1lbnQ6IGNnLlBpZWNlTm9kZSB8ICgoKSA9PiBjZy5QaWVjZU5vZGUgfCB1bmRlZmluZWQpO1xuICBuZXdQaWVjZT86IGJvb2xlYW47IC8vIGl0IGl0IGEgbmV3IHBpZWNlIGZyb20gb3V0c2lkZSB0aGUgYm9hcmRcbiAgZm9yY2U/OiBib29sZWFuOyAvLyBjYW4gdGhlIG5ldyBwaWVjZSByZXBsYWNlIGFuIGV4aXN0aW5nIG9uZSAoZWRpdG9yKVxuICBwcmV2aW91c2x5U2VsZWN0ZWQ/OiBjZy5LZXk7XG4gIG9yaWdpblRhcmdldDogRXZlbnRUYXJnZXQgfCBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnQoczogU3RhdGUsIGU6IGNnLk1vdWNoRXZlbnQpOiB2b2lkIHtcbiAgaWYgKGUuYnV0dG9uICE9PSB1bmRlZmluZWQgJiYgZS5idXR0b24gIT09IDApIHJldHVybjsgLy8gb25seSB0b3VjaCBvciBsZWZ0IGNsaWNrXG4gIGlmIChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA+IDEpIHJldHVybjsgLy8gc3VwcG9ydCBvbmUgZmluZ2VyIHRvdWNoIG9ubHlcbiAgY29uc3QgYm91bmRzID0gcy5kb20uYm91bmRzKCksXG4gIHBvc2l0aW9uID0gdXRpbC5ldmVudFBvc2l0aW9uKGUpIGFzIGNnLk51bWJlclBhaXIsXG4gIG9yaWcgPSBib2FyZC5nZXRLZXlBdERvbVBvcyhwb3NpdGlvbiwgYm9hcmQud2hpdGVQb3YocyksIGJvdW5kcyk7XG4gIGlmICghb3JpZykgcmV0dXJuO1xuICBjb25zdCBwaWVjZSA9IHMucGllY2VzW29yaWddO1xuICBjb25zdCBwcmV2aW91c2x5U2VsZWN0ZWQgPSBzLnNlbGVjdGVkO1xuICBpZiAoIXByZXZpb3VzbHlTZWxlY3RlZCAmJiBzLmRyYXdhYmxlLmVuYWJsZWQgJiYgKFxuICAgIHMuZHJhd2FibGUuZXJhc2VPbkNsaWNrIHx8ICghcGllY2UgfHwgcGllY2UuY29sb3IgIT09IHMudHVybkNvbG9yKVxuICApKSBkcmF3Q2xlYXIocyk7XG4gIC8vIFByZXZlbnQgdG91Y2ggc2Nyb2xsIGFuZCBjcmVhdGUgbm8gY29ycmVzcG9uZGluZyBtb3VzZSBldmVudCwgaWYgdGhlcmVcbiAgLy8gaXMgYW4gaW50ZW50IHRvIGludGVyYWN0IHdpdGggdGhlIGJvYXJkLiBJZiBubyBjb2xvciBpcyBtb3ZhYmxlXG4gIC8vIChhbmQgdGhlIGJvYXJkIGlzIG5vdCBmb3Igdmlld2luZyBvbmx5KSwgdG91Y2hlcyBhcmUgbGlrZWx5IGludGVuZGVkIHRvXG4gIC8vIHNlbGVjdCBzcXVhcmVzLlxuICBpZiAoZS5jYW5jZWxhYmxlICE9PSBmYWxzZSAmJlxuICAgICAgKCFlLnRvdWNoZXMgfHwgIXMubW92YWJsZS5jb2xvciB8fCBwaWVjZSB8fCBwcmV2aW91c2x5U2VsZWN0ZWQgfHwgcGllY2VDbG9zZVRvKHMsIHBvc2l0aW9uKSkpXG4gICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBoYWRQcmVtb3ZlID0gISFzLnByZW1vdmFibGUuY3VycmVudDtcbiAgY29uc3QgaGFkUHJlZHJvcCA9ICEhcy5wcmVkcm9wcGFibGUuY3VycmVudDtcbiAgcy5zdGF0cy5jdHJsS2V5ID0gZS5jdHJsS2V5O1xuICBpZiAocy5zZWxlY3RlZCAmJiBib2FyZC5jYW5Nb3ZlKHMsIHMuc2VsZWN0ZWQsIG9yaWcpKSB7XG4gICAgYW5pbShzdGF0ZSA9PiBib2FyZC5zZWxlY3RTcXVhcmUoc3RhdGUsIG9yaWcpLCBzKTtcbiAgfSBlbHNlIHtcbiAgICBib2FyZC5zZWxlY3RTcXVhcmUocywgb3JpZyk7XG4gIH1cbiAgY29uc3Qgc3RpbGxTZWxlY3RlZCA9IHMuc2VsZWN0ZWQgPT09IG9yaWc7XG4gIGNvbnN0IGVsZW1lbnQgPSBwaWVjZUVsZW1lbnRCeUtleShzLCBvcmlnKTtcbiAgaWYgKHBpZWNlICYmIGVsZW1lbnQgJiYgc3RpbGxTZWxlY3RlZCAmJiBib2FyZC5pc0RyYWdnYWJsZShzLCBvcmlnKSkge1xuICAgIGNvbnN0IHNxdWFyZUJvdW5kcyA9IGNvbXB1dGVTcXVhcmVCb3VuZHMob3JpZywgYm9hcmQud2hpdGVQb3YocyksIGJvdW5kcyk7XG4gICAgcy5kcmFnZ2FibGUuY3VycmVudCA9IHtcbiAgICAgIG9yaWcsXG4gICAgICBvcmlnUG9zOiB1dGlsLmtleTJwb3Mob3JpZyksXG4gICAgICBwaWVjZSxcbiAgICAgIHJlbDogcG9zaXRpb24sXG4gICAgICBlcG9zOiBwb3NpdGlvbixcbiAgICAgIHBvczogWzAsIDBdLFxuICAgICAgZGVjOiBzLmRyYWdnYWJsZS5jZW50ZXJQaWVjZSA/IFtcbiAgICAgICAgcG9zaXRpb25bMF0gLSAoc3F1YXJlQm91bmRzLmxlZnQgKyBzcXVhcmVCb3VuZHMud2lkdGggLyAyKSxcbiAgICAgICAgcG9zaXRpb25bMV0gLSAoc3F1YXJlQm91bmRzLnRvcCArIHNxdWFyZUJvdW5kcy5oZWlnaHQgLyAyKVxuICAgICAgXSA6IFswLCAwXSxcbiAgICAgIHN0YXJ0ZWQ6IHMuZHJhZ2dhYmxlLmF1dG9EaXN0YW5jZSAmJiBzLnN0YXRzLmRyYWdnZWQsXG4gICAgICBlbGVtZW50LFxuICAgICAgcHJldmlvdXNseVNlbGVjdGVkLFxuICAgICAgb3JpZ2luVGFyZ2V0OiBlLnRhcmdldFxuICAgIH07XG4gICAgZWxlbWVudC5jZ0RyYWdnaW5nID0gdHJ1ZTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyk7XG4gICAgLy8gcGxhY2UgZ2hvc3RcbiAgICBjb25zdCBnaG9zdCA9IHMuZG9tLmVsZW1lbnRzLmdob3N0O1xuICAgIGlmIChnaG9zdCkge1xuICAgICAgZ2hvc3QuY2xhc3NOYW1lID0gYGdob3N0ICR7cGllY2UuY29sb3J9ICR7cGllY2Uucm9sZX1gO1xuICAgICAgdXRpbC50cmFuc2xhdGVBYnMoZ2hvc3QsIHV0aWwucG9zVG9UcmFuc2xhdGVBYnMoYm91bmRzKSh1dGlsLmtleTJwb3Mob3JpZyksIGJvYXJkLndoaXRlUG92KHMpKSk7XG4gICAgICB1dGlsLnNldFZpc2libGUoZ2hvc3QsIHRydWUpO1xuICAgIH1cbiAgICBwcm9jZXNzRHJhZyhzKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoaGFkUHJlbW92ZSkgYm9hcmQudW5zZXRQcmVtb3ZlKHMpO1xuICAgIGlmIChoYWRQcmVkcm9wKSBib2FyZC51bnNldFByZWRyb3Aocyk7XG4gIH1cbiAgcy5kb20ucmVkcmF3KCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwaWVjZUNsb3NlVG8oczogU3RhdGUsIHBvczogY2cuTnVtYmVyUGFpcik6IGJvb2xlYW4ge1xuICBjb25zdCBhc1doaXRlID0gYm9hcmQud2hpdGVQb3YocyksXG4gIGJvdW5kcyA9IHMuZG9tLmJvdW5kcygpLFxuICByYWRpdXNTcSA9IE1hdGgucG93KGJvdW5kcy53aWR0aCAvIDgsIDIpO1xuICBmb3IgKGxldCBrZXkgaW4gcy5waWVjZXMpIHtcbiAgICBjb25zdCBzcXVhcmVCb3VuZHMgPSBjb21wdXRlU3F1YXJlQm91bmRzKGtleSBhcyBjZy5LZXksIGFzV2hpdGUsIGJvdW5kcyksXG4gICAgY2VudGVyOiBjZy5OdW1iZXJQYWlyID0gW1xuICAgICAgc3F1YXJlQm91bmRzLmxlZnQgKyBzcXVhcmVCb3VuZHMud2lkdGggLyAyLFxuICAgICAgc3F1YXJlQm91bmRzLnRvcCArIHNxdWFyZUJvdW5kcy5oZWlnaHQgLyAyXG4gICAgXTtcbiAgICBpZiAodXRpbC5kaXN0YW5jZVNxKGNlbnRlciwgcG9zKSA8PSByYWRpdXNTcSkgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZHJhZ05ld1BpZWNlKHM6IFN0YXRlLCBwaWVjZTogY2cuUGllY2UsIGU6IGNnLk1vdWNoRXZlbnQsIGZvcmNlPzogYm9vbGVhbik6IHZvaWQge1xuXG4gIGNvbnN0IGtleTogY2cuS2V5ID0gJ2EwJztcblxuICBzLnBpZWNlc1trZXldID0gcGllY2U7XG5cbiAgcy5kb20ucmVkcmF3KCk7XG5cbiAgY29uc3QgcG9zaXRpb24gPSB1dGlsLmV2ZW50UG9zaXRpb24oZSkgYXMgY2cuTnVtYmVyUGFpcixcbiAgYXNXaGl0ZSA9IGJvYXJkLndoaXRlUG92KHMpLFxuICBib3VuZHMgPSBzLmRvbS5ib3VuZHMoKSxcbiAgc3F1YXJlQm91bmRzID0gY29tcHV0ZVNxdWFyZUJvdW5kcyhrZXksIGFzV2hpdGUsIGJvdW5kcyk7XG5cbiAgY29uc3QgcmVsOiBjZy5OdW1iZXJQYWlyID0gW1xuICAgIChhc1doaXRlID8gMCA6IDcpICogc3F1YXJlQm91bmRzLndpZHRoICsgYm91bmRzLmxlZnQsXG4gICAgKGFzV2hpdGUgPyA4IDogLTEpICogc3F1YXJlQm91bmRzLmhlaWdodCArIGJvdW5kcy50b3BcbiAgXTtcblxuICBzLmRyYWdnYWJsZS5jdXJyZW50ID0ge1xuICAgIG9yaWc6IGtleSxcbiAgICBvcmlnUG9zOiB1dGlsLmtleTJwb3Moa2V5KSxcbiAgICBwaWVjZSxcbiAgICByZWwsXG4gICAgZXBvczogcG9zaXRpb24sXG4gICAgcG9zOiBbcG9zaXRpb25bMF0gLSByZWxbMF0sIHBvc2l0aW9uWzFdIC0gcmVsWzFdXSxcbiAgICBkZWM6IFstc3F1YXJlQm91bmRzLndpZHRoIC8gMiwgLXNxdWFyZUJvdW5kcy5oZWlnaHQgLyAyXSxcbiAgICBzdGFydGVkOiB0cnVlLFxuICAgIGVsZW1lbnQ6ICgpID0+IHBpZWNlRWxlbWVudEJ5S2V5KHMsIGtleSksXG4gICAgb3JpZ2luVGFyZ2V0OiBlLnRhcmdldCxcbiAgICBuZXdQaWVjZTogdHJ1ZSxcbiAgICBmb3JjZTogISFmb3JjZVxuICB9O1xuICBwcm9jZXNzRHJhZyhzKTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0RyYWcoczogU3RhdGUpOiB2b2lkIHtcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICBjb25zdCBjdXIgPSBzLmRyYWdnYWJsZS5jdXJyZW50O1xuICAgIGlmICghY3VyKSByZXR1cm47XG4gICAgLy8gY2FuY2VsIGFuaW1hdGlvbnMgd2hpbGUgZHJhZ2dpbmdcbiAgICBpZiAocy5hbmltYXRpb24uY3VycmVudCAmJiBzLmFuaW1hdGlvbi5jdXJyZW50LnBsYW4uYW5pbXNbY3VyLm9yaWddKSBzLmFuaW1hdGlvbi5jdXJyZW50ID0gdW5kZWZpbmVkO1xuICAgIC8vIGlmIG1vdmluZyBwaWVjZSBpcyBnb25lLCBjYW5jZWxcbiAgICBjb25zdCBvcmlnUGllY2UgPSBzLnBpZWNlc1tjdXIub3JpZ107XG4gICAgaWYgKCFvcmlnUGllY2UgfHwgIXV0aWwuc2FtZVBpZWNlKG9yaWdQaWVjZSwgY3VyLnBpZWNlKSkgY2FuY2VsKHMpO1xuICAgIGVsc2Uge1xuICAgICAgaWYgKCFjdXIuc3RhcnRlZCAmJiB1dGlsLmRpc3RhbmNlU3EoY3VyLmVwb3MsIGN1ci5yZWwpID49IE1hdGgucG93KHMuZHJhZ2dhYmxlLmRpc3RhbmNlLCAyKSkgY3VyLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgaWYgKGN1ci5zdGFydGVkKSB7XG5cbiAgICAgICAgLy8gc3VwcG9ydCBsYXp5IGVsZW1lbnRzXG4gICAgICAgIGlmICh0eXBlb2YgY3VyLmVsZW1lbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjb25zdCBmb3VuZCA9IGN1ci5lbGVtZW50KCk7XG4gICAgICAgICAgaWYgKCFmb3VuZCkgcmV0dXJuO1xuICAgICAgICAgIGZvdW5kLmNnRHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICAgIGZvdW5kLmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyk7XG4gICAgICAgICAgY3VyLmVsZW1lbnQgPSBmb3VuZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1ci5wb3MgPSBbXG4gICAgICAgICAgY3VyLmVwb3NbMF0gLSBjdXIucmVsWzBdLFxuICAgICAgICAgIGN1ci5lcG9zWzFdIC0gY3VyLnJlbFsxXVxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIG1vdmUgcGllY2VcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb24gPSB1dGlsLnBvc1RvVHJhbnNsYXRlQWJzKHMuZG9tLmJvdW5kcygpKShjdXIub3JpZ1BvcywgYm9hcmQud2hpdGVQb3YocykpO1xuICAgICAgICB0cmFuc2xhdGlvblswXSArPSBjdXIucG9zWzBdICsgY3VyLmRlY1swXTtcbiAgICAgICAgdHJhbnNsYXRpb25bMV0gKz0gY3VyLnBvc1sxXSArIGN1ci5kZWNbMV07XG4gICAgICAgIHV0aWwudHJhbnNsYXRlQWJzKGN1ci5lbGVtZW50LCB0cmFuc2xhdGlvbik7XG4gICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NEcmFnKHMpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1vdmUoczogU3RhdGUsIGU6IGNnLk1vdWNoRXZlbnQpOiB2b2lkIHtcbiAgLy8gc3VwcG9ydCBvbmUgZmluZ2VyIHRvdWNoIG9ubHlcbiAgaWYgKHMuZHJhZ2dhYmxlLmN1cnJlbnQgJiYgKCFlLnRvdWNoZXMgfHwgZS50b3VjaGVzLmxlbmd0aCA8IDIpKSB7XG4gICAgcy5kcmFnZ2FibGUuY3VycmVudC5lcG9zID0gdXRpbC5ldmVudFBvc2l0aW9uKGUpIGFzIGNnLk51bWJlclBhaXI7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuZChzOiBTdGF0ZSwgZTogY2cuTW91Y2hFdmVudCk6IHZvaWQge1xuICBjb25zdCBjdXIgPSBzLmRyYWdnYWJsZS5jdXJyZW50O1xuICBpZiAoIWN1cikgcmV0dXJuO1xuICAvLyBjcmVhdGUgbm8gY29ycmVzcG9uZGluZyBtb3VzZSBldmVudFxuICBpZiAoZS50eXBlID09PSAndG91Y2hlbmQnICYmIGUuY2FuY2VsYWJsZSAhPT0gZmFsc2UpIGUucHJldmVudERlZmF1bHQoKTtcbiAgLy8gY29tcGFyaW5nIHdpdGggdGhlIG9yaWdpbiB0YXJnZXQgaXMgYW4gZWFzeSB3YXkgdG8gdGVzdCB0aGF0IHRoZSBlbmQgZXZlbnRcbiAgLy8gaGFzIHRoZSBzYW1lIHRvdWNoIG9yaWdpblxuICBpZiAoZS50eXBlID09PSAndG91Y2hlbmQnICYmIGN1ciAmJiBjdXIub3JpZ2luVGFyZ2V0ICE9PSBlLnRhcmdldCAmJiAhY3VyLm5ld1BpZWNlKSB7XG4gICAgcy5kcmFnZ2FibGUuY3VycmVudCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm47XG4gIH1cbiAgYm9hcmQudW5zZXRQcmVtb3ZlKHMpO1xuICBib2FyZC51bnNldFByZWRyb3Aocyk7XG4gIC8vIHRvdWNoZW5kIGhhcyBubyBwb3NpdGlvbjsgc28gdXNlIHRoZSBsYXN0IHRvdWNobW92ZSBwb3NpdGlvbiBpbnN0ZWFkXG4gIGNvbnN0IGV2ZW50UG9zOiBjZy5OdW1iZXJQYWlyID0gdXRpbC5ldmVudFBvc2l0aW9uKGUpIHx8IGN1ci5lcG9zO1xuICBjb25zdCBkZXN0ID0gYm9hcmQuZ2V0S2V5QXREb21Qb3MoZXZlbnRQb3MsIGJvYXJkLndoaXRlUG92KHMpLCBzLmRvbS5ib3VuZHMoKSk7XG4gIGlmIChkZXN0ICYmIGN1ci5zdGFydGVkICYmIGN1ci5vcmlnICE9PSBkZXN0KSB7XG4gICAgaWYgKGN1ci5uZXdQaWVjZSkgYm9hcmQuZHJvcE5ld1BpZWNlKHMsIGN1ci5vcmlnLCBkZXN0LCBjdXIuZm9yY2UpO1xuICAgIGVsc2Uge1xuICAgICAgcy5zdGF0cy5jdHJsS2V5ID0gZS5jdHJsS2V5O1xuICAgICAgaWYgKGJvYXJkLnVzZXJNb3ZlKHMsIGN1ci5vcmlnLCBkZXN0KSkgcy5zdGF0cy5kcmFnZ2VkID0gdHJ1ZTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoY3VyLm5ld1BpZWNlKSB7XG4gICAgZGVsZXRlIHMucGllY2VzW2N1ci5vcmlnXTtcbiAgfSBlbHNlIGlmIChzLmRyYWdnYWJsZS5kZWxldGVPbkRyb3BPZmYgJiYgIWRlc3QpIHtcbiAgICBkZWxldGUgcy5waWVjZXNbY3VyLm9yaWddO1xuICAgIGJvYXJkLmNhbGxVc2VyRnVuY3Rpb24ocy5ldmVudHMuY2hhbmdlKTtcbiAgfVxuICBpZiAoY3VyICYmIGN1ci5vcmlnID09PSBjdXIucHJldmlvdXNseVNlbGVjdGVkICYmIChjdXIub3JpZyA9PT0gZGVzdCB8fCAhZGVzdCkpXG4gICAgYm9hcmQudW5zZWxlY3Qocyk7XG4gIGVsc2UgaWYgKCFzLnNlbGVjdGFibGUuZW5hYmxlZCkgYm9hcmQudW5zZWxlY3Qocyk7XG5cbiAgcmVtb3ZlRHJhZ0VsZW1lbnRzKHMpO1xuXG4gIHMuZHJhZ2dhYmxlLmN1cnJlbnQgPSB1bmRlZmluZWQ7XG4gIHMuZG9tLnJlZHJhdygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuY2VsKHM6IFN0YXRlKTogdm9pZCB7XG4gIGNvbnN0IGN1ciA9IHMuZHJhZ2dhYmxlLmN1cnJlbnQ7XG4gIGlmIChjdXIpIHtcbiAgICBpZiAoY3VyLm5ld1BpZWNlKSBkZWxldGUgcy5waWVjZXNbY3VyLm9yaWddO1xuICAgIHMuZHJhZ2dhYmxlLmN1cnJlbnQgPSB1bmRlZmluZWQ7XG4gICAgYm9hcmQudW5zZWxlY3Qocyk7XG4gICAgcmVtb3ZlRHJhZ0VsZW1lbnRzKHMpO1xuICAgIHMuZG9tLnJlZHJhdygpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZURyYWdFbGVtZW50cyhzOiBTdGF0ZSkge1xuICBjb25zdCBlID0gcy5kb20uZWxlbWVudHM7XG4gIGlmIChlLmdob3N0KSB1dGlsLnNldFZpc2libGUoZS5naG9zdCwgZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlU3F1YXJlQm91bmRzKGtleTogY2cuS2V5LCBhc1doaXRlOiBib29sZWFuLCBib3VuZHM6IENsaWVudFJlY3QpIHtcbiAgY29uc3QgcG9zID0gdXRpbC5rZXkycG9zKGtleSk7XG4gIGlmICghYXNXaGl0ZSkge1xuICAgIHBvc1swXSA9IDkgLSBwb3NbMF07XG4gICAgcG9zWzFdID0gOSAtIHBvc1sxXTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGxlZnQ6IGJvdW5kcy5sZWZ0ICsgYm91bmRzLndpZHRoICogKHBvc1swXSAtIDEpIC8gOCxcbiAgICB0b3A6IGJvdW5kcy50b3AgKyBib3VuZHMuaGVpZ2h0ICogKDggLSBwb3NbMV0pIC8gOCxcbiAgICB3aWR0aDogYm91bmRzLndpZHRoIC8gOCxcbiAgICBoZWlnaHQ6IGJvdW5kcy5oZWlnaHQgLyA4XG4gIH07XG59XG5cbmZ1bmN0aW9uIHBpZWNlRWxlbWVudEJ5S2V5KHM6IFN0YXRlLCBrZXk6IGNnLktleSk6IGNnLlBpZWNlTm9kZSB8IHVuZGVmaW5lZCB7XG4gIGxldCBlbCA9IHMuZG9tLmVsZW1lbnRzLmJvYXJkLmZpcnN0Q2hpbGQgYXMgY2cuUGllY2VOb2RlO1xuICB3aGlsZSAoZWwpIHtcbiAgICBpZiAoZWwuY2dLZXkgPT09IGtleSAmJiBlbC50YWdOYW1lID09PSAnUElFQ0UnKSByZXR1cm4gZWw7XG4gICAgZWwgPSBlbC5uZXh0U2libGluZyBhcyBjZy5QaWVjZU5vZGU7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbiJdfQ==","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","!function(n,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"pgn-parser\"]=t():n[\"pgn-parser\"]=t()}(global,(function(){return function(n){var t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(n,\"__esModule\",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&\"object\"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:n}),2&t&&\"string\"!=typeof n)for(var o in n)e.d(r,o,function(t){return n[t]}.bind(null,o));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,\"a\",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p=\"/lib/\",e(e.s=2)}([function(n,t,e){\"use strict\";function r(n,t,e,o){this.message=n,this.expected=t,this.found=e,this.location=o,this.name=\"SyntaxError\",\"function\"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(n,t){function e(){this.constructor=n}e.prototype=t.prototype,n.prototype=new e}(r,Error),r.buildMessage=function(n,t){var e={literal:function(n){return'\"'+o(n.text)+'\"'},class:function(n){var t,e=\"\";for(t=0;t<n.parts.length;t++)e+=n.parts[t]instanceof Array?i(n.parts[t][0])+\"-\"+i(n.parts[t][1]):i(n.parts[t]);return\"[\"+(n.inverted?\"^\":\"\")+e+\"]\"},any:function(n){return\"any character\"},end:function(n){return\"end of input\"},other:function(n){return n.description}};function r(n){return n.charCodeAt(0).toString(16).toUpperCase()}function o(n){return n.replace(/\\\\/g,\"\\\\\\\\\").replace(/\"/g,'\\\\\"').replace(/\\0/g,\"\\\\0\").replace(/\\t/g,\"\\\\t\").replace(/\\n/g,\"\\\\n\").replace(/\\r/g,\"\\\\r\").replace(/[\\x00-\\x0F]/g,(function(n){return\"\\\\x0\"+r(n)})).replace(/[\\x10-\\x1F\\x7F-\\x9F]/g,(function(n){return\"\\\\x\"+r(n)}))}function i(n){return n.replace(/\\\\/g,\"\\\\\\\\\").replace(/\\]/g,\"\\\\]\").replace(/\\^/g,\"\\\\^\").replace(/-/g,\"\\\\-\").replace(/\\0/g,\"\\\\0\").replace(/\\t/g,\"\\\\t\").replace(/\\n/g,\"\\\\n\").replace(/\\r/g,\"\\\\r\").replace(/[\\x00-\\x0F]/g,(function(n){return\"\\\\x0\"+r(n)})).replace(/[\\x10-\\x1F\\x7F-\\x9F]/g,(function(n){return\"\\\\x\"+r(n)}))}return\"Expected \"+function(n){var t,r,o,i=new Array(n.length);for(t=0;t<n.length;t++)i[t]=(o=n[t],e[o.type](o));if(i.sort(),i.length>0){for(t=1,r=1;t<i.length;t++)i[t-1]!==i[t]&&(i[r]=i[t],r++);i.length=r}switch(i.length){case 1:return i[0];case 2:return i[0]+\" or \"+i[1];default:return i.slice(0,-1).join(\", \")+\", or \"+i[i.length-1]}}(n)+\" but \"+function(n){return n?'\"'+o(n)+'\"':\"end of input\"}(t)+\" found.\"},n.exports={SyntaxError:r,parse:function(n,t){t=void 0!==t?t:{};var e,o={},i={pgn:jt,tags:Lt,game:function(){var n,t,e;n=Et,(t=Lt())===o&&(t=null);t!==o&&(e=jt())!==o?(n,t={tags:t,moves:e[0]},n=t):(Et=n,n=o);return n}},u=jt,a=function(n,t){return t},l=_t(\"Event\",!1),c=_t(\"Site\",!1),s=_t(\"Date\",!1),f=_t(\"Round\",!1),v=_t(\"White\",!1),p=_t(\"Black\",!1),h=_t(\"Result\",!1),g=_t(\"WhiteTitle\",!1),d=_t(\"BlackTitle\",!1),m=_t(\"WhiteELO\",!1),A=_t(\"BlackELO\",!1),b=_t(\"WhiteUSCF\",!1),C=_t(\"BlackUSCF\",!1),E=_t(\"WhiteNA\",!1),y=_t(\"BlackNA\",!1),S=_t(\"WhiteType\",!1),N=_t(\"BlackType\",!1),T=_t(\"EventDate\",!1),_=_t(\"EventSponsor\",!1),x=_t(\"Section\",!1),O=_t(\"Stage\",!1),k=_t(\"Board\",!1),w=_t(\"Opening\",!1),P=_t(\"Variation\",!1),G=_t(\"SubVariation\",!1),L=_t(\"ECO\",!1),R=_t(\"NIC\",!1),I=_t(\"Time\",!1),D=_t(\"UTCTime\",!1),U=_t(\"UTCDate\",!1),B=_t(\"TimeControl\",!1),$=_t(\"SetUp\",!1),M=_t(\"FEN\",!1),F=_t(\"Termination\",!1),j=_t(\"Annotator\",!1),q=_t(\"Mode\",!1),W=_t(\"PlyCount\",!1),Q=Ot(\"whitespace\"),K=/^[ \\t\\n\\r]/,V=xt([\" \",\"\\t\",\"\\n\",\"\\r\"],!1,!1),Y=Ot(\"string\"),H=_t('\"',!1),Z=/^[^\\0-\\x1F\"\\\\]/,z=xt([[\"\\0\",\"\u001f\"],'\"',\"\\\\\"],!0,!1),X=/^[0-9]/,J=xt([[\"0\",\"9\"]],!1,!1),nn=_t(\".\",!1),tn=_t(\"1-0\",!1),en=_t(\"1:0\",!1),rn=_t(\"0-1\",!1),on=_t(\"0:1\",!1),un=_t(\"1/2-1/2\",!1),an=_t(\"*\",!1),ln=_t(\"-\",!1),cn=function(n){return parseInt(n.join(\"\"),10)},sn=/^[^}]/,fn=xt([\"}\"],!0,!1),vn=_t(\"%csl\",!1),pn=_t(\"%cal\",!1),hn=_t(\",\",!1),gn=function(n,t){var e=[];e.push(n);for(var r=0;r<t.length;r++)e.push(t[r][2]);return e},dn=_t(\"Y\",!1),mn=_t(\"G\",!1),An=_t(\"R\",!1),bn=_t(\"B\",!1),Cn=_t(\"{\",!1),En=_t(\"}\",!1),yn=_t(\"[\",!1),Sn=_t(\"]\",!1),Nn=_t(\"%\",!1),Tn=_t(\"clk\",!1),_n=_t(\"egt\",!1),xn=_t(\"emt\",!1),On=_t(\"mct\",!1),kn=_t(\":\",!1),wn=_t(\"(\",!1),Pn=_t(\")\",!1),Gn=Ot(\"integer\"),Ln=_t(\" \",!1),Rn=_t(\"O-O-O\",!1),In=_t(\"O-O\",!1),Dn=_t(\"+-\",!1),Un=_t(\"+\",!1),Bn=function(n){return n[1]},$n=_t(\"$$$\",!1),Mn=_t(\"#\",!1),Fn=_t(\"=\",!1),jn=_t(\"$\",!1),qn=_t(\"!!\",!1),Wn=_t(\"??\",!1),Qn=_t(\"!?\",!1),Kn=_t(\"?!\",!1),Vn=_t(\"!\",!1),Yn=_t(\"?\",!1),Hn=_t(\"‼\",!1),Zn=_t(\"⁇\",!1),zn=_t(\"⁉\",!1),Xn=_t(\"⁈\",!1),Jn=_t(\"□\",!1),nt=_t(\"∞\",!1),tt=_t(\"⩲\",!1),et=_t(\"⩱\",!1),rt=_t(\"±\",!1),ot=_t(\"∓\",!1),it=_t(\"-+\",!1),ut=_t(\"⨀\",!1),at=_t(\"⟳\",!1),lt=_t(\"→\",!1),ct=_t(\"↑\",!1),st=_t(\"⇆\",!1),ft=_t(\"D\",!1),vt=/^[RNBQKP]/,pt=xt([\"R\",\"N\",\"B\",\"Q\",\"K\",\"P\"],!1,!1),ht=/^[RNBQ]/,gt=xt([\"R\",\"N\",\"B\",\"Q\"],!1,!1),dt=/^[a-h]/,mt=xt([[\"a\",\"h\"]],!1,!1),At=/^[1-8]/,bt=xt([[\"1\",\"8\"]],!1,!1),Ct=_t(\"x\",!1),Et=0,yt=[{line:1,column:1}],St=0,Nt=[],Tt=0;if(\"startRule\"in t){if(!(t.startRule in i))throw new Error(\"Can't start parsing from rule \\\"\"+t.startRule+'\".');u=i[t.startRule]}function _t(n,t){return{type:\"literal\",text:n,ignoreCase:t}}function xt(n,t,e){return{type:\"class\",parts:n,inverted:t,ignoreCase:e}}function Ot(n){return{type:\"other\",description:n}}function kt(t){var e,r=yt[t];if(r)return r;for(e=t-1;!yt[e];)e--;for(r={line:(r=yt[e]).line,column:r.column};e<t;)10===n.charCodeAt(e)?(r.line++,r.column=1):r.column++,e++;return yt[t]=r,r}function wt(n,t){var e=kt(n),r=kt(t);return{start:{offset:n,line:e.line,column:e.column},end:{offset:t,line:r.line,column:r.column}}}function Pt(n){Et<St||(Et>St&&(St=Et,Nt=[]),Nt.push(n))}function Gt(n,t,e){return new r(r.buildMessage(n,t),n,t,e)}function Lt(){var n,t,e,r,i,u,l,c;if(n=Et,It()!==o){if(t=Et,(e=Rt())!==o){for(r=[],i=Et,It()!==o&&(u=Rt())!==o?(i,i=a(0,u)):(Et=i,i=o);i!==o;)r.push(i),i=Et,It()!==o&&(u=Rt())!==o?(i,i=a(0,u)):(Et=i,i=o);r!==o?(t,c={},[e].concat(r).forEach((function(n){c[n.name]=n.value})),t=e=c):(Et=t,t=o)}else Et=t,t=o;t===o&&(t=null),t!==o&&(e=It())!==o?(n,n=null!==(l=t)?l:{}):(Et=n,n=o)}else Et=n,n=o;return n}function Rt(){var t,e;return t=Et,re()!==o&&(e=function(){var t,e,r;t=Et,(e=function(){var t;\"Event\"===n.substr(Et,5)?(t=\"Event\",Et+=5):(t=o,0===Tt&&Pt(l));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,t=e={name:\"Event\",value:r}):(Et=t,t=o);t===o&&(t=Et,(e=function(){var t;\"Site\"===n.substr(Et,4)?(t=\"Site\",Et+=4):(t=o,0===Tt&&Pt(c));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"Site\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"Date\"===n.substr(Et,4)?(t=\"Date\",Et+=4):(t=o,0===Tt&&Pt(s));return t}())!==o&&It()!==o&&(r=$t())!==o?(t,e=function(n){return{name:\"Date\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"Round\"===n.substr(Et,5)?(t=\"Round\",Et+=5):(t=o,0===Tt&&Pt(f));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"Round\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"White\"===n.substr(Et,5)?(t=\"White\",Et+=5):(t=o,0===Tt&&Pt(v));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"White\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"Black\"===n.substr(Et,5)?(t=\"Black\",Et+=5):(t=o,0===Tt&&Pt(p));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"Black\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"Result\"===n.substr(Et,6)?(t=\"Result\",Et+=6):(t=o,0===Tt&&Pt(h));return t}())!==o&&It()!==o&&(r=function(){var t,e;t=Et,Ut()!==o&&(e=function(){var t,e;t=Et,\"1-0\"===n.substr(Et,3)?(e=\"1-0\",Et+=3):(e=o,0===Tt&&Pt(tn));e!==o&&(t,e=e);(t=e)===o&&(t=Et,\"1:0\"===n.substr(Et,3)?(e=\"1:0\",Et+=3):(e=o,0===Tt&&Pt(en)),e!==o&&(t,e=e),(t=e)===o&&(t=Et,\"0-1\"===n.substr(Et,3)?(e=\"0-1\",Et+=3):(e=o,0===Tt&&Pt(rn)),e!==o&&(t,e=e),(t=e)===o&&(t=Et,\"0:1\"===n.substr(Et,3)?(e=\"0:1\",Et+=3):(e=o,0===Tt&&Pt(on)),e!==o&&(t,e=e),(t=e)===o&&(t=Et,\"1/2-1/2\"===n.substr(Et,7)?(e=\"1/2-1/2\",Et+=7):(e=o,0===Tt&&Pt(un)),e!==o&&(t,e=e),(t=e)===o&&(t=Et,42===n.charCodeAt(Et)?(e=\"*\",Et++):(e=o,0===Tt&&Pt(an)),e!==o&&(t,e=e),t=e)))));return t}())!==o&&Ut()!==o?(t,t=e):(Et=t,t=o);return t}())!==o?(t,e=function(n){return{name:\"Result\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"WhiteTitle\"===n.substr(Et,10)?(t=\"WhiteTitle\",Et+=10):(t=o,0===Tt&&Pt(g));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"WhiteTitle\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"BlackTitle\"===n.substr(Et,10)?(t=\"BlackTitle\",Et+=10):(t=o,0===Tt&&Pt(d));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"BlackTitle\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"WhiteELO\"===n.substr(Et,8)?(t=\"WhiteELO\",Et+=8):(t=o,0===Tt&&Pt(m));return t}())!==o&&It()!==o&&(r=Mt())!==o?(t,e=function(n){return{name:\"WhiteELO\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"BlackELO\"===n.substr(Et,8)?(t=\"BlackELO\",Et+=8):(t=o,0===Tt&&Pt(A));return t}())!==o&&It()!==o&&(r=Mt())!==o?(t,e=function(n){return{name:\"BlackELO\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"WhiteUSCF\"===n.substr(Et,9)?(t=\"WhiteUSCF\",Et+=9):(t=o,0===Tt&&Pt(b));return t}())!==o&&It()!==o&&(r=Ft())!==o?(t,e=function(n){return{name:\"WhiteUSCF\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"BlackUSCF\"===n.substr(Et,9)?(t=\"BlackUSCF\",Et+=9):(t=o,0===Tt&&Pt(C));return t}())!==o&&It()!==o&&(r=Ft())!==o?(t,e=function(n){return{name:\"BlackUSCF\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"WhiteNA\"===n.substr(Et,7)?(t=\"WhiteNA\",Et+=7):(t=o,0===Tt&&Pt(E));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"WhiteNA\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"BlackNA\"===n.substr(Et,7)?(t=\"BlackNA\",Et+=7):(t=o,0===Tt&&Pt(y));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"BlackNA\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"WhiteType\"===n.substr(Et,9)?(t=\"WhiteType\",Et+=9):(t=o,0===Tt&&Pt(S));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"WhiteType\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"BlackType\"===n.substr(Et,9)?(t=\"BlackType\",Et+=9):(t=o,0===Tt&&Pt(N));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"BlackType\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"EventDate\"===n.substr(Et,9)?(t=\"EventDate\",Et+=9):(t=o,0===Tt&&Pt(T));return t}())!==o&&It()!==o&&(r=$t())!==o?(t,e=function(n){return{name:\"EventDate\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"EventSponsor\"===n.substr(Et,12)?(t=\"EventSponsor\",Et+=12):(t=o,0===Tt&&Pt(_));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"EventSponsor\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"Section\"===n.substr(Et,7)?(t=\"Section\",Et+=7):(t=o,0===Tt&&Pt(x));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"Section\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"Stage\"===n.substr(Et,5)?(t=\"Stage\",Et+=5):(t=o,0===Tt&&Pt(O));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"Stage\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"Board\"===n.substr(Et,5)?(t=\"Board\",Et+=5):(t=o,0===Tt&&Pt(k));return t}())!==o&&It()!==o&&(r=Ft())!==o?(t,e=function(n){return{name:\"Board\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"Opening\"===n.substr(Et,7)?(t=\"Opening\",Et+=7):(t=o,0===Tt&&Pt(w));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"Opening\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"Variation\"===n.substr(Et,9)?(t=\"Variation\",Et+=9):(t=o,0===Tt&&Pt(P));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"Variation\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"SubVariation\"===n.substr(Et,12)?(t=\"SubVariation\",Et+=12):(t=o,0===Tt&&Pt(G));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"SubVariation\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"ECO\"===n.substr(Et,3)?(t=\"ECO\",Et+=3):(t=o,0===Tt&&Pt(L));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"ECO\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"NIC\"===n.substr(Et,3)?(t=\"NIC\",Et+=3):(t=o,0===Tt&&Pt(R));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"NIC\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"Time\"===n.substr(Et,4)?(t=\"Time\",Et+=4):(t=o,0===Tt&&Pt(I));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"Time\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"UTCTime\"===n.substr(Et,7)?(t=\"UTCTime\",Et+=7):(t=o,0===Tt&&Pt(D));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"UTCTime\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"UTCDate\"===n.substr(Et,7)?(t=\"UTCDate\",Et+=7):(t=o,0===Tt&&Pt(U));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"UTCDate\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"TimeControl\"===n.substr(Et,11)?(t=\"TimeControl\",Et+=11):(t=o,0===Tt&&Pt(B));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"TimeControl\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"SetUp\"===n.substr(Et,5)?(t=\"SetUp\",Et+=5):(t=o,0===Tt&&Pt($));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"SetUp\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"FEN\"===n.substr(Et,3)?(t=\"FEN\",Et+=3):(t=o,0===Tt&&Pt(M));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"FEN\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"Termination\"===n.substr(Et,11)?(t=\"Termination\",Et+=11):(t=o,0===Tt&&Pt(F));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"Termination\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"Annotator\"===n.substr(Et,9)?(t=\"Annotator\",Et+=9):(t=o,0===Tt&&Pt(j));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"Annotator\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"Mode\"===n.substr(Et,4)?(t=\"Mode\",Et+=4):(t=o,0===Tt&&Pt(q));return t}())!==o&&It()!==o&&(r=Dt())!==o?(t,e=function(n){return{name:\"Mode\",value:n}}(r),t=e):(Et=t,t=o),t===o&&(t=Et,(e=function(){var t;\"PlyCount\"===n.substr(Et,8)?(t=\"PlyCount\",Et+=8):(t=o,0===Tt&&Pt(W));return t}())!==o&&It()!==o&&(r=Ft())!==o?(t,e=function(n){return{name:\"PlyCount\",value:n}}(r),t=e):(Et=t,t=o)))))))))))))))))))))))))))))))))))));return t}())!==o&&oe()!==o?(t,t=e):(Et=t,t=o),t}function It(){var t,e;for(Tt++,t=[],K.test(n.charAt(Et))?(e=n.charAt(Et),Et++):(e=o,0===Tt&&Pt(V));e!==o;)t.push(e),K.test(n.charAt(Et))?(e=n.charAt(Et),Et++):(e=o,0===Tt&&Pt(V));return Tt--,t===o&&(e=o,0===Tt&&Pt(Q)),t}function Dt(){var n,t,e;if(Tt++,n=Et,Ut()!==o){for(t=[],e=Bt();e!==o;)t.push(e),e=Bt();t!==o&&(e=Ut())!==o?(n,n=t.join(\"\")):(Et=n,n=o)}else Et=n,n=o;return Tt--,n===o&&(o,0===Tt&&Pt(Y)),n}function Ut(){var t;return 34===n.charCodeAt(Et)?(t='\"',Et++):(t=o,0===Tt&&Pt(H)),t}function Bt(){var t;return Z.test(n.charAt(Et))?(t=n.charAt(Et),Et++):(t=o,0===Tt&&Pt(z)),t}function $t(){var t,e,r,i,u,a,l,c,s,f;return t=Et,Ut()!==o?(e=Et,X.test(n.charAt(Et))?(r=n.charAt(Et),Et++):(r=o,0===Tt&&Pt(J)),r!==o?(X.test(n.charAt(Et))?(i=n.charAt(Et),Et++):(i=o,0===Tt&&Pt(J)),i!==o?(X.test(n.charAt(Et))?(u=n.charAt(Et),Et++):(u=o,0===Tt&&Pt(J)),u!==o?(X.test(n.charAt(Et))?(a=n.charAt(Et),Et++):(a=o,0===Tt&&Pt(J)),a!==o?e=r=[r,i,u,a]:(Et=e,e=o)):(Et=e,e=o)):(Et=e,e=o)):(Et=e,e=o),e!==o?(46===n.charCodeAt(Et)?(r=\".\",Et++):(r=o,0===Tt&&Pt(nn)),r!==o?(i=Et,X.test(n.charAt(Et))?(u=n.charAt(Et),Et++):(u=o,0===Tt&&Pt(J)),u!==o?(X.test(n.charAt(Et))?(a=n.charAt(Et),Et++):(a=o,0===Tt&&Pt(J)),a!==o?i=u=[u,a]:(Et=i,i=o)):(Et=i,i=o),i!==o?(46===n.charCodeAt(Et)?(u=\".\",Et++):(u=o,0===Tt&&Pt(nn)),u!==o?(a=Et,X.test(n.charAt(Et))?(l=n.charAt(Et),Et++):(l=o,0===Tt&&Pt(J)),l!==o?(X.test(n.charAt(Et))?(c=n.charAt(Et),Et++):(c=o,0===Tt&&Pt(J)),c!==o?a=l=[l,c]:(Et=a,a=o)):(Et=a,a=o),a!==o&&(l=Ut())!==o?(t,s=i,f=a,t=e.join(\"\")+\".\"+s.join(\"\")+\".\"+f.join(\"\")):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o),t}function Mt(){var t,e,r,i;return(t=Ft())===o&&(t=Et,(e=Ut())!==o?(45===n.charCodeAt(Et)?(r=\"-\",Et++):(r=o,0===Tt&&Pt(ln)),r!==o&&(i=Ut())!==o?t=e=[e,r,i]:(Et=t,t=o)):(Et=t,t=o)),t}function Ft(){var t,e,r;if(t=Et,Ut()!==o){if(e=[],X.test(n.charAt(Et))?(r=n.charAt(Et),Et++):(r=o,0===Tt&&Pt(J)),r!==o)for(;r!==o;)e.push(r),X.test(n.charAt(Et))?(r=n.charAt(Et),Et++):(r=o,0===Tt&&Pt(J));else e=o;e!==o&&(r=Ut())!==o?(t,t=cn(e)):(Et=t,t=o)}else Et=t,t=o;return t}function jt(){var n,t,e,r,i;return n=Et,(t=function(){var n,t;n=Et,(t=Wt())!==o&&(n,t=t);return n=t}())!==o?((e=Qt())===o&&(e=null),e!==o?(n,r=t,(i=e||[]).unshift(r),n=t=i):(Et=n,n=o)):(Et=n,n=o),n===o&&(n=Et,(t=qt())!==o?((e=Wt())===o&&(e=null),e!==o?(n,n=t=function(n,t){var e=t||[];return e.unshift(n),e}(t,e)):(Et=n,n=o)):(Et=n,n=o),n===o&&(n=Et,(t=se())===o&&(t=null),t!==o&&(n,t=[[]]),n=t)),n}function qt(){var n,t;return n=Et,(t=Qt())!==o&&(n,t=t),n=t}function Wt(){var n,t,e,r,i,u,a,l,c,s,f,v,p,h,g,d,m,A,b,C,E,y,S,N,T,_,x;return n=Et,(t=se())===o&&(t=null),t!==o?((e=Vt())===o&&(e=null),e!==o?((r=se())===o&&(r=null),r!==o?((i=le())===o&&(i=null),i!==o?((u=se())===o&&(u=null),u!==o?((a=Vt())===o&&(a=null),a!==o?((l=se())===o&&(l=null),l!==o&&(c=ve())!==o?((s=se())===o&&(s=null),s!==o?((f=ge())===o&&(f=null),f!==o?((v=se())===o&&(v=null),v!==o?((p=Vt())===o&&(p=null),p!==o?((h=se())===o&&(h=null),h!==o?((g=Ht())===o&&(g=null),g!==o?((d=se())===o&&(d=null),d!==o?((m=function n(){var t,e,r,i,u,a;t=Et,ue()!==o&&(e=Wt())!==o&&ae()!==o?((r=se())===o&&(r=null),r!==o?((i=n())===o&&(i=null),i!==o?((u=se())===o&&(u=null),u!==o?((a=le())===o&&(a=null),a!==o?(t,l=e,(c=i||[]).unshift(l),t=c):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o);var l,c;return t}())===o&&(m=null),m!==o?((A=Qt())===o&&(A=null),A!==o?(n,b=e,C=a,E=c,y=f,S=p,N=g,T=m,_=A||[],(x={turn:\"w\"}).moveNumber=i,x.notation=E,x.commentBefore=C,x.commentAfter=S,x.commentMove=b,x.variations=T||[],x.nag=y||null,_.unshift(x),x.commentDiag=N,n=t=_):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o),n===o&&(n=Kt()),n}function Qt(){var n,t,e,r,i,u,a,l,c,s,f,v,p,h,g,d,m,A,b,C,E,y,S,N,T,_,x;return n=Et,(t=se())===o&&(t=null),t!==o?((e=Vt())===o&&(e=null),e!==o?((r=se())===o&&(r=null),r!==o?((i=le())===o&&(i=null),i!==o?((u=se())===o&&(u=null),u!==o?((a=Vt())===o&&(a=null),a!==o?((l=se())===o&&(l=null),l!==o&&(c=ve())!==o?((s=se())===o&&(s=null),s!==o?((f=ge())===o&&(f=null),f!==o?((v=se())===o&&(v=null),v!==o?((p=Vt())===o&&(p=null),p!==o?((h=se())===o&&(h=null),h!==o?((g=Ht())===o&&(g=null),g!==o?((d=se())===o&&(d=null),d!==o?((m=function n(){var t,e,r,i;t=Et,ue()!==o&&(e=qt())!==o&&ae()!==o?((r=se())===o&&(r=null),r!==o?((i=n())===o&&(i=null),i!==o?(t,u=e,(a=i||[]).unshift(u),t=a):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o);var u,a;return t}())===o&&(m=null),m!==o?((A=Wt())===o&&(A=null),A!==o?(n,b=e,C=a,E=c,y=f,S=p,N=g,T=m,_=A||[],(x={turn:\"b\"}).moveNumber=i,x.notation=E,x.commentBefore=C,x.commentAfter=S,x.commentMove=b,x.variations=T||[],_.unshift(x),x.nag=y||null,x.commentDiag=N,n=t=_):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o),n===o&&(n=Kt()),n}function Kt(){var t,e,r;return t=Et,\"1:0\"===n.substr(Et,3)?(e=\"1:0\",Et+=3):(e=o,0===Tt&&Pt(en)),e!==o?((r=se())===o&&(r=null),r!==o?(t,t=e=[\"1:0\"]):(Et=t,t=o)):(Et=t,t=o),t===o&&(t=Et,\"0:1\"===n.substr(Et,3)?(e=\"0:1\",Et+=3):(e=o,0===Tt&&Pt(on)),e!==o?((r=se())===o&&(r=null),r!==o?(t,t=e=[\"0:1\"]):(Et=t,t=o)):(Et=t,t=o),t===o&&(t=Et,\"1-0\"===n.substr(Et,3)?(e=\"1-0\",Et+=3):(e=o,0===Tt&&Pt(tn)),e!==o?((r=se())===o&&(r=null),r!==o?(t,t=e=[\"1-0\"]):(Et=t,t=o)):(Et=t,t=o),t===o&&(t=Et,\"0-1\"===n.substr(Et,3)?(e=\"0-1\",Et+=3):(e=o,0===Tt&&Pt(rn)),e!==o?((r=se())===o&&(r=null),r!==o?(t,t=e=[\"0-1\"]):(Et=t,t=o)):(Et=t,t=o),t===o&&(t=Et,\"1/2-1/2\"===n.substr(Et,7)?(e=\"1/2-1/2\",Et+=7):(e=o,0===Tt&&Pt(un)),e!==o?((r=se())===o&&(r=null),r!==o?(t,t=e=[\"1/2-1/2\"]):(Et=t,t=o)):(Et=t,t=o),t===o&&(t=Et,42===n.charCodeAt(Et)?(e=\"*\",Et++):(e=o,0===Tt&&Pt(an)),e!==o?((r=se())===o&&(r=null),r!==o?(t,t=e=[\"*\"]):(Et=t,t=o)):(Et=t,t=o)))))),t}function Vt(){var n,t,e,r,i,u;if(n=Et,(t=Yt())!==o){for(e=[],r=Et,(i=se())===o&&(i=null),i!==o&&(u=Yt())!==o?r=i=[i,u]:(Et=r,r=o);r!==o;)e.push(r),r=Et,(i=se())===o&&(i=null),i!==o&&(u=Yt())!==o?r=i=[i,u]:(Et=r,r=o);e!==o?(n,n=t=function(n,t){for(var e=n,r=0;r<t.length;r++)e+=\" \"+t[r][1];return e}(t,e)):(Et=n,n=o)}else Et=n,n=o;return n}function Yt(){var t,e,r,i,u;if(t=Et,e=Et,Tt++,r=Ht(),Tt--,r===o?e=void 0:(Et=e,e=o),e!==o)if((r=te())!==o){if(i=[],sn.test(n.charAt(Et))?(u=n.charAt(Et),Et++):(u=o,0===Tt&&Pt(fn)),u!==o)for(;u!==o;)i.push(u),sn.test(n.charAt(Et))?(u=n.charAt(Et),Et++):(u=o,0===Tt&&Pt(fn));else i=o;i!==o&&(u=ee())!==o?(t,t=e=i.join(\"\").trim()):(Et=t,t=o)}else Et=t,t=o;else Et=t,t=o;return t}function Ht(){var n,t,e,r;return n=Et,te()!==o?((t=se())===o&&(t=null),t!==o&&(e=function(){var n,t,e,r,i;if(n=Et,(t=Zt())!==o)if((e=se())===o&&(e=null),e!==o){for(r=[],i=Zt();i!==o;)r.push(i),i=Zt();r!==o?(n,t=function(n,t){if(t){var e=t[0];return{...n,...e}}return n}(t,r),n=t):(Et=n,n=o)}else Et=n,n=o;else Et=n,n=o;return n}())!==o?((r=se())===o&&(r=null),r!==o&&ee()!==o?(n,n=e):(Et=n,n=o)):(Et=n,n=o)):(Et=n,n=o),n}function Zt(){var t,e,r;return t=Et,(e=function(){var t,e,r,i,u;t=Et,re()!==o?((e=se())===o&&(e=null),e!==o?(\"%csl\"===n.substr(Et,4)?(r=\"%csl\",Et+=4):(r=o,0===Tt&&Pt(vn)),r!==o&&se()!==o&&(i=function(){var t,e,r,i,u,a,l,c;if(t=Et,(e=zt())!==o)if((r=se())===o&&(r=null),r!==o){for(i=[],u=Et,44===n.charCodeAt(Et)?(a=\",\",Et++):(a=o,0===Tt&&Pt(hn)),a!==o?((l=se())===o&&(l=null),l!==o&&(c=zt())!==o?u=a=[a,l,c]:(Et=u,u=o)):(Et=u,u=o);u!==o;)i.push(u),u=Et,44===n.charCodeAt(Et)?(a=\",\",Et++):(a=o,0===Tt&&Pt(hn)),a!==o?((l=se())===o&&(l=null),l!==o&&(c=zt())!==o?u=a=[a,l,c]:(Et=u,u=o)):(Et=u,u=o);i!==o?(t,e=gn(e,i),t=e):(Et=t,t=o)}else Et=t,t=o;else Et=t,t=o;return t}())!==o?((u=se())===o&&(u=null),u!==o&&oe()!==o?(t,t=i):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o);return t}())!==o&&(t,(r={}).colorFields=e,e=r),(t=e)===o&&(t=Et,(e=function(){var t,e,r,i,u;t=Et,re()!==o?((e=se())===o&&(e=null),e!==o?(\"%cal\"===n.substr(Et,4)?(r=\"%cal\",Et+=4):(r=o,0===Tt&&Pt(pn)),r!==o&&se()!==o&&(i=function(){var t,e,r,i,u,a,l,c;if(t=Et,(e=Xt())!==o)if((r=se())===o&&(r=null),r!==o){for(i=[],u=Et,44===n.charCodeAt(Et)?(a=\",\",Et++):(a=o,0===Tt&&Pt(hn)),a!==o?((l=se())===o&&(l=null),l!==o&&(c=Xt())!==o?u=a=[a,l,c]:(Et=u,u=o)):(Et=u,u=o);u!==o;)i.push(u),u=Et,44===n.charCodeAt(Et)?(a=\",\",Et++):(a=o,0===Tt&&Pt(hn)),a!==o?((l=se())===o&&(l=null),l!==o&&(c=Xt())!==o?u=a=[a,l,c]:(Et=u,u=o)):(Et=u,u=o);i!==o?(t,e=gn(e,i),t=e):(Et=t,t=o)}else Et=t,t=o;else Et=t,t=o;return t}())!==o?((u=se())===o&&(u=null),u!==o&&oe()!==o?(t,t=i):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o);return t}())!==o&&(t,e=function(n){var t={};return t.colorArrows=n,t}(e)),(t=e)===o&&(t=Et,(e=function(){var t,e,r,i,u,a,l;t=Et,(e=re())!==o?((r=se())===o&&(r=null),r!==o?(37===n.charCodeAt(Et)?(i=\"%\",Et++):(i=o,0===Tt&&Pt(Nn)),i!==o&&(u=function(){var t,e;t=Et,\"clk\"===n.substr(Et,3)?(e=\"clk\",Et+=3):(e=o,0===Tt&&Pt(Tn));e!==o&&(t,e=\"clk\");(t=e)===o&&(t=Et,\"egt\"===n.substr(Et,3)?(e=\"egt\",Et+=3):(e=o,0===Tt&&Pt(_n)),e!==o&&(t,e=\"egt\"),(t=e)===o&&(t=Et,\"emt\"===n.substr(Et,3)?(e=\"emt\",Et+=3):(e=o,0===Tt&&Pt(xn)),e!==o&&(t,e=\"emt\"),(t=e)===o&&(t=Et,\"mct\"===n.substr(Et,3)?(e=\"mct\",Et+=3):(e=o,0===Tt&&Pt(On)),e!==o&&(t,e=\"mct\"),t=e)));return t}())!==o&&se()!==o&&(a=function(){var t,e,r,i,u,a,l,c,s;t=Et,(e=ie())!==o?((r=ie())===o&&(r=null),r!==o?(58===n.charCodeAt(Et)?(i=\":\",Et++):(i=o,0===Tt&&Pt(kn)),i!==o&&(u=ie())!==o&&(a=ie())!==o?(58===n.charCodeAt(Et)?(l=\":\",Et++):(l=o,0===Tt&&Pt(kn)),l!==o&&(c=ie())!==o&&(s=ie())!==o?(t,e=function(n,t,e,r,o,i){var u=n;return t&&(u+=t),u+=\":\"+e+r+\":\"+o+i}(e,r,u,a,c,s),t=e):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o);return t}())!==o?((l=se())===o&&(l=null),l!==o&&oe()!==o?(t,e=function(n,t){var e={};return e.type=n,e.value=t,e}(u,a),t=e):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o);return t}())!==o&&(t,e=function(n){var t={};return t.clock=n,t}(e)),t=e)),t}function zt(){var n,t,e;return n=Et,(t=Jt())!==o&&(e=ne())!==o?(n,n=t=t+e):(Et=n,n=o),n}function Xt(){var n,t,e,r;return n=Et,(t=Jt())!==o&&(e=ne())!==o&&(r=ne())!==o?(n,n=t=t+e+r):(Et=n,n=o),n}function Jt(){var t,e;return t=Et,89===n.charCodeAt(Et)?(e=\"Y\",Et++):(e=o,0===Tt&&Pt(dn)),e!==o&&(t,e=\"Y\"),(t=e)===o&&(t=Et,71===n.charCodeAt(Et)?(e=\"G\",Et++):(e=o,0===Tt&&Pt(mn)),e!==o&&(t,e=\"G\"),(t=e)===o&&(t=Et,82===n.charCodeAt(Et)?(e=\"R\",Et++):(e=o,0===Tt&&Pt(An)),e!==o&&(t,e=\"R\"),(t=e)===o&&(t=Et,66===n.charCodeAt(Et)?(e=\"B\",Et++):(e=o,0===Tt&&Pt(bn)),e!==o&&(t,e=\"B\"),t=e))),t}function ne(){var n,t,e;return n=Et,(t=Ae())!==o&&(e=be())!==o?(n,n=t=t+e):(Et=n,n=o),n}function te(){var t;return 123===n.charCodeAt(Et)?(t=\"{\",Et++):(t=o,0===Tt&&Pt(Cn)),t}function ee(){var t;return 125===n.charCodeAt(Et)?(t=\"}\",Et++):(t=o,0===Tt&&Pt(En)),t}function re(){var t;return 91===n.charCodeAt(Et)?(t=\"[\",Et++):(t=o,0===Tt&&Pt(yn)),t}function oe(){var t;return 93===n.charCodeAt(Et)?(t=\"]\",Et++):(t=o,0===Tt&&Pt(Sn)),t}function ie(){var t,e;return t=Et,X.test(n.charAt(Et))?(e=n.charAt(Et),Et++):(e=o,0===Tt&&Pt(J)),e!==o&&(t,e=e),t=e}function ue(){var t;return 40===n.charCodeAt(Et)?(t=\"(\",Et++):(t=o,0===Tt&&Pt(wn)),t}function ae(){var t;return 41===n.charCodeAt(Et)?(t=\")\",Et++):(t=o,0===Tt&&Pt(Pn)),t}function le(){var n,t,e,r;if(n=Et,(t=ce())!==o){for(e=[],r=fe();r!==o;)e.push(r),r=fe();e!==o?(n,n=t=t):(Et=n,n=o)}else Et=n,n=o;return n}function ce(){var t,e,r;if(Tt++,t=Et,e=[],X.test(n.charAt(Et))?(r=n.charAt(Et),Et++):(r=o,0===Tt&&Pt(J)),r!==o)for(;r!==o;)e.push(r),X.test(n.charAt(Et))?(r=n.charAt(Et),Et++):(r=o,0===Tt&&Pt(J));else e=o;return e!==o&&(t,e=cn(e)),Tt--,(t=e)===o&&(e=o,0===Tt&&Pt(Gn)),t}function se(){var t,e,r;if(t=Et,e=[],32===n.charCodeAt(Et)?(r=\" \",Et++):(r=o,0===Tt&&Pt(Ln)),r!==o)for(;r!==o;)e.push(r),32===n.charCodeAt(Et)?(r=\" \",Et++):(r=o,0===Tt&&Pt(Ln));else e=o;return e!==o&&(t,e=\"\"),t=e}function fe(){var t;return(t=function(){var t;return 46===n.charCodeAt(Et)?(t=\".\",Et++):(t=o,0===Tt&&Pt(nn)),t}())===o&&(t=se()),t}function ve(){var t,e,r,i,u,a,l,c,s,f,v,p,h,g,d,m,A;return t=Et,(e=me())===o&&(e=null),e!==o?(r=Et,Tt++,i=function(){var n,t,e,r,i;n=Et,(t=de())!==o?((e=Ce())===o&&(e=null),e!==o&&(r=Ae())!==o&&(i=be())!==o?n=t=[t,e,r,i]:(Et=n,n=o)):(Et=n,n=o);return n}(),Tt--,i!==o?(Et=r,r=void 0):r=o,r!==o&&(i=de())!==o?((u=Ce())===o&&(u=null),u!==o&&(a=Ae())!==o&&(l=be())!==o?((c=he())===o&&(c=null),c!==o?((s=pe())===o&&(s=null),s!==o?(t,v=i,p=u,h=a,g=l,d=c,m=s,(A={}).fig=(f=e)||null,A.disc=v||null,A.strike=p||null,A.col=h,A.row=g,A.check=m||null,A.promotion=d,A.notation=(f||\"\")+(v||\"\")+(p||\"\")+h+g+(d||\"\")+(m||\"\"),t=e=A):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o),t===o&&(t=Et,(e=me())===o&&(e=null),e!==o&&(r=Ae())!==o&&(i=be())!==o?((u=function(){var t;120===n.charCodeAt(Et)?(t=\"x\",Et++):(t=o,0===Tt&&Pt(Ct));t===o&&(45===n.charCodeAt(Et)?(t=\"-\",Et++):(t=o,0===Tt&&Pt(ln)));return t}())===o&&(u=null),u!==o&&(a=Ae())!==o&&(l=be())!==o?((c=he())===o&&(c=null),c!==o?((s=pe())===o&&(s=null),s!==o?(t,t=e=function(n,t,e,r,o,i,u,a){var l={};return l.fig=n||null,l.strike=\"x\"==r?r:null,l.col=o,l.row=i,l.check=a||null,l.notation=(n&&\"P\"!==n?n:\"\")+t+e+(\"x\"==r?r:\"-\")+o+i+(u||\"\")+(a||\"\"),l.promotion=u,l}(e,r,i,u,a,l,c,s)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o),t===o&&(t=Et,(e=me())===o&&(e=null),e!==o?((r=Ce())===o&&(r=null),r!==o&&(i=Ae())!==o&&(u=be())!==o?((a=he())===o&&(a=null),a!==o?((l=pe())===o&&(l=null),l!==o?(t,t=e=function(n,t,e,r,o,i){var u={};return u.fig=n||null,u.strike=t||null,u.col=e,u.row=r,u.check=i||null,u.notation=(n||\"\")+(t||\"\")+e+r+(o||\"\")+(i||\"\"),u.promotion=o,u}(e,r,i,u,a,l)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o),t===o&&(t=Et,\"O-O-O\"===n.substr(Et,5)?(e=\"O-O-O\",Et+=5):(e=o,0===Tt&&Pt(Rn)),e!==o?((r=pe())===o&&(r=null),r!==o?(t,t=e=function(n){var t={};return t.notation=\"O-O-O\"+(n||\"\"),t.check=n||null,t}(r)):(Et=t,t=o)):(Et=t,t=o),t===o&&(t=Et,\"O-O\"===n.substr(Et,3)?(e=\"O-O\",Et+=3):(e=o,0===Tt&&Pt(In)),e!==o?((r=pe())===o&&(r=null),r!==o?(t,t=e=function(n){var t={};return t.notation=\"O-O\"+(n||\"\"),t.check=n||null,t}(r)):(Et=t,t=o)):(Et=t,t=o))))),t}function pe(){var t,e,r,i;return t=Et,e=Et,r=Et,Tt++,\"+-\"===n.substr(Et,2)?(i=\"+-\",Et+=2):(i=o,0===Tt&&Pt(Dn)),Tt--,i===o?r=void 0:(Et=r,r=o),r!==o?(43===n.charCodeAt(Et)?(i=\"+\",Et++):(i=o,0===Tt&&Pt(Un)),i!==o?e=r=[r,i]:(Et=e,e=o)):(Et=e,e=o),e!==o&&(t,e=Bn(e)),(t=e)===o&&(t=Et,e=Et,r=Et,Tt++,\"$$$\"===n.substr(Et,3)?(i=\"$$$\",Et+=3):(i=o,0===Tt&&Pt($n)),Tt--,i===o?r=void 0:(Et=r,r=o),r!==o?(35===n.charCodeAt(Et)?(i=\"#\",Et++):(i=o,0===Tt&&Pt(Mn)),i!==o?e=r=[r,i]:(Et=e,e=o)):(Et=e,e=o),e!==o&&(t,e=Bn(e)),t=e),t}function he(){var t,e,r;return t=Et,61===n.charCodeAt(Et)?(e=\"=\",Et++):(e=o,0===Tt&&Pt(Fn)),e!==o&&(r=function(){var t;ht.test(n.charAt(Et))?(t=n.charAt(Et),Et++):(t=o,0===Tt&&Pt(gt));return t}())!==o?(t,t=e=\"=\"+r):(Et=t,t=o),t}function ge(){var t,e,r,i,u,a;return t=Et,(e=function(){var t,e,r;t=Et,36===n.charCodeAt(Et)?(e=\"$\",Et++):(e=o,0===Tt&&Pt(jn));e!==o&&(r=ce())!==o?(t,t=e=\"$\"+r):(Et=t,t=o);t===o&&(t=Et,\"!!\"===n.substr(Et,2)?(e=\"!!\",Et+=2):(e=o,0===Tt&&Pt(qn)),e!==o&&(t,e=\"$3\"),(t=e)===o&&(t=Et,\"??\"===n.substr(Et,2)?(e=\"??\",Et+=2):(e=o,0===Tt&&Pt(Wn)),e!==o&&(t,e=\"$4\"),(t=e)===o&&(t=Et,\"!?\"===n.substr(Et,2)?(e=\"!?\",Et+=2):(e=o,0===Tt&&Pt(Qn)),e!==o&&(t,e=\"$5\"),(t=e)===o&&(t=Et,\"?!\"===n.substr(Et,2)?(e=\"?!\",Et+=2):(e=o,0===Tt&&Pt(Kn)),e!==o&&(t,e=\"$6\"),(t=e)===o&&(t=Et,33===n.charCodeAt(Et)?(e=\"!\",Et++):(e=o,0===Tt&&Pt(Vn)),e!==o&&(t,e=\"$1\"),(t=e)===o&&(t=Et,63===n.charCodeAt(Et)?(e=\"?\",Et++):(e=o,0===Tt&&Pt(Yn)),e!==o&&(t,e=\"$2\"),(t=e)===o&&(t=Et,8252===n.charCodeAt(Et)?(e=\"‼\",Et++):(e=o,0===Tt&&Pt(Hn)),e!==o&&(t,e=\"$3\"),(t=e)===o&&(t=Et,8263===n.charCodeAt(Et)?(e=\"⁇\",Et++):(e=o,0===Tt&&Pt(Zn)),e!==o&&(t,e=\"$4\"),(t=e)===o&&(t=Et,8265===n.charCodeAt(Et)?(e=\"⁉\",Et++):(e=o,0===Tt&&Pt(zn)),e!==o&&(t,e=\"$5\"),(t=e)===o&&(t=Et,8264===n.charCodeAt(Et)?(e=\"⁈\",Et++):(e=o,0===Tt&&Pt(Xn)),e!==o&&(t,e=\"$6\"),(t=e)===o&&(t=Et,9633===n.charCodeAt(Et)?(e=\"□\",Et++):(e=o,0===Tt&&Pt(Jn)),e!==o&&(t,e=\"$7\"),(t=e)===o&&(t=Et,61===n.charCodeAt(Et)?(e=\"=\",Et++):(e=o,0===Tt&&Pt(Fn)),e!==o&&(t,e=\"$10\"),(t=e)===o&&(t=Et,8734===n.charCodeAt(Et)?(e=\"∞\",Et++):(e=o,0===Tt&&Pt(nt)),e!==o&&(t,e=\"$13\"),(t=e)===o&&(t=Et,10866===n.charCodeAt(Et)?(e=\"⩲\",Et++):(e=o,0===Tt&&Pt(tt)),e!==o&&(t,e=\"$14\"),(t=e)===o&&(t=Et,10865===n.charCodeAt(Et)?(e=\"⩱\",Et++):(e=o,0===Tt&&Pt(et)),e!==o&&(t,e=\"$15\"),(t=e)===o&&(t=Et,177===n.charCodeAt(Et)?(e=\"±\",Et++):(e=o,0===Tt&&Pt(rt)),e!==o&&(t,e=\"$16\"),(t=e)===o&&(t=Et,8723===n.charCodeAt(Et)?(e=\"∓\",Et++):(e=o,0===Tt&&Pt(ot)),e!==o&&(t,e=\"$17\"),(t=e)===o&&(t=Et,\"+-\"===n.substr(Et,2)?(e=\"+-\",Et+=2):(e=o,0===Tt&&Pt(Dn)),e!==o&&(t,e=\"$18\"),(t=e)===o&&(t=Et,\"-+\"===n.substr(Et,2)?(e=\"-+\",Et+=2):(e=o,0===Tt&&Pt(it)),e!==o&&(t,e=\"$19\"),(t=e)===o&&(t=Et,10752===n.charCodeAt(Et)?(e=\"⨀\",Et++):(e=o,0===Tt&&Pt(ut)),e!==o&&(t,e=\"$22\"),(t=e)===o&&(t=Et,10227===n.charCodeAt(Et)?(e=\"⟳\",Et++):(e=o,0===Tt&&Pt(at)),e!==o&&(t,e=\"$32\"),(t=e)===o&&(t=Et,8594===n.charCodeAt(Et)?(e=\"→\",Et++):(e=o,0===Tt&&Pt(lt)),e!==o&&(t,e=\"$36\"),(t=e)===o&&(t=Et,8593===n.charCodeAt(Et)?(e=\"↑\",Et++):(e=o,0===Tt&&Pt(ct)),e!==o&&(t,e=\"$40\"),(t=e)===o&&(t=Et,8646===n.charCodeAt(Et)?(e=\"⇆\",Et++):(e=o,0===Tt&&Pt(st)),e!==o&&(t,e=\"$132\"),(t=e)===o&&(t=Et,68===n.charCodeAt(Et)?(e=\"D\",Et++):(e=o,0===Tt&&Pt(ft)),e!==o&&(t,e=\"$220\"),t=e)))))))))))))))))))))))));return t}())!==o?((r=se())===o&&(r=null),r!==o?((i=ge())===o&&(i=null),i!==o?(t,u=e,(a=i||[]).unshift(u),t=e=a):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o),t}function de(){var n;return(n=Ae())===o&&(n=be()),n}function me(){var t;return vt.test(n.charAt(Et))?(t=n.charAt(Et),Et++):(t=o,0===Tt&&Pt(pt)),t}function Ae(){var t;return dt.test(n.charAt(Et))?(t=n.charAt(Et),Et++):(t=o,0===Tt&&Pt(mt)),t}function be(){var t;return At.test(n.charAt(Et))?(t=n.charAt(Et),Et++):(t=o,0===Tt&&Pt(bt)),t}function Ce(){var t;return 120===n.charCodeAt(Et)?(t=\"x\",Et++):(t=o,0===Tt&&Pt(Ct)),t}if((e=u())!==o&&Et===n.length)return e;throw e!==o&&Et<n.length&&Pt({type:\"end\"}),Gt(Nt,St<n.length?n.charAt(St):null,St<n.length?wt(St,St+1):wt(St,St))}}},function(n,t,e){var r,o=function(n){var t=\"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\",e=[\"1-0\",\"0-1\",\"1/2-1/2\",\"*\"],r={b:[16,32,17,15],w:[-16,-32,-17,-15]},o={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},i=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],u=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],a={p:0,n:1,b:2,r:3,q:4,k:5},l={NORMAL:\"n\",CAPTURE:\"c\",BIG_PAWN:\"b\",EP_CAPTURE:\"e\",PROMOTION:\"p\",KSIDE_CASTLE:\"k\",QSIDE_CASTLE:\"q\"},c={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},s={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},f={w:[{square:s.a1,flag:c.QSIDE_CASTLE},{square:s.h1,flag:c.KSIDE_CASTLE}],b:[{square:s.a8,flag:c.QSIDE_CASTLE},{square:s.h8,flag:c.KSIDE_CASTLE}]},v=new Array(128),p={w:-1,b:-1},h=\"w\",g={w:0,b:0},d=-1,m=0,A=1,b=[],C={};function E(n){void 0===n&&(n=!1),v=new Array(128),p={w:-1,b:-1},h=\"w\",g={w:0,b:0},d=-1,m=0,A=1,b=[],n||(C={}),x(T())}function y(){S(t)}function S(n,t){void 0===t&&(t=!1);var e=n.split(/\\s+/),r=e[0],o=0;if(!N(n).valid)return!1;E(t);for(var i=0;i<r.length;i++){var u=r.charAt(i);if(\"/\"===u)o+=8;else if(-1!==\"0123456789\".indexOf(u))o+=parseInt(u,10);else{var a=u<\"a\"?\"w\":\"b\";k({type:u.toLowerCase(),color:a},K(o)),o++}}return h=e[1],e[2].indexOf(\"K\")>-1&&(g.w|=c.KSIDE_CASTLE),e[2].indexOf(\"Q\")>-1&&(g.w|=c.QSIDE_CASTLE),e[2].indexOf(\"k\")>-1&&(g.b|=c.KSIDE_CASTLE),e[2].indexOf(\"q\")>-1&&(g.b|=c.QSIDE_CASTLE),d=\"-\"===e[3]?-1:s[e[3]],m=parseInt(e[4],10),A=parseInt(e[5],10),x(T()),!0}function N(n){var t=\"No errors.\",e=\"FEN string must contain six space-delimited fields.\",r=\"6th field (move number) must be a positive integer.\",o=\"5th field (half move counter) must be a non-negative integer.\",i=\"4th field (en-passant square) is invalid.\",u=\"3rd field (castling availability) is invalid.\",a=\"2nd field (side to move) is invalid.\",l=\"1st field (piece positions) does not contain 8 '/'-delimited rows.\",c=\"1st field (piece positions) is invalid [consecutive numbers].\",s=\"1st field (piece positions) is invalid [invalid piece].\",f=\"1st field (piece positions) is invalid [row too large].\",v=\"Illegal en-passant square\",p=n.split(/\\s+/);if(6!==p.length)return{valid:!1,error_number:1,error:e};if(isNaN(p[5])||parseInt(p[5],10)<=0)return{valid:!1,error_number:2,error:r};if(isNaN(p[4])||parseInt(p[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(p[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(p[2]))return{valid:!1,error_number:5,error:u};if(!/^(w|b)$/.test(p[1]))return{valid:!1,error_number:6,error:a};var h=p[0].split(\"/\");if(8!==h.length)return{valid:!1,error_number:7,error:l};for(var g=0;g<h.length;g++){for(var d=0,m=!1,A=0;A<h[g].length;A++)if(isNaN(h[g][A])){if(!/^[prnbqkPRNBQK]$/.test(h[g][A]))return{valid:!1,error_number:9,error:s};d+=1,m=!1}else{if(m)return{valid:!1,error_number:8,error:c};d+=parseInt(h[g][A],10),m=!0}if(8!==d)return{valid:!1,error_number:10,error:f}}return\"3\"==p[3][1]&&\"w\"==p[1]||\"6\"==p[3][1]&&\"b\"==p[1]?{valid:!1,error_number:11,error:v}:{valid:!0,error_number:0,error:t}}function T(){for(var n=0,t=\"\",e=s.a8;e<=s.h1;e++){if(null==v[e])n++;else{n>0&&(t+=n,n=0);var r=v[e].color,o=v[e].type;t+=\"w\"===r?o.toUpperCase():o.toLowerCase()}e+1&136&&(n>0&&(t+=n),e!==s.h1&&(t+=\"/\"),n=0,e+=8)}var i=\"\";g.w&c.KSIDE_CASTLE&&(i+=\"K\"),g.w&c.QSIDE_CASTLE&&(i+=\"Q\"),g.b&c.KSIDE_CASTLE&&(i+=\"k\"),g.b&c.QSIDE_CASTLE&&(i+=\"q\"),i=i||\"-\";var u=-1===d?\"-\":K(d);return[t,h,i,u,m,A].join(\" \")}function _(n){for(var t=0;t<n.length;t+=2)\"string\"==typeof n[t]&&\"string\"==typeof n[t+1]&&(C[n[t]]=n[t+1]);return C}function x(n){b.length>0||(n!==t?(C.SetUp=\"1\",C.FEN=n):(delete C.SetUp,delete C.FEN))}function O(n){var t=v[s[n]];return t?{type:t.type,color:t.color}:null}function k(n,t){if(!(\"type\"in n)||!(\"color\"in n))return!1;if(-1===\"pnbrqkPNBRQK\".indexOf(n.type.toLowerCase()))return!1;if(!(t in s))return!1;var e=s[t];return(\"k\"!=n.type||-1==p[n.color]||p[n.color]==e)&&(v[e]={type:n.type,color:n.color},\"k\"===n.type&&(p[n.color]=e),x(T()),!0)}function w(n,t,e,r,o){var i={color:h,from:t,to:e,flags:r,piece:n[t].type};return o&&(i.flags|=c.PROMOTION,i.promotion=o),n[e]?i.captured=n[e].type:r&c.EP_CAPTURE&&(i.captured=\"p\"),i}function P(n){function t(n,t,e,r,o){if(\"p\"!==n[e].type||0!==W(r)&&7!==W(r))t.push(w(n,e,r,o));else for(var i=[\"q\",\"r\",\"b\",\"n\"],u=0,a=i.length;u<a;u++)t.push(w(n,e,r,o,i[u]))}var e=[],i=h,u=V(i),a={b:1,w:6},l=s.a8,f=s.h1,m=!1,A=void 0===n||!(\"legal\"in n)||n.legal;if(void 0!==n&&\"square\"in n){if(!(n.square in s))return[];l=f=s[n.square],m=!0}for(var b=l;b<=f;b++)if(136&b)b+=7;else{var C=v[b];if(null!=C&&C.color===i)if(\"p\"===C.type){var E=b+r[i][0];if(null==v[E]){t(v,e,b,E,c.NORMAL);E=b+r[i][1];a[i]===W(b)&&null==v[E]&&t(v,e,b,E,c.BIG_PAWN)}for(y=2;y<4;y++){136&(E=b+r[i][y])||(null!=v[E]&&v[E].color===u?t(v,e,b,E,c.CAPTURE):E===d&&t(v,e,b,d,c.EP_CAPTURE))}}else for(var y=0,S=o[C.type].length;y<S;y++){var N=o[C.type][y];for(E=b;!(136&(E+=N));){if(null!=v[E]){if(v[E].color===i)break;t(v,e,b,E,c.CAPTURE);break}if(t(v,e,b,E,c.NORMAL),\"n\"===C.type||\"k\"===C.type)break}}}if(!m||f===p[i]){if(g[i]&c.KSIDE_CASTLE){var T=(_=p[i])+2;null!=v[_+1]||null!=v[T]||R(u,p[i])||R(u,_+1)||R(u,T)||t(v,e,p[i],T,c.KSIDE_CASTLE)}if(g[i]&c.QSIDE_CASTLE){var _;T=(_=p[i])-2;null!=v[_-1]||null!=v[_-2]||null!=v[_-3]||R(u,p[i])||R(u,_-1)||R(u,T)||t(v,e,p[i],T,c.QSIDE_CASTLE)}}if(!A)return e;var x=[];for(b=0,S=e.length;b<S;b++)F(e[b]),I(i)||x.push(e[b]),j();return x}function G(n,t){var e=\"\";if(n.flags&c.KSIDE_CASTLE)e=\"O-O\";else if(n.flags&c.QSIDE_CASTLE)e=\"O-O-O\";else{var r=function(n,t){for(var e=P({legal:!t}),r=n.from,o=n.to,i=n.piece,u=0,a=0,l=0,c=0,s=e.length;c<s;c++){var f=e[c].from,v=e[c].to,p=e[c].piece;i===p&&r!==f&&o===v&&(u++,W(r)===W(f)&&a++,Q(r)===Q(f)&&l++)}if(u>0)return a>0&&l>0?K(r):l>0?K(r).charAt(1):K(r).charAt(0);return\"\"}(n,t);\"p\"!==n.piece&&(e+=n.piece.toUpperCase()+r),n.flags&(c.CAPTURE|c.EP_CAPTURE)&&(\"p\"===n.piece&&(e+=K(n.from)[0]),e+=\"x\"),e+=K(n.to),n.flags&c.PROMOTION&&(e+=\"=\"+n.promotion.toUpperCase())}return F(n),D()&&(U()?e+=\"#\":e+=\"+\"),j(),e}function L(n){return n.replace(/=/,\"\").replace(/[+#]?[?!]*$/,\"\")}function R(n,t){for(var e=s.a8;e<=s.h1;e++)if(136&e)e+=7;else if(null!=v[e]&&v[e].color===n){var r=v[e],o=e-t,l=o+119;if(i[l]&1<<a[r.type]){if(\"p\"===r.type){if(o>0){if(\"w\"===r.color)return!0}else if(\"b\"===r.color)return!0;continue}if(\"n\"===r.type||\"k\"===r.type)return!0;for(var c=u[l],f=e+c,p=!1;f!==t;){if(null!=v[f]){p=!0;break}f+=c}if(!p)return!0}}return!1}function I(n){return R(V(n),p[n])}function D(){return I(h)}function U(){return D()&&0===P().length}function B(){return!D()&&0===P().length}function $(){for(var n={},t=[],e=0,r=0,o=s.a8;o<=s.h1;o++)if(r=(r+1)%2,136&o)o+=7;else{var i=v[o];i&&(n[i.type]=i.type in n?n[i.type]+1:1,\"b\"===i.type&&t.push(r),e++)}if(2===e)return!0;if(3===e&&(1===n.b||1===n.n))return!0;if(e===n.b+2){var u=0,a=t.length;for(o=0;o<a;o++)u+=t[o];if(0===u||u===a)return!0}return!1}function M(){for(var n=[],t={},e=!1;;){var r=j();if(!r)break;n.push(r)}for(;;){var o=T().split(\" \").slice(0,4).join(\" \");if(t[o]=o in t?t[o]+1:1,t[o]>=3&&(e=!0),!n.length)break;F(n.pop())}return e}function F(n){var t=h,e=V(t);if(function(n){b.push({move:n,kings:{b:p.b,w:p.w},turn:h,castling:{b:g.b,w:g.w},ep_square:d,half_moves:m,move_number:A})}(n),v[n.to]=v[n.from],v[n.from]=null,n.flags&c.EP_CAPTURE&&(\"b\"===h?v[n.to-16]=null:v[n.to+16]=null),n.flags&c.PROMOTION&&(v[n.to]={type:n.promotion,color:t}),\"k\"===v[n.to].type){if(p[v[n.to].color]=n.to,n.flags&c.KSIDE_CASTLE){var r=n.to-1,o=n.to+1;v[r]=v[o],v[o]=null}else if(n.flags&c.QSIDE_CASTLE){r=n.to+1,o=n.to-2;v[r]=v[o],v[o]=null}g[t]=\"\"}if(g[t])for(var i=0,u=f[t].length;i<u;i++)if(n.from===f[t][i].square&&g[t]&f[t][i].flag){g[t]^=f[t][i].flag;break}if(g[e])for(i=0,u=f[e].length;i<u;i++)if(n.to===f[e][i].square&&g[e]&f[e][i].flag){g[e]^=f[e][i].flag;break}d=n.flags&c.BIG_PAWN?\"b\"===h?n.to-16:n.to+16:-1,\"p\"===n.piece||n.flags&(c.CAPTURE|c.EP_CAPTURE)?m=0:m++,\"b\"===h&&A++,h=V(h)}function j(){var n=b.pop();if(null==n)return null;var t=n.move;p=n.kings,h=n.turn,g=n.castling,d=n.ep_square,m=n.half_moves,A=n.move_number;var e,r,o=h,i=V(h);if(v[t.from]=v[t.to],v[t.from].type=t.piece,v[t.to]=null,t.flags&c.CAPTURE)v[t.to]={type:t.captured,color:i};else if(t.flags&c.EP_CAPTURE){var u;u=\"b\"===o?t.to-16:t.to+16,v[u]={type:\"p\",color:i}}t.flags&(c.KSIDE_CASTLE|c.QSIDE_CASTLE)&&(t.flags&c.KSIDE_CASTLE?(e=t.to+1,r=t.to-1):t.flags&c.QSIDE_CASTLE&&(e=t.to-2,r=t.to+1),v[e]=v[r],v[r]=null);return t}function q(n,t){var e=L(n);if(t){var r=e.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(r)var o=r[1],i=r[2],u=r[3],a=r[4]}for(var l=P(),c=0,f=l.length;c<f;c++){if(e===L(G(l[c]))||t&&e===L(G(l[c],!0)))return l[c];if(r&&(!o||o.toLowerCase()==l[c].piece)&&s[i]==l[c].from&&s[u]==l[c].to&&(!a||a.toLowerCase()==l[c].promotion))return l[c]}return null}function W(n){return n>>4}function Q(n){return 15&n}function K(n){var t=Q(n),e=W(n);return\"abcdefgh\".substring(t,t+1)+\"87654321\".substring(e,e+1)}function V(n){return\"w\"===n?\"b\":\"w\"}function Y(n){var t=function n(t){var e=t instanceof Array?[]:{};for(var r in t)e[r]=\"object\"==typeof r?n(t[r]):t[r];return e}(n);t.san=G(t,!1),t.to=K(t.to),t.from=K(t.from);var e=\"\";for(var r in c)c[r]&t.flags&&(e+=l[r]);return t.flags=e,t}function H(n){return n.replace(/^\\s+|\\s+$/g,\"\")}return S(void 0===n?t:n),{WHITE:\"w\",BLACK:\"b\",PAWN:\"p\",KNIGHT:\"n\",BISHOP:\"b\",ROOK:\"r\",QUEEN:\"q\",KING:\"k\",SQUARES:function(){for(var n=[],t=s.a8;t<=s.h1;t++)136&t?t+=7:n.push(K(t));return n}(),FLAGS:l,load:function(n){return S(n)},reset:function(){return y()},moves:function(n){for(var t=P(n),e=[],r=0,o=t.length;r<o;r++)void 0!==n&&\"verbose\"in n&&n.verbose?e.push(Y(t[r])):e.push(G(t[r],!1));return e},in_check:function(){return D()},in_checkmate:function(){return U()},in_stalemate:function(){return B()},in_draw:function(){return m>=100||B()||$()||M()},insufficient_material:function(){return $()},in_threefold_repetition:function(){return M()},game_over:function(){return m>=100||U()||B()||$()||M()},validate_fen:function(n){return N(n)},fen:function(){return T()},board:function(){for(var n=[],t=[],e=s.a8;e<=s.h1;e++)null==v[e]?t.push(null):t.push({type:v[e].type,color:v[e].color}),e+1&136&&(n.push(t),t=[],e+=8);return n},pgn:function(n){var t=\"object\"==typeof n&&\"string\"==typeof n.newline_char?n.newline_char:\"\\n\",e=\"object\"==typeof n&&\"number\"==typeof n.max_width?n.max_width:0,r=[],o=!1;for(var i in C)r.push(\"[\"+i+' \"'+C[i]+'\"]'+t),o=!0;o&&b.length&&r.push(t);for(var u=[];b.length>0;)u.push(j());for(var a=[],l=\"\";u.length>0;){var c=u.pop();b.length||\"b\"!==c.color?\"w\"===c.color&&(l.length&&a.push(l),l=A+\".\"):l=A+\". ...\",l=l+\" \"+G(c,!1),F(c)}if(l.length&&a.push(l),void 0!==C.Result&&a.push(C.Result),0===e)return r.join(\"\")+a.join(\" \");var s=0;for(i=0;i<a.length;i++)s+a[i].length>e&&0!==i?(\" \"===r[r.length-1]&&r.pop(),r.push(t),s=0):0!==i&&(r.push(\" \"),s++),r.push(a[i]),s+=a[i].length;return r.join(\"\")},load_pgn:function(n,t){var r=void 0!==t&&\"sloppy\"in t&&t.sloppy;function o(n){return n.replace(/\\\\/g,\"\\\\\")}var i=\"object\"==typeof t&&\"string\"==typeof t.newline_char?t.newline_char:\"\\r?\\n\",u=new RegExp(\"^(\\\\[((?:\"+o(i)+\")|.)*\\\\])(?:\"+o(i)+\"){2}\"),a=u.test(n)?u.exec(n)[1]:\"\";y();var l=function(n,t){for(var e=\"object\"==typeof t&&\"string\"==typeof t.newline_char?t.newline_char:\"\\r?\\n\",r={},i=n.split(new RegExp(o(e))),u=\"\",a=\"\",l=0;l<i.length;l++)u=i[l].replace(/^\\[([A-Z][A-Za-z]*)\\s.*\\]$/,\"$1\"),a=i[l].replace(/^\\[[A-Za-z]+\\s\"(.*)\"\\]$/,\"$1\"),H(u).length>0&&(r[u]=a);return r}(a,t);for(var c in l)_([c,l[c]]);if(!(\"1\"!==l.SetUp||\"FEN\"in l&&S(l.FEN,!0)))return!1;var s=n.replace(a,\"\").replace(new RegExp(o(i),\"g\"),\" \");s=s.replace(/(\\{[^}]+\\})+?/g,\"\");for(var f=/(\\([^\\(\\)]+\\))+?/g;f.test(s);)s=s.replace(f,\"\");var v=H(s=(s=(s=s.replace(/\\d+\\.(\\.\\.)?/g,\"\")).replace(/\\.\\.\\./g,\"\")).replace(/\\$\\d+/g,\"\")).split(new RegExp(/\\s+/));v=v.join(\",\").replace(/,,+/g,\",\").split(\",\");for(var p=\"\",h=0;h<v.length-1;h++){if(null==(p=q(v[h],r)))return!1;F(p)}if(p=v[v.length-1],e.indexOf(p)>-1)(function(n){for(var t in n)return!0;return!1})(C)&&void 0===C.Result&&_([\"Result\",p]);else{if(null==(p=q(p,r)))return!1;F(p)}return!0},header:function(){return _(arguments)},ascii:function(){return function(){for(var n=\"   +------------------------+\\n\",t=s.a8;t<=s.h1;t++){if(0===Q(t)&&(n+=\" \"+\"87654321\"[W(t)]+\" |\"),null==v[t])n+=\" . \";else{var e=v[t].type;n+=\" \"+(\"w\"===v[t].color?e.toUpperCase():e.toLowerCase())+\" \"}t+1&136&&(n+=\"|\\n\",t+=8)}return n+=\"   +------------------------+\\n\",n+=\"     a  b  c  d  e  f  g  h\\n\"}()},turn:function(){return h},move:function(n,t){var e=void 0!==t&&\"sloppy\"in t&&t.sloppy,r=null;if(\"string\"==typeof n)r=q(n,e);else if(\"object\"==typeof n)for(var o=P(),i=0,u=o.length;i<u;i++)if(n.from===K(o[i].from)&&n.to===K(o[i].to)&&(!(\"promotion\"in o[i])||n.promotion===o[i].promotion)){r=o[i];break}if(!r)return null;var a=Y(r);return F(r),a},undo:function(){var n=j();return n?Y(n):null},clear:function(){return E()},put:function(n,t){return k(n,t)},get:function(n){return O(n)},remove:function(n){return function(n){var t=O(n);return v[s[n]]=null,t&&\"k\"===t.type&&(p[t.color]=-1),x(T()),t}(n)},perft:function(n){return function n(t){for(var e=P({legal:!1}),r=0,o=h,i=0,u=e.length;i<u;i++){if(F(e[i]),!I(o))if(t-1>0)r+=n(t-1);else r++;j()}return r}(n)},square_color:function(n){if(n in s){var t=s[n];return(W(t)+Q(t))%2==0?\"light\":\"dark\"}return null},history:function(n){for(var t=[],e=[],r=(void 0!==n&&\"verbose\"in n&&n.verbose);b.length>0;)t.push(j());for(;t.length>0;){var o=t.pop();r?e.push(Y(o)):e.push(G(o)),F(o)}return e}}};\n/* @license\n * Copyright (c) 2018, Jeff Hlywa (jhlywa@gmail.com)\n * Released under the BSD license\n * https://github.com/jhlywa/chess.js/blob/master/LICENSE\n */t.Chess=o,void 0===(r=function(){return o}.call(t,e,t,n))||(n.exports=r)},function(n,t,e){\"use strict\";e.r(t),e.d(t,\"StringBuilder\",(function(){return a})),e.d(t,\"Utils\",(function(){return l})),e.d(t,\"pgnReader\",(function(){return c}));var r=e(0),o=e.n(r),i=e(1),u=e.n(i);function a(n){let t={};t.strings=new Array(\"\");let e=function(n){n&&t.strings.push(n)};return e(n),{append:e,toString:function(){return t.strings.join(\"\")},isEmpty:function(){for(let n=0;n<t.strings.length;n++)if(t.strings[n].length>0)return!1;return!0},lastChar:function(){return 0===t.strings.length?null:t.strings[t.strings.length-1].slice(-1)}}}function l(){let n=Array.isArray,t=Math.pow(2,53)-1,e=function(n){const e=o(n);return\"number\"==typeof e&&e>=0&&e<=t},r=n||function(n){return Array.isArray(n)},o=(i=\"length\",function(n){return null==n?void 0:n[i]});var i;return{pvEach:function(n,t,r){let o,i;if(t=function(n,t,e){if(void 0===t)return n;switch(null==e?3:e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,o){return n.call(t,e,r,o)};case 4:return function(e,r,o,i){return n.call(t,e,r,o,i)}}return function(){return n.apply(t,arguments)}}(t,r),e(n))for(o=0,i=n.length;o<i;o++)t(n[o],o,n);else{let e=Object.keys(n);for(o=0,i=e.length;o<i;o++)t(n[e[o]],e[o],n)}return n},pvIsElement:function(n){return!(!n||1!==n.nodeType)},pvIsEmpty:function(n){return null==n||(e(n)&&(r(n)||function(n){return\"[object String]\"===toString.call(n)}(n)||function(n){return\"[object Arguments]\"===toString.call(n)}(n))?0===n.length:0===Object.keys(n).length)}}}const c=function(n){const t={};let e=new l;t.configuration=function(n){return void 0===n.pgn&&(void 0===n.pgnFile?n.pgn=\"\":n.pgn=function(n){const t=new XMLHttpRequest;if(t.open(\"GET\",n,!1),t.send(),200===t.status)return t.responseText}(n.pgnFile)),Object.assign({notation:\"short\",position:\"start\",locale:\"en\"},n)}(n),t.startMove=0;const r=new u.a,i=function(){\"start\"===t.configuration.position?r.reset():r.load(t.configuration.position)};t.PGN_TAGS={event:\"the name of the tournament or match event\",site:\"the location of the event\",date:\"the starting date of the game (format: YYYY.MM.TT)\",round:\"the playing round ordinal of the game\",white:\"the player of the white pieces (last name, pre name)\",black:\"the player of the black pieces (last name, pre name)\",result:\"the result of the game (1 - 0, 1/2 - 1/2, 0 - 1)\",board:\"the board number in a team event\",eco:\"ECO-Opening-Key (ECO = 'Encyclopaedia of Chess Openings')\",whitemyelo:\"myELO-score white (at the beginning of the game)\",blackmyelo:\"myELO-score black (at the beginning of the game)\",whitedays:\"rate in days for white\",blackdays:\"rate in days for black\",mychessno:\"identification-no. of the game on the myChess.de - server\",annotator:\"The person providing notes to the game.\",plycount:\"String value denoting total number of half-moves played.\",timecontrol:\"40/7200:3600 (moves per seconds: sudden death seconds)\",time:'Time the game started, in \"HH:MM:SS\" format, in local clock time.',termination:'Gives more details about the termination of the game. It may be \"abandoned\", \"adjudication\" (result determined by third-party adjudication), \"death\", \"emergency\", \"normal\", \"rules infraction\", \"time forfeit\", or \"unterminated\".',mode:'\"OTB\" (over-the-board) \"ICS\" (Internet Chess Server)',setup:'\"0\": position is start position, \"1\": tag FEN defines the position',fen:'Alternative start position, tag SetUp has to be set to \"1\"'},t.PROMOTIONS={q:\"queen\",r:\"rook\",b:\"bishop\",n:\"knight\"},t.NAGs=new Array(220),t.NAGs[1]=\"!\",t.NAGs[2]=\"?\",t.NAGs[3]=\"‼\",t.NAGs[4]=\"⁇\",t.NAGs[5]=\"⁉\",t.NAGs[6]=\"⁈\",t.NAGs[7]=\"□\",t.NAGs[10]=\"=\",t.NAGs[13]=\"∞\",t.NAGs[14]=\"⩲\",t.NAGs[15]=\"⩱\",t.NAGs[16]=\"±\",t.NAGs[17]=\"∓\",t.NAGs[18]=\"+−\",t.NAGs[19]=\"-+\",t.NAGs[22]=\"⨀\",t.NAGs[23]=\"⨀\",t.NAGs[32]=\"⟳\",t.NAGs[33]=\"⟳\",t.NAGs[36]=\"→\",t.NAGs[37]=\"→\",t.NAGs[40]=\"↑\",t.NAGs[41]=\"↑\",t.NAGs[44]=\"=∞\",t.NAGs[132]=\"⇆\",t.NAGs[133]=\"⇆\",t.NAGs[136]=\"⊕\",t.NAGs[140]=\"∆\",t.NAGs[146]=\"N\",t.NAGs[220]=\"D\",t.NAGs[221]=\"D\",t.PGN_NAGS={};for(let n=0;n<t.NAGs.length;n++)t.PGN_NAGS[t.NAGs[n]]=n;t.PGN_NAGS[\"!!\"]=3,t.PGN_NAGS[\"??\"]=4,t.PGN_NAGS[\"!?\"]=5,t.PGN_NAGS[\"?!\"]=6;const c=function(n){let e=\"\";if(null==n)return e;for(let r=0;r<n.length;r++){const o=parseInt(n[r].substring(1));if(220!==o){const n=t.NAGs[o];e+=void 0!==n?n:\"$\"+o}}return e},s=function(n){return\"P\"===n?\"\":n},f=function(n){let e=n.notation;if(void 0===e.row)return e.notation;const r=e.fig?s(e.fig):\"\",o=e.disc?e.disc:\"\",i=e.strike?e.strike:\"\",u=e.check?e.check:\"\",a=e.mate?e.mate:\"\",l=e.promotion?\"=\"+s(e.promotion.substring(1,2)):\"\";return\"short\"===t.configuration.notation?r+o+i+e.col+e.row+l+u+a:\"long\"===t.configuration.notation?r+n.from+(e.strike?i:\"-\")+n.to+l+u+a:void 0};let v=function(){let n=o.a.parse(t.configuration.pgn,{startRule:\"game\"});if(t.tags=n.tags,function(){if(t.tags.SetUp){const n=t.tags.SetUp;t.configuration.position=\"0\"===n?\"start\":t.tags.FEN}t.tags.Result&&(t.endGame=t.tags.Result)}(),p(n.moves),t.configuration.startPlay&&t.configuration.hideMovesBefore){let n=b(t.configuration.startPlay),e=E();t.configuration.startPlay=null,t.configuration.hideMovesBefore=!1,t.configuration.pgn=e,t.configuration.position=n,v()}return t};const p=function(n){const r=n;!function(n){\"string\"==typeof n[n.length-1]&&(t.endGame=n.pop())}(r),y(r),\"b\"===t.configuration.position.split(/\\s+/)[1]&&h(0)&&\"w\"===t.moves[0].turn&&e.pvEach(N(),(function(n){n.turn=\"w\"===n.turn?\"b\":\"w\"})),e.pvEach(N(),(function(n){for(let t=0;t<n.variations.length;t++)n.variations[t]=n.variations[t][0]}))},h=function(n){return N().length>n},g=function(n){if(!h(n))return!0;const t=N()[n];return null===t||(0!==n||!t)&&void 0},d=function(n){return N()[n]},m=function(n,t){if(0===arguments.length){const n=d(0);m(n,0)}else if(n.variationLevel=t,void 0!==n.next&&m(d(n.next),t),n.variations)for(let e=0;e<n.variations.length;e++)m(n.variations[e],t+1)};let A=function(n){const e=function(n,t){const e=n[t];return n.splice(t,1),e};if(g(n))return;if(0===n)return void(t.moves=[]);let r=d(n);if(C(r)){const n=d(d(r.prev).next).variations;for(let t=0;n.length;t++)if(n[t]===r)return e(n,t),void 0!==r.next&&A(r.next),void(N()[r.index]=null)}if(0===r.variations.length)return void 0!==r.next&&null!==r.next&&A(r.next),t.moves[r.prev].next=null,void(t.moves[n]=null);if(r.variations.length>0){void 0!==r.next&&A(r.next);let o=e(r.variations,0),i=o.variationLevel;t.moves[r.prev].next=o.index,t.moves[n]=null,m(o,i-1)}};let b=function(n){let e=function(n){let r=t.moves[n].fen;return t.moves[n]=null,n<=0||e(n-1),r};if(void 0===n)return;if(null===n)return;if(n<=0)return;let r=e(n-1);return d(n).prev=null,r};const C=function(n){return n.variationLevel>0&&(\"number\"!=typeof n.prev||N()[n.prev].next!==n.index)},E=function(){function n(n){n.isEmpty()||\" \"===n.lastChar()||n.append(\" \")}const e=function(t,e){null!=t&&(n(e),e.append(\"{\"),e.append(t),e.append(\"}\"))},r=function(t,e){n(e),e.append(\"(\"),o(t,e),n(e),e.append(\")\")},o=function(t,i){if(null==t)return;!function(n,t){e(n.commentMove,t)}(t,i),function(t,e){n(e),\"w\"===t.turn?(e.append(\"\"+t.moveNumber),e.append(\".\")):C(t)&&(e.append(\"\"+t.moveNumber),e.append(\"...\"))}(t,i),function(n,t){e(n.commentBefore,t)}(t,i),function(t,e){n(e),e.append(t.notation.notation)}(t,i),function(n,t){n.nag&&n.nag.forEach((function(n){t.append(n)}))}(t,i),function(n,t){e(n.commentAfter,t)}(t,i),function(n,t){if((n=>n.commentDiag&&(n.commentDiag.colorArrows&&n.commentDiag.colorArrows.length>0||n.commentDiag.colorFields&&n.commentDiag.colorFields.length>0))(n)){let r=a(\"\"),o=!0;r.append(\"[%csl \"),(n=>n.commentDiag.colorFields||[])(n).forEach(n=>{o?r.append(\"\"):r.append(\",\"),o=!1,r.append(n)}),r.append(\"]\"),o=!0,r.append(\"[%cal \"),(n=>n.commentDiag.colorArrows||[])(n).forEach(n=>{o?r.append(\"\"):r.append(\",\"),o=!1,r.append(n)}),r.append(\"]\"),e(r.toString(),t)}}(t,i),function(n,t){for(let e=0;e<n.variations.length;e++)r(n.variations[e],t)}(t,i);const u=function(n){return n.next?d(n.next):null}(t);o(u,i)},i=a(\"\");let u=0;for(;null===d(u);)u+=1;return l=d(u),o(l,c=i),function(n){t.endGame&&(n.append(\" \"),n.append(t.endGame))}(c),c.toString();var l,c},y=function(n){t.moves=[];let o=-1;const u=function(n,a,l){let c=null!=l?t.moves[l]:null;e.pvEach(n,(function(n,s){o++,n.variationLevel=a,t.moves.push(n),s>0&&(t.moves[o-1].variationLevel>a?(c=function(n,e){for(;e>=0;){if(t.moves[e].variationLevel===n)return t.moves[e];e--}return null}(a,o-1),l=c.index):(l=o-1,c=t.moves[l])),function(n,t,e,r){null!=r&&(e.prev=t,r.next||(r.next=n)),e.index=n}(o,l,n,c),\"number\"==typeof n.prev?r.load(d(n.prev).fen):i();let f=r.move(n.notation.notation,{sloppy:!0});if(null===f)throw\"No legal move: \"+n.notation.notation;let v=r.fen();n.fen=v,n.from=f.from,n.to=f.to,n.notation.notation=f.san,\"c\"===f.flags&&(n.notation.strike=\"x\"),r.in_checkmate()?n.notation.check=\"#\":r.in_check()&&(n.notation.check=\"+\"),n.moveNumber=function(n){const t=n.split(/\\s+/),e=parseInt(t[5],10);return\"b\"===t[1]?e:e-1}(v),e.pvEach(n.variations,(function(n){u(n,a+1,l)}))}))};t.firstMove=n[0],u(n,0,null)};const S=function(n,e){if(0===arguments.length&&(n=d(t.startMove),e=[]),e.push(n),n.variations)for(let t=0;t<n.variations.length;t++)S(n.variations[t],e);return n.next?S(d(n.next),e):e};function N(){return void 0!==t.moves||v(),t.moves}return{configuration:t.configuration,deleteMove:A,deleteMovesBefore:b,isDeleted:g,promoteMove:function(n){const t=function(n){return C(n)?n:t(d(n.prev))},e=d(n);if(void 0===e.variationLevel||0===e.variationLevel)return;const r=t(e),o=d(d(r.prev).next);let i;for(let n=0;n<o.variations.length;n++)o.variations[n]===r&&(i=n);if(i>0){let n=o.variations[i-1];o.variations[i-1]=o.variations[i],o.variations[i]=n}else{let n=o;const t=o.variations;d(o.prev).next=r.index,n.variations=r.variations,r.variations=t,r.variations[0]=n}m()},readMoves:p,findMove:function(n){if(!isNaN(n)){n-=1;let t=d(0);for(;n>0;)n-=1,t=d(t.next);return t}let t=N();for(let e of t){if(e.fen.startsWith(n))return e;if(e.notation.notation===n)return e}},getMoves:N,getOrderedMoves:S,getMove:d,getEndGame:function(){return t.endGame},getTags:function(){return void 0!==t.tags||v(),t.tags},getParser:()=>o.a,movesMainLine:function(){let n=d(t.startMove),e=[];for(e.push(n);n.next;)n=d(n.next),e.push(n);return e},write_pgn:E,nag_to_symbol:c,startVariation:C,startMainLine:function(n){return 0===n.variationLevel&&\"number\"!=typeof n.prev},endVariation:function(n){return n.variationLevel>0&&!n.next},afterMoveWithVariation:function(n){return N()[n.prev]&&N()[n.prev].variations.length>0},changeNag:function(n,e,r){let o=d(e);null==o.nag&&(o.nag=[]);let i=\"$\"===n[0]?n:function(n){const e=t.PGN_NAGS[n];return\"undefined\"===e?null:\"$\"+e}(n);if(r)-1===o.nag.indexOf(i)&&o.nag.push(i);else{let n=o.nag.indexOf(i);n>-1&&o.nag.splice(n,1)}},clearNags:function(n){d(n).nag=[]},addMove:function(n,t){function e(n){i();let t=r.move(n);return void 0===t?null:(void 0===d(0)?null:d(0).notation.notation)===t.san?0:function(n){if(void 0===d(0))return null;let t,e=d(0).variations;for(t in e)if(e[t].notation.notation===n.san)return e[t].moveNumber;return null}(t)}let o=function(n,t){if(null==t)return e(n);let o=d(t);if(void 0===o)return null;r.load(o.fen);let i=r.move(n),u=d(o.next);if(void 0===u)return null;if(u.notation.notation===i.san)return o.next;{let n=d(o.next);for(let t=0;t<n.variations.length;t++){let e=n.variations[t];if(e.notation.notation===i.san)return e.index}}return null}(n,t);if(\"number\"==typeof o)return o;let u={};u.from=n.from,u.to=n.to,u.notation={},u.variations=[],null==t?(i(),u.turn=r.turn(),u.moveNumber=1):(r.load(d(t).fen),u.turn=function(n){return\"w\"===d(n).turn?\"b\":\"w\"}(t),\"w\"===u.turn?u.moveNumber=d(t).moveNumber+1:u.moveNumber=d(t).moveNumber);let a=r.move(n);u.fen=r.fen(),\"O\"!==a.san.substring(0,1)?(u.notation.notation=a.san,u.notation.col=a.to.substring(0,1),u.notation.row=a.to.substring(1,2),\"p\"!==a.piece&&(u.notation.fig=a.piece.charAt(0).toUpperCase()),a.promotion&&(u.notation.promotion=\"=\"+a.promotion.toUpperCase()),(a.flags.includes(r.FLAGS.CAPTURE)||a.flags.includes(r.FLAGS.EP_CAPTURE))&&(u.notation.strike=\"x\"),u.notation.ep=a.flags.includes(r.FLAGS.EP_CAPTURE),r.in_check()&&(r.in_checkmate()?u.notation.mate=\"#\":u.notation.check=\"+\")):u.notation.notation=a.san,N().push(u),u.prev=t;let l=N().length-1;return u.index=l,function(n,t,e){let r=d(t);if(void 0===r){if(0===e)return;return d(0).variations.push(n),void(n.variationLevel=1)}r.next?(d(r.next).variations.push(n),n.variationLevel=(r.variationLevel?r.variationLevel:0)+1,\"b\"===n.turn&&(n.moveNumber=r.moveNumber)):(r.next=e,n.variationLevel=r.variationLevel)}(u,t,l),l},has_diagram_nag:function(n){return void 0!==n.nag&&(null!=n.nag&&n.nag.indexOf(\"$220\")>-1)},PGN_NAGS:t.PGN_NAGS,PROMOTIONS:t.PROMOTIONS,NAGS:t.NAGs,san:f,sanWithNags:function(n){let t=f(n);return n.nag&&(t+=c(n.nag)),t},game:r,load_pgn:v,possibleMoves:function(n){const t={};return n.SQUARES.forEach(e=>{const r=n.moves({square:e,verbose:!0});r.length&&(t[e]=r.map(n=>n.to))}),t},setShapes:function(n,t){n.commentDiag||(n.commentDiag={}),n.commentDiag.colorArrows=[],n.commentDiag.colorFields=[],t.forEach(t=>{if(t.dest){let e=t.brush.slice(0,1).toUpperCase(),r=t.orig+t.dest;n.commentDiag.colorArrows.push(e+r)}else{let e=t.brush.slice(0,1).toUpperCase(),r=t.orig;n.commentDiag.colorFields.push(e+r)}})}}}}])}));\n//# sourceMappingURL=pgn.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst board_1 = require(\"./board\");\nconst fen_1 = require(\"./fen\");\nfunction configure(state, config) {\n    if (config.movable && config.movable.dests)\n        state.movable.dests = undefined;\n    merge(state, config);\n    if (config.fen) {\n        state.pieces = fen_1.read(config.fen);\n        state.drawable.shapes = [];\n    }\n    if (config.hasOwnProperty('check'))\n        board_1.setCheck(state, config.check || false);\n    if (config.hasOwnProperty('lastMove') && !config.lastMove)\n        state.lastMove = undefined;\n    else if (config.lastMove)\n        state.lastMove = config.lastMove;\n    if (state.selected)\n        board_1.setSelected(state, state.selected);\n    if (!state.animation.duration || state.animation.duration < 100)\n        state.animation.enabled = false;\n    if (!state.movable.rookCastle && state.movable.dests) {\n        const rank = state.movable.color === 'white' ? 1 : 8, kingStartPos = 'e' + rank, dests = state.movable.dests[kingStartPos], king = state.pieces[kingStartPos];\n        if (!dests || !king || king.role !== 'king')\n            return;\n        state.movable.dests[kingStartPos] = dests.filter(d => !((d === 'a' + rank) && dests.indexOf('c' + rank) !== -1) &&\n            !((d === 'h' + rank) && dests.indexOf('g' + rank) !== -1));\n    }\n}\nexports.configure = configure;\n;\nfunction merge(base, extend) {\n    for (let key in extend) {\n        if (isObject(base[key]) && isObject(extend[key]))\n            merge(base[key], extend[key]);\n        else\n            base[key] = extend[key];\n    }\n}\nfunction isObject(o) {\n    return typeof o === 'object';\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlnLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL2NvbmZpZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLG1DQUErQztBQUMvQywrQkFBdUM7QUEwRnZDLFNBQWdCLFNBQVMsQ0FBQyxLQUFZLEVBQUUsTUFBYztJQUdwRCxJQUFJLE1BQU0sQ0FBQyxPQUFPLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLO1FBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDO0lBRTVFLEtBQUssQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFHckIsSUFBSSxNQUFNLENBQUMsR0FBRyxFQUFFO1FBQ2QsS0FBSyxDQUFDLE1BQU0sR0FBRyxVQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ25DLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztLQUM1QjtJQUdELElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUM7UUFBRSxnQkFBUSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxDQUFDO0lBQzNFLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRO1FBQUUsS0FBSyxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUM7U0FJakYsSUFBSSxNQUFNLENBQUMsUUFBUTtRQUFFLEtBQUssQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQztJQUczRCxJQUFJLEtBQUssQ0FBQyxRQUFRO1FBQUUsbUJBQVcsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBR3ZELElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxHQUFHO1FBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO0lBRWpHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFVBQVUsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRTtRQUNwRCxNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUNwRCxZQUFZLEdBQUcsR0FBRyxHQUFHLElBQUksRUFDekIsS0FBSyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxFQUN6QyxJQUFJLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNsQyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssTUFBTTtZQUFFLE9BQU87UUFDcEQsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUNuRCxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxHQUFHLElBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ2pFLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEdBQUcsSUFBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FDdEUsQ0FBQztLQUNIO0FBQ0gsQ0FBQztBQXRDRCw4QkFzQ0M7QUFBQSxDQUFDO0FBRUYsU0FBUyxLQUFLLENBQUMsSUFBUyxFQUFFLE1BQVc7SUFDbkMsS0FBSyxJQUFJLEdBQUcsSUFBSSxNQUFNLEVBQUU7UUFDdEIsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7O1lBQzNFLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDOUI7QUFDSCxDQUFDO0FBRUQsU0FBUyxRQUFRLENBQUMsQ0FBTTtJQUN0QixPQUFPLE9BQU8sQ0FBQyxLQUFLLFFBQVEsQ0FBQztBQUMvQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuL3N0YXRlJ1xuaW1wb3J0IHsgc2V0Q2hlY2ssIHNldFNlbGVjdGVkIH0gZnJvbSAnLi9ib2FyZCdcbmltcG9ydCB7IHJlYWQgYXMgZmVuUmVhZCB9IGZyb20gJy4vZmVuJ1xuaW1wb3J0IHsgRHJhd1NoYXBlLCBEcmF3QnJ1c2ggfSBmcm9tICcuL2RyYXcnXG5pbXBvcnQgKiBhcyBjZyBmcm9tICcuL3R5cGVzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpZyB7XG4gIGZlbj86IGNnLkZFTjsgLy8gY2hlc3MgcG9zaXRpb24gaW4gRm9yc3l0aCBub3RhdGlvblxuICBvcmllbnRhdGlvbj86IGNnLkNvbG9yOyAvLyBib2FyZCBvcmllbnRhdGlvbi4gd2hpdGUgfCBibGFja1xuICB0dXJuQ29sb3I/OiBjZy5Db2xvcjsgLy8gdHVybiB0byBwbGF5LiB3aGl0ZSB8IGJsYWNrXG4gIGNoZWNrPzogY2cuQ29sb3IgfCBib29sZWFuOyAvLyB0cnVlIGZvciBjdXJyZW50IGNvbG9yLCBmYWxzZSB0byB1bnNldFxuICBsYXN0TW92ZT86IGNnLktleVtdOyAvLyBzcXVhcmVzIHBhcnQgb2YgdGhlIGxhc3QgbW92ZSBbXCJjM1wiLCBcImM0XCJdXG4gIHNlbGVjdGVkPzogY2cuS2V5OyAvLyBzcXVhcmUgY3VycmVudGx5IHNlbGVjdGVkIFwiYTFcIlxuICBjb29yZGluYXRlcz86IGJvb2xlYW47IC8vIGluY2x1ZGUgY29vcmRzIGF0dHJpYnV0ZXNcbiAgYXV0b0Nhc3RsZT86IGJvb2xlYW47IC8vIGltbWVkaWF0ZWx5IGNvbXBsZXRlIHRoZSBjYXN0bGUgYnkgbW92aW5nIHRoZSByb29rIGFmdGVyIGtpbmcgbW92ZVxuICB2aWV3T25seT86IGJvb2xlYW47IC8vIGRvbid0IGJpbmQgZXZlbnRzOiB0aGUgdXNlciB3aWxsIG5ldmVyIGJlIGFibGUgdG8gbW92ZSBwaWVjZXMgYXJvdW5kXG4gIGRpc2FibGVDb250ZXh0TWVudT86IGJvb2xlYW47IC8vIGJlY2F1c2Ugd2hvIG5lZWRzIGEgY29udGV4dCBtZW51IG9uIGEgY2hlc3Nib2FyZFxuICByZXNpemFibGU/OiBib29sZWFuOyAvLyBsaXN0ZW5zIHRvIGNoZXNzZ3JvdW5kLnJlc2l6ZSBvbiBkb2N1bWVudC5ib2R5IHRvIGNsZWFyIGJvdW5kcyBjYWNoZVxuICBhZGRQaWVjZVpJbmRleD86IGJvb2xlYW47IC8vIGFkZHMgei1pbmRleCB2YWx1ZXMgdG8gcGllY2VzIChmb3IgM0QpXG4gIC8vIHBpZWNlS2V5OiBib29sZWFuOyAvLyBhZGQgYSBkYXRhLWtleSBhdHRyaWJ1dGUgdG8gcGllY2UgZWxlbWVudHNcbiAgaGlnaGxpZ2h0Pzoge1xuICAgIGxhc3RNb3ZlPzogYm9vbGVhbjsgLy8gYWRkIGxhc3QtbW92ZSBjbGFzcyB0byBzcXVhcmVzXG4gICAgY2hlY2s/OiBib29sZWFuOyAvLyBhZGQgY2hlY2sgY2xhc3MgdG8gc3F1YXJlc1xuICB9O1xuICBhbmltYXRpb24/OiB7XG4gICAgZW5hYmxlZD86IGJvb2xlYW47XG4gICAgZHVyYXRpb24/OiBudW1iZXI7XG4gIH07XG4gIG1vdmFibGU/OiB7XG4gICAgZnJlZT86IGJvb2xlYW47IC8vIGFsbCBtb3ZlcyBhcmUgdmFsaWQgLSBib2FyZCBlZGl0b3JcbiAgICBjb2xvcj86IGNnLkNvbG9yIHwgJ2JvdGgnOyAvLyBjb2xvciB0aGF0IGNhbiBtb3ZlLiB3aGl0ZSB8IGJsYWNrIHwgYm90aCB8IHVuZGVmaW5lZFxuICAgIGRlc3RzPzoge1xuICAgICAgW2tleTogc3RyaW5nXTogY2cuS2V5W11cbiAgICB9OyAvLyB2YWxpZCBtb3Zlcy4ge1wiYTJcIiBbXCJhM1wiIFwiYTRcIl0gXCJiMVwiIFtcImEzXCIgXCJjM1wiXX1cbiAgICBzaG93RGVzdHM/OiBib29sZWFuOyAvLyB3aGV0aGVyIHRvIGFkZCB0aGUgbW92ZS1kZXN0IGNsYXNzIG9uIHNxdWFyZXNcbiAgICBldmVudHM/OiB7XG4gICAgICBhZnRlcj86IChvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSwgbWV0YWRhdGE6IGNnLk1vdmVNZXRhZGF0YSkgPT4gdm9pZDsgLy8gY2FsbGVkIGFmdGVyIHRoZSBtb3ZlIGhhcyBiZWVuIHBsYXllZFxuICAgICAgYWZ0ZXJOZXdQaWVjZT86IChyb2xlOiBjZy5Sb2xlLCBrZXk6IGNnLktleSwgbWV0YWRhdGE6IGNnLk1vdmVNZXRhZGF0YSkgPT4gdm9pZDsgLy8gY2FsbGVkIGFmdGVyIGEgbmV3IHBpZWNlIGlzIGRyb3BwZWQgb24gdGhlIGJvYXJkXG4gICAgfTtcbiAgICByb29rQ2FzdGxlPzogYm9vbGVhbiAvLyBjYXN0bGUgYnkgbW92aW5nIHRoZSBraW5nIHRvIHRoZSByb29rXG4gIH07XG4gIHByZW1vdmFibGU/OiB7XG4gICAgZW5hYmxlZD86IGJvb2xlYW47IC8vIGFsbG93IHByZW1vdmVzIGZvciBjb2xvciB0aGF0IGNhbiBub3QgbW92ZVxuICAgIHNob3dEZXN0cz86IGJvb2xlYW47IC8vIHdoZXRoZXIgdG8gYWRkIHRoZSBwcmVtb3ZlLWRlc3QgY2xhc3Mgb24gc3F1YXJlc1xuICAgIGNhc3RsZT86IGJvb2xlYW47IC8vIHdoZXRoZXIgdG8gYWxsb3cga2luZyBjYXN0bGUgcHJlbW92ZXNcbiAgICBkZXN0cz86IGNnLktleVtdOyAvLyBwcmVtb3ZlIGRlc3RpbmF0aW9ucyBmb3IgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgZXZlbnRzPzoge1xuICAgICAgc2V0PzogKG9yaWc6IGNnLktleSwgZGVzdDogY2cuS2V5LCBtZXRhZGF0YT86IGNnLlNldFByZW1vdmVNZXRhZGF0YSkgPT4gdm9pZDsgLy8gY2FsbGVkIGFmdGVyIHRoZSBwcmVtb3ZlIGhhcyBiZWVuIHNldFxuICAgICAgdW5zZXQ/OiAoKSA9PiB2b2lkOyAgLy8gY2FsbGVkIGFmdGVyIHRoZSBwcmVtb3ZlIGhhcyBiZWVuIHVuc2V0XG4gICAgfVxuICB9O1xuICBwcmVkcm9wcGFibGU/OiB7XG4gICAgZW5hYmxlZD86IGJvb2xlYW47IC8vIGFsbG93IHByZWRyb3BzIGZvciBjb2xvciB0aGF0IGNhbiBub3QgbW92ZVxuICAgIGV2ZW50cz86IHtcbiAgICAgIHNldD86IChyb2xlOiBjZy5Sb2xlLCBrZXk6IGNnLktleSkgPT4gdm9pZDsgLy8gY2FsbGVkIGFmdGVyIHRoZSBwcmVkcm9wIGhhcyBiZWVuIHNldFxuICAgICAgdW5zZXQ/OiAoKSA9PiB2b2lkOyAvLyBjYWxsZWQgYWZ0ZXIgdGhlIHByZWRyb3AgaGFzIGJlZW4gdW5zZXRcbiAgICB9XG4gIH07XG4gIGRyYWdnYWJsZT86IHtcbiAgICBlbmFibGVkPzogYm9vbGVhbjsgLy8gYWxsb3cgbW92ZXMgJiBwcmVtb3ZlcyB0byB1c2UgZHJhZyduIGRyb3BcbiAgICBkaXN0YW5jZT86IG51bWJlcjsgLy8gbWluaW11bSBkaXN0YW5jZSB0byBpbml0aWF0ZSBhIGRyYWc7IGluIHBpeGVsc1xuICAgIGF1dG9EaXN0YW5jZT86IGJvb2xlYW47IC8vIGxldHMgY2hlc3Nncm91bmQgc2V0IGRpc3RhbmNlIHRvIHplcm8gd2hlbiB1c2VyIGRyYWdzIHBpZWNlc1xuICAgIGNlbnRlclBpZWNlPzogYm9vbGVhbjsgLy8gY2VudGVyIHRoZSBwaWVjZSBvbiBjdXJzb3IgYXQgZHJhZyBzdGFydFxuICAgIHNob3dHaG9zdD86IGJvb2xlYW47IC8vIHNob3cgZ2hvc3Qgb2YgcGllY2UgYmVpbmcgZHJhZ2dlZFxuICAgIGRlbGV0ZU9uRHJvcE9mZj86IGJvb2xlYW47IC8vIGRlbGV0ZSBhIHBpZWNlIHdoZW4gaXQgaXMgZHJvcHBlZCBvZmYgdGhlIGJvYXJkXG4gIH07XG4gIHNlbGVjdGFibGU/OiB7XG4gICAgLy8gZGlzYWJsZSB0byBlbmZvcmNlIGRyYWdnaW5nIG92ZXIgY2xpY2stY2xpY2sgbW92ZVxuICAgIGVuYWJsZWQ/OiBib29sZWFuXG4gIH07XG4gIGV2ZW50cz86IHtcbiAgICBjaGFuZ2U/OiAoKSA9PiB2b2lkOyAvLyBjYWxsZWQgYWZ0ZXIgdGhlIHNpdHVhdGlvbiBjaGFuZ2VzIG9uIHRoZSBib2FyZFxuICAgIC8vIGNhbGxlZCBhZnRlciBhIHBpZWNlIGhhcyBiZWVuIG1vdmVkLlxuICAgIC8vIGNhcHR1cmVkUGllY2UgaXMgdW5kZWZpbmVkIG9yIGxpa2Uge2NvbG9yOiAnd2hpdGUnOyAncm9sZSc6ICdxdWVlbid9XG4gICAgbW92ZT86IChvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSwgY2FwdHVyZWRQaWVjZT86IGNnLlBpZWNlKSA9PiB2b2lkO1xuICAgIGRyb3BOZXdQaWVjZT86IChwaWVjZTogY2cuUGllY2UsIGtleTogY2cuS2V5KSA9PiB2b2lkO1xuICAgIHNlbGVjdD86IChrZXk6IGNnLktleSkgPT4gdm9pZDsgLy8gY2FsbGVkIHdoZW4gYSBzcXVhcmUgaXMgc2VsZWN0ZWRcbiAgICBpbnNlcnQ/OiAoZWxlbWVudHM6IGNnLkVsZW1lbnRzKSA9PiB2b2lkOyAvLyB3aGVuIHRoZSBib2FyZCBET00gaGFzIGJlZW4gKHJlKWluc2VydGVkXG4gIH07XG4gIGRyYXdhYmxlPzoge1xuICAgIGVuYWJsZWQ/OiBib29sZWFuOyAvLyBjYW4gZHJhd1xuICAgIHZpc2libGU/OiBib29sZWFuOyAvLyBjYW4gdmlld1xuICAgIGVyYXNlT25DbGljaz86IGJvb2xlYW47XG4gICAgc2hhcGVzPzogRHJhd1NoYXBlW107XG4gICAgYXV0b1NoYXBlcz86IERyYXdTaGFwZVtdO1xuICAgIGJydXNoZXM/OiBEcmF3QnJ1c2hbXTtcbiAgICBwaWVjZXM/OiB7XG4gICAgICBiYXNlVXJsPzogc3RyaW5nO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29uZmlndXJlKHN0YXRlOiBTdGF0ZSwgY29uZmlnOiBDb25maWcpIHtcblxuICAvLyBkb24ndCBtZXJnZSBkZXN0aW5hdGlvbnMuIEp1c3Qgb3ZlcnJpZGUuXG4gIGlmIChjb25maWcubW92YWJsZSAmJiBjb25maWcubW92YWJsZS5kZXN0cykgc3RhdGUubW92YWJsZS5kZXN0cyA9IHVuZGVmaW5lZDtcblxuICBtZXJnZShzdGF0ZSwgY29uZmlnKTtcblxuICAvLyBpZiBhIGZlbiB3YXMgcHJvdmlkZWQsIHJlcGxhY2UgdGhlIHBpZWNlc1xuICBpZiAoY29uZmlnLmZlbikge1xuICAgIHN0YXRlLnBpZWNlcyA9IGZlblJlYWQoY29uZmlnLmZlbik7XG4gICAgc3RhdGUuZHJhd2FibGUuc2hhcGVzID0gW107XG4gIH1cblxuICAvLyBhcHBseSBjb25maWcgdmFsdWVzIHRoYXQgY291bGQgYmUgdW5kZWZpbmVkIHlldCBtZWFuaW5nZnVsXG4gIGlmIChjb25maWcuaGFzT3duUHJvcGVydHkoJ2NoZWNrJykpIHNldENoZWNrKHN0YXRlLCBjb25maWcuY2hlY2sgfHwgZmFsc2UpO1xuICBpZiAoY29uZmlnLmhhc093blByb3BlcnR5KCdsYXN0TW92ZScpICYmICFjb25maWcubGFzdE1vdmUpIHN0YXRlLmxhc3RNb3ZlID0gdW5kZWZpbmVkO1xuICAvLyBpbiBjYXNlIG9mIFpIIGRyb3AgbGFzdCBtb3ZlLCB0aGVyZSdzIGEgc2luZ2xlIHNxdWFyZS5cbiAgLy8gaWYgdGhlIHByZXZpb3VzIGxhc3QgbW92ZSBoYWQgdHdvIHNxdWFyZXMsXG4gIC8vIHRoZSBtZXJnZSBhbGdvcml0aG0gd2lsbCBpbmNvcnJlY3RseSBrZWVwIHRoZSBzZWNvbmQgc3F1YXJlLlxuICBlbHNlIGlmIChjb25maWcubGFzdE1vdmUpIHN0YXRlLmxhc3RNb3ZlID0gY29uZmlnLmxhc3RNb3ZlO1xuXG4gIC8vIGZpeCBtb3ZlL3ByZW1vdmUgZGVzdHNcbiAgaWYgKHN0YXRlLnNlbGVjdGVkKSBzZXRTZWxlY3RlZChzdGF0ZSwgc3RhdGUuc2VsZWN0ZWQpO1xuXG4gIC8vIG5vIG5lZWQgZm9yIHN1Y2ggc2hvcnQgYW5pbWF0aW9uc1xuICBpZiAoIXN0YXRlLmFuaW1hdGlvbi5kdXJhdGlvbiB8fCBzdGF0ZS5hbmltYXRpb24uZHVyYXRpb24gPCAxMDApIHN0YXRlLmFuaW1hdGlvbi5lbmFibGVkID0gZmFsc2U7XG5cbiAgaWYgKCFzdGF0ZS5tb3ZhYmxlLnJvb2tDYXN0bGUgJiYgc3RhdGUubW92YWJsZS5kZXN0cykge1xuICAgIGNvbnN0IHJhbmsgPSBzdGF0ZS5tb3ZhYmxlLmNvbG9yID09PSAnd2hpdGUnID8gMSA6IDgsXG4gICAga2luZ1N0YXJ0UG9zID0gJ2UnICsgcmFuayxcbiAgICBkZXN0cyA9IHN0YXRlLm1vdmFibGUuZGVzdHNba2luZ1N0YXJ0UG9zXSxcbiAgICBraW5nID0gc3RhdGUucGllY2VzW2tpbmdTdGFydFBvc107XG4gICAgaWYgKCFkZXN0cyB8fCAha2luZyB8fCBraW5nLnJvbGUgIT09ICdraW5nJykgcmV0dXJuO1xuICAgIHN0YXRlLm1vdmFibGUuZGVzdHNba2luZ1N0YXJ0UG9zXSA9IGRlc3RzLmZpbHRlcihkID0+XG4gICAgICAhKChkID09PSAnYScgKyByYW5rKSAmJiBkZXN0cy5pbmRleE9mKCdjJyArIHJhbmsgYXMgY2cuS2V5KSAhPT0gLTEpICYmXG4gICAgICAgICEoKGQgPT09ICdoJyArIHJhbmspICYmIGRlc3RzLmluZGV4T2YoJ2cnICsgcmFuayBhcyBjZy5LZXkpICE9PSAtMSlcbiAgICApO1xuICB9XG59O1xuXG5mdW5jdGlvbiBtZXJnZShiYXNlOiBhbnksIGV4dGVuZDogYW55KSB7XG4gIGZvciAobGV0IGtleSBpbiBleHRlbmQpIHtcbiAgICBpZiAoaXNPYmplY3QoYmFzZVtrZXldKSAmJiBpc09iamVjdChleHRlbmRba2V5XSkpIG1lcmdlKGJhc2Vba2V5XSwgZXh0ZW5kW2tleV0pO1xuICAgIGVsc2UgYmFzZVtrZXldID0gZXh0ZW5kW2tleV07XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNPYmplY3QobzogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiB0eXBlb2YgbyA9PT0gJ29iamVjdCc7XG59XG4iXX0=","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util = require(\"./util\");\nfunction anim(mutation, state) {\n    return state.animation.enabled ? animate(mutation, state) : render(mutation, state);\n}\nexports.anim = anim;\nfunction render(mutation, state) {\n    const result = mutation(state);\n    state.dom.redraw();\n    return result;\n}\nexports.render = render;\nfunction makePiece(key, piece) {\n    return {\n        key: key,\n        pos: util.key2pos(key),\n        piece: piece\n    };\n}\nfunction closer(piece, pieces) {\n    return pieces.sort((p1, p2) => {\n        return util.distanceSq(piece.pos, p1.pos) - util.distanceSq(piece.pos, p2.pos);\n    })[0];\n}\nfunction computePlan(prevPieces, current) {\n    const anims = {}, animedOrigs = [], fadings = {}, missings = [], news = [], prePieces = {};\n    let curP, preP, i, vector;\n    for (i in prevPieces) {\n        prePieces[i] = makePiece(i, prevPieces[i]);\n    }\n    for (const key of util.allKeys) {\n        curP = current.pieces[key];\n        preP = prePieces[key];\n        if (curP) {\n            if (preP) {\n                if (!util.samePiece(curP, preP.piece)) {\n                    missings.push(preP);\n                    news.push(makePiece(key, curP));\n                }\n            }\n            else\n                news.push(makePiece(key, curP));\n        }\n        else if (preP)\n            missings.push(preP);\n    }\n    news.forEach(newP => {\n        preP = closer(newP, missings.filter(p => util.samePiece(newP.piece, p.piece)));\n        if (preP) {\n            vector = [preP.pos[0] - newP.pos[0], preP.pos[1] - newP.pos[1]];\n            anims[newP.key] = vector.concat(vector);\n            animedOrigs.push(preP.key);\n        }\n    });\n    missings.forEach(p => {\n        if (!util.containsX(animedOrigs, p.key))\n            fadings[p.key] = p.piece;\n    });\n    return {\n        anims: anims,\n        fadings: fadings\n    };\n}\nfunction step(state, now) {\n    const cur = state.animation.current;\n    if (cur === undefined) {\n        if (!state.dom.destroyed)\n            state.dom.redrawNow();\n        return;\n    }\n    const rest = 1 - (now - cur.start) * cur.frequency;\n    if (rest <= 0) {\n        state.animation.current = undefined;\n        state.dom.redrawNow();\n    }\n    else {\n        const ease = easing(rest);\n        for (let i in cur.plan.anims) {\n            const cfg = cur.plan.anims[i];\n            cfg[2] = cfg[0] * ease;\n            cfg[3] = cfg[1] * ease;\n        }\n        state.dom.redrawNow(true);\n        requestAnimationFrame((now = performance.now()) => step(state, now));\n    }\n}\nfunction animate(mutation, state) {\n    const prevPieces = Object.assign({}, state.pieces);\n    const result = mutation(state);\n    const plan = computePlan(prevPieces, state);\n    if (!isObjectEmpty(plan.anims) || !isObjectEmpty(plan.fadings)) {\n        const alreadyRunning = state.animation.current && state.animation.current.start;\n        state.animation.current = {\n            start: performance.now(),\n            frequency: 1 / state.animation.duration,\n            plan: plan\n        };\n        if (!alreadyRunning)\n            step(state, performance.now());\n    }\n    else {\n        state.dom.redraw();\n    }\n    return result;\n}\nfunction isObjectEmpty(o) {\n    for (let _ in o)\n        return false;\n    return true;\n}\nfunction easing(t) {\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5pbS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNyYy9hbmltLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsK0JBQThCO0FBNEI5QixTQUFnQixJQUFJLENBQUksUUFBcUIsRUFBRSxLQUFZO0lBQ3pELE9BQU8sS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDdEYsQ0FBQztBQUZELG9CQUVDO0FBRUQsU0FBZ0IsTUFBTSxDQUFJLFFBQXFCLEVBQUUsS0FBWTtJQUMzRCxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDL0IsS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNuQixPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDO0FBSkQsd0JBSUM7QUFXRCxTQUFTLFNBQVMsQ0FBQyxHQUFXLEVBQUUsS0FBZTtJQUM3QyxPQUFPO1FBQ0wsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7UUFDdEIsS0FBSyxFQUFFLEtBQUs7S0FDYixDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMsTUFBTSxDQUFDLEtBQWdCLEVBQUUsTUFBbUI7SUFDbkQsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFO1FBQzVCLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pGLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ1Is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dXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9zdGF0ZSdcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi91dGlsJ1xuaW1wb3J0ICogYXMgY2cgZnJvbSAnLi90eXBlcydcblxuZXhwb3J0IHR5cGUgTXV0YXRpb248QT4gPSAoc3RhdGU6IFN0YXRlKSA9PiBBO1xuXG4vLyAwLDEgYW5pbWF0aW9uIGdvYWxcbi8vIDIsMyBhbmltYXRpb24gY3VycmVudCBzdGF0dXNcbmV4cG9ydCB0eXBlIEFuaW1WZWN0b3IgPSBjZy5OdW1iZXJRdWFkXG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5pbVZlY3RvcnMge1xuICBba2V5OiBzdHJpbmddOiBBbmltVmVjdG9yXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5pbUZhZGluZ3Mge1xuICBba2V5OiBzdHJpbmddOiBjZy5QaWVjZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFuaW1QbGFuIHtcbiAgYW5pbXM6IEFuaW1WZWN0b3JzO1xuICBmYWRpbmdzOiBBbmltRmFkaW5ncztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbmltQ3VycmVudCB7XG4gIHN0YXJ0OiBET01IaWdoUmVzVGltZVN0YW1wO1xuICBmcmVxdWVuY3k6IGNnLktIejtcbiAgcGxhbjogQW5pbVBsYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbmltPEE+KG11dGF0aW9uOiBNdXRhdGlvbjxBPiwgc3RhdGU6IFN0YXRlKTogQSB7XG4gIHJldHVybiBzdGF0ZS5hbmltYXRpb24uZW5hYmxlZCA/IGFuaW1hdGUobXV0YXRpb24sIHN0YXRlKSA6IHJlbmRlcihtdXRhdGlvbiwgc3RhdGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyPEE+KG11dGF0aW9uOiBNdXRhdGlvbjxBPiwgc3RhdGU6IFN0YXRlKTogQSB7XG4gIGNvbnN0IHJlc3VsdCA9IG11dGF0aW9uKHN0YXRlKTtcbiAgc3RhdGUuZG9tLnJlZHJhdygpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5pbnRlcmZhY2UgQW5pbVBpZWNlIHtcbiAga2V5OiBjZy5LZXk7XG4gIHBvczogY2cuUG9zO1xuICBwaWVjZTogY2cuUGllY2U7XG59XG5pbnRlcmZhY2UgQW5pbVBpZWNlcyB7XG4gIFtrZXk6IHN0cmluZ106IEFuaW1QaWVjZVxufVxuXG5mdW5jdGlvbiBtYWtlUGllY2Uoa2V5OiBjZy5LZXksIHBpZWNlOiBjZy5QaWVjZSk6IEFuaW1QaWVjZSB7XG4gIHJldHVybiB7XG4gICAga2V5OiBrZXksXG4gICAgcG9zOiB1dGlsLmtleTJwb3Moa2V5KSxcbiAgICBwaWVjZTogcGllY2VcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xvc2VyKHBpZWNlOiBBbmltUGllY2UsIHBpZWNlczogQW5pbVBpZWNlW10pOiBBbmltUGllY2Uge1xuICByZXR1cm4gcGllY2VzLnNvcnQoKHAxLCBwMikgPT4ge1xuICAgIHJldHVybiB1dGlsLmRpc3RhbmNlU3EocGllY2UucG9zLCBwMS5wb3MpIC0gdXRpbC5kaXN0YW5jZVNxKHBpZWNlLnBvcywgcDIucG9zKTtcbiAgfSlbMF07XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVQbGFuKHByZXZQaWVjZXM6IGNnLlBpZWNlcywgY3VycmVudDogU3RhdGUpOiBBbmltUGxhbiB7XG4gIGNvbnN0IGFuaW1zOiBBbmltVmVjdG9ycyA9IHt9LFxuICBhbmltZWRPcmlnczogY2cuS2V5W10gPSBbXSxcbiAgZmFkaW5nczogQW5pbUZhZGluZ3MgPSB7fSxcbiAgbWlzc2luZ3M6IEFuaW1QaWVjZVtdID0gW10sXG4gIG5ld3M6IEFuaW1QaWVjZVtdID0gW10sXG4gIHByZVBpZWNlczogQW5pbVBpZWNlcyA9IHt9O1xuICBsZXQgY3VyUDogY2cuUGllY2UgfCB1bmRlZmluZWQsIHByZVA6IEFuaW1QaWVjZSB8IHVuZGVmaW5lZCwgaTogYW55LCB2ZWN0b3I6IGNnLk51bWJlclBhaXI7XG4gIGZvciAoaSBpbiBwcmV2UGllY2VzKSB7XG4gICAgcHJlUGllY2VzW2ldID0gbWFrZVBpZWNlKGkgYXMgY2cuS2V5LCBwcmV2UGllY2VzW2ldISk7XG4gIH1cbiAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5hbGxLZXlzKSB7XG4gICAgY3VyUCA9IGN1cnJlbnQucGllY2VzW2tleV07XG4gICAgcHJlUCA9IHByZVBpZWNlc1trZXldO1xuICAgIGlmIChjdXJQKSB7XG4gICAgICBpZiAocHJlUCkge1xuICAgICAgICBpZiAoIXV0aWwuc2FtZVBpZWNlKGN1clAsIHByZVAucGllY2UpKSB7XG4gICAgICAgICAgbWlzc2luZ3MucHVzaChwcmVQKTtcbiAgICAgICAgICBuZXdzLnB1c2gobWFrZVBpZWNlKGtleSwgY3VyUCkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgbmV3cy5wdXNoKG1ha2VQaWVjZShrZXksIGN1clApKTtcbiAgICB9IGVsc2UgaWYgKHByZVApIG1pc3NpbmdzLnB1c2gocHJlUCk7XG4gIH1cbiAgbmV3cy5mb3JFYWNoKG5ld1AgPT4ge1xuICAgIHByZVAgPSBjbG9zZXIobmV3UCwgbWlzc2luZ3MuZmlsdGVyKHAgPT4gdXRpbC5zYW1lUGllY2UobmV3UC5waWVjZSwgcC5waWVjZSkpKTtcbiAgICBpZiAocHJlUCkge1xuICAgICAgdmVjdG9yID0gW3ByZVAucG9zWzBdIC0gbmV3UC5wb3NbMF0sIHByZVAucG9zWzFdIC0gbmV3UC5wb3NbMV1dO1xuICAgICAgYW5pbXNbbmV3UC5rZXldID0gdmVjdG9yLmNvbmNhdCh2ZWN0b3IpIGFzIEFuaW1WZWN0b3I7XG4gICAgICBhbmltZWRPcmlncy5wdXNoKHByZVAua2V5KTtcbiAgICB9XG4gIH0pO1xuICBtaXNzaW5ncy5mb3JFYWNoKHAgPT4ge1xuICAgIGlmICghdXRpbC5jb250YWluc1goYW5pbWVkT3JpZ3MsIHAua2V5KSkgZmFkaW5nc1twLmtleV0gPSBwLnBpZWNlO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGFuaW1zOiBhbmltcyxcbiAgICBmYWRpbmdzOiBmYWRpbmdzXG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0ZXAoc3RhdGU6IFN0YXRlLCBub3c6IERPTUhpZ2hSZXNUaW1lU3RhbXApOiB2b2lkIHtcbiAgY29uc3QgY3VyID0gc3RhdGUuYW5pbWF0aW9uLmN1cnJlbnQ7XG4gIGlmIChjdXIgPT09IHVuZGVmaW5lZCkgeyAvLyBhbmltYXRpb24gd2FzIGNhbmNlbGVkIDooXG4gICAgaWYgKCFzdGF0ZS5kb20uZGVzdHJveWVkKSBzdGF0ZS5kb20ucmVkcmF3Tm93KCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHJlc3QgPSAxIC0gKG5vdyAtIGN1ci5zdGFydCkgKiBjdXIuZnJlcXVlbmN5O1xuICBpZiAocmVzdCA8PSAwKSB7XG4gICAgc3RhdGUuYW5pbWF0aW9uLmN1cnJlbnQgPSB1bmRlZmluZWQ7XG4gICAgc3RhdGUuZG9tLnJlZHJhd05vdygpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGVhc2UgPSBlYXNpbmcocmVzdCk7XG4gICAgZm9yIChsZXQgaSBpbiBjdXIucGxhbi5hbmltcykge1xuICAgICAgY29uc3QgY2ZnID0gY3VyLnBsYW4uYW5pbXNbaV07XG4gICAgICBjZmdbMl0gPSBjZmdbMF0gKiBlYXNlO1xuICAgICAgY2ZnWzNdID0gY2ZnWzFdICogZWFzZTtcbiAgICB9XG4gICAgc3RhdGUuZG9tLnJlZHJhd05vdyh0cnVlKTsgLy8gb3B0aW1pc2F0aW9uOiBkb24ndCByZW5kZXIgU1ZHIGNoYW5nZXMgZHVyaW5nIGFuaW1hdGlvbnNcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpKSA9PiBzdGVwKHN0YXRlLCBub3cpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhbmltYXRlPEE+KG11dGF0aW9uOiBNdXRhdGlvbjxBPiwgc3RhdGU6IFN0YXRlKTogQSB7XG4gIC8vIGNsb25lIHN0YXRlIGJlZm9yZSBtdXRhdGluZyBpdFxuICBjb25zdCBwcmV2UGllY2VzOiBjZy5QaWVjZXMgPSB7Li4uc3RhdGUucGllY2VzfTtcblxuICBjb25zdCByZXN1bHQgPSBtdXRhdGlvbihzdGF0ZSk7XG4gIGNvbnN0IHBsYW4gPSBjb21wdXRlUGxhbihwcmV2UGllY2VzLCBzdGF0ZSk7XG4gIGlmICghaXNPYmplY3RFbXB0eShwbGFuLmFuaW1zKSB8fCAhaXNPYmplY3RFbXB0eShwbGFuLmZhZGluZ3MpKSB7XG4gICAgY29uc3QgYWxyZWFkeVJ1bm5pbmcgPSBzdGF0ZS5hbmltYXRpb24uY3VycmVudCAmJiBzdGF0ZS5hbmltYXRpb24uY3VycmVudC5zdGFydDtcbiAgICBzdGF0ZS5hbmltYXRpb24uY3VycmVudCA9IHtcbiAgICAgIHN0YXJ0OiBwZXJmb3JtYW5jZS5ub3coKSxcbiAgICAgIGZyZXF1ZW5jeTogMSAvIHN0YXRlLmFuaW1hdGlvbi5kdXJhdGlvbixcbiAgICAgIHBsYW46IHBsYW5cbiAgICB9O1xuICAgIGlmICghYWxyZWFkeVJ1bm5pbmcpIHN0ZXAoc3RhdGUsIHBlcmZvcm1hbmNlLm5vdygpKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBkb24ndCBhbmltYXRlLCBqdXN0IHJlbmRlciByaWdodCBhd2F5XG4gICAgc3RhdGUuZG9tLnJlZHJhdygpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0RW1wdHkobzogYW55KTogYm9vbGVhbiB7XG4gIGZvciAobGV0IF8gaW4gbykgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gdHJ1ZTtcbn1cbi8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2dyZS8xNjUwMjk0XG5mdW5jdGlvbiBlYXNpbmcodDogbnVtYmVyKTogbnVtYmVyIHtcbiAgcmV0dXJuIHQgPCAwLjUgPyA0ICogdCAqIHQgKiB0IDogKHQgLSAxKSAqICgyICogdCAtIDIpICogKDIgKiB0IC0gMikgKyAxO1xufVxuIl19","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst board_1 = require(\"./board\");\nconst util_1 = require(\"./util\");\nconst brushes = ['green', 'red', 'blue', 'yellow'];\nfunction start(state, e) {\n    if (e.touches && e.touches.length > 1)\n        return;\n    e.stopPropagation();\n    e.preventDefault();\n    e.ctrlKey ? board_1.unselect(state) : board_1.cancelMove(state);\n    const pos = util_1.eventPosition(e), orig = board_1.getKeyAtDomPos(pos, board_1.whitePov(state), state.dom.bounds());\n    if (!orig)\n        return;\n    state.drawable.current = {\n        orig,\n        pos,\n        brush: eventBrush(e)\n    };\n    processDraw(state);\n}\nexports.start = start;\nfunction processDraw(state) {\n    requestAnimationFrame(() => {\n        const cur = state.drawable.current;\n        if (cur) {\n            const mouseSq = board_1.getKeyAtDomPos(cur.pos, board_1.whitePov(state), state.dom.bounds());\n            if (mouseSq !== cur.mouseSq) {\n                cur.mouseSq = mouseSq;\n                cur.dest = mouseSq !== cur.orig ? mouseSq : undefined;\n                state.dom.redrawNow();\n            }\n            processDraw(state);\n        }\n    });\n}\nexports.processDraw = processDraw;\nfunction move(state, e) {\n    if (state.drawable.current)\n        state.drawable.current.pos = util_1.eventPosition(e);\n}\nexports.move = move;\nfunction end(state) {\n    const cur = state.drawable.current;\n    if (cur) {\n        if (cur.mouseSq)\n            addShape(state.drawable, cur);\n        cancel(state);\n    }\n}\nexports.end = end;\nfunction cancel(state) {\n    if (state.drawable.current) {\n        state.drawable.current = undefined;\n        state.dom.redraw();\n    }\n}\nexports.cancel = cancel;\nfunction clear(state) {\n    if (state.drawable.shapes.length) {\n        state.drawable.shapes = [];\n        state.dom.redraw();\n        onChange(state.drawable);\n    }\n}\nexports.clear = clear;\nfunction eventBrush(e) {\n    return brushes[((e.shiftKey || e.ctrlKey) && util_1.isRightButton(e) ? 1 : 0) + (e.altKey ? 2 : 0)];\n}\nfunction addShape(drawable, cur) {\n    const sameShape = (s) => s.orig === cur.orig && s.dest === cur.dest;\n    const similar = drawable.shapes.filter(sameShape)[0];\n    if (similar)\n        drawable.shapes = drawable.shapes.filter(s => !sameShape(s));\n    if (!similar || similar.brush !== cur.brush)\n        drawable.shapes.push(cur);\n    onChange(drawable);\n}\nfunction onChange(drawable) {\n    if (drawable.onChange)\n        drawable.onChange(drawable.shapes);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJhdy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNyYy9kcmF3LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsbUNBQXdFO0FBQ3hFLGlDQUFxRDtBQXdEckQsTUFBTSxPQUFPLEdBQUcsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztBQUVuRCxTQUFnQixLQUFLLENBQUMsS0FBWSxFQUFFLENBQWdCO0lBQ2xELElBQUksQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDO1FBQUUsT0FBTztJQUM5QyxDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDcEIsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ25CLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGdCQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLGtCQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDaEQsTUFBTSxHQUFHLEdBQUcsb0JBQWEsQ0FBQyxDQUFDLENBQWtCLEVBQzdDLElBQUksR0FBRyxzQkFBYyxDQUFDLEdBQUcsRUFBRSxnQkFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUNoRSxJQUFJLENBQUMsSUFBSTtRQUFFLE9BQU87SUFDbEIsS0FBSyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEdBQUc7UUFDdkIsSUFBSTtRQUNKLEdBQUc7UUFDSCxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQztLQUNyQixDQUFDO0lBQ0YsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3JCLENBQUM7QUFkRCxzQkFjQztBQUVELFNBQWdCLFdBQVcsQ0FBQyxLQUFZO0lBQ3RDLHFCQUFxQixDQUFDLEdBQUcsRUFBRTtRQUN6QixNQUFNLEdBQUcsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLE9BQU8s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USxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFFLElBQUksQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDLEtBQUssS0FBSyxHQUFHLENBQUMsS0FBSztRQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3ZFLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNyQixDQUFDO0FBRUQsU0FBUyxRQUFRLENBQUMsUUFBa0I7SUFDbEMsSUFBSSxRQUFRLENBQUMsUUFBUTtRQUFFLFFBQVEsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzVELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4vc3RhdGUnXG5pbXBvcnQgeyB1bnNlbGVjdCwgY2FuY2VsTW92ZSwgZ2V0S2V5QXREb21Qb3MsIHdoaXRlUG92IH0gZnJvbSAnLi9ib2FyZCdcbmltcG9ydCB7IGV2ZW50UG9zaXRpb24sIGlzUmlnaHRCdXR0b24gfSBmcm9tICcuL3V0aWwnXG5pbXBvcnQgKiBhcyBjZyBmcm9tICcuL3R5cGVzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIERyYXdTaGFwZSB7XG4gIG9yaWc6IGNnLktleTtcbiAgZGVzdD86IGNnLktleTtcbiAgYnJ1c2g6IHN0cmluZztcbiAgbW9kaWZpZXJzPzogRHJhd01vZGlmaWVycztcbiAgcGllY2U/OiBEcmF3U2hhcGVQaWVjZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEcmF3U2hhcGVQaWVjZSB7XG4gIHJvbGU6IGNnLlJvbGU7XG4gIGNvbG9yOiBjZy5Db2xvcjtcbiAgc2NhbGU/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRHJhd0JydXNoIHtcbiAga2V5OiBzdHJpbmc7XG4gIGNvbG9yOiBzdHJpbmc7XG4gIG9wYWNpdHk6IG51bWJlcjtcbiAgbGluZVdpZHRoOiBudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEcmF3QnJ1c2hlcyB7XG4gIFtuYW1lOiBzdHJpbmddOiBEcmF3QnJ1c2g7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRHJhd01vZGlmaWVycyB7XG4gIGxpbmVXaWR0aD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEcmF3YWJsZSB7XG4gIGVuYWJsZWQ6IGJvb2xlYW47IC8vIGNhbiBkcmF3XG4gIHZpc2libGU6IGJvb2xlYW47IC8vIGNhbiB2aWV3XG4gIGVyYXNlT25DbGljazogYm9vbGVhbjtcbiAgb25DaGFuZ2U/OiAoc2hhcGVzOiBEcmF3U2hhcGVbXSkgPT4gdm9pZDtcbiAgc2hhcGVzOiBEcmF3U2hhcGVbXTsgLy8gdXNlciBzaGFwZXNcbiAgYXV0b1NoYXBlczogRHJhd1NoYXBlW107IC8vIGNvbXB1dGVyIHNoYXBlc1xuICBjdXJyZW50PzogRHJhd0N1cnJlbnQ7XG4gIGJydXNoZXM6IERyYXdCcnVzaGVzO1xuICAvLyBkcmF3YWJsZSBTVkcgcGllY2VzOyB1c2VkIGZvciBjcmF6eWhvdXNlIGRyb3BcbiAgcGllY2VzOiB7XG4gICAgYmFzZVVybDogc3RyaW5nXG4gIH0sXG4gIHByZXZTdmdIYXNoOiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEcmF3Q3VycmVudCB7XG4gIG9yaWc6IGNnLktleTsgLy8gb3JpZyBrZXkgb2YgZHJhd2luZ1xuICBkZXN0PzogY2cuS2V5OyAvLyBzaGFwZSBkZXN0LCBvciB1bmRlZmluZWQgZm9yIGNpcmNsZVxuICBtb3VzZVNxPzogY2cuS2V5OyAvLyBzcXVhcmUgYmVpbmcgbW91c2VkIG92ZXJcbiAgcG9zOiBjZy5OdW1iZXJQYWlyOyAvLyByZWxhdGl2ZSBjdXJyZW50IHBvc2l0aW9uXG4gIGJydXNoOiBzdHJpbmc7IC8vIGJydXNoIG5hbWUgZm9yIHNoYXBlXG59XG5cbmNvbnN0IGJydXNoZXMgPSBbJ2dyZWVuJywgJ3JlZCcsICdibHVlJywgJ3llbGxvdyddO1xuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnQoc3RhdGU6IFN0YXRlLCBlOiBjZy5Nb3VjaEV2ZW50KTogdm9pZCB7XG4gIGlmIChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA+IDEpIHJldHVybjsgLy8gc3VwcG9ydCBvbmUgZmluZ2VyIHRvdWNoIG9ubHlcbiAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBlLmN0cmxLZXkgPyB1bnNlbGVjdChzdGF0ZSkgOiBjYW5jZWxNb3ZlKHN0YXRlKTtcbiAgY29uc3QgcG9zID0gZXZlbnRQb3NpdGlvbihlKSBhcyBjZy5OdW1iZXJQYWlyLFxuICBvcmlnID0gZ2V0S2V5QXREb21Qb3MocG9zLCB3aGl0ZVBvdihzdGF0ZSksIHN0YXRlLmRvbS5ib3VuZHMoKSk7XG4gIGlmICghb3JpZykgcmV0dXJuO1xuICBzdGF0ZS5kcmF3YWJsZS5jdXJyZW50ID0ge1xuICAgIG9yaWcsXG4gICAgcG9zLFxuICAgIGJydXNoOiBldmVudEJydXNoKGUpXG4gIH07XG4gIHByb2Nlc3NEcmF3KHN0YXRlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NEcmF3KHN0YXRlOiBTdGF0ZSk6IHZvaWQge1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgIGNvbnN0IGN1ciA9IHN0YXRlLmRyYXdhYmxlLmN1cnJlbnQ7XG4gICAgaWYgKGN1cikge1xuICAgICAgY29uc3QgbW91c2VTcSA9IGdldEtleUF0RG9tUG9zKGN1ci5wb3MsIHdoaXRlUG92KHN0YXRlKSwgc3RhdGUuZG9tLmJvdW5kcygpKTtcbiAgICAgIGlmIChtb3VzZVNxICE9PSBjdXIubW91c2VTcSkge1xuICAgICAgICBjdXIubW91c2VTcSA9IG1vdXNlU3E7XG4gICAgICAgIGN1ci5kZXN0ID0gbW91c2VTcSAhPT0gY3VyLm9yaWcgPyBtb3VzZVNxIDogdW5kZWZpbmVkO1xuICAgICAgICBzdGF0ZS5kb20ucmVkcmF3Tm93KCk7XG4gICAgICB9XG4gICAgICBwcm9jZXNzRHJhdyhzdGF0ZSk7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1vdmUoc3RhdGU6IFN0YXRlLCBlOiBjZy5Nb3VjaEV2ZW50KTogdm9pZCB7XG4gIGlmIChzdGF0ZS5kcmF3YWJsZS5jdXJyZW50KSBzdGF0ZS5kcmF3YWJsZS5jdXJyZW50LnBvcyA9IGV2ZW50UG9zaXRpb24oZSkgYXMgY2cuTnVtYmVyUGFpcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuZChzdGF0ZTogU3RhdGUpOiB2b2lkIHtcbiAgY29uc3QgY3VyID0gc3RhdGUuZHJhd2FibGUuY3VycmVudDtcbiAgaWYgKGN1cikge1xuICAgIGlmIChjdXIubW91c2VTcSkgYWRkU2hhcGUoc3RhdGUuZHJhd2FibGUsIGN1cik7XG4gICAgY2FuY2VsKHN0YXRlKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuY2VsKHN0YXRlOiBTdGF0ZSk6IHZvaWQge1xuICBpZiAoc3RhdGUuZHJhd2FibGUuY3VycmVudCkge1xuICAgIHN0YXRlLmRyYXdhYmxlLmN1cnJlbnQgPSB1bmRlZmluZWQ7XG4gICAgc3RhdGUuZG9tLnJlZHJhdygpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcihzdGF0ZTogU3RhdGUpOiB2b2lkIHtcbiAgaWYgKHN0YXRlLmRyYXdhYmxlLnNoYXBlcy5sZW5ndGgpIHtcbiAgICBzdGF0ZS5kcmF3YWJsZS5zaGFwZXMgPSBbXTtcbiAgICBzdGF0ZS5kb20ucmVkcmF3KCk7XG4gICAgb25DaGFuZ2Uoc3RhdGUuZHJhd2FibGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGV2ZW50QnJ1c2goZTogY2cuTW91Y2hFdmVudCk6IHN0cmluZyB7XG4gIHJldHVybiBicnVzaGVzWygoZS5zaGlmdEtleSB8fCBlLmN0cmxLZXkpICYmIGlzUmlnaHRCdXR0b24oZSkgPyAxIDogMCkgKyAoZS5hbHRLZXkgPyAyIDogMCldO1xufVxuXG5mdW5jdGlvbiBhZGRTaGFwZShkcmF3YWJsZTogRHJhd2FibGUsIGN1cjogRHJhd0N1cnJlbnQpOiB2b2lkIHtcbiAgY29uc3Qgc2FtZVNoYXBlID0gKHM6IERyYXdTaGFwZSkgPT4gcy5vcmlnID09PSBjdXIub3JpZyAmJiBzLmRlc3QgPT09IGN1ci5kZXN0O1xuICBjb25zdCBzaW1pbGFyID0gZHJhd2FibGUuc2hhcGVzLmZpbHRlcihzYW1lU2hhcGUpWzBdO1xuICBpZiAoc2ltaWxhcikgZHJhd2FibGUuc2hhcGVzID0gZHJhd2FibGUuc2hhcGVzLmZpbHRlcihzID0+ICFzYW1lU2hhcGUocykpO1xuICBpZiAoIXNpbWlsYXIgfHwgc2ltaWxhci5icnVzaCAhPT0gY3VyLmJydXNoKSBkcmF3YWJsZS5zaGFwZXMucHVzaChjdXIpO1xuICBvbkNoYW5nZShkcmF3YWJsZSk7XG59XG5cbmZ1bmN0aW9uIG9uQ2hhbmdlKGRyYXdhYmxlOiBEcmF3YWJsZSk6IHZvaWQge1xuICBpZiAoZHJhd2FibGUub25DaGFuZ2UpIGRyYXdhYmxlLm9uQ2hhbmdlKGRyYXdhYmxlLnNoYXBlcyk7XG59XG4iXX0=","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"./util\");\nfunction createElement(tagName) {\n    return document.createElementNS('http://www.w3.org/2000/svg', tagName);\n}\nexports.createElement = createElement;\nfunction renderSvg(state, root) {\n    const d = state.drawable, curD = d.current, cur = curD && curD.mouseSq ? curD : undefined, arrowDests = {};\n    d.shapes.concat(d.autoShapes).concat(cur ? [cur] : []).forEach(s => {\n        if (s.dest)\n            arrowDests[s.dest] = (arrowDests[s.dest] || 0) + 1;\n    });\n    const shapes = d.shapes.concat(d.autoShapes).map((s) => {\n        return {\n            shape: s,\n            current: false,\n            hash: shapeHash(s, arrowDests, false)\n        };\n    });\n    if (cur)\n        shapes.push({\n            shape: cur,\n            current: true,\n            hash: shapeHash(cur, arrowDests, true)\n        });\n    const fullHash = shapes.map(sc => sc.hash).join('');\n    if (fullHash === state.drawable.prevSvgHash)\n        return;\n    state.drawable.prevSvgHash = fullHash;\n    const defsEl = root.firstChild;\n    syncDefs(d, shapes, defsEl);\n    syncShapes(state, shapes, d.brushes, arrowDests, root, defsEl);\n}\nexports.renderSvg = renderSvg;\nfunction syncDefs(d, shapes, defsEl) {\n    const brushes = {};\n    let brush;\n    shapes.forEach(s => {\n        if (s.shape.dest) {\n            brush = d.brushes[s.shape.brush];\n            if (s.shape.modifiers)\n                brush = makeCustomBrush(brush, s.shape.modifiers);\n            brushes[brush.key] = brush;\n        }\n    });\n    const keysInDom = {};\n    let el = defsEl.firstChild;\n    while (el) {\n        keysInDom[el.getAttribute('cgKey')] = true;\n        el = el.nextSibling;\n    }\n    for (let key in brushes) {\n        if (!keysInDom[key])\n            defsEl.appendChild(renderMarker(brushes[key]));\n    }\n}\nfunction syncShapes(state, shapes, brushes, arrowDests, root, defsEl) {\n    const bounds = state.dom.bounds(), hashesInDom = {}, toRemove = [];\n    shapes.forEach(sc => { hashesInDom[sc.hash] = false; });\n    let el = defsEl.nextSibling, elHash;\n    while (el) {\n        elHash = el.getAttribute('cgHash');\n        if (hashesInDom.hasOwnProperty(elHash))\n            hashesInDom[elHash] = true;\n        else\n            toRemove.push(el);\n        el = el.nextSibling;\n    }\n    toRemove.forEach(el => root.removeChild(el));\n    shapes.forEach(sc => {\n        if (!hashesInDom[sc.hash])\n            root.appendChild(renderShape(state, sc, brushes, arrowDests, bounds));\n    });\n}\nfunction shapeHash({ orig, dest, brush, piece, modifiers }, arrowDests, current) {\n    return [current, orig, dest, brush, dest && arrowDests[dest] > 1,\n        piece && pieceHash(piece),\n        modifiers && modifiersHash(modifiers)\n    ].filter(x => x).join('');\n}\nfunction pieceHash(piece) {\n    return [piece.color, piece.role, piece.scale].filter(x => x).join('');\n}\nfunction modifiersHash(m) {\n    return '' + (m.lineWidth || '');\n}\nfunction renderShape(state, { shape, current, hash }, brushes, arrowDests, bounds) {\n    let el;\n    if (shape.piece)\n        el = renderPiece(state.drawable.pieces.baseUrl, orient(util_1.key2pos(shape.orig), state.orientation), shape.piece, bounds);\n    else {\n        const orig = orient(util_1.key2pos(shape.orig), state.orientation);\n        if (shape.orig && shape.dest) {\n            let brush = brushes[shape.brush];\n            if (shape.modifiers)\n                brush = makeCustomBrush(brush, shape.modifiers);\n            el = renderArrow(brush, orig, orient(util_1.key2pos(shape.dest), state.orientation), current, arrowDests[shape.dest] > 1, bounds);\n        }\n        else\n            el = renderCircle(brushes[shape.brush], orig, current, bounds);\n    }\n    el.setAttribute('cgHash', hash);\n    return el;\n}\nfunction renderCircle(brush, pos, current, bounds) {\n    const o = pos2px(pos, bounds), widths = circleWidth(bounds), radius = (bounds.width + bounds.height) / 32;\n    return setAttributes(createElement('circle'), {\n        stroke: brush.color,\n        'stroke-width': widths[current ? 0 : 1],\n        fill: 'none',\n        opacity: opacity(brush, current),\n        cx: o[0],\n        cy: o[1],\n        r: radius - widths[1] / 2\n    });\n}\nfunction renderArrow(brush, orig, dest, current, shorten, bounds) {\n    const m = arrowMargin(bounds, shorten && !current), a = pos2px(orig, bounds), b = pos2px(dest, bounds), dx = b[0] - a[0], dy = b[1] - a[1], angle = Math.atan2(dy, dx), xo = Math.cos(angle) * m, yo = Math.sin(angle) * m;\n    return setAttributes(createElement('line'), {\n        stroke: brush.color,\n        'stroke-width': lineWidth(brush, current, bounds),\n        'stroke-linecap': 'round',\n        'marker-end': 'url(#arrowhead-' + brush.key + ')',\n        opacity: opacity(brush, current),\n        x1: a[0],\n        y1: a[1],\n        x2: b[0] - xo,\n        y2: b[1] - yo\n    });\n}\nfunction renderPiece(baseUrl, pos, piece, bounds) {\n    const o = pos2px(pos, bounds), size = bounds.width / 8 * (piece.scale || 1), name = piece.color[0] + (piece.role === 'knight' ? 'n' : piece.role[0]).toUpperCase();\n    return setAttributes(createElement('image'), {\n        className: `${piece.role} ${piece.color}`,\n        x: o[0] - size / 2,\n        y: o[1] - size / 2,\n        width: size,\n        height: size,\n        href: baseUrl + name + '.svg'\n    });\n}\nfunction renderMarker(brush) {\n    const marker = setAttributes(createElement('marker'), {\n        id: 'arrowhead-' + brush.key,\n        orient: 'auto',\n        markerWidth: 4,\n        markerHeight: 8,\n        refX: 2.05,\n        refY: 2.01\n    });\n    marker.appendChild(setAttributes(createElement('path'), {\n        d: 'M0,0 V4 L3,2 Z',\n        fill: brush.color\n    }));\n    marker.setAttribute('cgKey', brush.key);\n    return marker;\n}\nfunction setAttributes(el, attrs) {\n    for (let key in attrs)\n        el.setAttribute(key, attrs[key]);\n    return el;\n}\nfunction orient(pos, color) {\n    return color === 'white' ? pos : [9 - pos[0], 9 - pos[1]];\n}\nfunction makeCustomBrush(base, modifiers) {\n    const brush = {\n        color: base.color,\n        opacity: Math.round(base.opacity * 10) / 10,\n        lineWidth: Math.round(modifiers.lineWidth || base.lineWidth)\n    };\n    brush.key = [base.key, modifiers.lineWidth].filter(x => x).join('');\n    return brush;\n}\nfunction circleWidth(bounds) {\n    const base = bounds.width / 512;\n    return [3 * base, 4 * base];\n}\nfunction lineWidth(brush, current, bounds) {\n    return (brush.lineWidth || 10) * (current ? 0.85 : 1) / 512 * bounds.width;\n}\nfunction opacity(brush, current) {\n    return (brush.opacity || 1) * (current ? 0.9 : 1);\n}\nfunction arrowMargin(bounds, shorten) {\n    return (shorten ? 20 : 10) / 512 * bounds.width;\n}\nfunction pos2px(pos, bounds) {\n    return [(pos[0] - 0.5) * bounds.width / 8, (8.5 - pos[1]) * bounds.height / 8];\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3ZnLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL3N2Zy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLGlDQUFnQztBQUloQyxTQUFnQixhQUFhLENBQUMsT0FBZTtJQUMzQyxPQUFPLFFBQVEsQ0FBQyxlQUFlLENBQUMsNEJBQTRCLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDekUsQ0FBQztBQUZELHNDQUVDO0FBa0JELFNBQWdCLFNBQVMsQ0FBQyxLQUFZLEVBQUUsSUFBZ0I7SUFFdEQsTUFBTSxDQUFDLEdBQUcsS0FBSyxDQUFDLFFBQVEsRUFDeEIsSUFBSSxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQ2hCLEdBQUcsR0FBRyxJQUFJLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBaUIsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUMxRCxVQUFVLEdBQWUsRUFBRSxDQUFDO0lBRTVCLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDakUsSUFBSSxDQUFDLENBQUMsSUFBSTtZQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNqRSxDQUFDLENBQUMsQ0FBQztJQUVILE1BQU0sTUFBTSxHQUFZLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFZLEVBQUUsRUFBRTtRQUN6RSxPQUFPO1lBQ0wsS0FBSyxFQUFFLENBQUM7WUFDUixPQUFPLEVBQUUsS0FBSztZQUNk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RCxDQUFDO0FBRUQsU0FBUyxNQUFNLENBQUMsR0FBVyxFQUFFLE1BQWtCO0lBQzdDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ2pGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4vc3RhdGUnXG5pbXBvcnQgeyBrZXkycG9zIH0gZnJvbSAnLi91dGlsJ1xuaW1wb3J0IHsgRHJhd2FibGUsIERyYXdTaGFwZSwgRHJhd1NoYXBlUGllY2UsIERyYXdCcnVzaCwgRHJhd0JydXNoZXMsIERyYXdNb2RpZmllcnMgfSBmcm9tICcuL2RyYXcnXG5pbXBvcnQgKiBhcyBjZyBmcm9tICcuL3R5cGVzJ1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0YWdOYW1lOiBzdHJpbmcpOiBTVkdFbGVtZW50IHtcbiAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCB0YWdOYW1lKTtcbn1cblxuaW50ZXJmYWNlIFNoYXBlIHtcbiAgc2hhcGU6IERyYXdTaGFwZTtcbiAgY3VycmVudDogYm9vbGVhbjtcbiAgaGFzaDogSGFzaDtcbn1cblxuaW50ZXJmYWNlIEN1c3RvbUJydXNoZXMge1xuICBbaGFzaDogc3RyaW5nXTogRHJhd0JydXNoXG59XG5cbmludGVyZmFjZSBBcnJvd0Rlc3RzIHtcbiAgW2tleTogc3RyaW5nXTogbnVtYmVyOyAvLyBob3cgbWFueSBhcnJvd3MgbGFuZCBvbiBhIHNxdWFyZVxufVxuXG50eXBlIEhhc2ggPSBzdHJpbmc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJTdmcoc3RhdGU6IFN0YXRlLCByb290OiBTVkdFbGVtZW50KTogdm9pZCB7XG5cbiAgY29uc3QgZCA9IHN0YXRlLmRyYXdhYmxlLFxuICBjdXJEID0gZC5jdXJyZW50LFxuICBjdXIgPSBjdXJEICYmIGN1ckQubW91c2VTcSA/IGN1ckQgYXMgRHJhd1NoYXBlIDogdW5kZWZpbmVkLFxuICBhcnJvd0Rlc3RzOiBBcnJvd0Rlc3RzID0ge307XG5cbiAgZC5zaGFwZXMuY29uY2F0KGQuYXV0b1NoYXBlcykuY29uY2F0KGN1ciA/IFtjdXJdIDogW10pLmZvckVhY2gocyA9PiB7XG4gICAgaWYgKHMuZGVzdCkgYXJyb3dEZXN0c1tzLmRlc3RdID0gKGFycm93RGVzdHNbcy5kZXN0XSB8fCAwKSArIDE7XG4gIH0pO1xuXG4gIGNvbnN0IHNoYXBlczogU2hhcGVbXSA9IGQuc2hhcGVzLmNvbmNhdChkLmF1dG9TaGFwZXMpLm1hcCgoczogRHJhd1NoYXBlKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNoYXBlOiBzLFxuICAgICAgY3VycmVudDogZmFsc2UsXG4gICAgICBoYXNoOiBzaGFwZUhhc2gocywgYXJyb3dEZXN0cywgZmFsc2UpXG4gICAgfTtcbiAgfSk7XG4gIGlmIChjdXIpIHNoYXBlcy5wdXNoKHtcbiAgICBzaGFwZTogY3VyLFxuICAgIGN1cnJlbnQ6IHRydWUsXG4gICAgaGFzaDogc2hhcGVIYXNoKGN1ciwgYXJyb3dEZXN0cywgdHJ1ZSlcbiAgfSk7XG5cbiAgY29uc3QgZnVsbEhhc2ggPSBzaGFwZXMubWFwKHNjID0+IHNjLmhhc2gpLmpvaW4oJycpO1xuICBpZiAoZnVsbEhhc2ggPT09IHN0YXRlLmRyYXdhYmxlLnByZXZTdmdIYXNoKSByZXR1cm47XG4gIHN0YXRlLmRyYXdhYmxlLnByZXZTdmdIYXNoID0gZnVsbEhhc2g7XG5cbiAgY29uc3QgZGVmc0VsID0gcm9vdC5maXJzdENoaWxkIGFzIFNWR0VsZW1lbnQ7XG5cbiAgc3luY0RlZnMoZCwgc2hhcGVzLCBkZWZzRWwpO1xuICBzeW5jU2hhcGVzKHN0YXRlLCBzaGFwZXMsIGQuYnJ1c2hlcywgYXJyb3dEZXN0cywgcm9vdCwgZGVmc0VsKTtcbn1cblxuLy8gYXBwZW5kIG9ubHkuIERvbid0IHRyeSB0byB1cGRhdGUvcmVtb3ZlLlxuZnVuY3Rpb24gc3luY0RlZnMoZDogRHJhd2FibGUsIHNoYXBlczogU2hhcGVbXSwgZGVmc0VsOiBTVkdFbGVtZW50KSB7XG4gIGNvbnN0IGJydXNoZXM6IEN1c3RvbUJydXNoZXMgPSB7fTtcbiAgbGV0IGJydXNoOiBEcmF3QnJ1c2g7XG4gIHNoYXBlcy5mb3JFYWNoKHMgPT4ge1xuICAgIGlmIChzLnNoYXBlLmRlc3QpIHtcbiAgICAgIGJydXNoID0gZC5icnVzaGVzW3Muc2hhcGUuYnJ1c2hdO1xuICAgICAgaWYgKHMuc2hhcGUubW9kaWZpZXJzKSBicnVzaCA9IG1ha2VDdXN0b21CcnVzaChicnVzaCwgcy5zaGFwZS5tb2RpZmllcnMpO1xuICAgICAgYnJ1c2hlc1ticnVzaC5rZXldID0gYnJ1c2g7XG4gICAgfVxuICB9KTtcbiAgY29uc3Qga2V5c0luRG9tOiB7W2tleTogc3RyaW5nXTogYm9vbGVhbn0gPSB7fTtcbiAgbGV0IGVsOiBTVkdFbGVtZW50ID0gZGVmc0VsLmZpcnN0Q2hpbGQgYXMgU1ZHRWxlbWVudDtcbiAgd2hpbGUoZWwpIHtcbiAgICBrZXlzSW5Eb21bZWwuZ2V0QXR0cmlidXRlKCdjZ0tleScpIGFzIHN0cmluZ10gPSB0cnVlO1xuICAgIGVsID0gZWwubmV4dFNpYmxpbmcgYXMgU1ZHRWxlbWVudDtcbiAgfVxuICBmb3IgKGxldCBrZXkgaW4gYnJ1c2hlcykge1xuICAgIGlmICgha2V5c0luRG9tW2tleV0pIGRlZnNFbC5hcHBlbmRDaGlsZChyZW5kZXJNYXJrZXIoYnJ1c2hlc1trZXldKSk7XG4gIH1cbn1cblxuLy8gYXBwZW5kIGFuZCByZW1vdmUgb25seS4gTm8gdXBkYXRlcy5cbmZ1bmN0aW9uIHN5bmNTaGFwZXMoc3RhdGU6IFN0YXRlLCBzaGFwZXM6IFNoYXBlW10sIGJydXNoZXM6IERyYXdCcnVzaGVzLCBhcnJvd0Rlc3RzOiBBcnJvd0Rlc3RzLCByb290OiBTVkdFbGVtZW50LCBkZWZzRWw6IFNWR0VsZW1lbnQpOiB2b2lkIHtcbiAgY29uc3QgYm91bmRzID0gc3RhdGUuZG9tLmJvdW5kcygpLFxuICBoYXNoZXNJbkRvbToge1toYXNoOiBzdHJpbmddOiBib29sZWFufSA9IHt9LFxuICB0b1JlbW92ZTogU1ZHRWxlbWVudFtdID0gW107XG4gIHNoYXBlcy5mb3JFYWNoKHNjID0+IHsgaGFzaGVzSW5Eb21bc2MuaGFzaF0gPSBmYWxzZTsgfSk7XG4gIGxldCBlbDogU1ZHRWxlbWVudCA9IGRlZnNFbC5uZXh0U2libGluZyBhcyBTVkdFbGVtZW50LCBlbEhhc2g6IEhhc2g7XG4gIHdoaWxlKGVsKSB7XG4gICAgZWxIYXNoID0gZWwuZ2V0QXR0cmlidXRlKCdjZ0hhc2gnKSBhcyBIYXNoO1xuICAgIC8vIGZvdW5kIGEgc2hhcGUgZWxlbWVudCB0aGF0J3MgaGVyZSB0byBzdGF5XG4gICAgaWYgKGhhc2hlc0luRG9tLmhhc093blByb3BlcnR5KGVsSGFzaCkpIGhhc2hlc0luRG9tW2VsSGFzaF0gPSB0cnVlO1xuICAgIC8vIG9yIHJlbW92ZSBpdFxuICAgIGVsc2UgdG9SZW1vdmUucHVzaChlbCk7XG4gICAgZWwgPSBlbC5uZXh0U2libGluZyBhcyBTVkdFbGVtZW50O1xuICB9XG4gIC8vIHJlbW92ZSBvbGQgc2hhcGVzXG4gIHRvUmVtb3ZlLmZvckVhY2goZWwgPT4gcm9vdC5yZW1vdmVDaGlsZChlbCkpO1xuICAvLyBpbnNlcnQgc2hhcGVzIHRoYXQgYXJlIG5vdCB5ZXQgaW4gZG9tXG4gIHNoYXBlcy5mb3JFYWNoKHNjID0+IHtcbiAgICBpZiAoIWhhc2hlc0luRG9tW3NjLmhhc2hdKSByb290LmFwcGVuZENoaWxkKHJlbmRlclNoYXBlKHN0YXRlLCBzYywgYnJ1c2hlcywgYXJyb3dEZXN0cywgYm91bmRzKSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBzaGFwZUhhc2goe29yaWcsIGRlc3QsIGJydXNoLCBwaWVjZSwgbW9kaWZpZXJzfTogRHJhd1NoYXBlLCBhcnJvd0Rlc3RzOiBBcnJvd0Rlc3RzLCBjdXJyZW50OiBib29sZWFuKTogSGFzaCB7XG4gIHJldHVybiBbY3VycmVudCwgb3JpZywgZGVzdCwgYnJ1c2gsIGRlc3QgJiYgYXJyb3dEZXN0c1tkZXN0XSA+IDEsXG4gICAgcGllY2UgJiYgcGllY2VIYXNoKHBpZWNlKSxcbiAgICBtb2RpZmllcnMgJiYgbW9kaWZpZXJzSGFzaChtb2RpZmllcnMpXG4gIF0uZmlsdGVyKHggPT4geCkuam9pbignJyk7XG59XG5cbmZ1bmN0aW9uIHBpZWNlSGFzaChwaWVjZTogRHJhd1NoYXBlUGllY2UpOiBIYXNoIHtcbiAgcmV0dXJuIFtwaWVjZS5jb2xvciwgcGllY2Uucm9sZSwgcGllY2Uuc2NhbGVdLmZpbHRlcih4ID0+IHgpLmpvaW4oJycpO1xufVxuXG5mdW5jdGlvbiBtb2RpZmllcnNIYXNoKG06IERyYXdNb2RpZmllcnMpOiBIYXNoIHtcbiAgcmV0dXJuICcnICsgKG0ubGluZVdpZHRoIHx8ICcnKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyU2hhcGUoc3RhdGU6IFN0YXRlLCB7c2hhcGUsIGN1cnJlbnQsIGhhc2h9OiBTaGFwZSwgYnJ1c2hlczogRHJhd0JydXNoZXMsIGFycm93RGVzdHM6IEFycm93RGVzdHMsIGJvdW5kczogQ2xpZW50UmVjdCk6IFNWR0VsZW1lbnQge1xuICBsZXQgZWw6IFNWR0VsZW1lbnQ7XG4gIGlmIChzaGFwZS5waWVjZSkgZWwgPSByZW5kZXJQaWVjZShcbiAgICBzdGF0ZS5kcmF3YWJsZS5waWVjZXMuYmFzZVVybCxcbiAgICBvcmllbnQoa2V5MnBvcyhzaGFwZS5vcmlnKSwgc3RhdGUub3JpZW50YXRpb24pLFxuICAgIHNoYXBlLnBpZWNlLFxuICAgIGJvdW5kcyk7XG4gIGVsc2Uge1xuICAgIGNvbnN0IG9yaWcgPSBvcmllbnQoa2V5MnBvcyhzaGFwZS5vcmlnKSwgc3RhdGUub3JpZW50YXRpb24pO1xuICAgIGlmIChzaGFwZS5vcmlnICYmIHNoYXBlLmRlc3QpIHtcbiAgICAgIGxldCBicnVzaDogRHJhd0JydXNoID0gYnJ1c2hlc1tzaGFwZS5icnVzaF07XG4gICAgICBpZiAoc2hhcGUubW9kaWZpZXJzKSBicnVzaCA9IG1ha2VDdXN0b21CcnVzaChicnVzaCwgc2hhcGUubW9kaWZpZXJzKTtcbiAgICAgIGVsID0gcmVuZGVyQXJyb3coXG4gICAgICAgIGJydXNoLFxuICAgICAgICBvcmlnLFxuICAgICAgICBvcmllbnQoa2V5MnBvcyhzaGFwZS5kZXN0KSwgc3RhdGUub3JpZW50YXRpb24pLFxuICAgICAgICBjdXJyZW50LFxuICAgICAgICBhcnJvd0Rlc3RzW3NoYXBlLmRlc3RdID4gMSxcbiAgICAgICAgYm91bmRzKTtcbiAgICB9XG4gICAgZWxzZSBlbCA9IHJlbmRlckNpcmNsZShicnVzaGVzW3NoYXBlLmJydXNoXSwgb3JpZywgY3VycmVudCwgYm91bmRzKTtcbiAgfVxuICBlbC5zZXRBdHRyaWJ1dGUoJ2NnSGFzaCcsIGhhc2gpO1xuICByZXR1cm4gZWw7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckNpcmNsZShicnVzaDogRHJhd0JydXNoLCBwb3M6IGNnLlBvcywgY3VycmVudDogYm9vbGVhbiwgYm91bmRzOiBDbGllbnRSZWN0KTogU1ZHRWxlbWVudCB7XG4gIGNvbnN0IG8gPSBwb3MycHgocG9zLCBib3VuZHMpLFxuICB3aWR0aHMgPSBjaXJjbGVXaWR0aChib3VuZHMpLFxuICByYWRpdXMgPSAoYm91bmRzLndpZHRoICsgYm91bmRzLmhlaWdodCkgLyAzMjtcbiAgcmV0dXJuIHNldEF0dHJpYnV0ZXMoY3JlYXRlRWxlbWVudCgnY2lyY2xlJyksIHtcbiAgICBzdHJva2U6IGJydXNoLmNvbG9yLFxuICAgICdzdHJva2Utd2lkdGgnOiB3aWR0aHNbY3VycmVudCA/IDAgOiAxXSxcbiAgICBmaWxsOiAnbm9uZScsXG4gICAgb3BhY2l0eTogb3BhY2l0eShicnVzaCwgY3VycmVudCksXG4gICAgY3g6IG9bMF0sXG4gICAgY3k6IG9bMV0sXG4gICAgcjogcmFkaXVzIC0gd2lkdGhzWzFdIC8gMlxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQXJyb3coYnJ1c2g6IERyYXdCcnVzaCwgb3JpZzogY2cuUG9zLCBkZXN0OiBjZy5Qb3MsIGN1cnJlbnQ6IGJvb2xlYW4sIHNob3J0ZW46IGJvb2xlYW4sIGJvdW5kczogQ2xpZW50UmVjdCk6IFNWR0VsZW1lbnQge1xuICBjb25zdCBtID0gYXJyb3dNYXJnaW4oYm91bmRzLCBzaG9ydGVuICYmICFjdXJyZW50KSxcbiAgYSA9IHBvczJweChvcmlnLCBib3VuZHMpLFxuICBiID0gcG9zMnB4KGRlc3QsIGJvdW5kcyksXG4gIGR4ID0gYlswXSAtIGFbMF0sXG4gIGR5ID0gYlsxXSAtIGFbMV0sXG4gIGFuZ2xlID0gTWF0aC5hdGFuMihkeSwgZHgpLFxuICB4byA9IE1hdGguY29zKGFuZ2xlKSAqIG0sXG4gIHlvID0gTWF0aC5zaW4oYW5nbGUpICogbTtcbiAgcmV0dXJuIHNldEF0dHJpYnV0ZXMoY3JlYXRlRWxlbWVudCgnbGluZScpLCB7XG4gICAgc3Ryb2tlOiBicnVzaC5jb2xvcixcbiAgICAnc3Ryb2tlLXdpZHRoJzogbGluZVdpZHRoKGJydXNoLCBjdXJyZW50LCBib3VuZHMpLFxuICAgICdzdHJva2UtbGluZWNhcCc6ICdyb3VuZCcsXG4gICAgJ21hcmtlci1lbmQnOiAndXJsKCNhcnJvd2hlYWQtJyArIGJydXNoLmtleSArICcpJyxcbiAgICBvcGFjaXR5OiBvcGFjaXR5KGJydXNoLCBjdXJyZW50KSxcbiAgICB4MTogYVswXSxcbiAgICB5MTogYVsxXSxcbiAgICB4MjogYlswXSAtIHhvLFxuICAgIHkyOiBiWzFdIC0geW9cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlclBpZWNlKGJhc2VVcmw6IHN0cmluZywgcG9zOiBjZy5Qb3MsIHBpZWNlOiBEcmF3U2hhcGVQaWVjZSwgYm91bmRzOiBDbGllbnRSZWN0KTogU1ZHRWxlbWVudCB7XG4gIGNvbnN0IG8gPSBwb3MycHgocG9zLCBib3VuZHMpLFxuICBzaXplID0gYm91bmRzLndpZHRoIC8gOCAqIChwaWVjZS5zY2FsZSB8fCAxKSxcbiAgbmFtZSA9IHBpZWNlLmNvbG9yWzBdICsgKHBpZWNlLnJvbGUgPT09ICdrbmlnaHQnID8gJ24nIDogcGllY2Uucm9sZVswXSkudG9VcHBlckNhc2UoKTtcbiAgcmV0dXJuIHNldEF0dHJpYnV0ZXMoY3JlYXRlRWxlbWVudCgnaW1hZ2UnKSwge1xuICAgIGNsYXNzTmFtZTogYCR7cGllY2Uucm9sZX0gJHtwaWVjZS5jb2xvcn1gLFxuICAgIHg6IG9bMF0gLSBzaXplIC8gMixcbiAgICB5OiBvWzFdIC0gc2l6ZSAvIDIsXG4gICAgd2lkdGg6IHNpemUsXG4gICAgaGVpZ2h0OiBzaXplLFxuICAgIGhyZWY6IGJhc2VVcmwgKyBuYW1lICsgJy5zdmcnXG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJNYXJrZXIoYnJ1c2g6IERyYXdCcnVzaCk6IFNWR0VsZW1lbnQge1xuICBjb25zdCBtYXJrZXIgPSBzZXRBdHRyaWJ1dGVzKGNyZWF0ZUVsZW1lbnQoJ21hcmtlcicpLCB7XG4gICAgaWQ6ICdhcnJvd2hlYWQtJyArIGJydXNoLmtleSxcbiAgICBvcmllbnQ6ICdhdXRvJyxcbiAgICBtYXJrZXJXaWR0aDogNCxcbiAgICBtYXJrZXJIZWlnaHQ6IDgsXG4gICAgcmVmWDogMi4wNSxcbiAgICByZWZZOiAyLjAxXG4gIH0pO1xuICBtYXJrZXIuYXBwZW5kQ2hpbGQoc2V0QXR0cmlidXRlcyhjcmVhdGVFbGVtZW50KCdwYXRoJyksIHtcbiAgICBkOiAnTTAsMCBWNCBMMywyIFonLFxuICAgIGZpbGw6IGJydXNoLmNvbG9yXG4gIH0pKTtcbiAgbWFya2VyLnNldEF0dHJpYnV0ZSgnY2dLZXknLCBicnVzaC5rZXkpO1xuICByZXR1cm4gbWFya2VyO1xufVxuXG5mdW5jdGlvbiBzZXRBdHRyaWJ1dGVzKGVsOiBTVkdFbGVtZW50LCBhdHRyczogeyBba2V5OiBzdHJpbmddOiBhbnkgfSk6IFNWR0VsZW1lbnQge1xuICBmb3IgKGxldCBrZXkgaW4gYXR0cnMpIGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuICByZXR1cm4gZWw7XG59XG5cbmZ1bmN0aW9uIG9yaWVudChwb3M6IGNnLlBvcywgY29sb3I6IGNnLkNvbG9yKTogY2cuUG9zIHtcbiAgcmV0dXJuIGNvbG9yID09PSAnd2hpdGUnID8gcG9zIDogWzkgLSBwb3NbMF0sIDkgLSBwb3NbMV1dO1xufVxuXG5mdW5jdGlvbiBtYWtlQ3VzdG9tQnJ1c2goYmFzZTogRHJhd0JydXNoLCBtb2RpZmllcnM6IERyYXdNb2RpZmllcnMpOiBEcmF3QnJ1c2gge1xuICBjb25zdCBicnVzaDogUGFydGlhbDxEcmF3QnJ1c2g+ID0ge1xuICAgIGNvbG9yOiBiYXNlLmNvbG9yLFxuICAgIG9wYWNpdHk6IE1hdGgucm91bmQoYmFzZS5vcGFjaXR5ICogMTApIC8gMTAsXG4gICAgbGluZVdpZHRoOiBNYXRoLnJvdW5kKG1vZGlmaWVycy5saW5lV2lkdGggfHwgYmFzZS5saW5lV2lkdGgpXG4gIH07XG4gIGJydXNoLmtleSA9IFtiYXNlLmtleSwgbW9kaWZpZXJzLmxpbmVXaWR0aF0uZmlsdGVyKHggPT4geCkuam9pbignJyk7XG4gIHJldHVybiBicnVzaCBhcyBEcmF3QnJ1c2g7XG59XG5cbmZ1bmN0aW9uIGNpcmNsZVdpZHRoKGJvdW5kczogQ2xpZW50UmVjdCk6IFtudW1iZXIsIG51bWJlcl0ge1xuICBjb25zdCBiYXNlID0gYm91bmRzLndpZHRoIC8gNTEyO1xuICByZXR1cm4gWzMgKiBiYXNlLCA0ICogYmFzZV07XG59XG5cbmZ1bmN0aW9uIGxpbmVXaWR0aChicnVzaDogRHJhd0JydXNoLCBjdXJyZW50OiBib29sZWFuLCBib3VuZHM6IENsaWVudFJlY3QpOiBudW1iZXIge1xuICByZXR1cm4gKGJydXNoLmxpbmVXaWR0aCB8fCAxMCkgKiAoY3VycmVudCA/IDAuODUgOiAxKSAvIDUxMiAqIGJvdW5kcy53aWR0aDtcbn1cblxuZnVuY3Rpb24gb3BhY2l0eShicnVzaDogRHJhd0JydXNoLCBjdXJyZW50OiBib29sZWFuKTogbnVtYmVyIHtcbiAgcmV0dXJuIChicnVzaC5vcGFjaXR5IHx8IDEpICogKGN1cnJlbnQgPyAwLjkgOiAxKTtcbn1cblxuZnVuY3Rpb24gYXJyb3dNYXJnaW4oYm91bmRzOiBDbGllbnRSZWN0LCBzaG9ydGVuOiBib29sZWFuKTogbnVtYmVyIHtcbiAgcmV0dXJuIChzaG9ydGVuID8gMjAgOiAxMCkgLyA1MTIgKiBib3VuZHMud2lkdGg7XG59XG5cbmZ1bmN0aW9uIHBvczJweChwb3M6IGNnLlBvcywgYm91bmRzOiBDbGllbnRSZWN0KTogY2cuTnVtYmVyUGFpciB7XG4gIHJldHVybiBbKHBvc1swXSAtIDAuNSkgKiBib3VuZHMud2lkdGggLyA4LCAoOC41IC0gcG9zWzFdKSAqIGJvdW5kcy5oZWlnaHQgLyA4XTtcbn1cbiJdfQ==","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","module.exports = require('./dist/commonjs/index.js').default;\n","/* smoothscroll v0.4.4 - 2019 - Dustan Kasten, Jeremias Menichelli - MIT License */\n(function () {\n  'use strict';\n\n  // polyfill\n  function polyfill() {\n    // aliases\n    var w = window;\n    var d = document;\n\n    // return if scroll behavior is supported and polyfill is not forced\n    if (\n      'scrollBehavior' in d.documentElement.style &&\n      w.__forceSmoothScrollPolyfill__ !== true\n    ) {\n      return;\n    }\n\n    // globals\n    var Element = w.HTMLElement || w.Element;\n    var SCROLL_TIME = 468;\n\n    // object gathering original scroll methods\n    var original = {\n      scroll: w.scroll || w.scrollTo,\n      scrollBy: w.scrollBy,\n      elementScroll: Element.prototype.scroll || scrollElement,\n      scrollIntoView: Element.prototype.scrollIntoView\n    };\n\n    // define timing method\n    var now =\n      w.performance && w.performance.now\n        ? w.performance.now.bind(w.performance)\n        : Date.now;\n\n    /**\n     * indicates if a the current browser is made by Microsoft\n     * @method isMicrosoftBrowser\n     * @param {String} userAgent\n     * @returns {Boolean}\n     */\n    function isMicrosoftBrowser(userAgent) {\n      var userAgentPatterns = ['MSIE ', 'Trident/', 'Edge/'];\n\n      return new RegExp(userAgentPatterns.join('|')).test(userAgent);\n    }\n\n    /*\n     * IE has rounding bug rounding down clientHeight and clientWidth and\n     * rounding up scrollHeight and scrollWidth causing false positives\n     * on hasScrollableSpace\n     */\n    var ROUNDING_TOLERANCE = isMicrosoftBrowser(w.navigator.userAgent) ? 1 : 0;\n\n    /**\n     * changes scroll position inside an element\n     * @method scrollElement\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {undefined}\n     */\n    function scrollElement(x, y) {\n      this.scrollLeft = x;\n      this.scrollTop = y;\n    }\n\n    /**\n     * returns result of applying ease math function to a number\n     * @method ease\n     * @param {Number} k\n     * @returns {Number}\n     */\n    function ease(k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n\n    /**\n     * indicates if a smooth behavior should be applied\n     * @method shouldBailOut\n     * @param {Number|Object} firstArg\n     * @returns {Boolean}\n     */\n    function shouldBailOut(firstArg) {\n      if (\n        firstArg === null ||\n        typeof firstArg !== 'object' ||\n        firstArg.behavior === undefined ||\n        firstArg.behavior === 'auto' ||\n        firstArg.behavior === 'instant'\n      ) {\n        // first argument is not an object/null\n        // or behavior is auto, instant or undefined\n        return true;\n      }\n\n      if (typeof firstArg === 'object' && firstArg.behavior === 'smooth') {\n        // first argument is an object and behavior is smooth\n        return false;\n      }\n\n      // throw error when behavior is not supported\n      throw new TypeError(\n        'behavior member of ScrollOptions ' +\n          firstArg.behavior +\n          ' is not a valid value for enumeration ScrollBehavior.'\n      );\n    }\n\n    /**\n     * indicates if an element has scrollable space in the provided axis\n     * @method hasScrollableSpace\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function hasScrollableSpace(el, axis) {\n      if (axis === 'Y') {\n        return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;\n      }\n\n      if (axis === 'X') {\n        return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;\n      }\n    }\n\n    /**\n     * indicates if an element has a scrollable overflow property in the axis\n     * @method canOverflow\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function canOverflow(el, axis) {\n      var overflowValue = w.getComputedStyle(el, null)['overflow' + axis];\n\n      return overflowValue === 'auto' || overflowValue === 'scroll';\n    }\n\n    /**\n     * indicates if an element can be scrolled in either axis\n     * @method isScrollable\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function isScrollable(el) {\n      var isScrollableY = hasScrollableSpace(el, 'Y') && canOverflow(el, 'Y');\n      var isScrollableX = hasScrollableSpace(el, 'X') && canOverflow(el, 'X');\n\n      return isScrollableY || isScrollableX;\n    }\n\n    /**\n     * finds scrollable parent of an element\n     * @method findScrollableParent\n     * @param {Node} el\n     * @returns {Node} el\n     */\n    function findScrollableParent(el) {\n      while (el !== d.body && isScrollable(el) === false) {\n        el = el.parentNode || el.host;\n      }\n\n      return el;\n    }\n\n    /**\n     * self invoked function that, given a context, steps through scrolling\n     * @method step\n     * @param {Object} context\n     * @returns {undefined}\n     */\n    function step(context) {\n      var time = now();\n      var value;\n      var currentX;\n      var currentY;\n      var elapsed = (time - context.startTime) / SCROLL_TIME;\n\n      // avoid elapsed times higher than one\n      elapsed = elapsed > 1 ? 1 : elapsed;\n\n      // apply easing to elapsed time\n      value = ease(elapsed);\n\n      currentX = context.startX + (context.x - context.startX) * value;\n      currentY = context.startY + (context.y - context.startY) * value;\n\n      context.method.call(context.scrollable, currentX, currentY);\n\n      // scroll more if we have not reached our destination\n      if (currentX !== context.x || currentY !== context.y) {\n        w.requestAnimationFrame(step.bind(w, context));\n      }\n    }\n\n    /**\n     * scrolls window or element with a smooth behavior\n     * @method smoothScroll\n     * @param {Object|Node} el\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {undefined}\n     */\n    function smoothScroll(el, x, y) {\n      var scrollable;\n      var startX;\n      var startY;\n      var method;\n      var startTime = now();\n\n      // define scroll context\n      if (el === d.body) {\n        scrollable = w;\n        startX = w.scrollX || w.pageXOffset;\n        startY = w.scrollY || w.pageYOffset;\n        method = original.scroll;\n      } else {\n        scrollable = el;\n        startX = el.scrollLeft;\n        startY = el.scrollTop;\n        method = scrollElement;\n      }\n\n      // scroll looping over a frame\n      step({\n        scrollable: scrollable,\n        method: method,\n        startTime: startTime,\n        startX: startX,\n        startY: startY,\n        x: x,\n        y: y\n      });\n    }\n\n    // ORIGINAL METHODS OVERRIDES\n    // w.scroll and w.scrollTo\n    w.scroll = w.scrollTo = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.scroll.call(\n          w,\n          arguments[0].left !== undefined\n            ? arguments[0].left\n            : typeof arguments[0] !== 'object'\n              ? arguments[0]\n              : w.scrollX || w.pageXOffset,\n          // use top prop, second argument if present or fallback to scrollY\n          arguments[0].top !== undefined\n            ? arguments[0].top\n            : arguments[1] !== undefined\n              ? arguments[1]\n              : w.scrollY || w.pageYOffset\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        arguments[0].left !== undefined\n          ? ~~arguments[0].left\n          : w.scrollX || w.pageXOffset,\n        arguments[0].top !== undefined\n          ? ~~arguments[0].top\n          : w.scrollY || w.pageYOffset\n      );\n    };\n\n    // w.scrollBy\n    w.scrollBy = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0])) {\n        original.scrollBy.call(\n          w,\n          arguments[0].left !== undefined\n            ? arguments[0].left\n            : typeof arguments[0] !== 'object' ? arguments[0] : 0,\n          arguments[0].top !== undefined\n            ? arguments[0].top\n            : arguments[1] !== undefined ? arguments[1] : 0\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        ~~arguments[0].left + (w.scrollX || w.pageXOffset),\n        ~~arguments[0].top + (w.scrollY || w.pageYOffset)\n      );\n    };\n\n    // Element.prototype.scroll and Element.prototype.scrollTo\n    Element.prototype.scroll = Element.prototype.scrollTo = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        // if one number is passed, throw error to match Firefox implementation\n        if (typeof arguments[0] === 'number' && arguments[1] === undefined) {\n          throw new SyntaxError('Value could not be converted');\n        }\n\n        original.elementScroll.call(\n          this,\n          // use left prop, first number argument or fallback to scrollLeft\n          arguments[0].left !== undefined\n            ? ~~arguments[0].left\n            : typeof arguments[0] !== 'object' ? ~~arguments[0] : this.scrollLeft,\n          // use top prop, second argument or fallback to scrollTop\n          arguments[0].top !== undefined\n            ? ~~arguments[0].top\n            : arguments[1] !== undefined ? ~~arguments[1] : this.scrollTop\n        );\n\n        return;\n      }\n\n      var left = arguments[0].left;\n      var top = arguments[0].top;\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        this,\n        this,\n        typeof left === 'undefined' ? this.scrollLeft : ~~left,\n        typeof top === 'undefined' ? this.scrollTop : ~~top\n      );\n    };\n\n    // Element.prototype.scrollBy\n    Element.prototype.scrollBy = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.elementScroll.call(\n          this,\n          arguments[0].left !== undefined\n            ? ~~arguments[0].left + this.scrollLeft\n            : ~~arguments[0] + this.scrollLeft,\n          arguments[0].top !== undefined\n            ? ~~arguments[0].top + this.scrollTop\n            : ~~arguments[1] + this.scrollTop\n        );\n\n        return;\n      }\n\n      this.scroll({\n        left: ~~arguments[0].left + this.scrollLeft,\n        top: ~~arguments[0].top + this.scrollTop,\n        behavior: arguments[0].behavior\n      });\n    };\n\n    // Element.prototype.scrollIntoView\n    Element.prototype.scrollIntoView = function() {\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.scrollIntoView.call(\n          this,\n          arguments[0] === undefined ? true : arguments[0]\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      var scrollableParent = findScrollableParent(this);\n      var parentRects = scrollableParent.getBoundingClientRect();\n      var clientRects = this.getBoundingClientRect();\n\n      if (scrollableParent !== d.body) {\n        // reveal element inside parent\n        smoothScroll.call(\n          this,\n          scrollableParent,\n          scrollableParent.scrollLeft + clientRects.left - parentRects.left,\n          scrollableParent.scrollTop + clientRects.top - parentRects.top\n        );\n\n        // reveal parent in viewport unless is fixed\n        if (w.getComputedStyle(scrollableParent).position !== 'fixed') {\n          w.scrollBy({\n            left: parentRects.left,\n            top: parentRects.top,\n            behavior: 'smooth'\n          });\n        }\n      } else {\n        // reveal element in viewport\n        w.scrollBy({\n          left: clientRects.left,\n          top: clientRects.top,\n          behavior: 'smooth'\n        });\n      }\n    };\n  }\n\n  if (typeof exports === 'object' && typeof module !== 'undefined') {\n    // commonjs\n    module.exports = { polyfill: polyfill };\n  } else {\n    // global\n    polyfill();\n  }\n\n}());\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst api_1 = require(\"./api\");\nconst config_1 = require(\"./config\");\nconst state_1 = require(\"./state\");\nconst wrap_1 = require(\"./wrap\");\nconst events = require(\"./events\");\nconst render_1 = require(\"./render\");\nconst svg = require(\"./svg\");\nconst util = require(\"./util\");\nfunction Chessground(element, config) {\n    const state = state_1.defaults();\n    config_1.configure(state, config || {});\n    function redrawAll() {\n        let prevUnbind = state.dom && state.dom.unbind;\n        const relative = state.viewOnly && !state.drawable.visible, elements = wrap_1.default(element, state, relative), bounds = util.memo(() => elements.board.getBoundingClientRect()), redrawNow = (skipSvg) => {\n            render_1.default(state);\n            if (!skipSvg && elements.svg)\n                svg.renderSvg(state, elements.svg);\n        };\n        state.dom = {\n            elements,\n            bounds,\n            redraw: debounceRedraw(redrawNow),\n            redrawNow,\n            unbind: prevUnbind,\n            relative\n        };\n        state.drawable.prevSvgHash = '';\n        redrawNow(false);\n        events.bindBoard(state);\n        if (!prevUnbind)\n            state.dom.unbind = events.bindDocument(state, redrawAll);\n        state.events.insert && state.events.insert(elements);\n    }\n    redrawAll();\n    return api_1.start(state, redrawAll);\n}\nexports.Chessground = Chessground;\n;\nfunction debounceRedraw(redrawNow) {\n    let redrawing = false;\n    return () => {\n        if (redrawing)\n            return;\n        redrawing = true;\n        requestAnimationFrame(() => {\n            redrawNow();\n            redrawing = false;\n        });\n    };\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hlc3Nncm91bmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzcmMvY2hlc3Nncm91bmQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQkFBa0M7QUFDbEMscUNBQTRDO0FBQzVDLG1DQUF5QztBQUV6QyxpQ0FBZ0M7QUFDaEMsbUNBQWtDO0FBQ2xDLHFDQUE4QjtBQUM5Qiw2QkFBNkI7QUFDN0IsK0JBQStCO0FBRS9CLFNBQWdCLFdBQVcsQ0FBQyxPQUFvQixFQUFFLE1BQWU7SUFFL0QsTUFBTSxLQUFLLEdBQUcsZ0JBQVEsRUFBVyxDQUFDO0lBRWxDLGtCQUFTLENBQUMsS0FBSyxFQUFFLE1BQU0sSUFBSSxFQUFFLENBQUMsQ0FBQztJQUUvQixTQUFTLFNBQVM7UUFDaEIsSUFBSSxVQUFVLEdBQUcsS0FBSyxDQUFDLEdBQUcsSUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQztRQUcvQyxNQUFNLFFBQVEsR0FBRyxLQUFLLENBQUMsUUFBUSxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQzFELFFBQVEsR0FBRyxjQUFVLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxRQUFRLENBQUMsRUFDL0MsTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLEVBQ2hFLFNBQVMsR0FBRyxDQUFDLE9BQWlCLEVBQUUsRUFBRTtZQUNoQyxnQkFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2QsSUFBSSxDQUFDLE9BQU8sSUFBSSxRQUFRLENBQUMsR0FBRztnQkFBRSxHQUFHLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbkUsQ0FBQyxDQUFDO1FBQ0YsS0FBSyxDQUFDLEdBQUcsR0FBRztZQUNWLFFBQVE7WUFDUixNQUFNO1lBQ04sTUFBTSxFQUFFLGNBQWMsQ0FBQyxTQUFTLENBQUM7WUFDakMsU0FBUztZQUNULE1BQU0sRUFBRSxVQUFVO1lBQ2xCLFFBQVE7U0FDVCxDQUFDO1FBQ0YsS0FBSyxDQUFDLFFBQVEsQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO1FBQ2hDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNqQixNQUFNLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3hCLElBQUksQ0FBQyxVQUFVO1lBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDMUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUNELFNBQVMsRUFBRSxDQUFDO0lBRVosT0FBTyxXQUFLLENBQUMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQ2pDLENBQUM7QUFsQ0Qsa0NBa0NDO0FBQUEsQ0FBQztBQUVGLFNBQVMsY0FBYyxDQUFDLFNBQXNDO0lBQzVELElBQUksU0FBUyxHQUFHLEtBQUssQ0FBQztJQUN0QixPQUFPLEdBQUcsRUFBRTtRQUNWLElBQUksU0FBUztZQUFFLE9BQU87UUFDdEIsU0FBUyxHQUFHLElBQUksQ0FBQztRQUNqQixxQkFBcUIsQ0FBQyxHQUFHLEVBQUU7WUFDekIsU0FBUyxFQUFFLENBQUM7WUFDWixTQUFTLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwaSwgc3RhcnQgfSBmcm9tICcuL2FwaSdcbmltcG9ydCB7IENvbmZpZywgY29uZmlndXJlIH0gZnJvbSAnLi9jb25maWcnXG5pbXBvcnQgeyBTdGF0ZSwgZGVmYXVsdHMgfSBmcm9tICcuL3N0YXRlJ1xuXG5pbXBvcnQgcmVuZGVyV3JhcCBmcm9tICcuL3dyYXAnO1xuaW1wb3J0ICogYXMgZXZlbnRzIGZyb20gJy4vZXZlbnRzJ1xuaW1wb3J0IHJlbmRlciBmcm9tICcuL3JlbmRlcic7XG5pbXBvcnQgKiBhcyBzdmcgZnJvbSAnLi9zdmcnO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuL3V0aWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gQ2hlc3Nncm91bmQoZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbmZpZz86IENvbmZpZyk6IEFwaSB7XG5cbiAgY29uc3Qgc3RhdGUgPSBkZWZhdWx0cygpIGFzIFN0YXRlO1xuXG4gIGNvbmZpZ3VyZShzdGF0ZSwgY29uZmlnIHx8IHt9KTtcblxuICBmdW5jdGlvbiByZWRyYXdBbGwoKSB7XG4gICAgbGV0IHByZXZVbmJpbmQgPSBzdGF0ZS5kb20gJiYgc3RhdGUuZG9tLnVuYmluZDtcbiAgICAvLyBjb21wdXRlIGJvdW5kcyBmcm9tIGV4aXN0aW5nIGJvYXJkIGVsZW1lbnQgaWYgcG9zc2libGVcbiAgICAvLyB0aGlzIGFsbG93cyBub24tc3F1YXJlIGJvYXJkcyBmcm9tIENTUyB0byBiZSBoYW5kbGVkIChmb3IgM0QpXG4gICAgY29uc3QgcmVsYXRpdmUgPSBzdGF0ZS52aWV3T25seSAmJiAhc3RhdGUuZHJhd2FibGUudmlzaWJsZSxcbiAgICBlbGVtZW50cyA9IHJlbmRlcldyYXAoZWxlbWVudCwgc3RhdGUsIHJlbGF0aXZlKSxcbiAgICBib3VuZHMgPSB1dGlsLm1lbW8oKCkgPT4gZWxlbWVudHMuYm9hcmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLFxuICAgIHJlZHJhd05vdyA9IChza2lwU3ZnPzogYm9vbGVhbikgPT4ge1xuICAgICAgcmVuZGVyKHN0YXRlKTtcbiAgICAgIGlmICghc2tpcFN2ZyAmJiBlbGVtZW50cy5zdmcpIHN2Zy5yZW5kZXJTdmcoc3RhdGUsIGVsZW1lbnRzLnN2Zyk7XG4gICAgfTtcbiAgICBzdGF0ZS5kb20gPSB7XG4gICAgICBlbGVtZW50cyxcbiAgICAgIGJvdW5kcyxcbiAgICAgIHJlZHJhdzogZGVib3VuY2VSZWRyYXcocmVkcmF3Tm93KSxcbiAgICAgIHJlZHJhd05vdyxcbiAgICAgIHVuYmluZDogcHJldlVuYmluZCxcbiAgICAgIHJlbGF0aXZlXG4gICAgfTtcbiAgICBzdGF0ZS5kcmF3YWJsZS5wcmV2U3ZnSGFzaCA9ICcnO1xuICAgIHJlZHJhd05vdyhmYWxzZSk7XG4gICAgZXZlbnRzLmJpbmRCb2FyZChzdGF0ZSk7XG4gICAgaWYgKCFwcmV2VW5iaW5kKSBzdGF0ZS5kb20udW5iaW5kID0gZXZlbnRzLmJpbmREb2N1bWVudChzdGF0ZSwgcmVkcmF3QWxsKTtcbiAgICBzdGF0ZS5ldmVudHMuaW5zZXJ0ICYmIHN0YXRlLmV2ZW50cy5pbnNlcnQoZWxlbWVudHMpO1xuICB9XG4gIHJlZHJhd0FsbCgpO1xuXG4gIHJldHVybiBzdGFydChzdGF0ZSwgcmVkcmF3QWxsKTtcbn07XG5cbmZ1bmN0aW9uIGRlYm91bmNlUmVkcmF3KHJlZHJhd05vdzogKHNraXBTdmc/OiBib29sZWFuKSA9PiB2b2lkKTogKCkgPT4gdm9pZCB7XG4gIGxldCByZWRyYXdpbmcgPSBmYWxzZTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBpZiAocmVkcmF3aW5nKSByZXR1cm47XG4gICAgcmVkcmF3aW5nID0gdHJ1ZTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgcmVkcmF3Tm93KCk7XG4gICAgICByZWRyYXdpbmcgPSBmYWxzZTtcbiAgICB9KTtcbiAgfTtcbn1cbiJdfQ==","/*global define:false */\n/**\n * Copyright 2012-2017 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Mousetrap is a simple keyboard shortcut library for Javascript with\n * no external dependencies\n *\n * @version 1.6.5\n * @url craig.is/killing/mice\n */\n(function(window, document, undefined) {\n\n    // Check if mousetrap is used inside browser, if not, return\n    if (!window) {\n        return;\n    }\n\n    /**\n     * mapping of special keycodes to their corresponding keys\n     *\n     * everything in this dictionary cannot use keypress events\n     * so it has to be here to map to the correct keycodes for\n     * keyup/keydown events\n     *\n     * @type {Object}\n     */\n    var _MAP = {\n        8: 'backspace',\n        9: 'tab',\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        20: 'capslock',\n        27: 'esc',\n        32: 'space',\n        33: 'pageup',\n        34: 'pagedown',\n        35: 'end',\n        36: 'home',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        45: 'ins',\n        46: 'del',\n        91: 'meta',\n        93: 'meta',\n        224: 'meta'\n    };\n\n    /**\n     * mapping for special characters so they can support\n     *\n     * this dictionary is only used incase you want to bind a\n     * keyup or keydown event to one of these keys\n     *\n     * @type {Object}\n     */\n    var _KEYCODE_MAP = {\n        106: '*',\n        107: '+',\n        109: '-',\n        110: '.',\n        111 : '/',\n        186: ';',\n        187: '=',\n        188: ',',\n        189: '-',\n        190: '.',\n        191: '/',\n        192: '`',\n        219: '[',\n        220: '\\\\',\n        221: ']',\n        222: '\\''\n    };\n\n    /**\n     * this is a mapping of keys that require shift on a US keypad\n     * back to the non shift equivelents\n     *\n     * this is so you can use keyup events with these keys\n     *\n     * note that this will only work reliably on US keyboards\n     *\n     * @type {Object}\n     */\n    var _SHIFT_MAP = {\n        '~': '`',\n        '!': '1',\n        '@': '2',\n        '#': '3',\n        '$': '4',\n        '%': '5',\n        '^': '6',\n        '&': '7',\n        '*': '8',\n        '(': '9',\n        ')': '0',\n        '_': '-',\n        '+': '=',\n        ':': ';',\n        '\\\"': '\\'',\n        '<': ',',\n        '>': '.',\n        '?': '/',\n        '|': '\\\\'\n    };\n\n    /**\n     * this is a list of special strings you can use to map\n     * to modifier keys when you specify your keyboard shortcuts\n     *\n     * @type {Object}\n     */\n    var _SPECIAL_ALIASES = {\n        'option': 'alt',\n        'command': 'meta',\n        'return': 'enter',\n        'escape': 'esc',\n        'plus': '+',\n        'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n    };\n\n    /**\n     * variable to store the flipped version of _MAP from above\n     * needed to check if we should use keypress or not when no action\n     * is specified\n     *\n     * @type {Object|undefined}\n     */\n    var _REVERSE_MAP;\n\n    /**\n     * loop through the f keys, f1 to f19 and add them to the map\n     * programatically\n     */\n    for (var i = 1; i < 20; ++i) {\n        _MAP[111 + i] = 'f' + i;\n    }\n\n    /**\n     * loop through to map numbers on the numeric keypad\n     */\n    for (i = 0; i <= 9; ++i) {\n\n        // This needs to use a string cause otherwise since 0 is falsey\n        // mousetrap will never fire for numpad 0 pressed as part of a keydown\n        // event.\n        //\n        // @see https://github.com/ccampbell/mousetrap/pull/258\n        _MAP[i + 96] = i.toString();\n    }\n\n    /**\n     * cross browser add event method\n     *\n     * @param {Element|HTMLDocument} object\n     * @param {string} type\n     * @param {Function} callback\n     * @returns void\n     */\n    function _addEvent(object, type, callback) {\n        if (object.addEventListener) {\n            object.addEventListener(type, callback, false);\n            return;\n        }\n\n        object.attachEvent('on' + type, callback);\n    }\n\n    /**\n     * takes the event and returns the key character\n     *\n     * @param {Event} e\n     * @return {string}\n     */\n    function _characterFromEvent(e) {\n\n        // for keypress events we should return the character as is\n        if (e.type == 'keypress') {\n            var character = String.fromCharCode(e.which);\n\n            // if the shift key is not pressed then it is safe to assume\n            // that we want the character to be lowercase.  this means if\n            // you accidentally have caps lock on then your key bindings\n            // will continue to work\n            //\n            // the only side effect that might not be desired is if you\n            // bind something like 'A' cause you want to trigger an\n            // event when capital A is pressed caps lock will no longer\n            // trigger the event.  shift+a will though.\n            if (!e.shiftKey) {\n                character = character.toLowerCase();\n            }\n\n            return character;\n        }\n\n        // for non keypress events the special maps are needed\n        if (_MAP[e.which]) {\n            return _MAP[e.which];\n        }\n\n        if (_KEYCODE_MAP[e.which]) {\n            return _KEYCODE_MAP[e.which];\n        }\n\n        // if it is not in the special map\n\n        // with keydown and keyup events the character seems to always\n        // come in as an uppercase character whether you are pressing shift\n        // or not.  we should make sure it is always lowercase for comparisons\n        return String.fromCharCode(e.which).toLowerCase();\n    }\n\n    /**\n     * checks if two arrays are equal\n     *\n     * @param {Array} modifiers1\n     * @param {Array} modifiers2\n     * @returns {boolean}\n     */\n    function _modifiersMatch(modifiers1, modifiers2) {\n        return modifiers1.sort().join(',') === modifiers2.sort().join(',');\n    }\n\n    /**\n     * takes a key event and figures out what the modifiers are\n     *\n     * @param {Event} e\n     * @returns {Array}\n     */\n    function _eventModifiers(e) {\n        var modifiers = [];\n\n        if (e.shiftKey) {\n            modifiers.push('shift');\n        }\n\n        if (e.altKey) {\n            modifiers.push('alt');\n        }\n\n        if (e.ctrlKey) {\n            modifiers.push('ctrl');\n        }\n\n        if (e.metaKey) {\n            modifiers.push('meta');\n        }\n\n        return modifiers;\n    }\n\n    /**\n     * prevents default for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _preventDefault(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n            return;\n        }\n\n        e.returnValue = false;\n    }\n\n    /**\n     * stops propogation for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _stopPropagation(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n            return;\n        }\n\n        e.cancelBubble = true;\n    }\n\n    /**\n     * determines if the keycode specified is a modifier key or not\n     *\n     * @param {string} key\n     * @returns {boolean}\n     */\n    function _isModifier(key) {\n        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';\n    }\n\n    /**\n     * reverses the map lookup so that we can look for specific keys\n     * to see what can and can't use keypress\n     *\n     * @return {Object}\n     */\n    function _getReverseMap() {\n        if (!_REVERSE_MAP) {\n            _REVERSE_MAP = {};\n            for (var key in _MAP) {\n\n                // pull out the numeric keypad from here cause keypress should\n                // be able to detect the keys from the character\n                if (key > 95 && key < 112) {\n                    continue;\n                }\n\n                if (_MAP.hasOwnProperty(key)) {\n                    _REVERSE_MAP[_MAP[key]] = key;\n                }\n            }\n        }\n        return _REVERSE_MAP;\n    }\n\n    /**\n     * picks the best action based on the key combination\n     *\n     * @param {string} key - character for key\n     * @param {Array} modifiers\n     * @param {string=} action passed in\n     */\n    function _pickBestAction(key, modifiers, action) {\n\n        // if no action was picked in we should try to pick the one\n        // that we think would work best for this key\n        if (!action) {\n            action = _getReverseMap()[key] ? 'keydown' : 'keypress';\n        }\n\n        // modifier keys don't work as expected with keypress,\n        // switch to keydown\n        if (action == 'keypress' && modifiers.length) {\n            action = 'keydown';\n        }\n\n        return action;\n    }\n\n    /**\n     * Converts from a string key combination to an array\n     *\n     * @param  {string} combination like \"command+shift+l\"\n     * @return {Array}\n     */\n    function _keysFromString(combination) {\n        if (combination === '+') {\n            return ['+'];\n        }\n\n        combination = combination.replace(/\\+{2}/g, '+plus');\n        return combination.split('+');\n    }\n\n    /**\n     * Gets info for a specific key combination\n     *\n     * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n     * @param  {string=} action\n     * @returns {Object}\n     */\n    function _getKeyInfo(combination, action) {\n        var keys;\n        var key;\n        var i;\n        var modifiers = [];\n\n        // take the keys from this pattern and figure out what the actual\n        // pattern is all about\n        keys = _keysFromString(combination);\n\n        for (i = 0; i < keys.length; ++i) {\n            key = keys[i];\n\n            // normalize key names\n            if (_SPECIAL_ALIASES[key]) {\n                key = _SPECIAL_ALIASES[key];\n            }\n\n            // if this is not a keypress event then we should\n            // be smart about using shift keys\n            // this will only work for US keyboards however\n            if (action && action != 'keypress' && _SHIFT_MAP[key]) {\n                key = _SHIFT_MAP[key];\n                modifiers.push('shift');\n            }\n\n            // if this key is a modifier then add it to the list of modifiers\n            if (_isModifier(key)) {\n                modifiers.push(key);\n            }\n        }\n\n        // depending on what the key combination is\n        // we will try to pick the best event for it\n        action = _pickBestAction(key, modifiers, action);\n\n        return {\n            key: key,\n            modifiers: modifiers,\n            action: action\n        };\n    }\n\n    function _belongsTo(element, ancestor) {\n        if (element === null || element === document) {\n            return false;\n        }\n\n        if (element === ancestor) {\n            return true;\n        }\n\n        return _belongsTo(element.parentNode, ancestor);\n    }\n\n    function Mousetrap(targetElement) {\n        var self = this;\n\n        targetElement = targetElement || document;\n\n        if (!(self instanceof Mousetrap)) {\n            return new Mousetrap(targetElement);\n        }\n\n        /**\n         * element to attach key events to\n         *\n         * @type {Element}\n         */\n        self.target = targetElement;\n\n        /**\n         * a list of all the callbacks setup via Mousetrap.bind()\n         *\n         * @type {Object}\n         */\n        self._callbacks = {};\n\n        /**\n         * direct map of string combinations to callbacks used for trigger()\n         *\n         * @type {Object}\n         */\n        self._directMap = {};\n\n        /**\n         * keeps track of what level each sequence is at since multiple\n         * sequences can start out with the same sequence\n         *\n         * @type {Object}\n         */\n        var _sequenceLevels = {};\n\n        /**\n         * variable to store the setTimeout call\n         *\n         * @type {null|number}\n         */\n        var _resetTimer;\n\n        /**\n         * temporary state where we will ignore the next keyup\n         *\n         * @type {boolean|string}\n         */\n        var _ignoreNextKeyup = false;\n\n        /**\n         * temporary state where we will ignore the next keypress\n         *\n         * @type {boolean}\n         */\n        var _ignoreNextKeypress = false;\n\n        /**\n         * are we currently inside of a sequence?\n         * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n         *\n         * @type {boolean|string}\n         */\n        var _nextExpectedAction = false;\n\n        /**\n         * resets all sequence counters except for the ones passed in\n         *\n         * @param {Object} doNotReset\n         * @returns void\n         */\n        function _resetSequences(doNotReset) {\n            doNotReset = doNotReset || {};\n\n            var activeSequences = false,\n                key;\n\n            for (key in _sequenceLevels) {\n                if (doNotReset[key]) {\n                    activeSequences = true;\n                    continue;\n                }\n                _sequenceLevels[key] = 0;\n            }\n\n            if (!activeSequences) {\n                _nextExpectedAction = false;\n            }\n        }\n\n        /**\n         * finds all callbacks that match based on the keycode, modifiers,\n         * and action\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event|Object} e\n         * @param {string=} sequenceName - name of the sequence we are looking for\n         * @param {string=} combination\n         * @param {number=} level\n         * @returns {Array}\n         */\n        function _getMatches(character, modifiers, e, sequenceName, combination, level) {\n            var i;\n            var callback;\n            var matches = [];\n            var action = e.type;\n\n            // if there are no events related to this keycode\n            if (!self._callbacks[character]) {\n                return [];\n            }\n\n            // if a modifier key is coming up on its own we should allow it\n            if (action == 'keyup' && _isModifier(character)) {\n                modifiers = [character];\n            }\n\n            // loop through all callbacks for the key that was pressed\n            // and see if any of them match\n            for (i = 0; i < self._callbacks[character].length; ++i) {\n                callback = self._callbacks[character][i];\n\n                // if a sequence name is not specified, but this is a sequence at\n                // the wrong level then move onto the next match\n                if (!sequenceName && callback.seq && _sequenceLevels[callback.seq] != callback.level) {\n                    continue;\n                }\n\n                // if the action we are looking for doesn't match the action we got\n                // then we should keep going\n                if (action != callback.action) {\n                    continue;\n                }\n\n                // if this is a keypress event and the meta key and control key\n                // are not pressed that means that we need to only look at the\n                // character, otherwise check the modifiers as well\n                //\n                // chrome will not fire a keypress if meta or control is down\n                // safari will fire a keypress if meta or meta+shift is down\n                // firefox will fire a keypress if meta or control is down\n                if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {\n\n                    // when you bind a combination or sequence a second time it\n                    // should overwrite the first one.  if a sequenceName or\n                    // combination is specified in this call it does just that\n                    //\n                    // @todo make deleting its own method?\n                    var deleteCombo = !sequenceName && callback.combo == combination;\n                    var deleteSequence = sequenceName && callback.seq == sequenceName && callback.level == level;\n                    if (deleteCombo || deleteSequence) {\n                        self._callbacks[character].splice(i, 1);\n                    }\n\n                    matches.push(callback);\n                }\n            }\n\n            return matches;\n        }\n\n        /**\n         * actually calls the callback function\n         *\n         * if your callback function returns false this will use the jquery\n         * convention - prevent default and stop propogation on the event\n         *\n         * @param {Function} callback\n         * @param {Event} e\n         * @returns void\n         */\n        function _fireCallback(callback, e, combo, sequence) {\n\n            // if this event should not happen stop here\n            if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n                return;\n            }\n\n            if (callback(e, combo) === false) {\n                _preventDefault(e);\n                _stopPropagation(e);\n            }\n        }\n\n        /**\n         * handles a character key event\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event} e\n         * @returns void\n         */\n        self._handleKey = function(character, modifiers, e) {\n            var callbacks = _getMatches(character, modifiers, e);\n            var i;\n            var doNotReset = {};\n            var maxLevel = 0;\n            var processedSequenceCallback = false;\n\n            // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n            for (i = 0; i < callbacks.length; ++i) {\n                if (callbacks[i].seq) {\n                    maxLevel = Math.max(maxLevel, callbacks[i].level);\n                }\n            }\n\n            // loop through matching callbacks for this key event\n            for (i = 0; i < callbacks.length; ++i) {\n\n                // fire for all sequence callbacks\n                // this is because if for example you have multiple sequences\n                // bound such as \"g i\" and \"g t\" they both need to fire the\n                // callback for matching g cause otherwise you can only ever\n                // match the first one\n                if (callbacks[i].seq) {\n\n                    // only fire callbacks for the maxLevel to prevent\n                    // subsequences from also firing\n                    //\n                    // for example 'a option b' should not cause 'option b' to fire\n                    // even though 'option b' is part of the other sequence\n                    //\n                    // any sequences that do not match here will be discarded\n                    // below by the _resetSequences call\n                    if (callbacks[i].level != maxLevel) {\n                        continue;\n                    }\n\n                    processedSequenceCallback = true;\n\n                    // keep a list of which sequences were matches for later\n                    doNotReset[callbacks[i].seq] = 1;\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);\n                    continue;\n                }\n\n                // if there were no sequence matches but we are still here\n                // that means this is a regular match so we should fire that\n                if (!processedSequenceCallback) {\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n                }\n            }\n\n            // if the key you pressed matches the type of sequence without\n            // being a modifier (ie \"keyup\" or \"keypress\") then we should\n            // reset all sequences that were not matched by this event\n            //\n            // this is so, for example, if you have the sequence \"h a t\" and you\n            // type \"h e a r t\" it does not match.  in this case the \"e\" will\n            // cause the sequence to reset\n            //\n            // modifier keys are ignored because you can have a sequence\n            // that contains modifiers such as \"enter ctrl+space\" and in most\n            // cases the modifier key will be pressed before the next key\n            //\n            // also if you have a sequence such as \"ctrl+b a\" then pressing the\n            // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n            //\n            // the \"keydown\" is expected when there is a modifier, but the\n            // \"keypress\" ends up matching the _nextExpectedAction since it occurs\n            // after and that causes the sequence to reset\n            //\n            // we ignore keypresses in a sequence that directly follow a keydown\n            // for the same character\n            var ignoreThisKeypress = e.type == 'keypress' && _ignoreNextKeypress;\n            if (e.type == _nextExpectedAction && !_isModifier(character) && !ignoreThisKeypress) {\n                _resetSequences(doNotReset);\n            }\n\n            _ignoreNextKeypress = processedSequenceCallback && e.type == 'keydown';\n        };\n\n        /**\n         * handles a keydown event\n         *\n         * @param {Event} e\n         * @returns void\n         */\n        function _handleKeyEvent(e) {\n\n            // normalize e.which for key events\n            // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n            if (typeof e.which !== 'number') {\n                e.which = e.keyCode;\n            }\n\n            var character = _characterFromEvent(e);\n\n            // no character found then stop\n            if (!character) {\n                return;\n            }\n\n            // need to use === for the character check because the character can be 0\n            if (e.type == 'keyup' && _ignoreNextKeyup === character) {\n                _ignoreNextKeyup = false;\n                return;\n            }\n\n            self.handleKey(character, _eventModifiers(e), e);\n        }\n\n        /**\n         * called to set a 1 second timeout on the specified sequence\n         *\n         * this is so after each key press in the sequence you have 1 second\n         * to press the next key before you have to start over\n         *\n         * @returns void\n         */\n        function _resetSequenceTimer() {\n            clearTimeout(_resetTimer);\n            _resetTimer = setTimeout(_resetSequences, 1000);\n        }\n\n        /**\n         * binds a key sequence to an event\n         *\n         * @param {string} combo - combo specified in bind call\n         * @param {Array} keys\n         * @param {Function} callback\n         * @param {string=} action\n         * @returns void\n         */\n        function _bindSequence(combo, keys, callback, action) {\n\n            // start off by adding a sequence level record for this combination\n            // and setting the level to 0\n            _sequenceLevels[combo] = 0;\n\n            /**\n             * callback to increase the sequence level for this sequence and reset\n             * all other sequences that were active\n             *\n             * @param {string} nextAction\n             * @returns {Function}\n             */\n            function _increaseSequence(nextAction) {\n                return function() {\n                    _nextExpectedAction = nextAction;\n                    ++_sequenceLevels[combo];\n                    _resetSequenceTimer();\n                };\n            }\n\n            /**\n             * wraps the specified callback inside of another function in order\n             * to reset all sequence counters as soon as this sequence is done\n             *\n             * @param {Event} e\n             * @returns void\n             */\n            function _callbackAndReset(e) {\n                _fireCallback(callback, e, combo);\n\n                // we should ignore the next key up if the action is key down\n                // or keypress.  this is so if you finish a sequence and\n                // release the key the final key will not trigger a keyup\n                if (action !== 'keyup') {\n                    _ignoreNextKeyup = _characterFromEvent(e);\n                }\n\n                // weird race condition if a sequence ends with the key\n                // another sequence begins with\n                setTimeout(_resetSequences, 10);\n            }\n\n            // loop through keys one at a time and bind the appropriate callback\n            // function.  for any key leading up to the final one it should\n            // increase the sequence. after the final, it should reset all sequences\n            //\n            // if an action is specified in the original bind call then that will\n            // be used throughout.  otherwise we will pass the action that the\n            // next key in the sequence should match.  this allows a sequence\n            // to mix and match keypress and keydown events depending on which\n            // ones are better suited to the key provided\n            for (var i = 0; i < keys.length; ++i) {\n                var isFinal = i + 1 === keys.length;\n                var wrappedCallback = isFinal ? _callbackAndReset : _increaseSequence(action || _getKeyInfo(keys[i + 1]).action);\n                _bindSingle(keys[i], wrappedCallback, action, combo, i);\n            }\n        }\n\n        /**\n         * binds a single keyboard combination\n         *\n         * @param {string} combination\n         * @param {Function} callback\n         * @param {string=} action\n         * @param {string=} sequenceName - name of sequence if part of sequence\n         * @param {number=} level - what part of the sequence the command is\n         * @returns void\n         */\n        function _bindSingle(combination, callback, action, sequenceName, level) {\n\n            // store a direct mapped reference for use with Mousetrap.trigger\n            self._directMap[combination + ':' + action] = callback;\n\n            // make sure multiple spaces in a row become a single space\n            combination = combination.replace(/\\s+/g, ' ');\n\n            var sequence = combination.split(' ');\n            var info;\n\n            // if this pattern is a sequence of keys then run through this method\n            // to reprocess each pattern one key at a time\n            if (sequence.length > 1) {\n                _bindSequence(combination, sequence, callback, action);\n                return;\n            }\n\n            info = _getKeyInfo(combination, action);\n\n            // make sure to initialize array if this is the first time\n            // a callback is added for this key\n            self._callbacks[info.key] = self._callbacks[info.key] || [];\n\n            // remove an existing match if there is one\n            _getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level);\n\n            // add this call back to the array\n            // if it is a sequence put it at the beginning\n            // if not put it at the end\n            //\n            // this is important because the way these are processed expects\n            // the sequence ones to come first\n            self._callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n                callback: callback,\n                modifiers: info.modifiers,\n                action: info.action,\n                seq: sequenceName,\n                level: level,\n                combo: combination\n            });\n        }\n\n        /**\n         * binds multiple combinations to the same callback\n         *\n         * @param {Array} combinations\n         * @param {Function} callback\n         * @param {string|undefined} action\n         * @returns void\n         */\n        self._bindMultiple = function(combinations, callback, action) {\n            for (var i = 0; i < combinations.length; ++i) {\n                _bindSingle(combinations[i], callback, action);\n            }\n        };\n\n        // start!\n        _addEvent(targetElement, 'keypress', _handleKeyEvent);\n        _addEvent(targetElement, 'keydown', _handleKeyEvent);\n        _addEvent(targetElement, 'keyup', _handleKeyEvent);\n    }\n\n    /**\n     * binds an event to mousetrap\n     *\n     * can be a single key, a combination of keys separated with +,\n     * an array of keys, or a sequence of keys separated by spaces\n     *\n     * be sure to list the modifier keys first to make sure that the\n     * correct key ends up getting bound (the last key in the pattern)\n     *\n     * @param {string|Array} keys\n     * @param {Function} callback\n     * @param {string=} action - 'keypress', 'keydown', or 'keyup'\n     * @returns void\n     */\n    Mousetrap.prototype.bind = function(keys, callback, action) {\n        var self = this;\n        keys = keys instanceof Array ? keys : [keys];\n        self._bindMultiple.call(self, keys, callback, action);\n        return self;\n    };\n\n    /**\n     * unbinds an event to mousetrap\n     *\n     * the unbinding sets the callback function of the specified key combo\n     * to an empty function and deletes the corresponding key in the\n     * _directMap dict.\n     *\n     * TODO: actually remove this from the _callbacks dictionary instead\n     * of binding an empty function\n     *\n     * the keycombo+action has to be exactly the same as\n     * it was defined in the bind method\n     *\n     * @param {string|Array} keys\n     * @param {string} action\n     * @returns void\n     */\n    Mousetrap.prototype.unbind = function(keys, action) {\n        var self = this;\n        return self.bind.call(self, keys, function() {}, action);\n    };\n\n    /**\n     * triggers an event that has already been bound\n     *\n     * @param {string} keys\n     * @param {string=} action\n     * @returns void\n     */\n    Mousetrap.prototype.trigger = function(keys, action) {\n        var self = this;\n        if (self._directMap[keys + ':' + action]) {\n            self._directMap[keys + ':' + action]({}, keys);\n        }\n        return self;\n    };\n\n    /**\n     * resets the library back to its initial state.  this is useful\n     * if you want to clear out the current keyboard shortcuts and bind\n     * new ones - for example if you switch to another page\n     *\n     * @returns void\n     */\n    Mousetrap.prototype.reset = function() {\n        var self = this;\n        self._callbacks = {};\n        self._directMap = {};\n        return self;\n    };\n\n    /**\n     * should we stop this event before firing off callbacks\n     *\n     * @param {Event} e\n     * @param {Element} element\n     * @return {boolean}\n     */\n    Mousetrap.prototype.stopCallback = function(e, element) {\n        var self = this;\n\n        // if the element has the class \"mousetrap\" then no need to stop\n        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n            return false;\n        }\n\n        if (_belongsTo(element, self.target)) {\n            return false;\n        }\n\n        // Events originating from a shadow DOM are re-targetted and `e.target` is the shadow host,\n        // not the initial event target in the shadow tree. Note that not all events cross the\n        // shadow boundary.\n        // For shadow trees with `mode: 'open'`, the initial event target is the first element in\n        // the event’s composed path. For shadow trees with `mode: 'closed'`, the initial event\n        // target cannot be obtained.\n        if ('composedPath' in e && typeof e.composedPath === 'function') {\n            // For open shadow trees, update `element` so that the following check works.\n            var initialEventTarget = e.composedPath()[0];\n            if (initialEventTarget !== e.target) {\n                element = initialEventTarget;\n            }\n        }\n\n        // stop for input, select, and textarea\n        return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || element.isContentEditable;\n    };\n\n    /**\n     * exposes _handleKey publicly so it can be overwritten by extensions\n     */\n    Mousetrap.prototype.handleKey = function() {\n        var self = this;\n        return self._handleKey.apply(self, arguments);\n    };\n\n    /**\n     * allow custom key mappings\n     */\n    Mousetrap.addKeycodes = function(object) {\n        for (var key in object) {\n            if (object.hasOwnProperty(key)) {\n                _MAP[key] = object[key];\n            }\n        }\n        _REVERSE_MAP = null;\n    };\n\n    /**\n     * Init the global mousetrap functions\n     *\n     * This method is needed to allow the global mousetrap functions to work\n     * now that mousetrap is a constructor function.\n     */\n    Mousetrap.init = function() {\n        var documentMousetrap = Mousetrap(document);\n        for (var method in documentMousetrap) {\n            if (method.charAt(0) !== '_') {\n                Mousetrap[method] = (function(method) {\n                    return function() {\n                        return documentMousetrap[method].apply(documentMousetrap, arguments);\n                    };\n                } (method));\n            }\n        }\n    };\n\n    Mousetrap.init();\n\n    // expose mousetrap to the global object\n    window.Mousetrap = Mousetrap;\n\n    // expose as a common js module\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Mousetrap;\n    }\n\n    // expose mousetrap as an AMD module\n    if (typeof define === 'function' && define.amd) {\n        define(function() {\n            return Mousetrap;\n        });\n    }\n}) (typeof window !== 'undefined' ? window : null, typeof  window !== 'undefined' ? document : null);\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.swal=e():t.swal=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=8)}([function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=\"swal-button\";e.CLASS_NAMES={MODAL:\"swal-modal\",OVERLAY:\"swal-overlay\",SHOW_MODAL:\"swal-overlay--show-modal\",MODAL_TITLE:\"swal-title\",MODAL_TEXT:\"swal-text\",ICON:\"swal-icon\",ICON_CUSTOM:\"swal-icon--custom\",CONTENT:\"swal-content\",FOOTER:\"swal-footer\",BUTTON_CONTAINER:\"swal-button-container\",BUTTON:o,CONFIRM_BUTTON:o+\"--confirm\",CANCEL_BUTTON:o+\"--cancel\",DANGER_BUTTON:o+\"--danger\",BUTTON_LOADING:o+\"--loading\",BUTTON_LOADER:o+\"__loader\"},e.default=e.CLASS_NAMES},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.getNode=function(t){var e=\".\"+t;return document.querySelector(e)},e.stringToNode=function(t){var e=document.createElement(\"div\");return e.innerHTML=t.trim(),e.firstChild},e.insertAfter=function(t,e){var n=e.nextSibling;e.parentNode.insertBefore(t,n)},e.removeNode=function(t){t.parentElement.removeChild(t)},e.throwErr=function(t){throw t=t.replace(/ +(?= )/g,\"\"),\"SweetAlert: \"+(t=t.trim())},e.isPlainObject=function(t){if(\"[object Object]\"!==Object.prototype.toString.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype},e.ordinalSuffixOf=function(t){var e=t%10,n=t%100;return 1===e&&11!==n?t+\"st\":2===e&&12!==n?t+\"nd\":3===e&&13!==n?t+\"rd\":t+\"th\"}},function(t,e,n){\"use strict\";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,\"__esModule\",{value:!0}),o(n(25));var r=n(26);e.overlayMarkup=r.default,o(n(27)),o(n(28)),o(n(29));var i=n(0),a=i.default.MODAL_TITLE,s=i.default.MODAL_TEXT,c=i.default.ICON,l=i.default.FOOTER;e.iconMarkup='\\n  <div class=\"'+c+'\"></div>',e.titleMarkup='\\n  <div class=\"'+a+'\"></div>\\n',e.textMarkup='\\n  <div class=\"'+s+'\"></div>',e.footerMarkup='\\n  <div class=\"'+l+'\"></div>\\n'},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(1);e.CONFIRM_KEY=\"confirm\",e.CANCEL_KEY=\"cancel\";var r={visible:!0,text:null,value:null,className:\"\",closeModal:!0},i=Object.assign({},r,{visible:!1,text:\"Cancel\",value:null}),a=Object.assign({},r,{text:\"OK\",value:!0});e.defaultButtonList={cancel:i,confirm:a};var s=function(t){switch(t){case e.CONFIRM_KEY:return a;case e.CANCEL_KEY:return i;default:var n=t.charAt(0).toUpperCase()+t.slice(1);return Object.assign({},r,{text:n,value:t})}},c=function(t,e){var n=s(t);return!0===e?Object.assign({},n,{visible:!0}):\"string\"==typeof e?Object.assign({},n,{visible:!0,text:e}):o.isPlainObject(e)?Object.assign({visible:!0},n,e):Object.assign({},n,{visible:!1})},l=function(t){for(var e={},n=0,o=Object.keys(t);n<o.length;n++){var r=o[n],a=t[r],s=c(r,a);e[r]=s}return e.cancel||(e.cancel=i),e},u=function(t){var n={};switch(t.length){case 1:n[e.CANCEL_KEY]=Object.assign({},i,{visible:!1});break;case 2:n[e.CANCEL_KEY]=c(e.CANCEL_KEY,t[0]),n[e.CONFIRM_KEY]=c(e.CONFIRM_KEY,t[1]);break;default:o.throwErr(\"Invalid number of 'buttons' in array (\"+t.length+\").\\n      If you want more than 2 buttons, you need to use an object!\")}return n};e.getButtonListOpts=function(t){var n=e.defaultButtonList;return\"string\"==typeof t?n[e.CONFIRM_KEY]=c(e.CONFIRM_KEY,t):Array.isArray(t)?n=u(t):o.isPlainObject(t)?n=l(t):!0===t?n=u([!0,!0]):!1===t?n=u([!1,!1]):void 0===t&&(n=e.defaultButtonList),n}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(1),r=n(2),i=n(0),a=i.default.MODAL,s=i.default.OVERLAY,c=n(30),l=n(31),u=n(32),f=n(33);e.injectElIntoModal=function(t){var e=o.getNode(a),n=o.stringToNode(t);return e.appendChild(n),n};var d=function(t){t.className=a,t.textContent=\"\"},p=function(t,e){d(t);var n=e.className;n&&t.classList.add(n)};e.initModalContent=function(t){var e=o.getNode(a);p(e,t),c.default(t.icon),l.initTitle(t.title),l.initText(t.text),f.default(t.content),u.default(t.buttons,t.dangerMode)};var m=function(){var t=o.getNode(s),e=o.stringToNode(r.modalMarkup);t.appendChild(e)};e.default=m},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(3),r={isOpen:!1,promise:null,actions:{},timer:null},i=Object.assign({},r);e.resetState=function(){i=Object.assign({},r)},e.setActionValue=function(t){if(\"string\"==typeof t)return a(o.CONFIRM_KEY,t);for(var e in t)a(e,t[e])};var a=function(t,e){i.actions[t]||(i.actions[t]={}),Object.assign(i.actions[t],{value:e})};e.setActionOptionsFor=function(t,e){var n=(void 0===e?{}:e).closeModal,o=void 0===n||n;Object.assign(i.actions[t],{closeModal:o})},e.default=i},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(1),r=n(3),i=n(0),a=i.default.OVERLAY,s=i.default.SHOW_MODAL,c=i.default.BUTTON,l=i.default.BUTTON_LOADING,u=n(5);e.openModal=function(){o.getNode(a).classList.add(s),u.default.isOpen=!0};var f=function(){o.getNode(a).classList.remove(s),u.default.isOpen=!1};e.onAction=function(t){void 0===t&&(t=r.CANCEL_KEY);var e=u.default.actions[t],n=e.value;if(!1===e.closeModal){var i=c+\"--\"+t;o.getNode(i).classList.add(l)}else f();u.default.promise.resolve(n)},e.getState=function(){var t=Object.assign({},u.default);return delete t.promise,delete t.timer,t},e.stopLoading=function(){for(var t=document.querySelectorAll(\".\"+c),e=0;e<t.length;e++){t[e].classList.remove(l)}}},function(t,e){var n;n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(t){\"object\"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){t.exports=e.sweetAlert=n(9)}).call(e,n(7))},function(t,e,n){(function(e){t.exports=e.swal=n(10)}).call(e,n(7))},function(t,e,n){\"undefined\"!=typeof window&&n(11),n(16);var o=n(23).default;t.exports=o},function(t,e,n){var o=n(12);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]);var r={insertAt:\"top\"};r.transform=void 0;n(14)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(13)(void 0),e.push([t.i,'.swal-icon--error{border-color:#f27474;-webkit-animation:animateErrorIcon .5s;animation:animateErrorIcon .5s}.swal-icon--error__x-mark{position:relative;display:block;-webkit-animation:animateXMark .5s;animation:animateXMark .5s}.swal-icon--error__line{position:absolute;height:5px;width:47px;background-color:#f27474;display:block;top:37px;border-radius:2px}.swal-icon--error__line--left{-webkit-transform:rotate(45deg);transform:rotate(45deg);left:17px}.swal-icon--error__line--right{-webkit-transform:rotate(-45deg);transform:rotate(-45deg);right:16px}@-webkit-keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@-webkit-keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}@keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}.swal-icon--warning{border-color:#f8bb86;-webkit-animation:pulseWarning .75s infinite alternate;animation:pulseWarning .75s infinite alternate}.swal-icon--warning__body{width:5px;height:47px;top:10px;border-radius:2px;margin-left:-2px}.swal-icon--warning__body,.swal-icon--warning__dot{position:absolute;left:50%;background-color:#f8bb86}.swal-icon--warning__dot{width:7px;height:7px;border-radius:50%;margin-left:-4px;bottom:-11px}@-webkit-keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}@keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}.swal-icon--success{border-color:#a5dc86}.swal-icon--success:after,.swal-icon--success:before{content:\"\";border-radius:50%;position:absolute;width:60px;height:120px;background:#fff;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.swal-icon--success:before{border-radius:120px 0 0 120px;top:-7px;left:-33px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:60px 60px;transform-origin:60px 60px}.swal-icon--success:after{border-radius:0 120px 120px 0;top:-11px;left:30px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:0 60px;transform-origin:0 60px;-webkit-animation:rotatePlaceholder 4.25s ease-in;animation:rotatePlaceholder 4.25s ease-in}.swal-icon--success__ring{width:80px;height:80px;border:4px solid hsla(98,55%,69%,.2);border-radius:50%;box-sizing:content-box;position:absolute;left:-4px;top:-4px;z-index:2}.swal-icon--success__hide-corners{width:5px;height:90px;background-color:#fff;padding:1px;position:absolute;left:28px;top:8px;z-index:1;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.swal-icon--success__line{height:5px;background-color:#a5dc86;display:block;border-radius:2px;position:absolute;z-index:2}.swal-icon--success__line--tip{width:25px;left:14px;top:46px;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-animation:animateSuccessTip .75s;animation:animateSuccessTip .75s}.swal-icon--success__line--long{width:47px;right:8px;top:38px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-animation:animateSuccessLong .75s;animation:animateSuccessLong .75s}@-webkit-keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@-webkit-keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@-webkit-keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}@keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}.swal-icon--info{border-color:#c9dae1}.swal-icon--info:before{width:5px;height:29px;bottom:17px;border-radius:2px;margin-left:-2px}.swal-icon--info:after,.swal-icon--info:before{content:\"\";position:absolute;left:50%;background-color:#c9dae1}.swal-icon--info:after{width:7px;height:7px;border-radius:50%;margin-left:-3px;top:19px}.swal-icon{width:80px;height:80px;border-width:4px;border-style:solid;border-radius:50%;padding:0;position:relative;box-sizing:content-box;margin:20px auto}.swal-icon:first-child{margin-top:32px}.swal-icon--custom{width:auto;height:auto;max-width:100%;border:none;border-radius:0}.swal-icon img{max-width:100%;max-height:100%}.swal-title{color:rgba(0,0,0,.65);font-weight:600;text-transform:none;position:relative;display:block;padding:13px 16px;font-size:27px;line-height:normal;text-align:center;margin-bottom:0}.swal-title:first-child{margin-top:26px}.swal-title:not(:first-child){padding-bottom:0}.swal-title:not(:last-child){margin-bottom:13px}.swal-text{font-size:16px;position:relative;float:none;line-height:normal;vertical-align:top;text-align:left;display:inline-block;margin:0;padding:0 10px;font-weight:400;color:rgba(0,0,0,.64);max-width:calc(100% - 20px);overflow-wrap:break-word;box-sizing:border-box}.swal-text:first-child{margin-top:45px}.swal-text:last-child{margin-bottom:45px}.swal-footer{text-align:right;padding-top:13px;margin-top:13px;padding:13px 16px;border-radius:inherit;border-top-left-radius:0;border-top-right-radius:0}.swal-button-container{margin:5px;display:inline-block;position:relative}.swal-button{background-color:#7cd1f9;color:#fff;border:none;box-shadow:none;border-radius:5px;font-weight:600;font-size:14px;padding:10px 24px;margin:0;cursor:pointer}.swal-button:not([disabled]):hover{background-color:#78cbf2}.swal-button:active{background-color:#70bce0}.swal-button:focus{outline:none;box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(43,114,165,.29)}.swal-button[disabled]{opacity:.5;cursor:default}.swal-button::-moz-focus-inner{border:0}.swal-button--cancel{color:#555;background-color:#efefef}.swal-button--cancel:not([disabled]):hover{background-color:#e8e8e8}.swal-button--cancel:active{background-color:#d7d7d7}.swal-button--cancel:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(116,136,150,.29)}.swal-button--danger{background-color:#e64942}.swal-button--danger:not([disabled]):hover{background-color:#df4740}.swal-button--danger:active{background-color:#cf423b}.swal-button--danger:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(165,43,43,.29)}.swal-content{padding:0 20px;margin-top:20px;font-size:medium}.swal-content:last-child{margin-bottom:20px}.swal-content__input,.swal-content__textarea{-webkit-appearance:none;background-color:#fff;border:none;font-size:14px;display:block;box-sizing:border-box;width:100%;border:1px solid rgba(0,0,0,.14);padding:10px 13px;border-radius:2px;transition:border-color .2s}.swal-content__input:focus,.swal-content__textarea:focus{outline:none;border-color:#6db8ff}.swal-content__textarea{resize:vertical}.swal-button--loading{color:transparent}.swal-button--loading~.swal-button__loader{opacity:1}.swal-button__loader{position:absolute;height:auto;width:43px;z-index:2;left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);text-align:center;pointer-events:none;opacity:0}.swal-button__loader div{display:inline-block;float:none;vertical-align:baseline;width:9px;height:9px;padding:0;border:none;margin:2px;opacity:.4;border-radius:7px;background-color:hsla(0,0%,100%,.9);transition:background .2s;-webkit-animation:swal-loading-anim 1s infinite;animation:swal-loading-anim 1s infinite}.swal-button__loader div:nth-child(3n+2){-webkit-animation-delay:.15s;animation-delay:.15s}.swal-button__loader div:nth-child(3n+3){-webkit-animation-delay:.3s;animation-delay:.3s}@-webkit-keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}@keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}.swal-overlay{position:fixed;top:0;bottom:0;left:0;right:0;text-align:center;font-size:0;overflow-y:auto;background-color:rgba(0,0,0,.4);z-index:10000;pointer-events:none;opacity:0;transition:opacity .3s}.swal-overlay:before{content:\" \";display:inline-block;vertical-align:middle;height:100%}.swal-overlay--show-modal{opacity:1;pointer-events:auto}.swal-overlay--show-modal .swal-modal{opacity:1;pointer-events:auto;box-sizing:border-box;-webkit-animation:showSweetAlert .3s;animation:showSweetAlert .3s;will-change:transform}.swal-modal{width:478px;opacity:0;pointer-events:none;background-color:#fff;text-align:center;border-radius:5px;position:static;margin:20px auto;display:inline-block;vertical-align:middle;-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;z-index:10001;transition:opacity .2s,-webkit-transform .3s;transition:transform .3s,opacity .2s;transition:transform .3s,opacity .2s,-webkit-transform .3s}@media (max-width:500px){.swal-modal{width:calc(100% - 20px)}}@-webkit-keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}',\"\"])},function(t,e){function n(t,e){var n=t[1]||\"\",r=t[3];if(!r)return n;if(e&&\"function\"==typeof btoa){var i=o(r);return[n].concat(r.sources.map(function(t){return\"/*# sourceURL=\"+r.sourceRoot+t+\" */\"})).concat([i]).join(\"\\n\")}return[n].join(\"\\n\")}function o(t){return\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+\" */\"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var o=n(e,t);return e[2]?\"@media \"+e[2]+\"{\"+o+\"}\":o}).join(\"\")},e.i=function(t,n){\"string\"==typeof t&&(t=[[null,t,\"\"]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];\"number\"==typeof i&&(o[i]=!0)}for(r=0;r<t.length;r++){var a=t[r];\"number\"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]=\"(\"+a[2]+\") and (\"+n+\")\"),e.push(a))}},e}},function(t,e,n){function o(t,e){for(var n=0;n<t.length;n++){var o=t[n],r=m[o.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](o.parts[i]);for(;i<o.parts.length;i++)r.parts.push(u(o.parts[i],e))}else{for(var a=[],i=0;i<o.parts.length;i++)a.push(u(o.parts[i],e));m[o.id]={id:o.id,refs:1,parts:a}}}}function r(t,e){for(var n=[],o={},r=0;r<t.length;r++){var i=t[r],a=e.base?i[0]+e.base:i[0],s=i[1],c=i[2],l=i[3],u={css:s,media:c,sourceMap:l};o[a]?o[a].parts.push(u):n.push(o[a]={id:a,parts:[u]})}return n}function i(t,e){var n=v(t.insertInto);if(!n)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");var o=w[w.length-1];if(\"top\"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),w.push(e);else{if(\"bottom\"!==t.insertAt)throw new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");n.appendChild(e)}}function a(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=w.indexOf(t);e>=0&&w.splice(e,1)}function s(t){var e=document.createElement(\"style\");return t.attrs.type=\"text/css\",l(e,t.attrs),i(t,e),e}function c(t){var e=document.createElement(\"link\");return t.attrs.type=\"text/css\",t.attrs.rel=\"stylesheet\",l(e,t.attrs),i(t,e),e}function l(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function u(t,e){var n,o,r,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var l=h++;n=g||(g=s(e)),o=f.bind(null,n,l,!1),r=f.bind(null,n,l,!0)}else t.sourceMap&&\"function\"==typeof URL&&\"function\"==typeof URL.createObjectURL&&\"function\"==typeof URL.revokeObjectURL&&\"function\"==typeof Blob&&\"function\"==typeof btoa?(n=c(e),o=p.bind(null,n,e),r=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),o=d.bind(null,n),r=function(){a(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else r()}}function f(t,e,n,o){var r=n?\"\":o.css;if(t.styleSheet)t.styleSheet.cssText=x(e,r);else{var i=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function d(t,e){var n=e.css,o=e.media;if(o&&t.setAttribute(\"media\",o),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function p(t,e,n){var o=n.css,r=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||i)&&(o=y(o)),r&&(o+=\"\\n/*# sourceMappingURL=data:application/json;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+\" */\");var a=new Blob([o],{type:\"text/css\"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}var m={},b=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),v=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t.call(this,n)),e[n]}}(function(t){return document.querySelector(t)}),g=null,h=0,w=[],y=n(15);t.exports=function(t,e){if(\"undefined\"!=typeof DEBUG&&DEBUG&&\"object\"!=typeof document)throw new Error(\"The style-loader cannot be used in a non-browser environment\");e=e||{},e.attrs=\"object\"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=b()),e.insertInto||(e.insertInto=\"head\"),e.insertAt||(e.insertAt=\"bottom\");var n=r(t,e);return o(n,e),function(t){for(var i=[],a=0;a<n.length;a++){var s=n[a],c=m[s.id];c.refs--,i.push(c)}if(t){o(r(t,e),e)}for(var a=0;a<i.length;a++){var c=i[a];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete m[c.id]}}}};var x=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join(\"\\n\")}}()},function(t,e){t.exports=function(t){var e=\"undefined\"!=typeof window&&window.location;if(!e)throw new Error(\"fixUrls requires window.location\");if(!t||\"string\"!=typeof t)return t;var n=e.protocol+\"//\"+e.host,o=n+e.pathname.replace(/\\/[^\\/]*$/,\"/\");return t.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi,function(t,e){var r=e.trim().replace(/^\"(.*)\"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(r))return t;var i;return i=0===r.indexOf(\"//\")?r:0===r.indexOf(\"/\")?n+r:o+r.replace(/^\\.\\//,\"\"),\"url(\"+JSON.stringify(i)+\")\"})}},function(t,e,n){var o=n(17);\"undefined\"==typeof window||window.Promise||(window.Promise=o),n(21),String.prototype.includes||(String.prototype.includes=function(t,e){\"use strict\";return\"number\"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),Array.prototype.includes||Object.defineProperty(Array.prototype,\"includes\",{value:function(t,e){if(null==this)throw new TypeError('\"this\" is null or not defined');var n=Object(this),o=n.length>>>0;if(0===o)return!1;for(var r=0|e,i=Math.max(r>=0?r:o-Math.abs(r),0);i<o;){if(function(t,e){return t===e||\"number\"==typeof t&&\"number\"==typeof e&&isNaN(t)&&isNaN(e)}(n[i],t))return!0;i++}return!1}}),\"undefined\"!=typeof window&&function(t){t.forEach(function(t){t.hasOwnProperty(\"remove\")||Object.defineProperty(t,\"remove\",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype])},function(t,e,n){(function(e){!function(n){function o(){}function r(t,e){return function(){t.apply(e,arguments)}}function i(t){if(\"object\"!=typeof this)throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof t)throw new TypeError(\"not a function\");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(t,this)}function a(t,e){for(;3===t._state;)t=t._value;if(0===t._state)return void t._deferreds.push(e);t._handled=!0,i._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._state?s:c)(e.promise,t._value);var o;try{o=n(t._value)}catch(t){return void c(e.promise,t)}s(e.promise,o)})}function s(t,e){try{if(e===t)throw new TypeError(\"A promise cannot be resolved with itself.\");if(e&&(\"object\"==typeof e||\"function\"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void l(t);if(\"function\"==typeof n)return void f(r(n,e),t)}t._state=1,t._value=e,l(t)}catch(e){c(t,e)}}function c(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&i._immediateFn(function(){t._handled||i._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function u(t,e,n){this.onFulfilled=\"function\"==typeof t?t:null,this.onRejected=\"function\"==typeof e?e:null,this.promise=n}function f(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,c(e,t))})}catch(t){if(n)return;n=!0,c(e,t)}}var d=setTimeout;i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var n=new this.constructor(o);return a(this,new u(t,e,n)),n},i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,n){function o(i,a){try{if(a&&(\"object\"==typeof a||\"function\"==typeof a)){var s=a.then;if(\"function\"==typeof s)return void s.call(a,function(t){o(i,t)},n)}e[i]=a,0==--r&&t(e)}catch(t){n(t)}}if(0===e.length)return t([]);for(var r=e.length,i=0;i<e.length;i++)o(i,e[i])})},i.resolve=function(t){return t&&\"object\"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){for(var o=0,r=t.length;o<r;o++)t[o].then(e,n)})},i._immediateFn=\"function\"==typeof e&&function(t){e(t)}||function(t){d(t,0)},i._unhandledRejectionFn=function(t){\"undefined\"!=typeof console&&console&&console.warn(\"Possible Unhandled Promise Rejection:\",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},void 0!==t&&t.exports?t.exports=i:n.Promise||(n.Promise=i)}(this)}).call(e,n(18).setImmediate)},function(t,e,n){function o(t,e){this._id=t,this._clearFn=e}var r=Function.prototype.apply;e.setTimeout=function(){return new o(r.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new o(r.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(19),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t,n){\"use strict\";function o(t){\"function\"!=typeof t&&(t=new Function(\"\"+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return l[c]=o,s(c),c++}function r(t){delete l[t]}function i(t){var e=t.callback,o=t.args;switch(o.length){case 0:e();break;case 1:e(o[0]);break;case 2:e(o[0],o[1]);break;case 3:e(o[0],o[1],o[2]);break;default:e.apply(n,o)}}function a(t){if(u)setTimeout(a,0,t);else{var e=l[t];if(e){u=!0;try{i(e)}finally{r(t),u=!1}}}}if(!t.setImmediate){var s,c=1,l={},u=!1,f=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,\"[object process]\"==={}.toString.call(t.process)?function(){s=function(t){e.nextTick(function(){a(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage(\"\",\"*\"),t.onmessage=n,e}}()?function(){var e=\"setImmediate$\"+Math.random()+\"$\",n=function(n){n.source===t&&\"string\"==typeof n.data&&0===n.data.indexOf(e)&&a(+n.data.slice(e.length))};t.addEventListener?t.addEventListener(\"message\",n,!1):t.attachEvent(\"onmessage\",n),s=function(n){t.postMessage(e+n,\"*\")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){a(t.data)},s=function(e){t.port2.postMessage(e)}}():f&&\"onreadystatechange\"in f.createElement(\"script\")?function(){var t=f.documentElement;s=function(e){var n=f.createElement(\"script\");n.onreadystatechange=function(){a(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function(){s=function(t){setTimeout(a,0,t)}}(),d.setImmediate=o,d.clearImmediate=r}}(\"undefined\"==typeof self?void 0===t?this:t:self)}).call(e,n(7),n(20))},function(t,e){function n(){throw new Error(\"setTimeout has not been defined\")}function o(){throw new Error(\"clearTimeout has not been defined\")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function i(t){if(f===clearTimeout)return clearTimeout(t);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){b&&p&&(b=!1,p.length?m=p.concat(m):v=-1,m.length&&s())}function s(){if(!b){var t=r(a);b=!0;for(var e=m.length;e;){for(p=m,m=[];++v<e;)p&&p[v].run();v=-1,e=m.length}p=null,b=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var u,f,d=t.exports={};!function(){try{u=\"function\"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{f=\"function\"==typeof clearTimeout?clearTimeout:o}catch(t){f=o}}();var p,m=[],b=!1,v=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new c(t,e)),1!==m.length||b||r(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title=\"browser\",d.browser=!0,d.env={},d.argv=[],d.version=\"\",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(t){return[]},d.binding=function(t){throw new Error(\"process.binding is not supported\")},d.cwd=function(){return\"/\"},d.chdir=function(t){throw new Error(\"process.chdir is not supported\")},d.umask=function(){return 0}},function(t,e,n){\"use strict\";n(22).polyfill()},function(t,e,n){\"use strict\";function o(t,e){if(void 0===t||null===t)throw new TypeError(\"Cannot convert first argument to object\");for(var n=Object(t),o=1;o<arguments.length;o++){var r=arguments[o];if(void 0!==r&&null!==r)for(var i=Object.keys(Object(r)),a=0,s=i.length;a<s;a++){var c=i[a],l=Object.getOwnPropertyDescriptor(r,c);void 0!==l&&l.enumerable&&(n[c]=r[c])}}return n}function r(){Object.assign||Object.defineProperty(Object,\"assign\",{enumerable:!1,configurable:!0,writable:!0,value:o})}t.exports={assign:o,polyfill:r}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(24),r=n(6),i=n(5),a=n(36),s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(\"undefined\"!=typeof window){var n=a.getOpts.apply(void 0,t);return new Promise(function(t,e){i.default.promise={resolve:t,reject:e},o.default(n),setTimeout(function(){r.openModal()})})}};s.close=r.onAction,s.getState=r.getState,s.setActionValue=i.setActionValue,s.stopLoading=r.stopLoading,s.setDefaults=a.setDefaults,e.default=s},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(1),r=n(0),i=r.default.MODAL,a=n(4),s=n(34),c=n(35),l=n(1);e.init=function(t){o.getNode(i)||(document.body||l.throwErr(\"You can only use SweetAlert AFTER the DOM has loaded!\"),s.default(),a.default()),a.initModalContent(t),c.default(t)},e.default=e.init},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(0),r=o.default.MODAL;e.modalMarkup='\\n  <div class=\"'+r+'\" role=\"dialog\" aria-modal=\"true\"></div>',e.default=e.modalMarkup},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(0),r=o.default.OVERLAY,i='<div \\n    class=\"'+r+'\"\\n    tabIndex=\"-1\">\\n  </div>';e.default=i},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(0),r=o.default.ICON;e.errorIconMarkup=function(){var t=r+\"--error\",e=t+\"__line\";return'\\n    <div class=\"'+t+'__x-mark\">\\n      <span class=\"'+e+\" \"+e+'--left\"></span>\\n      <span class=\"'+e+\" \"+e+'--right\"></span>\\n    </div>\\n  '},e.warningIconMarkup=function(){var t=r+\"--warning\";return'\\n    <span class=\"'+t+'__body\">\\n      <span class=\"'+t+'__dot\"></span>\\n    </span>\\n  '},e.successIconMarkup=function(){var t=r+\"--success\";return'\\n    <span class=\"'+t+\"__line \"+t+'__line--long\"></span>\\n    <span class=\"'+t+\"__line \"+t+'__line--tip\"></span>\\n\\n    <div class=\"'+t+'__ring\"></div>\\n    <div class=\"'+t+'__hide-corners\"></div>\\n  '}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(0),r=o.default.CONTENT;e.contentMarkup='\\n  <div class=\"'+r+'\">\\n\\n  </div>\\n'},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(0),r=o.default.BUTTON_CONTAINER,i=o.default.BUTTON,a=o.default.BUTTON_LOADER;e.buttonMarkup='\\n  <div class=\"'+r+'\">\\n\\n    <button\\n      class=\"'+i+'\"\\n    ></button>\\n\\n    <div class=\"'+a+'\">\\n      <div></div>\\n      <div></div>\\n      <div></div>\\n    </div>\\n\\n  </div>\\n'},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(4),r=n(2),i=n(0),a=i.default.ICON,s=i.default.ICON_CUSTOM,c=[\"error\",\"warning\",\"success\",\"info\"],l={error:r.errorIconMarkup(),warning:r.warningIconMarkup(),success:r.successIconMarkup()},u=function(t,e){var n=a+\"--\"+t;e.classList.add(n);var o=l[t];o&&(e.innerHTML=o)},f=function(t,e){e.classList.add(s);var n=document.createElement(\"img\");n.src=t,e.appendChild(n)},d=function(t){if(t){var e=o.injectElIntoModal(r.iconMarkup);c.includes(t)?u(t,e):f(t,e)}};e.default=d},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(2),r=n(4),i=function(t){navigator.userAgent.includes(\"AppleWebKit\")&&(t.style.display=\"none\",t.offsetHeight,t.style.display=\"\")};e.initTitle=function(t){if(t){var e=r.injectElIntoModal(o.titleMarkup);e.textContent=t,i(e)}},e.initText=function(t){if(t){var e=document.createDocumentFragment();t.split(\"\\n\").forEach(function(t,n,o){e.appendChild(document.createTextNode(t)),n<o.length-1&&e.appendChild(document.createElement(\"br\"))});var n=r.injectElIntoModal(o.textMarkup);n.appendChild(e),i(n)}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(1),r=n(4),i=n(0),a=i.default.BUTTON,s=i.default.DANGER_BUTTON,c=n(3),l=n(2),u=n(6),f=n(5),d=function(t,e,n){var r=e.text,i=e.value,d=e.className,p=e.closeModal,m=o.stringToNode(l.buttonMarkup),b=m.querySelector(\".\"+a),v=a+\"--\"+t;if(b.classList.add(v),d){(Array.isArray(d)?d:d.split(\" \")).filter(function(t){return t.length>0}).forEach(function(t){b.classList.add(t)})}n&&t===c.CONFIRM_KEY&&b.classList.add(s),b.textContent=r;var g={};return g[t]=i,f.setActionValue(g),f.setActionOptionsFor(t,{closeModal:p}),b.addEventListener(\"click\",function(){return u.onAction(t)}),m},p=function(t,e){var n=r.injectElIntoModal(l.footerMarkup);for(var o in t){var i=t[o],a=d(o,i,e);i.visible&&n.appendChild(a)}0===n.children.length&&n.remove()};e.default=p},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(3),r=n(4),i=n(2),a=n(5),s=n(6),c=n(0),l=c.default.CONTENT,u=function(t){t.addEventListener(\"input\",function(t){var e=t.target,n=e.value;a.setActionValue(n)}),t.addEventListener(\"keyup\",function(t){if(\"Enter\"===t.key)return s.onAction(o.CONFIRM_KEY)}),setTimeout(function(){t.focus(),a.setActionValue(\"\")},0)},f=function(t,e,n){var o=document.createElement(e),r=l+\"__\"+e;o.classList.add(r);for(var i in n){var a=n[i];o[i]=a}\"input\"===e&&u(o),t.appendChild(o)},d=function(t){if(t){var e=r.injectElIntoModal(i.contentMarkup),n=t.element,o=t.attributes;\"string\"==typeof n?f(e,n,o):e.appendChild(n)}};e.default=d},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(1),r=n(2),i=function(){var t=o.stringToNode(r.overlayMarkup);document.body.appendChild(t)};e.default=i},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(5),r=n(6),i=n(1),a=n(3),s=n(0),c=s.default.MODAL,l=s.default.BUTTON,u=s.default.OVERLAY,f=function(t){t.preventDefault(),v()},d=function(t){t.preventDefault(),g()},p=function(t){if(o.default.isOpen)switch(t.key){case\"Escape\":return r.onAction(a.CANCEL_KEY)}},m=function(t){if(o.default.isOpen)switch(t.key){case\"Tab\":return f(t)}},b=function(t){if(o.default.isOpen)return\"Tab\"===t.key&&t.shiftKey?d(t):void 0},v=function(){var t=i.getNode(l);t&&(t.tabIndex=0,t.focus())},g=function(){var t=i.getNode(c),e=t.querySelectorAll(\".\"+l),n=e.length-1,o=e[n];o&&o.focus()},h=function(t){t[t.length-1].addEventListener(\"keydown\",m)},w=function(t){t[0].addEventListener(\"keydown\",b)},y=function(){var t=i.getNode(c),e=t.querySelectorAll(\".\"+l);e.length&&(h(e),w(e))},x=function(t){if(i.getNode(u)===t.target)return r.onAction(a.CANCEL_KEY)},_=function(t){var e=i.getNode(u);e.removeEventListener(\"click\",x),t&&e.addEventListener(\"click\",x)},k=function(t){o.default.timer&&clearTimeout(o.default.timer),t&&(o.default.timer=window.setTimeout(function(){return r.onAction(a.CANCEL_KEY)},t))},O=function(t){t.closeOnEsc?document.addEventListener(\"keyup\",p):document.removeEventListener(\"keyup\",p),t.dangerMode?v():g(),y(),_(t.closeOnClickOutside),k(t.timer)};e.default=O},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(1),r=n(3),i=n(37),a=n(38),s={title:null,text:null,icon:null,buttons:r.defaultButtonList,content:null,className:null,closeOnClickOutside:!0,closeOnEsc:!0,dangerMode:!1,timer:null},c=Object.assign({},s);e.setDefaults=function(t){c=Object.assign({},s,t)};var l=function(t){var e=t&&t.button,n=t&&t.buttons;return void 0!==e&&void 0!==n&&o.throwErr(\"Cannot set both 'button' and 'buttons' options!\"),void 0!==e?{confirm:e}:n},u=function(t){return o.ordinalSuffixOf(t+1)},f=function(t,e){o.throwErr(u(e)+\" argument ('\"+t+\"') is invalid\")},d=function(t,e){var n=t+1,r=e[n];o.isPlainObject(r)||void 0===r||o.throwErr(\"Expected \"+u(n)+\" argument ('\"+r+\"') to be a plain object\")},p=function(t,e){var n=t+1,r=e[n];void 0!==r&&o.throwErr(\"Unexpected \"+u(n)+\" argument (\"+r+\")\")},m=function(t,e,n,r){var i=typeof e,a=\"string\"===i,s=e instanceof Element;if(a){if(0===n)return{text:e};if(1===n)return{text:e,title:r[0]};if(2===n)return d(n,r),{icon:e};f(e,n)}else{if(s&&0===n)return d(n,r),{content:e};if(o.isPlainObject(e))return p(n,r),e;f(e,n)}};e.getOpts=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n={};t.forEach(function(e,o){var r=m(0,e,o,t);Object.assign(n,r)});var o=l(n);n.buttons=r.getButtonListOpts(o),delete n.button,n.content=i.getContentOpts(n.content);var u=Object.assign({},s,c,n);return Object.keys(u).forEach(function(t){a.DEPRECATED_OPTS[t]&&a.logDeprecation(t)}),u}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(1),r={element:\"input\",attributes:{placeholder:\"\"}};e.getContentOpts=function(t){var e={};return o.isPlainObject(t)?Object.assign(e,t):t instanceof Element?{element:t}:\"input\"===t?r:null}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.logDeprecation=function(t){var n=e.DEPRECATED_OPTS[t],o=n.onlyRename,r=n.replacement,i=n.subOption,a=n.link,s=o?\"renamed\":\"deprecated\",c='SweetAlert warning: \"'+t+'\" option has been '+s+\".\";if(r){c+=\" Please use\"+(i?' \"'+i+'\" in ':\" \")+'\"'+r+'\" instead.'}var l=\"https://sweetalert.js.org\";c+=a?\" More details: \"+l+a:\" More details: \"+l+\"/guides/#upgrading-from-1x\",console.warn(c)},e.DEPRECATED_OPTS={type:{replacement:\"icon\",link:\"/docs/#icon\"},imageUrl:{replacement:\"icon\",link:\"/docs/#icon\"},customClass:{replacement:\"className\",onlyRename:!0,link:\"/docs/#classname\"},imageSize:{},showCancelButton:{replacement:\"buttons\",link:\"/docs/#buttons\"},showConfirmButton:{replacement:\"button\",link:\"/docs/#button\"},confirmButtonText:{replacement:\"button\",link:\"/docs/#button\"},confirmButtonColor:{},cancelButtonText:{replacement:\"buttons\",link:\"/docs/#buttons\"},closeOnConfirm:{replacement:\"button\",subOption:\"closeModal\",link:\"/docs/#button\"},closeOnCancel:{replacement:\"buttons\",subOption:\"closeModal\",link:\"/docs/#buttons\"},showLoaderOnConfirm:{replacement:\"buttons\"},animation:{},inputType:{replacement:\"content\",link:\"/docs/#content\"},inputValue:{replacement:\"content\",link:\"/docs/#content\"},inputPlaceholder:{replacement:\"content\",link:\"/docs/#content\"},html:{replacement:\"content\",link:\"/docs/#content\"},allowEscapeKey:{replacement:\"closeOnEsc\",onlyRename:!0,link:\"/docs/#closeonesc\"},allowClickOutside:{replacement:\"closeOnClickOutside\",onlyRename:!0,link:\"/docs/#closeonclickoutside\"}}}])});","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = require('./utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar storage = {\n  setItem: function setItem(key, value) {\n    if (window.localStorage) {\n      try {\n        window.localStorage.setItem(key, value);\n      } catch (e) {\n        // f.log('failed to set value for key \"' + key + '\" to localStorage.');\n      }\n    }\n  },\n  getItem: function getItem(key, value) {\n    if (window.localStorage) {\n      try {\n        return window.localStorage.getItem(key, value);\n      } catch (e) {\n        // f.log('failed to get value for key \"' + key + '\" from localStorage.');\n      }\n    }\n    return undefined;\n  }\n};\n\nfunction getDefaults() {\n  return {\n    enabled: false,\n    prefix: 'i18next_res_',\n    expirationTime: 7 * 24 * 60 * 60 * 1000,\n    versions: {}\n  };\n}\n\nvar Cache = function () {\n  function Cache(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Cache);\n\n    this.init(services, options);\n\n    this.type = 'cache';\n    this.debouncedStore = utils.debounce(this.store, 10000);\n  }\n\n  _createClass(Cache, [{\n    key: 'init',\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      this.services = services;\n      this.options = utils.defaults(options, this.options || {}, getDefaults());\n    }\n  }, {\n    key: 'load',\n    value: function load(lngs, callback) {\n      var _this = this;\n\n      var store = {};\n      var nowMS = new Date().getTime();\n\n      if (!window.localStorage || !lngs.length) {\n        return callback(null, null);\n      }\n\n      var todo = lngs.length;\n\n      lngs.forEach(function (lng) {\n        var local = storage.getItem(_this.options.prefix + lng);\n\n        if (local) {\n          local = JSON.parse(local);\n          if (\n          // expiration field is mandatory, and should not be expired\n          local.i18nStamp && local.i18nStamp + _this.options.expirationTime > nowMS &&\n\n          // there should be no language version set, or if it is, it should match the one in translation\n          _this.options.versions[lng] === local.i18nVersion) {\n            delete local.i18nVersion;\n            store[lng] = local;\n          }\n        }\n\n        todo -= 1;\n        if (todo === 0) {\n          callback(null, store);\n        }\n      });\n      return undefined;\n    }\n  }, {\n    key: 'store',\n    value: function store(storeParam) {\n      var store = storeParam;\n      if (window.localStorage) {\n        for (var m in store) {\n          // eslint-disable-line\n          // timestamp\n          store[m].i18nStamp = new Date().getTime();\n\n          // language version (if set)\n          if (this.options.versions[m]) {\n            store[m].i18nVersion = this.options.versions[m];\n          }\n\n          // save\n          storage.setItem(this.options.prefix + m, JSON.stringify(store[m]));\n        }\n      }\n    }\n  }, {\n    key: 'save',\n    value: function save(store) {\n      this.debouncedStore(store);\n    }\n  }]);\n\n  return Cache;\n}();\n\nCache.type = 'cache';\n\nexports.default = Cache;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaults = defaults;\nexports.extend = extend;\nexports.debounce = debounce;\nvar arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\n\nfunction defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\n\nfunction extend(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\n\nfunction debounce(func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this,\n        args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n};","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst board = require(\"./board\");\nconst fen_1 = require(\"./fen\");\nconst config_1 = require(\"./config\");\nconst anim_1 = require(\"./anim\");\nconst drag_1 = require(\"./drag\");\nconst explosion_1 = require(\"./explosion\");\nfunction start(state, redrawAll) {\n    function toggleOrientation() {\n        board.toggleOrientation(state);\n        redrawAll();\n    }\n    ;\n    return {\n        set(config) {\n            if (config.orientation && config.orientation !== state.orientation)\n                toggleOrientation();\n            (config.fen ? anim_1.anim : anim_1.render)(state => config_1.configure(state, config), state);\n        },\n        state,\n        getFen: () => fen_1.write(state.pieces),\n        toggleOrientation,\n        setPieces(pieces) {\n            anim_1.anim(state => board.setPieces(state, pieces), state);\n        },\n        selectSquare(key, force) {\n            if (key)\n                anim_1.anim(state => board.selectSquare(state, key, force), state);\n            else if (state.selected) {\n                board.unselect(state);\n                state.dom.redraw();\n            }\n        },\n        move(orig, dest) {\n            anim_1.anim(state => board.baseMove(state, orig, dest), state);\n        },\n        newPiece(piece, key) {\n            anim_1.anim(state => board.baseNewPiece(state, piece, key), state);\n        },\n        playPremove() {\n            if (state.premovable.current) {\n                if (anim_1.anim(board.playPremove, state))\n                    return true;\n                state.dom.redraw();\n            }\n            return false;\n        },\n        playPredrop(validate) {\n            if (state.predroppable.current) {\n                const result = board.playPredrop(state, validate);\n                state.dom.redraw();\n                return result;\n            }\n            return false;\n        },\n        cancelPremove() {\n            anim_1.render(board.unsetPremove, state);\n        },\n        cancelPredrop() {\n            anim_1.render(board.unsetPredrop, state);\n        },\n        cancelMove() {\n            anim_1.render(state => { board.cancelMove(state); drag_1.cancel(state); }, state);\n        },\n        stop() {\n            anim_1.render(state => { board.stop(state); drag_1.cancel(state); }, state);\n        },\n        explode(keys) {\n            explosion_1.default(state, keys);\n        },\n        setAutoShapes(shapes) {\n            anim_1.render(state => state.drawable.autoShapes = shapes, state);\n        },\n        setShapes(shapes) {\n            anim_1.render(state => state.drawable.shapes = shapes, state);\n        },\n        getKeyAtDomPos(pos) {\n            return board.getKeyAtDomPos(pos, board.whitePov(state), state.dom.bounds());\n        },\n        redrawAll,\n        dragNewPiece(piece, event, force) {\n            drag_1.dragNewPiece(state, piece, event, force);\n        },\n        destroy() {\n            board.stop(state);\n            state.dom.unbind && state.dom.unbind();\n            state.dom.destroyed = true;\n        }\n    };\n}\nexports.start = start;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL2FwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLGlDQUFnQztBQUNoQywrQkFBeUM7QUFDekMscUNBQTRDO0FBQzVDLGlDQUFxQztBQUNyQyxpQ0FBMkQ7QUFFM0QsMkNBQW1DO0FBeUVuQyxTQUFnQixLQUFLLENBQUMsS0FBWSxFQUFFLFNBQW9CO0lBRXRELFNBQVMsaUJBQWlCO1FBQ3hCLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMvQixTQUFTLEVBQUUsQ0FBQztJQUNkLENBQUM7SUFBQSxDQUFDO0lBRUYsT0FBTztRQUVMLEdBQUcsQ0FBQyxNQUFNO1lBQ1IsSUFBSSxNQUFNLENBQUMsV0FBVyxJQUFJLE1BQU0sQ0FBQyxXQUFXLEtBQUssS0FBSyxDQUFDLFdBQVc7Z0JBQUUsaUJBQWlCLEVBQUUsQ0FBQztZQUN4RixDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFdBQUksQ0FBQyxDQUFDLENBQUMsYUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxrQkFBUyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUN6RSxDQUFDO1FBRUQsS0FBSztRQUVMLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxXQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztRQUVwQyxpQkFBaUI7UUFFakIsU0FBUyxDQUFDLE1BQU07WUFDZCxXQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUN2RCxDQUFDO1FBRUQsWUFBWSxDQUFDLEdBQUcsRUFBRSxLQUFLO1lBQ3JCLElBQUksR0FBRztnQkFBRSxXQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFD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QUM7UUFDOUUsQ0FBQztRQUVELFNBQVM7UUFFVCxZQUFZLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLO1lBQzlCLG1CQUFZLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUE7UUFDMUMsQ0FBQztRQUVELE9BQU87WUFDTCxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2xCLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDdkMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1FBQzdCLENBQUM7S0FDRixDQUFDO0FBQ0osQ0FBQztBQXRHRCxzQkFzR0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4vc3RhdGUnXG5pbXBvcnQgKiBhcyBib2FyZCBmcm9tICcuL2JvYXJkJ1xuaW1wb3J0IHsgd3JpdGUgYXMgZmVuV3JpdGUgfSBmcm9tICcuL2ZlbidcbmltcG9ydCB7IENvbmZpZywgY29uZmlndXJlIH0gZnJvbSAnLi9jb25maWcnXG5pbXBvcnQgeyBhbmltLCByZW5kZXIgfSBmcm9tICcuL2FuaW0nXG5pbXBvcnQgeyBjYW5jZWwgYXMgZHJhZ0NhbmNlbCwgZHJhZ05ld1BpZWNlIH0gZnJvbSAnLi9kcmFnJ1xuaW1wb3J0IHsgRHJhd1NoYXBlIH0gZnJvbSAnLi9kcmF3J1xuaW1wb3J0IGV4cGxvc2lvbiBmcm9tICcuL2V4cGxvc2lvbidcbmltcG9ydCAqIGFzIGNnIGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBpIHtcblxuICAvLyByZWNvbmZpZ3VyZSB0aGUgaW5zdGFuY2UuIEFjY2VwdHMgYWxsIGNvbmZpZyBvcHRpb25zLCBleGNlcHQgZm9yIHZpZXdPbmx5ICYgZHJhd2FibGUudmlzaWJsZS5cbiAgLy8gYm9hcmQgd2lsbCBiZSBhbmltYXRlZCBhY2NvcmRpbmdseSwgaWYgYW5pbWF0aW9ucyBhcmUgZW5hYmxlZC5cbiAgc2V0KGNvbmZpZzogQ29uZmlnKTogdm9pZDtcblxuICAvLyByZWFkIGNoZXNzZ3JvdW5kIHN0YXRlOyB3cml0ZSBhdCB5b3VyIG93biByaXNrcy5cbiAgc3RhdGU6IFN0YXRlO1xuXG4gIC8vIGdldCB0aGUgcG9zaXRpb24gYXMgYSBGRU4gc3RyaW5nIChvbmx5IGNvbnRhaW5zIHBpZWNlcywgbm8gZmxhZ3MpXG4gIC8vIGUuZy4gcm5icWtibnIvcHBwcHBwcHAvOC84LzgvOC9QUFBQUFBQUC9STkJRS0JOUlxuICBnZXRGZW4oKTogY2cuRkVOO1xuXG4gIC8vIGNoYW5nZSB0aGUgdmlldyBhbmdsZVxuICB0b2dnbGVPcmllbnRhdGlvbigpOiB2b2lkO1xuXG4gIC8vIHBlcmZvcm0gYSBtb3ZlIHByb2dyYW1tYXRpY2FsbHlcbiAgbW92ZShvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSk6IHZvaWQ7XG5cbiAgLy8gYWRkIGFuZC9vciByZW1vdmUgYXJiaXRyYXJ5IHBpZWNlcyBvbiB0aGUgYm9hcmRcbiAgc2V0UGllY2VzKHBpZWNlczogY2cuUGllY2VzRGlmZik6IHZvaWQ7XG5cbiAgLy8gY2xpY2sgYSBzcXVhcmUgcHJvZ3JhbW1hdGljYWxseVxuICBzZWxlY3RTcXVhcmUoa2V5OiBjZy5LZXkgfCBudWxsLCBmb3JjZT86IGJvb2xlYW4pOiB2b2lkO1xuXG4gIC8vIHB1dCBhIG5ldyBwaWVjZSBvbiB0aGUgYm9hcmRcbiAgbmV3UGllY2UocGllY2U6IGNnLlBpZWNlLCBrZXk6IGNnLktleSk6IHZvaWQ7XG5cbiAgLy8gcGxheSB0aGUgY3VycmVudCBwcmVtb3ZlLCBpZiBhbnk7IHJldHVybnMgdHJ1ZSBpZiBwcmVtb3ZlIHdhcyBwbGF5ZWRcbiAgcGxheVByZW1vdmUoKTogYm9vbGVhbjtcblxuICAvLyBjYW5jZWwgdGhlIGN1cnJlbnQgcHJlbW92ZSwgaWYgYW55XG4gIGNhbmNlbFByZW1vdmUoKTogdm9pZDtcblxuICAvLyBwbGF5IHRoZSBjdXJyZW50IHByZWRyb3AsIGlmIGFueTsgcmV0dXJucyB0cnVlIGlmIHByZW1vdmUgd2FzIHBsYXllZFxuICBwbGF5UHJlZHJvcCh2YWxpZGF0ZTogKGRyb3A6IGNnLkRyb3ApID0+IGJvb2xlYW4pOiBib29sZWFuO1xuXG4gIC8vIGNhbmNlbCB0aGUgY3VycmVudCBwcmVkcm9wLCBpZiBhbnlcbiAgY2FuY2VsUHJlZHJvcCgpOiB2b2lkO1xuXG4gIC8vIGNhbmNlbCB0aGUgY3VycmVudCBtb3ZlIGJlaW5nIG1hZGVcbiAgY2FuY2VsTW92ZSgpOiB2b2lkO1xuXG4gIC8vIGNhbmNlbCBjdXJyZW50IG1vdmUgYW5kIHByZXZlbnQgZnVydGhlciBvbmVzXG4gIHN0b3AoKTogdm9pZDtcblxuICAvLyBtYWtlIHNxdWFyZXMgZXhwbG9kZSAoYXRvbWljIGNoZXNzKVxuICBleHBsb2RlKGtleXM6IGNnLktleVtdKTogdm9pZDtcblxuICAvLyBwcm9ncmFtbWF0aWNhbGx5IGRyYXcgdXNlciBzaGFwZXNcbiAgc2V0U2hhcGVzKHNoYXBlczogRHJhd1NoYXBlW10pOiB2b2lkO1xuXG4gIC8vIHByb2dyYW1tYXRpY2FsbHkgZHJhdyBhdXRvIHNoYXBlc1xuICBzZXRBdXRvU2hhcGVzKHNoYXBlczogRHJhd1NoYXBlW10pOiB2b2lkO1xuXG4gIC8vIHNxdWFyZSBuYW1lIGF0IHRoaXMgRE9NIHBvc2l0aW9uIChsaWtlIFwiZTRcIilcbiAgZ2V0S2V5QXREb21Qb3MocG9zOiBjZy5OdW1iZXJQYWlyKTogY2cuS2V5IHwgdW5kZWZpbmVkO1xuXG4gIC8vIG9ubHkgdXNlZnVsIHdoZW4gQ1NTIGNoYW5nZXMgdGhlIGJvYXJkIHdpZHRoL2hlaWdodCByYXRpbyAoZm9yIDNEKVxuICByZWRyYXdBbGw6IGNnLlJlZHJhdztcblxuICAvLyBmb3IgY3Jhenlob3VzZSBhbmQgYm9hcmQgZWRpdG9yc1xuICBkcmFnTmV3UGllY2UocGllY2U6IGNnLlBpZWNlLCBldmVudDogY2cuTW91Y2hFdmVudCwgZm9yY2U/OiBib29sZWFuKTogdm9pZDtcblxuICAvLyB1bmJpbmRzIGFsbCBldmVudHNcbiAgLy8gKGltcG9ydGFudCBmb3IgZG9jdW1lbnQtd2lkZSBldmVudHMgbGlrZSBzY3JvbGwgYW5kIG1vdXNlbW92ZSlcbiAgZGVzdHJveTogY2cuVW5iaW5kXG59XG5cbi8vIHNlZSBBUEkgdHlwZXMgYW5kIGRvY3VtZW50YXRpb25zIGluIGR0cy9hcGkuZC50c1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0KHN0YXRlOiBTdGF0ZSwgcmVkcmF3QWxsOiBjZy5SZWRyYXcpOiBBcGkge1xuXG4gIGZ1bmN0aW9uIHRvZ2dsZU9yaWVudGF0aW9uKCkge1xuICAgIGJvYXJkLnRvZ2dsZU9yaWVudGF0aW9uKHN0YXRlKTtcbiAgICByZWRyYXdBbGwoKTtcbiAgfTtcblxuICByZXR1cm4ge1xuXG4gICAgc2V0KGNvbmZpZykge1xuICAgICAgaWYgKGNvbmZpZy5vcmllbnRhdGlvbiAmJiBjb25maWcub3JpZW50YXRpb24gIT09IHN0YXRlLm9yaWVudGF0aW9uKSB0b2dnbGVPcmllbnRhdGlvbigpO1xuICAgICAgKGNvbmZpZy5mZW4gPyBhbmltIDogcmVuZGVyKShzdGF0ZSA9PiBjb25maWd1cmUoc3RhdGUsIGNvbmZpZyksIHN0YXRlKTtcbiAgICB9LFxuXG4gICAgc3RhdGUsXG5cbiAgICBnZXRGZW46ICgpID0+IGZlbldyaXRlKHN0YXRlLnBpZWNlcyksXG5cbiAgICB0b2dnbGVPcmllbnRhdGlvbixcblxuICAgIHNldFBpZWNlcyhwaWVjZXMpIHtcbiAgICAgIGFuaW0oc3RhdGUgPT4gYm9hcmQuc2V0UGllY2VzKHN0YXRlLCBwaWVjZXMpLCBzdGF0ZSk7XG4gICAgfSxcblxuICAgIHNlbGVjdFNxdWFyZShrZXksIGZvcmNlKSB7XG4gICAgICBpZiAoa2V5KSBhbmltKHN0YXRlID0+IGJvYXJkLnNlbGVjdFNxdWFyZShzdGF0ZSwga2V5LCBmb3JjZSksIHN0YXRlKTtcbiAgICAgIGVsc2UgaWYgKHN0YXRlLnNlbGVjdGVkKSB7XG4gICAgICAgIGJvYXJkLnVuc2VsZWN0KHN0YXRlKTtcbiAgICAgICAgc3RhdGUuZG9tLnJlZHJhdygpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBtb3ZlKG9yaWcsIGRlc3QpIHtcbiAgICAgIGFuaW0oc3RhdGUgPT4gYm9hcmQuYmFzZU1vdmUoc3RhdGUsIG9yaWcsIGRlc3QpLCBzdGF0ZSk7XG4gICAgfSxcblxuICAgIG5ld1BpZWNlKHBpZWNlLCBrZXkpIHtcbiAgICAgIGFuaW0oc3RhdGUgPT4gYm9hcmQuYmFzZU5ld1BpZWNlKHN0YXRlLCBwaWVjZSwga2V5KSwgc3RhdGUpO1xuICAgIH0sXG5cbiAgICBwbGF5UHJlbW92ZSgpIHtcbiAgICAgIGlmIChzdGF0ZS5wcmVtb3ZhYmxlLmN1cnJlbnQpIHtcbiAgICAgICAgaWYgKGFuaW0oYm9hcmQucGxheVByZW1vdmUsIHN0YXRlKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIC8vIGlmIHRoZSBwcmVtb3ZlIGNvdWxkbid0IGJlIHBsYXllZCwgcmVkcmF3IHRvIGNsZWFyIGl0IHVwXG4gICAgICAgIHN0YXRlLmRvbS5yZWRyYXcoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgcGxheVByZWRyb3AodmFsaWRhdGUpIHtcbiAgICAgIGlmIChzdGF0ZS5wcmVkcm9wcGFibGUuY3VycmVudCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBib2FyZC5wbGF5UHJlZHJvcChzdGF0ZSwgdmFsaWRhdGUpO1xuICAgICAgICBzdGF0ZS5kb20ucmVkcmF3KCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIGNhbmNlbFByZW1vdmUoKSB7XG4gICAgICByZW5kZXIoYm9hcmQudW5zZXRQcmVtb3ZlLCBzdGF0ZSk7XG4gICAgfSxcblxuICAgIGNhbmNlbFByZWRyb3AoKSB7XG4gICAgICByZW5kZXIoYm9hcmQudW5zZXRQcmVkcm9wLCBzdGF0ZSk7XG4gICAgfSxcblxuICAgIGNhbmNlbE1vdmUoKSB7XG4gICAgICByZW5kZXIoc3RhdGUgPT4geyBib2FyZC5jYW5jZWxNb3ZlKHN0YXRlKTsgZHJhZ0NhbmNlbChzdGF0ZSk7IH0sIHN0YXRlKTtcbiAgICB9LFxuXG4gICAgc3RvcCgpIHtcbiAgICAgIHJlbmRlcihzdGF0ZSA9PiB7IGJvYXJkLnN0b3Aoc3RhdGUpOyBkcmFnQ2FuY2VsKHN0YXRlKTsgfSwgc3RhdGUpO1xuICAgIH0sXG5cbiAgICBleHBsb2RlKGtleXM6IGNnLktleVtdKSB7XG4gICAgICBleHBsb3Npb24oc3RhdGUsIGtleXMpO1xuICAgIH0sXG5cbiAgICBzZXRBdXRvU2hhcGVzKHNoYXBlczogRHJhd1NoYXBlW10pIHtcbiAgICAgIHJlbmRlcihzdGF0ZSA9PiBzdGF0ZS5kcmF3YWJsZS5hdXRvU2hhcGVzID0gc2hhcGVzLCBzdGF0ZSk7XG4gICAgfSxcblxuICAgIHNldFNoYXBlcyhzaGFwZXM6IERyYXdTaGFwZVtdKSB7XG4gICAgICByZW5kZXIoc3RhdGUgPT4gc3RhdGUuZHJhd2FibGUuc2hhcGVzID0gc2hhcGVzLCBzdGF0ZSk7XG4gICAgfSxcblxuICAgIGdldEtleUF0RG9tUG9zKHBvcykge1xuICAgICAgcmV0dXJuIGJvYXJkLmdldEtleUF0RG9tUG9zKHBvcywgYm9hcmQud2hpdGVQb3Yoc3RhdGUpLCBzdGF0ZS5kb20uYm91bmRzKCkpO1xuICAgIH0sXG5cbiAgICByZWRyYXdBbGwsXG5cbiAgICBkcmFnTmV3UGllY2UocGllY2UsIGV2ZW50LCBmb3JjZSkge1xuICAgICAgZHJhZ05ld1BpZWNlKHN0YXRlLCBwaWVjZSwgZXZlbnQsIGZvcmNlKVxuICAgIH0sXG5cbiAgICBkZXN0cm95KCkge1xuICAgICAgYm9hcmQuc3RvcChzdGF0ZSk7XG4gICAgICBzdGF0ZS5kb20udW5iaW5kICYmIHN0YXRlLmRvbS51bmJpbmQoKTtcbiAgICAgIHN0YXRlLmRvbS5kZXN0cm95ZWQgPSB0cnVlO1xuICAgIH1cbiAgfTtcbn1cbiJdfQ==","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util = require(\"./util\");\nfunction diff(a, b) {\n    return Math.abs(a - b);\n}\nfunction pawn(color) {\n    return (x1, y1, x2, y2) => diff(x1, x2) < 2 && (color === 'white' ? (y2 === y1 + 1 || (y1 <= 2 && y2 === (y1 + 2) && x1 === x2)) : (y2 === y1 - 1 || (y1 >= 7 && y2 === (y1 - 2) && x1 === x2)));\n}\nconst knight = (x1, y1, x2, y2) => {\n    const xd = diff(x1, x2);\n    const yd = diff(y1, y2);\n    return (xd === 1 && yd === 2) || (xd === 2 && yd === 1);\n};\nconst bishop = (x1, y1, x2, y2) => {\n    return diff(x1, x2) === diff(y1, y2);\n};\nconst rook = (x1, y1, x2, y2) => {\n    return x1 === x2 || y1 === y2;\n};\nconst queen = (x1, y1, x2, y2) => {\n    return bishop(x1, y1, x2, y2) || rook(x1, y1, x2, y2);\n};\nfunction king(color, rookFiles, canCastle) {\n    return (x1, y1, x2, y2) => (diff(x1, x2) < 2 && diff(y1, y2) < 2) || (canCastle && y1 === y2 && y1 === (color === 'white' ? 1 : 8) && ((x1 === 5 && ((util.containsX(rookFiles, 1) && x2 === 3) || (util.containsX(rookFiles, 8) && x2 === 7))) ||\n        util.containsX(rookFiles, x2)));\n}\nfunction rookFilesOf(pieces, color) {\n    const backrank = color == 'white' ? '1' : '8';\n    return Object.keys(pieces).filter(key => {\n        const piece = pieces[key];\n        return key[1] === backrank && piece && piece.color === color && piece.role === 'rook';\n    }).map((key) => util.key2pos(key)[0]);\n}\nconst allPos = util.allKeys.map(util.key2pos);\nfunction premove(pieces, key, canCastle) {\n    const piece = pieces[key], pos = util.key2pos(key), r = piece.role, mobility = r === 'pawn' ? pawn(piece.color) : (r === 'knight' ? knight : (r === 'bishop' ? bishop : (r === 'rook' ? rook : (r === 'queen' ? queen : king(piece.color, rookFilesOf(pieces, piece.color), canCastle)))));\n    return allPos.filter(pos2 => (pos[0] !== pos2[0] || pos[1] !== pos2[1]) && mobility(pos[0], pos[1], pos2[0], pos2[1])).map(util.pos2key);\n}\nexports.default = premove;\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlbW92ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNyYy9wcmVtb3ZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsK0JBQThCO0FBSzlCLFNBQVMsSUFBSSxDQUFDLENBQVMsRUFBRSxDQUFRO0lBQy9CLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDekIsQ0FBQztBQUVELFNBQVMsSUFBSSxDQUFDLEtBQWU7SUFDM0IsT0FBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FDN0MsS0FBSyxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FFbEIsRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQzNELENBQUMsQ0FBQyxDQUFDLENBQ0YsRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQzNELENBQ0YsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLE1BQU0sR0FBYSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFO0lBQzFDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDeEIsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN4QixPQUFPLENBQUMsRUFBRSxLQUFLLENBQUMsSUFBSSxFQUFF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bXBvcnQgKiBhcyB1dGlsIGZyb20gJy4vdXRpbCdcbmltcG9ydCAqIGFzIGNnIGZyb20gJy4vdHlwZXMnXG5cbnR5cGUgTW9iaWxpdHkgPSAoeDE6bnVtYmVyLCB5MTpudW1iZXIsIHgyOm51bWJlciwgeTI6bnVtYmVyKSA9PiBib29sZWFuO1xuXG5mdW5jdGlvbiBkaWZmKGE6IG51bWJlciwgYjpudW1iZXIpOm51bWJlciB7XG4gIHJldHVybiBNYXRoLmFicyhhIC0gYik7XG59XG5cbmZ1bmN0aW9uIHBhd24oY29sb3I6IGNnLkNvbG9yKTogTW9iaWxpdHkge1xuICByZXR1cm4gKHgxLCB5MSwgeDIsIHkyKSA9PiBkaWZmKHgxLCB4MikgPCAyICYmIChcbiAgICBjb2xvciA9PT0gJ3doaXRlJyA/IChcbiAgICAgIC8vIGFsbG93IDIgc3F1YXJlcyBmcm9tIDEgYW5kIDgsIGZvciBob3JkZVxuICAgICAgeTIgPT09IHkxICsgMSB8fCAoeTEgPD0gMiAmJiB5MiA9PT0gKHkxICsgMikgJiYgeDEgPT09IHgyKVxuICAgICkgOiAoXG4gICAgICB5MiA9PT0geTEgLSAxIHx8ICh5MSA+PSA3ICYmIHkyID09PSAoeTEgLSAyKSAmJiB4MSA9PT0geDIpXG4gICAgKVxuICApO1xufVxuXG5jb25zdCBrbmlnaHQ6IE1vYmlsaXR5ID0gKHgxLCB5MSwgeDIsIHkyKSA9PiB7XG4gIGNvbnN0IHhkID0gZGlmZih4MSwgeDIpO1xuICBjb25zdCB5ZCA9IGRpZmYoeTEsIHkyKTtcbiAgcmV0dXJuICh4ZCA9PT0gMSAmJiB5ZCA9PT0gMikgfHwgKHhkID09PSAyICYmIHlkID09PSAxKTtcbn1cblxuY29uc3QgYmlzaG9wOiBNb2JpbGl0eSA9ICh4MSwgeTEsIHgyLCB5MikgPT4ge1xuICByZXR1cm4gZGlmZih4MSwgeDIpID09PSBkaWZmKHkxLCB5Mik7XG59XG5cbmNvbnN0IHJvb2s6IE1vYmlsaXR5ID0gKHgxLCB5MSwgeDIsIHkyKSA9PiB7XG4gIHJldHVybiB4MSA9PT0geDIgfHwgeTEgPT09IHkyO1xufVxuXG5jb25zdCBxdWVlbjogTW9iaWxpdHkgPSAoeDEsIHkxLCB4MiwgeTIpID0+IHtcbiAgcmV0dXJuIGJpc2hvcCh4MSwgeTEsIHgyLCB5MikgfHwgcm9vayh4MSwgeTEsIHgyLCB5Mik7XG59XG5cbmZ1bmN0aW9uIGtpbmcoY29sb3I6IGNnLkNvbG9yLCByb29rRmlsZXM6IG51bWJlcltdLCBjYW5DYXN0bGU6IGJvb2xlYW4pOiBNb2JpbGl0eSB7XG4gIHJldHVybiAoeDEsIHkxLCB4MiwgeTIpICA9PiAoXG4gICAgZGlmZih4MSwgeDIpIDwgMiAmJiBkaWZmKHkxLCB5MikgPCAyXG4gICkgfHwgKFxuICAgIGNhbkNhc3RsZSAmJiB5MSA9PT0geTIgJiYgeTEgPT09IChjb2xvciA9PT0gJ3doaXRlJyA/IDEgOiA4KSAmJiAoXG4gICAgICAoeDEgPT09IDUgJiYgKCh1dGlsLmNvbnRhaW5zWChyb29rRmlsZXMsIDEpICYmIHgyID09PSAzKSB8fCAodXRpbC5jb250YWluc1gocm9va0ZpbGVzLCA4KSAmJiB4MiA9PT0gNykpKSB8fFxuICAgICAgdXRpbC5jb250YWluc1gocm9va0ZpbGVzLCB4MilcbiAgICApXG4gICk7XG59XG5cbmZ1bmN0aW9uIHJvb2tGaWxlc09mKHBpZWNlczogY2cuUGllY2VzLCBjb2xvcjogY2cuQ29sb3IpIHtcbiAgY29uc3QgYmFja3JhbmsgPSBjb2xvciA9PSAnd2hpdGUnID8gJzEnIDogJzgnO1xuICByZXR1cm4gT2JqZWN0LmtleXMocGllY2VzKS5maWx0ZXIoa2V5ID0+IHtcbiAgICBjb25zdCBwaWVjZSA9IHBpZWNlc1trZXldO1xuICAgIHJldHVybiBrZXlbMV0gPT09IGJhY2tyYW5rICYmIHBpZWNlICYmIHBpZWNlLmNvbG9yID09PSBjb2xvciAmJiBwaWVjZS5yb2xlID09PSAncm9vayc7XG4gIH0pLm1hcCgoa2V5OiBzdHJpbmcgKSA9PiB1dGlsLmtleTJwb3Moa2V5IGFzIGNnLktleSlbMF0pO1xufVxuXG5jb25zdCBhbGxQb3MgPSB1dGlsLmFsbEtleXMubWFwKHV0aWwua2V5MnBvcyk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHByZW1vdmUocGllY2VzOiBjZy5QaWVjZXMsIGtleTogY2cuS2V5LCBjYW5DYXN0bGU6IGJvb2xlYW4pOiBjZy5LZXlbXSB7XG4gIGNvbnN0IHBpZWNlID0gcGllY2VzW2tleV0hLFxuICAgIHBvcyA9IHV0aWwua2V5MnBvcyhrZXkpLFxuICAgIHIgPSBwaWVjZS5yb2xlLFxuICAgIG1vYmlsaXR5OiBNb2JpbGl0eSA9IHIgPT09ICdwYXduJyA/IHBhd24ocGllY2UuY29sb3IpIDogKFxuICAgICAgciA9PT0gJ2tuaWdodCcgPyBrbmlnaHQgOiAoXG4gICAgICAgIHIgPT09ICdiaXNob3AnID8gYmlzaG9wIDogKFxuICAgICAgICAgIHIgPT09ICdyb29rJyA/IHJvb2sgOiAoXG4gICAgICAgICAgICByID09PSAncXVlZW4nID8gcXVlZW4gOiBraW5nKHBpZWNlLmNvbG9yLCByb29rRmlsZXNPZihwaWVjZXMsIHBpZWNlLmNvbG9yKSwgY2FuQ2FzdGxlKVxuICAgICAgICAgICkpKSk7XG4gIHJldHVybiBhbGxQb3MuZmlsdGVyKHBvczIgPT5cbiAgICAocG9zWzBdICE9PSBwb3MyWzBdIHx8IHBvc1sxXSAhPT0gcG9zMlsxXSkgJiYgbW9iaWxpdHkocG9zWzBdLCBwb3NbMV0sIHBvczJbMF0sIHBvczJbMV0pXG4gICkubWFwKHV0aWwucG9zMmtleSk7XG59O1xuIl19","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction explosion(state, keys) {\n    state.exploding = { stage: 1, keys };\n    state.dom.redraw();\n    setTimeout(() => {\n        setStage(state, 2);\n        setTimeout(() => setStage(state, undefined), 120);\n    }, 120);\n}\nexports.default = explosion;\nfunction setStage(state, stage) {\n    if (state.exploding) {\n        if (stage)\n            state.exploding.stage = stage;\n        else\n            state.exploding = undefined;\n        state.dom.redraw();\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwbG9zaW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL2V4cGxvc2lvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUdBLFNBQXdCLFNBQVMsQ0FBQyxLQUFZLEVBQUUsSUFBVztJQUN6RCxLQUFLLENBQUMsU0FBUyxHQUFHLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQztJQUNyQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ25CLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ25CLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3BELENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNWLENBQUM7QUFQRCw0QkFPQztBQUVELFNBQVMsUUFBUSxDQUFDLEtBQVksRUFBRSxLQUF5QjtJQUN2RCxJQUFJLEtBQUssQ0FBQyxTQUFTLEVBQUU7UUFDbkIsSUFBSSxLQUFLO1lBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDOztZQUNwQyxLQUFLLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztRQUNqQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDO0tBQ3BCO0FBQ0gsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9zdGF0ZSdcbmltcG9ydCB7IEtleSB9IGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGV4cGxvc2lvbihzdGF0ZTogU3RhdGUsIGtleXM6IEtleVtdKTogdm9pZCB7XG4gIHN0YXRlLmV4cGxvZGluZyA9IHsgc3RhZ2U6IDEsIGtleXMgfTtcbiAgc3RhdGUuZG9tLnJlZHJhdygpO1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBzZXRTdGFnZShzdGF0ZSwgMik7XG4gICAgc2V0VGltZW91dCgoKSA9PiBzZXRTdGFnZShzdGF0ZSwgdW5kZWZpbmVkKSwgMTIwKTtcbiAgfSwgMTIwKTtcbn1cblxuZnVuY3Rpb24gc2V0U3RhZ2Uoc3RhdGU6IFN0YXRlLCBzdGFnZTogbnVtYmVyIHwgdW5kZWZpbmVkKTogdm9pZCB7XG4gIGlmIChzdGF0ZS5leHBsb2RpbmcpIHtcbiAgICBpZiAoc3RhZ2UpIHN0YXRlLmV4cGxvZGluZy5zdGFnZSA9IHN0YWdlO1xuICAgIGVsc2Ugc3RhdGUuZXhwbG9kaW5nID0gdW5kZWZpbmVkO1xuICAgIHN0YXRlLmRvbS5yZWRyYXcoKTtcbiAgfVxufVxuIl19","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst fen = require(\"./fen\");\nconst util_1 = require(\"./util\");\nfunction defaults() {\n    return {\n        pieces: fen.read(fen.initial),\n        orientation: 'white',\n        turnColor: 'white',\n        coordinates: true,\n        autoCastle: true,\n        viewOnly: false,\n        disableContextMenu: false,\n        resizable: true,\n        addPieceZIndex: false,\n        pieceKey: false,\n        highlight: {\n            lastMove: true,\n            check: true\n        },\n        animation: {\n            enabled: true,\n            duration: 200\n        },\n        movable: {\n            free: true,\n            color: 'both',\n            showDests: true,\n            events: {},\n            rookCastle: true\n        },\n        premovable: {\n            enabled: true,\n            showDests: true,\n            castle: true,\n            events: {}\n        },\n        predroppable: {\n            enabled: false,\n            events: {}\n        },\n        draggable: {\n            enabled: true,\n            distance: 3,\n            autoDistance: true,\n            centerPiece: true,\n            showGhost: true,\n            deleteOnDropOff: false\n        },\n        dropmode: {\n            active: false\n        },\n        selectable: {\n            enabled: true\n        },\n        stats: {\n            dragged: !('ontouchstart' in window)\n        },\n        events: {},\n        drawable: {\n            enabled: true,\n            visible: true,\n            eraseOnClick: true,\n            shapes: [],\n            autoShapes: [],\n            brushes: {\n                green: { key: 'g', color: '#15781B', opacity: 1, lineWidth: 10 },\n                red: { key: 'r', color: '#882020', opacity: 1, lineWidth: 10 },\n                blue: { key: 'b', color: '#003088', opacity: 1, lineWidth: 10 },\n                yellow: { key: 'y', color: '#e68f00', opacity: 1, lineWidth: 10 },\n                paleBlue: { key: 'pb', color: '#003088', opacity: 0.4, lineWidth: 15 },\n                paleGreen: { key: 'pg', color: '#15781B', opacity: 0.4, lineWidth: 15 },\n                paleRed: { key: 'pr', color: '#882020', opacity: 0.4, lineWidth: 15 },\n                paleGrey: { key: 'pgr', color: '#4a4a4a', opacity: 0.35, lineWidth: 15 }\n            },\n            pieces: {\n                baseUrl: 'https://lichess1.org/assets/piece/cburnett/'\n            },\n            prevSvgHash: ''\n        },\n        hold: util_1.timer()\n    };\n}\nexports.defaults = defaults;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzcmMvc3RhdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2QkFBNEI7QUFJNUIsaUNBQThCO0FBaUc5QixTQUFnQixRQUFRO0lBQ3RCLE9BQU87UUFDTCxNQUFNLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDO1FBQzdCLFdBQVcsRUFBRSxPQUFPO1FBQ3BCLFNBQVMsRUFBRSxPQUFPO1FBQ2xCLFdBQVcsRUFBRSxJQUFJO1FBQ2pCLFVBQVUsRUFBRSxJQUFJO1FBQ2hCLFFBQVEsRUFBRSxLQUFLO1FBQ2Ysa0JBQWtCLEVBQUUsS0FBSztRQUN6QixTQUFTLEVBQUUsSUFBSTtRQUNmLGNBQWMsRUFBRSxLQUFLO1FBQ3JCLFFBQVEsRUFBRSxLQUFLO1FBQ2YsU0FBUyxFQUFFO1lBQ1QsUUFBUSxFQUFFLElBQUk7WUFDZCxLQUFLLEVBQUUsSUFBSTtTQUNaO1FBQ0QsU0FBUyxFQUFFO1lBQ1QsT0FBTyxFQUFFLElBQUk7WUFDYixRQUFRLEVBQUUsR0FBRztTQUNkO1FBQ0QsT0FBTyxFQUFFO1lBQ1AsSUFBSSxFQUFFLElBQUk7WUFDVixLQUFLLEVBQUUsTUFBTTtZQUNiLFNBQVMsRUFBRSxJQUFJO1lBQ2YsTUFBTSxFQUFFLEVBQUU7WUFDVixVQUFVLEVBQUUsSUFBSTtTQUNqQjtRQUNELFVBQVUsRUFBRTtZQUNWLE9BQU8sRUFBRSxJQUFJO1lBQ2IsU0FBUyxFQUFFLElBQUk7WUFDZixNQUFNLEVBQUUsSUFBSTtZQUNaLE1BQU0sRUFBRSxFQUFFO1NBQ1g7UUFDRCxZQUFZLEVBQUU7WUFDWixPQUFPLEVBQUUsS0FBSztZQUNkLE1BQU0sRUFBRSxFQUFFO1NBQ1g7UUFDRCxTQUFTLEVBQUU7WUFDVCxPQUFPLEVBQUUsSUFBSTtZQUNiLFFBQVEsRUFBRSxDQUFDO1lBQ1gsWUFBWSxFQUFFLElBQUk7WUFDbEIsV0FBVyxFQUFFLElBQUk7WUFDakIsU0FBUyxFQUFFLElBQUk7WUFDZixlQUFlLEVBQUUsS0FBSztTQUN2QjtRQUNELFFBQVEsRUFBRTtZQUNSLE1BQU0sRUFBRSxLQUFLO1NBQ2Q7UUFDRCxVQUFVLEVBQUU7WUFDVixPQUFPLEVBQUUsSUFBSTtTQUNkO1FBQ0QsS0FBSyxFQUFFO1lBR0wsT0FBTyxFQUFFLENBQUMsQ0FBQyxjQUFjLElBQUksTUFBTSxDQUFDO1NBQ3JDO1FBQ0QsTUFBTSxFQUFFLEVBQUU7UUFDVixRQUFRLEVBQUU7WUFDUixPQUFPLEVBQUUsSUFBSTtZQUNiLE9BQU8sRUFBRSxJQUFJO1lBQ2IsWUFBWSxFQUFFLElBQUk7WUFDbEIsTUFBTSxFQUFFLEVBQUU7WUFDVixVQUFVLEVBQUUsRUFBRTtZQUNkLE9BQU8sRUFBRTtnQkFDUCxLQUFLLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFO2dCQUNoRSxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFO2dCQUM5RCxJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFO2dCQUMvRCxNQUFNLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFO2dCQUNqRSxRQUFRLEVBQUUsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFO2dCQUN0RSxTQUFTLEVBQUUsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFO2dCQUN2RSxPQUFPLEVBQUUsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFO2dCQUNyRSxRQUFRLEVBQUUsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFO2FBQ3pFO1lBQ0QsTUFBTSxFQUFFO2dCQUNOLE9BQU8sRUFBRSw2Q0FBNkM7YUFDdkQ7WUFDRCxXQUFXLEVBQUUsRUFBRTtTQUNoQjtRQUNELElBQUksRUFBRSxZQUFLLEVBQUU7S0FDZCxDQUFDO0FBQ0osQ0FBQztBQWhGRCw0QkFnRkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBmZW4gZnJvbSAnLi9mZW4nXG5pbXBvcnQgeyBBbmltQ3VycmVudCB9IGZyb20gJy4vYW5pbSdcbmltcG9ydCB7IERyYWdDdXJyZW50IH0gZnJvbSAnLi9kcmFnJ1xuaW1wb3J0IHsgRHJhd2FibGUgfSBmcm9tICcuL2RyYXcnXG5pbXBvcnQgeyB0aW1lciB9IGZyb20gJy4vdXRpbCdcbmltcG9ydCAqIGFzIGNnIGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlIHtcbiAgcGllY2VzOiBjZy5QaWVjZXM7XG4gIG9yaWVudGF0aW9uOiBjZy5Db2xvcjsgLy8gYm9hcmQgb3JpZW50YXRpb24uIHdoaXRlIHwgYmxhY2tcbiAgdHVybkNvbG9yOiBjZy5Db2xvcjsgLy8gdHVybiB0byBwbGF5LiB3aGl0ZSB8IGJsYWNrXG4gIGNoZWNrPzogY2cuS2V5OyAvLyBzcXVhcmUgY3VycmVudGx5IGluIGNoZWNrIFwiYTJcIlxuICBsYXN0TW92ZT86IGNnLktleVtdOyAvLyBzcXVhcmVzIHBhcnQgb2YgdGhlIGxhc3QgbW92ZSBbXCJjM1wiOyBcImM0XCJdXG4gIHNlbGVjdGVkPzogY2cuS2V5OyAvLyBzcXVhcmUgY3VycmVudGx5IHNlbGVjdGVkIFwiYTFcIlxuICBjb29yZGluYXRlczogYm9vbGVhbjsgLy8gaW5jbHVkZSBjb29yZHMgYXR0cmlidXRlc1xuICBhdXRvQ2FzdGxlOiBib29sZWFuOyAvLyBpbW1lZGlhdGVseSBjb21wbGV0ZSB0aGUgY2FzdGxlIGJ5IG1vdmluZyB0aGUgcm9vayBhZnRlciBraW5nIG1vdmVcbiAgdmlld09ubHk6IGJvb2xlYW47IC8vIGRvbid0IGJpbmQgZXZlbnRzOiB0aGUgdXNlciB3aWxsIG5ldmVyIGJlIGFibGUgdG8gbW92ZSBwaWVjZXMgYXJvdW5kXG4gIGRpc2FibGVDb250ZXh0TWVudTogYm9vbGVhbjsgLy8gYmVjYXVzZSB3aG8gbmVlZHMgYSBjb250ZXh0IG1lbnUgb24gYSBjaGVzc2JvYXJkXG4gIHJlc2l6YWJsZTogYm9vbGVhbjsgLy8gbGlzdGVucyB0byBjaGVzc2dyb3VuZC5yZXNpemUgb24gZG9jdW1lbnQuYm9keSB0byBjbGVhciBib3VuZHMgY2FjaGVcbiAgYWRkUGllY2VaSW5kZXg6IGJvb2xlYW47IC8vIGFkZHMgei1pbmRleCB2YWx1ZXMgdG8gcGllY2VzIChmb3IgM0QpXG4gIHBpZWNlS2V5OiBib29sZWFuOyAvLyBhZGQgYSBkYXRhLWtleSBhdHRyaWJ1dGUgdG8gcGllY2UgZWxlbWVudHNcbiAgaGlnaGxpZ2h0OiB7XG4gICAgbGFzdE1vdmU6IGJvb2xlYW47IC8vIGFkZCBsYXN0LW1vdmUgY2xhc3MgdG8gc3F1YXJlc1xuICAgIGNoZWNrOiBib29sZWFuOyAvLyBhZGQgY2hlY2sgY2xhc3MgdG8gc3F1YXJlc1xuICB9O1xuICBhbmltYXRpb246IHtcbiAgICBlbmFibGVkOiBib29sZWFuO1xuICAgIGR1cmF0aW9uOiBudW1iZXI7XG4gICAgY3VycmVudD86IEFuaW1DdXJyZW50O1xuICB9O1xuICBtb3ZhYmxlOiB7XG4gICAgZnJlZTogYm9vbGVhbjsgLy8gYWxsIG1vdmVzIGFyZSB2YWxpZCAtIGJvYXJkIGVkaXRvclxuICAgIGNvbG9yPzogY2cuQ29sb3IgfCAnYm90aCc7IC8vIGNvbG9yIHRoYXQgY2FuIG1vdmUuIHdoaXRlIHwgYmxhY2sgfCBib3RoXG4gICAgZGVzdHM/OiBjZy5EZXN0czsgLy8gdmFsaWQgbW92ZXMuIHtcImEyXCIgW1wiYTNcIiBcImE0XCJdIFwiYjFcIiBbXCJhM1wiIFwiYzNcIl19XG4gICAgc2hvd0Rlc3RzOiBib29sZWFuOyAvLyB3aGV0aGVyIHRvIGFkZCB0aGUgbW92ZS1kZXN0IGNsYXNzIG9uIHNxdWFyZXNcbiAgICBldmVudHM6IHtcbiAgICAgIGFmdGVyPzogKG9yaWc6IGNnLktleSwgZGVzdDogY2cuS2V5LCBtZXRhZGF0YTogY2cuTW92ZU1ldGFkYXRhKSA9PiB2b2lkOyAvLyBjYWxsZWQgYWZ0ZXIgdGhlIG1vdmUgaGFzIGJlZW4gcGxheWVkXG4gICAgICBhZnRlck5ld1BpZWNlPzogKHJvbGU6IGNnLlJvbGUsIGtleTogY2cuS2V5LCBtZXRhZGF0YTogY2cuTW92ZU1ldGFkYXRhKSA9PiB2b2lkOyAvLyBjYWxsZWQgYWZ0ZXIgYSBuZXcgcGllY2UgaXMgZHJvcHBlZCBvbiB0aGUgYm9hcmRcbiAgICB9O1xuICAgIHJvb2tDYXN0bGU6IGJvb2xlYW4gLy8gY2FzdGxlIGJ5IG1vdmluZyB0aGUga2luZyB0byB0aGUgcm9va1xuICB9O1xuICBwcmVtb3ZhYmxlOiB7XG4gICAgZW5hYmxlZDogYm9vbGVhbjsgLy8gYWxsb3cgcHJlbW92ZXMgZm9yIGNvbG9yIHRoYXQgY2FuIG5vdCBtb3ZlXG4gICAgc2hvd0Rlc3RzOiBib29sZWFuOyAvLyB3aGV0aGVyIHRvIGFkZCB0aGUgcHJlbW92ZS1kZXN0IGNsYXNzIG9uIHNxdWFyZXNcbiAgICBjYXN0bGU6IGJvb2xlYW47IC8vIHdoZXRoZXIgdG8gYWxsb3cga2luZyBjYXN0bGUgcHJlbW92ZXNcbiAgICBkZXN0cz86IGNnLktleVtdOyAvLyBwcmVtb3ZlIGRlc3RpbmF0aW9ucyBmb3IgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgY3VycmVudD86IGNnLktleVBhaXI7IC8vIGtleXMgb2YgdGhlIGN1cnJlbnQgc2F2ZWQgcHJlbW92ZSBbXCJlMlwiIFwiZTRcIl1cbiAgICBldmVudHM6IHtcbiAgICAgIHNldD86IChvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSwgbWV0YWRhdGE/OiBjZy5TZXRQcmVtb3ZlTWV0YWRhdGEpID0+IHZvaWQ7IC8vIGNhbGxlZCBhZnRlciB0aGUgcHJlbW92ZSBoYXMgYmVlbiBzZXRcbiAgICAgIHVuc2V0PzogKCkgPT4gdm9pZDsgIC8vIGNhbGxlZCBhZnRlciB0aGUgcHJlbW92ZSBoYXMgYmVlbiB1bnNldFxuICAgIH1cbiAgfTtcbiAgcHJlZHJvcHBhYmxlOiB7XG4gICAgZW5hYmxlZDogYm9vbGVhbjsgLy8gYWxsb3cgcHJlZHJvcHMgZm9yIGNvbG9yIHRoYXQgY2FuIG5vdCBtb3ZlXG4gICAgY3VycmVudD86IHsgLy8gY3VycmVudCBzYXZlZCBwcmVkcm9wIHtyb2xlOiAna25pZ2h0Jzsga2V5OiAnZTQnfVxuICAgICAgcm9sZTogY2cuUm9sZTtcbiAgICAgIGtleTogY2cuS2V5XG4gICAgfTtcbiAgICBldmVudHM6IHtcbiAgICAgIHNldD86IChyb2xlOiBjZy5Sb2xlLCBrZXk6IGNnLktleSkgPT4gdm9pZDsgLy8gY2FsbGVkIGFmdGVyIHRoZSBwcmVkcm9wIGhhcyBiZWVuIHNldFxuICAgICAgdW5zZXQ/OiAoKSA9PiB2b2lkOyAvLyBjYWxsZWQgYWZ0ZXIgdGhlIHByZWRyb3AgaGFzIGJlZW4gdW5zZXRcbiAgICB9XG4gIH07XG4gIGRyYWdnYWJsZToge1xuICAgIGVuYWJsZWQ6IGJvb2xlYW47IC8vIGFsbG93IG1vdmVzICYgcHJlbW92ZXMgdG8gdXNlIGRyYWcnbiBkcm9wXG4gICAgZGlzdGFuY2U6IG51bWJlcjsgLy8gbWluaW11bSBkaXN0YW5jZSB0byBpbml0aWF0ZSBhIGRyYWc7IGluIHBpeGVsc1xuICAgIGF1dG9EaXN0YW5jZTogYm9vbGVhbjsgLy8gbGV0cyBjaGVzc2dyb3VuZCBzZXQgZGlzdGFuY2UgdG8gemVybyB3aGVuIHVzZXIgZHJhZ3MgcGllY2VzXG4gICAgY2VudGVyUGllY2U6IGJvb2xlYW47IC8vIGNlbnRlciB0aGUgcGllY2Ugb24gY3Vyc29yIGF0IGRyYWcgc3RhcnRcbiAgICBzaG93R2hvc3Q6IGJvb2xlYW47IC8vIHNob3cgZ2hvc3Qgb2YgcGllY2UgYmVpbmcgZHJhZ2dlZFxuICAgIGRlbGV0ZU9uRHJvcE9mZjogYm9vbGVhbjsgLy8gZGVsZXRlIGEgcGllY2Ugd2hlbiBpdCBpcyBkcm9wcGVkIG9mZiB0aGUgYm9hcmRcbiAgICBjdXJyZW50PzogRHJhZ0N1cnJlbnQ7XG4gIH07XG4gIGRyb3Btb2RlOiB7XG4gICAgYWN0aXZlOiBib29sZWFuO1xuICAgIHBpZWNlPzogY2cuUGllY2U7XG4gIH1cbiAgc2VsZWN0YWJsZToge1xuICAgIC8vIGRpc2FibGUgdG8gZW5mb3JjZSBkcmFnZ2luZyBvdmVyIGNsaWNrLWNsaWNrIG1vdmVcbiAgICBlbmFibGVkOiBib29sZWFuXG4gIH07XG4gIHN0YXRzOiB7XG4gICAgLy8gd2FzIGxhc3QgcGllY2UgZHJhZ2dlZCBvciBjbGlja2VkP1xuICAgIC8vIG5lZWRzIGRlZmF1bHQgdG8gZmFsc2UgZm9yIHRvdWNoXG4gICAgZHJhZ2dlZDogYm9vbGVhbixcbiAgICBjdHJsS2V5PzogYm9vbGVhblxuICB9O1xuICBldmVudHM6IHtcbiAgICBjaGFuZ2U/OiAoKSA9PiB2b2lkOyAvLyBjYWxsZWQgYWZ0ZXIgdGhlIHNpdHVhdGlvbiBjaGFuZ2VzIG9uIHRoZSBib2FyZFxuICAgIC8vIGNhbGxlZCBhZnRlciBhIHBpZWNlIGhhcyBiZWVuIG1vdmVkLlxuICAgIC8vIGNhcHR1cmVkUGllY2UgaXMgdW5kZWZpbmVkIG9yIGxpa2Uge2NvbG9yOiAnd2hpdGUnOyAncm9sZSc6ICdxdWVlbid9XG4gICAgbW92ZT86IChvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSwgY2FwdHVyZWRQaWVjZT86IGNnLlBpZWNlKSA9PiB2b2lkO1xuICAgIGRyb3BOZXdQaWVjZT86IChwaWVjZTogY2cuUGllY2UsIGtleTogY2cuS2V5KSA9PiB2b2lkO1xuICAgIHNlbGVjdD86IChrZXk6IGNnLktleSkgPT4gdm9pZCAvLyBjYWxsZWQgd2hlbiBhIHNxdWFyZSBpcyBzZWxlY3RlZFxuICAgIGluc2VydD86IChlbGVtZW50czogY2cuRWxlbWVudHMpID0+IHZvaWQ7IC8vIHdoZW4gdGhlIGJvYXJkIERPTSBoYXMgYmVlbiAocmUpaW5zZXJ0ZWRcbiAgfTtcbiAgZHJhd2FibGU6IERyYXdhYmxlLFxuICBleHBsb2Rpbmc/OiBjZy5FeHBsb2Rpbmc7XG4gIGRvbTogY2cuRG9tLFxuICBob2xkOiBjZy5UaW1lclxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdHMoKTogUGFydGlhbDxTdGF0ZT4ge1xuICByZXR1cm4ge1xuICAgIHBpZWNlczogZmVuLnJlYWQoZmVuLmluaXRpYWwpLFxuICAgIG9yaWVudGF0aW9uOiAnd2hpdGUnLFxuICAgIHR1cm5Db2xvcjogJ3doaXRlJyxcbiAgICBjb29yZGluYXRlczogdHJ1ZSxcbiAgICBhdXRvQ2FzdGxlOiB0cnVlLFxuICAgIHZpZXdPbmx5OiBmYWxzZSxcbiAgICBkaXNhYmxlQ29udGV4dE1lbnU6IGZhbHNlLFxuICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICBhZGRQaWVjZVpJbmRleDogZmFsc2UsXG4gICAgcGllY2VLZXk6IGZhbHNlLFxuICAgIGhpZ2hsaWdodDoge1xuICAgICAgbGFzdE1vdmU6IHRydWUsXG4gICAgICBjaGVjazogdHJ1ZVxuICAgIH0sXG4gICAgYW5pbWF0aW9uOiB7XG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgZHVyYXRpb246IDIwMFxuICAgIH0sXG4gICAgbW92YWJsZToge1xuICAgICAgZnJlZTogdHJ1ZSxcbiAgICAgIGNvbG9yOiAnYm90aCcsXG4gICAgICBzaG93RGVzdHM6IHRydWUsXG4gICAgICBldmVudHM6IHt9LFxuICAgICAgcm9va0Nhc3RsZTogdHJ1ZVxuICAgIH0sXG4gICAgcHJlbW92YWJsZToge1xuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIHNob3dEZXN0czogdHJ1ZSxcbiAgICAgIGNhc3RsZTogdHJ1ZSxcbiAgICAgIGV2ZW50czoge31cbiAgICB9LFxuICAgIHByZWRyb3BwYWJsZToge1xuICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICBldmVudHM6IHt9XG4gICAgfSxcbiAgICBkcmFnZ2FibGU6IHtcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBkaXN0YW5jZTogMyxcbiAgICAgIGF1dG9EaXN0YW5jZTogdHJ1ZSxcbiAgICAgIGNlbnRlclBpZWNlOiB0cnVlLFxuICAgICAgc2hvd0dob3N0OiB0cnVlLFxuICAgICAgZGVsZXRlT25Ecm9wT2ZmOiBmYWxzZVxuICAgIH0sXG4gICAgZHJvcG1vZGU6IHtcbiAgICAgIGFjdGl2ZTogZmFsc2VcbiAgICB9LFxuICAgIHNlbGVjdGFibGU6IHtcbiAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICB9LFxuICAgIHN0YXRzOiB7XG4gICAgICAvLyBvbiB0b3VjaHNjcmVlbiwgZGVmYXVsdCB0byBcInRhcC10YXBcIiBtb3Zlc1xuICAgICAgLy8gaW5zdGVhZCBvZiBkcmFnXG4gICAgICBkcmFnZ2VkOiAhKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdylcbiAgICB9LFxuICAgIGV2ZW50czoge30sXG4gICAgZHJhd2FibGU6IHtcbiAgICAgIGVuYWJsZWQ6IHRydWUsIC8vIGNhbiBkcmF3XG4gICAgICB2aXNpYmxlOiB0cnVlLCAvLyBjYW4gdmlld1xuICAgICAgZXJhc2VPbkNsaWNrOiB0cnVlLFxuICAgICAgc2hhcGVzOiBbXSxcbiAgICAgIGF1dG9TaGFwZXM6IFtdLFxuICAgICAgYnJ1c2hlczoge1xuICAgICAgICBncmVlbjogeyBrZXk6ICdnJywgY29sb3I6ICcjMTU3ODFCJywgb3BhY2l0eTogMSwgbGluZVdpZHRoOiAxMCB9LFxuICAgICAgICByZWQ6IHsga2V5OiAncicsIGNvbG9yOiAnIzg4MjAyMCcsIG9wYWNpdHk6IDEsIGxpbmVXaWR0aDogMTAgfSxcbiAgICAgICAgYmx1ZTogeyBrZXk6ICdiJywgY29sb3I6ICcjMDAzMDg4Jywgb3BhY2l0eTogMSwgbGluZVdpZHRoOiAxMCB9LFxuICAgICAgICB5ZWxsb3c6IHsga2V5OiAneScsIGNvbG9yOiAnI2U2OGYwMCcsIG9wYWNpdHk6IDEsIGxpbmVXaWR0aDogMTAgfSxcbiAgICAgICAgcGFsZUJsdWU6IHsga2V5OiAncGInLCBjb2xvcjogJyMwMDMwODgnLCBvcGFjaXR5OiAwLjQsIGxpbmVXaWR0aDogMTUgfSxcbiAgICAgICAgcGFsZUdyZWVuOiB7IGtleTogJ3BnJywgY29sb3I6ICcjMTU3ODFCJywgb3BhY2l0eTogMC40LCBsaW5lV2lkdGg6IDE1IH0sXG4gICAgICAgIHBhbGVSZWQ6IHsga2V5OiAncHInLCBjb2xvcjogJyM4ODIwMjAnLCBvcGFjaXR5OiAwLjQsIGxpbmVXaWR0aDogMTUgfSxcbiAgICAgICAgcGFsZUdyZXk6IHsga2V5OiAncGdyJywgY29sb3I6ICcjNGE0YTRhJywgb3BhY2l0eTogMC4zNSwgbGluZVdpZHRoOiAxNSB9XG4gICAgICB9LFxuICAgICAgcGllY2VzOiB7XG4gICAgICAgIGJhc2VVcmw6ICdodHRwczovL2xpY2hlc3MxLm9yZy9hc3NldHMvcGllY2UvY2J1cm5ldHQvJ1xuICAgICAgfSxcbiAgICAgIHByZXZTdmdIYXNoOiAnJ1xuICAgIH0sXG4gICAgaG9sZDogdGltZXIoKVxuICB9O1xufVxuIl19","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"./util\");\nconst types_1 = require(\"./types\");\nconst svg_1 = require(\"./svg\");\nfunction wrap(element, s, relative) {\n    element.innerHTML = '';\n    element.classList.add('cg-wrap');\n    util_1.colors.forEach(c => element.classList.toggle('orientation-' + c, s.orientation === c));\n    element.classList.toggle('manipulable', !s.viewOnly);\n    const helper = util_1.createEl('cg-helper');\n    element.appendChild(helper);\n    const container = util_1.createEl('cg-container');\n    helper.appendChild(container);\n    const board = util_1.createEl('cg-board');\n    container.appendChild(board);\n    let svg;\n    if (s.drawable.visible && !relative) {\n        svg = svg_1.createElement('svg');\n        svg.appendChild(svg_1.createElement('defs'));\n        container.appendChild(svg);\n    }\n    if (s.coordinates) {\n        const orientClass = s.orientation === 'black' ? ' black' : '';\n        container.appendChild(renderCoords(types_1.ranks, 'ranks' + orientClass));\n        container.appendChild(renderCoords(types_1.files, 'files' + orientClass));\n    }\n    let ghost;\n    if (s.draggable.showGhost && !relative) {\n        ghost = util_1.createEl('piece', 'ghost');\n        util_1.setVisible(ghost, false);\n        container.appendChild(ghost);\n    }\n    return {\n        board,\n        container,\n        ghost,\n        svg\n    };\n}\nexports.default = wrap;\nfunction renderCoords(elems, className) {\n    const el = util_1.createEl('coords', className);\n    let f;\n    for (let i in elems) {\n        f = util_1.createEl('coord');\n        f.textContent = elems[i];\n        el.appendChild(f);\n    }\n    return el;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid3JhcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNyYy93cmFwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsaUNBQXFEO0FBQ3JELG1DQUFzQztBQUN0QywrQkFBa0Q7QUFHbEQsU0FBd0IsSUFBSSxDQUFDLE9BQW9CLEVBQUUsQ0FBUSxFQUFFLFFBQWlCO0lBVzVFLE9BQU8sQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBTXZCLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBRWpDLGFBQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxjQUFjLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxXQUFXLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN2RixPQUFPLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUM7SUFFckQsTUFBTSxNQUFNLEdBQUcsZUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3JDLE9BQU8sQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDNUIsTUFBTSxTQUFTLEdBQUcsZUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUM7SUFFOUIsTUFBTSxLQUFLLEdBQUcsZUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ25DLFNBQVMsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFN0IsSUFBSSxHQUEyQixDQUFDO0lBQ2hDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLElBQUksQ0FBQyxRQUFRLEVBQUU7UUFDbkMsR0FBRyxHQUFHLG1CQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdkIsR0FBRyxDQUFDLFdBQVcsQ0FBQyxtQkFBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDbkMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUM1QjtJQUVELElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRTtRQUNqQixNQUFNLFdBQVcsR0FBRyxDQUFDLENBQUMsV0FBVyxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDOUQsU0FBUyxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsYUFBSyxFQUFFLE9BQU8sR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDO1FBQ2xFLFNBQVMsQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLGFBQUssRUFBRSxPQUFPLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQztLQUNuRTtJQUVELElBQUksS0FBOEIsQ0FBQztJQUNuQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsU0FBUyxJQUFJLENBQUMsUUFBUSxFQUFFO1FBQ3RDLEtBQUssR0FBRyxlQUFRLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ25DLGlCQUFVLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3pCLFNBQVMsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDOUI7SUFFRCxPQUFPO1FBQ0wsS0FBSztRQUNMLFNBQVM7UUFDVCxLQUFLO1FBQ0wsR0FBRztLQUNKLENBQUM7QUFDSixDQUFDO0FBeERELHVCQXdEQztBQUVELFNBQVMsWUFBWSxDQUFDLEtBQVksRUFBRSxTQUFpQjtJQUNuRCxNQUFNLEVBQUUsR0FBRyxlQUFRLENBQUMsUUFBUSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQ3pDLElBQUksQ0FBYyxDQUFDO0lBQ25CLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFO1FBQ25CLENBQUMsR0FBRyxlQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdEIsQ0FBQyxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekIsRUFBRSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNuQjtJQUNELE9BQU8sRUFBRSxDQUFDO0FBQ1osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9zdGF0ZSdcbmltcG9ydCB7IGNvbG9ycywgc2V0VmlzaWJsZSwgY3JlYXRlRWwgfSBmcm9tICcuL3V0aWwnXG5pbXBvcnQgeyBmaWxlcywgcmFua3MgfSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCBhcyBjcmVhdGVTVkcgfSBmcm9tICcuL3N2ZydcbmltcG9ydCB7IEVsZW1lbnRzIH0gZnJvbSAnLi90eXBlcydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gd3JhcChlbGVtZW50OiBIVE1MRWxlbWVudCwgczogU3RhdGUsIHJlbGF0aXZlOiBib29sZWFuKTogRWxlbWVudHMge1xuXG4gIC8vIC5jZy13cmFwIChlbGVtZW50IHBhc3NlZCB0byBDaGVzc2dyb3VuZClcbiAgLy8gICBjZy1oZWxwZXIgKDEyLjUlKVxuICAvLyAgICAgY2ctY29udGFpbmVyICg4MDAlKVxuICAvLyAgICAgICBjZy1ib2FyZFxuICAvLyAgICAgICBzdmdcbiAgLy8gICAgICAgY29vcmRzLnJhbmtzXG4gIC8vICAgICAgIGNvb3Jkcy5maWxlc1xuICAvLyAgICAgICBwaWVjZS5naG9zdFxuXG4gIGVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgLy8gZW5zdXJlIHRoZSBjZy13cmFwIGNsYXNzIGlzIHNldFxuICAvLyBzbyBib3VuZHMgY2FsY3VsYXRpb24gY2FuIHVzZSB0aGUgQ1NTIHdpZHRoL2hlaWdodCB2YWx1ZXNcbiAgLy8gYWRkIHRoYXQgY2xhc3MgeW91cnNlbGYgdG8gdGhlIGVsZW1lbnQgYmVmb3JlIGNhbGxpbmcgY2hlc3Nncm91bmRcbiAgLy8gZm9yIGEgc2xpZ2h0IHBlcmZvcm1hbmNlIGltcHJvdmVtZW50ISAoYXZvaWRzIHJlY29tcHV0aW5nIHN0eWxlKVxuICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NnLXdyYXAnKTtcblxuICBjb2xvcnMuZm9yRWFjaChjID0+IGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnb3JpZW50YXRpb24tJyArIGMsIHMub3JpZW50YXRpb24gPT09IGMpKTtcbiAgZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdtYW5pcHVsYWJsZScsICFzLnZpZXdPbmx5KTtcblxuICBjb25zdCBoZWxwZXIgPSBjcmVhdGVFbCgnY2ctaGVscGVyJyk7XG4gIGVsZW1lbnQuYXBwZW5kQ2hpbGQoaGVscGVyKTtcbiAgY29uc3QgY29udGFpbmVyID0gY3JlYXRlRWwoJ2NnLWNvbnRhaW5lcicpO1xuICBoZWxwZXIuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblxuICBjb25zdCBib2FyZCA9IGNyZWF0ZUVsKCdjZy1ib2FyZCcpO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYm9hcmQpO1xuXG4gIGxldCBzdmc6IFNWR0VsZW1lbnQgfCB1bmRlZmluZWQ7XG4gIGlmIChzLmRyYXdhYmxlLnZpc2libGUgJiYgIXJlbGF0aXZlKSB7XG4gICAgc3ZnID0gY3JlYXRlU1ZHKCdzdmcnKTtcbiAgICBzdmcuYXBwZW5kQ2hpbGQoY3JlYXRlU1ZHKCdkZWZzJykpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzdmcpO1xuICB9XG5cbiAgaWYgKHMuY29vcmRpbmF0ZXMpIHtcbiAgICBjb25zdCBvcmllbnRDbGFzcyA9IHMub3JpZW50YXRpb24gPT09ICdibGFjaycgPyAnIGJsYWNrJyA6ICcnO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJDb29yZHMocmFua3MsICdyYW5rcycgKyBvcmllbnRDbGFzcykpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJDb29yZHMoZmlsZXMsICdmaWxlcycgKyBvcmllbnRDbGFzcykpO1xuICB9XG5cbiAgbGV0IGdob3N0OiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcbiAgaWYgKHMuZHJhZ2dhYmxlLnNob3dHaG9zdCAmJiAhcmVsYXRpdmUpIHtcbiAgICBnaG9zdCA9IGNyZWF0ZUVsKCdwaWVjZScsICdnaG9zdCcpO1xuICAgIHNldFZpc2libGUoZ2hvc3QsIGZhbHNlKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZ2hvc3QpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBib2FyZCxcbiAgICBjb250YWluZXIsXG4gICAgZ2hvc3QsXG4gICAgc3ZnXG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlbmRlckNvb3JkcyhlbGVtczogYW55W10sIGNsYXNzTmFtZTogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xuICBjb25zdCBlbCA9IGNyZWF0ZUVsKCdjb29yZHMnLCBjbGFzc05hbWUpO1xuICBsZXQgZjogSFRNTEVsZW1lbnQ7XG4gIGZvciAobGV0IGkgaW4gZWxlbXMpIHtcbiAgICBmID0gY3JlYXRlRWwoJ2Nvb3JkJyk7XG4gICAgZi50ZXh0Q29udGVudCA9IGVsZW1zW2ldO1xuICAgIGVsLmFwcGVuZENoaWxkKGYpO1xuICB9XG4gIHJldHVybiBlbDtcbn1cbiJdfQ==","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst drag = require(\"./drag\");\nconst draw = require(\"./draw\");\nconst drop_1 = require(\"./drop\");\nconst util_1 = require(\"./util\");\nfunction bindBoard(s) {\n    if (s.viewOnly)\n        return;\n    const boardEl = s.dom.elements.board, onStart = startDragOrDraw(s);\n    boardEl.addEventListener('touchstart', onStart, { passive: false });\n    boardEl.addEventListener('mousedown', onStart, { passive: false });\n    if (s.disableContextMenu || s.drawable.enabled) {\n        boardEl.addEventListener('contextmenu', e => e.preventDefault());\n    }\n}\nexports.bindBoard = bindBoard;\nfunction bindDocument(s, redrawAll) {\n    const unbinds = [];\n    if (!s.dom.relative && s.resizable) {\n        const onResize = () => {\n            s.dom.bounds.clear();\n            requestAnimationFrame(redrawAll);\n        };\n        unbinds.push(unbindable(document.body, 'chessground.resize', onResize));\n    }\n    if (!s.viewOnly) {\n        const onmove = dragOrDraw(s, drag.move, draw.move);\n        const onend = dragOrDraw(s, drag.end, draw.end);\n        ['touchmove', 'mousemove'].forEach(ev => unbinds.push(unbindable(document, ev, onmove)));\n        ['touchend', 'mouseup'].forEach(ev => unbinds.push(unbindable(document, ev, onend)));\n        const onScroll = () => s.dom.bounds.clear();\n        unbinds.push(unbindable(window, 'scroll', onScroll, { passive: true }));\n        unbinds.push(unbindable(window, 'resize', onScroll, { passive: true }));\n    }\n    return () => unbinds.forEach(f => f());\n}\nexports.bindDocument = bindDocument;\nfunction unbindable(el, eventName, callback, options) {\n    el.addEventListener(eventName, callback, options);\n    return () => el.removeEventListener(eventName, callback);\n}\nfunction startDragOrDraw(s) {\n    return e => {\n        if (s.draggable.current)\n            drag.cancel(s);\n        else if (s.drawable.current)\n            draw.cancel(s);\n        else if (e.shiftKey || util_1.isRightButton(e)) {\n            if (s.drawable.enabled)\n                draw.start(s, e);\n        }\n        else if (!s.viewOnly) {\n            if (s.dropmode.active)\n                drop_1.drop(s, e);\n            else\n                drag.start(s, e);\n        }\n    };\n}\nfunction dragOrDraw(s, withDrag, withDraw) {\n    return e => {\n        if (e.shiftKey || util_1.isRightButton(e)) {\n            if (s.drawable.enabled)\n                withDraw(s, e);\n        }\n        else if (!s.viewOnly)\n            withDrag(s, e);\n    };\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnRzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL2V2ZW50cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLCtCQUE4QjtBQUM5QiwrQkFBOEI7QUFDOUIsaUNBQTZCO0FBQzdCLGlDQUFzQztBQU10QyxTQUFnQixTQUFTLENBQUMsQ0FBUTtJQUVoQyxJQUFJLENBQUMsQ0FBQyxRQUFRO1FBQUUsT0FBTztJQUV2QixNQUFNLE9BQU8sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQ3BDLE9BQU8sR0FBRyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFJN0IsT0FBTyxDQUFDLGdCQUFnQixDQUFDLFlBQVksRUFBRSxPQUF3QixFQUFFLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDckYsT0FBTyxDQUFDLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxPQUF3QixFQUFFLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFFcEYsSUFBSSxDQUFDLENBQUMsa0JBQWtCLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUU7UUFDOUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDO0tBQ2xFO0FBQ0gsQ0FBQztBQWZELDhCQWVDO0FBR0QsU0FBZ0IsWUFBWSxDQUFDLENBQVEsRUFBRSxTQUFvQjtJQUV6RCxNQUFNLE9BQU8sR0FBZ0IsRUFBRSxDQUFDO0lBRWhDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUMsU0FBUyxFQUFFO1FBQ2xDLE1BQU0sUUFBUSxHQUFHLEdBQUcsRUFBRTtZQUNwQixDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNyQixxQkFBcUIsQ0FBQyxTQUFTLENB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QixFQUFFLFFBQXdCO0lBQzlFLE9BQU8sQ0FBQyxDQUFDLEVBQUU7UUFDVCxJQUFJLENBQUMsQ0FBQyxRQUFRLElBQUksb0JBQWEsQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPO2dCQUFFLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUMxRSxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVE7WUFBRSxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLENBQUMsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4vc3RhdGUnXG5pbXBvcnQgKiBhcyBkcmFnIGZyb20gJy4vZHJhZydcbmltcG9ydCAqIGFzIGRyYXcgZnJvbSAnLi9kcmF3J1xuaW1wb3J0IHsgZHJvcCB9IGZyb20gJy4vZHJvcCdcbmltcG9ydCB7IGlzUmlnaHRCdXR0b24gfSBmcm9tICcuL3V0aWwnXG5pbXBvcnQgKiBhcyBjZyBmcm9tICcuL3R5cGVzJ1xuXG50eXBlIE1vdWNoQmluZCA9IChlOiBjZy5Nb3VjaEV2ZW50KSA9PiB2b2lkO1xudHlwZSBTdGF0ZU1vdWNoQmluZCA9IChkOiBTdGF0ZSwgZTogY2cuTW91Y2hFdmVudCkgPT4gdm9pZDtcblxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRCb2FyZChzOiBTdGF0ZSk6IHZvaWQge1xuXG4gIGlmIChzLnZpZXdPbmx5KSByZXR1cm47XG5cbiAgY29uc3QgYm9hcmRFbCA9IHMuZG9tLmVsZW1lbnRzLmJvYXJkLFxuICBvblN0YXJ0ID0gc3RhcnREcmFnT3JEcmF3KHMpO1xuXG4gIC8vIENhbm5vdCBiZSBwYXNzaXZlLCBiZWNhdXNlIHdlIHByZXZlbnQgdG91Y2ggc2Nyb2xsaW5nIGFuZCBkcmFnZ2luZyBvZlxuICAvLyBzZWxlY3RlZCBlbGVtZW50cy5cbiAgYm9hcmRFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25TdGFydCBhcyBFdmVudExpc3RlbmVyLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICBib2FyZEVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uU3RhcnQgYXMgRXZlbnRMaXN0ZW5lciwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcblxuICBpZiAocy5kaXNhYmxlQ29udGV4dE1lbnUgfHwgcy5kcmF3YWJsZS5lbmFibGVkKSB7XG4gICAgYm9hcmRFbC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcbiAgfVxufVxuXG4vLyByZXR1cm5zIHRoZSB1bmJpbmQgZnVuY3Rpb25cbmV4cG9ydCBmdW5jdGlvbiBiaW5kRG9jdW1lbnQoczogU3RhdGUsIHJlZHJhd0FsbDogY2cuUmVkcmF3KTogY2cuVW5iaW5kIHtcblxuICBjb25zdCB1bmJpbmRzOiBjZy5VbmJpbmRbXSA9IFtdO1xuXG4gIGlmICghcy5kb20ucmVsYXRpdmUgJiYgcy5yZXNpemFibGUpIHtcbiAgICBjb25zdCBvblJlc2l6ZSA9ICgpID0+IHtcbiAgICAgIHMuZG9tLmJvdW5kcy5jbGVhcigpO1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlZHJhd0FsbCk7XG4gICAgfTtcbiAgICB1bmJpbmRzLnB1c2godW5iaW5kYWJsZShkb2N1bWVudC5ib2R5LCAnY2hlc3Nncm91bmQucmVzaXplJywgb25SZXNpemUpKTtcbiAgfVxuXG4gIGlmICghcy52aWV3T25seSkge1xuXG4gICAgY29uc3Qgb25tb3ZlOiBNb3VjaEJpbmQgPSBkcmFnT3JEcmF3KHMsIGRyYWcubW92ZSwgZHJhdy5tb3ZlKTtcbiAgICBjb25zdCBvbmVuZDogTW91Y2hCaW5kID0gZHJhZ09yRHJhdyhzLCBkcmFnLmVuZCwgZHJhdy5lbmQpO1xuXG4gICAgWyd0b3VjaG1vdmUnLCAnbW91c2Vtb3ZlJ10uZm9yRWFjaChldiA9PiB1bmJpbmRzLnB1c2godW5iaW5kYWJsZShkb2N1bWVudCwgZXYsIG9ubW92ZSkpKTtcbiAgICBbJ3RvdWNoZW5kJywgJ21vdXNldXAnXS5mb3JFYWNoKGV2ID0+IHVuYmluZHMucHVzaCh1bmJpbmRhYmxlKGRvY3VtZW50LCBldiwgb25lbmQpKSk7XG5cbiAgICBjb25zdCBvblNjcm9sbCA9ICgpID0+IHMuZG9tLmJvdW5kcy5jbGVhcigpO1xuICAgIHVuYmluZHMucHVzaCh1bmJpbmRhYmxlKHdpbmRvdywgJ3Njcm9sbCcsIG9uU2Nyb2xsLCB7IHBhc3NpdmU6IHRydWUgfSkpO1xuICAgIHVuYmluZHMucHVzaCh1bmJpbmRhYmxlKHdpbmRvdywgJ3Jlc2l6ZScsIG9uU2Nyb2xsLCB7IHBhc3NpdmU6IHRydWUgfSkpO1xuICB9XG5cbiAgcmV0dXJuICgpID0+IHVuYmluZHMuZm9yRWFjaChmID0+IGYoKSk7XG59XG5cbmZ1bmN0aW9uIHVuYmluZGFibGUoZWw6IEV2ZW50VGFyZ2V0LCBldmVudE5hbWU6IHN0cmluZywgY2FsbGJhY2s6IE1vdWNoQmluZCwgb3B0aW9ucz86IGFueSk6IGNnLlVuYmluZCB7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYWxsYmFjayBhcyBFdmVudExpc3RlbmVyLCBvcHRpb25zKTtcbiAgcmV0dXJuICgpID0+IGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYWxsYmFjayBhcyBFdmVudExpc3RlbmVyKTtcbn1cblxuZnVuY3Rpb24gc3RhcnREcmFnT3JEcmF3KHM6IFN0YXRlKTogTW91Y2hCaW5kIHtcbiAgcmV0dXJuIGUgPT4ge1xuICAgIGlmIChzLmRyYWdnYWJsZS5jdXJyZW50KSBkcmFnLmNhbmNlbChzKTtcbiAgICBlbHNlIGlmIChzLmRyYXdhYmxlLmN1cnJlbnQpIGRyYXcuY2FuY2VsKHMpO1xuICAgIGVsc2UgaWYgKGUuc2hpZnRLZXkgfHwgaXNSaWdodEJ1dHRvbihlKSkgeyBpZiAocy5kcmF3YWJsZS5lbmFibGVkKSBkcmF3LnN0YXJ0KHMsIGUpOyB9XG4gICAgZWxzZSBpZiAoIXMudmlld09ubHkpIHtcbiAgICAgIGlmIChzLmRyb3Btb2RlLmFjdGl2ZSkgZHJvcChzLCBlKTtcbiAgICAgIGVsc2UgZHJhZy5zdGFydChzLCBlKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRyYWdPckRyYXcoczogU3RhdGUsIHdpdGhEcmFnOiBTdGF0ZU1vdWNoQmluZCwgd2l0aERyYXc6IFN0YXRlTW91Y2hCaW5kKTogTW91Y2hCaW5kIHtcbiAgcmV0dXJuIGUgPT4ge1xuICAgIGlmIChlLnNoaWZ0S2V5IHx8IGlzUmlnaHRCdXR0b24oZSkpIHsgaWYgKHMuZHJhd2FibGUuZW5hYmxlZCkgd2l0aERyYXcocywgZSk7IH1cbiAgICBlbHNlIGlmICghcy52aWV3T25seSkgd2l0aERyYWcocywgZSk7XG4gIH07XG59XG4iXX0=","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst board = require(\"./board\");\nconst util = require(\"./util\");\nconst drag_1 = require(\"./drag\");\nfunction setDropMode(s, piece) {\n    s.dropmode = {\n        active: true,\n        piece\n    };\n    drag_1.cancel(s);\n}\nexports.setDropMode = setDropMode;\nfunction cancelDropMode(s) {\n    s.dropmode = {\n        active: false\n    };\n}\nexports.cancelDropMode = cancelDropMode;\nfunction drop(s, e) {\n    if (!s.dropmode.active)\n        return;\n    board.unsetPremove(s);\n    board.unsetPredrop(s);\n    const piece = s.dropmode.piece;\n    if (piece) {\n        s.pieces.a0 = piece;\n        const position = util.eventPosition(e);\n        const dest = position && board.getKeyAtDomPos(position, board.whitePov(s), s.dom.bounds());\n        if (dest)\n            board.dropNewPiece(s, 'a0', dest);\n    }\n    s.dom.redraw();\n}\nexports.drop = drop;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJvcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNyYy9kcm9wLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsaUNBQWdDO0FBQ2hDLCtCQUE4QjtBQUM5QixpQ0FBNkM7QUFFN0MsU0FBZ0IsV0FBVyxDQUFDLENBQVEsRUFBRSxLQUFnQjtJQUNwRCxDQUFDLENBQUMsUUFBUSxHQUFHO1FBQ1gsTUFBTSxFQUFFLElBQUk7UUFDWixLQUFLO0tBQ04sQ0FBQztJQUNGLGFBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoQixDQUFDO0FBTkQsa0NBTUM7QUFFRCxTQUFnQixjQUFjLENBQUMsQ0FBUTtJQUNyQyxDQUFDLENBQUMsUUFBUSxHQUFHO1FBQ1gsTUFBTSxFQUFFLEtBQUs7S0FDZCxDQUFDO0FBQ0osQ0FBQztBQUpELHdDQUlDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLENBQVEsRUFBRSxDQUFnQjtJQUM3QyxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNO1FBQUUsT0FBTztJQUUvQixLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3RCLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFdEIsTUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7SUFFL0IsSUFBSSxLQUFLLEVBQUU7UUFDVCxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsR0FBRyxLQUFLLENBQUM7UUFDcEIsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QyxNQUFNLElBQUksR0FBRyxRQUFRLElBQUksS0FBSyxDQUFDLGNBQWMsQ0FDM0MsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBQy9DLElBQUksSUFBSTtZQUFFLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztLQUM3QztJQUNELENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDakIsQ0FBQztBQWhCRCxvQkFnQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4vc3RhdGUnXG5pbXBvcnQgKiBhcyBjZyBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0ICogYXMgYm9hcmQgZnJvbSAnLi9ib2FyZCdcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi91dGlsJ1xuaW1wb3J0IHsgY2FuY2VsIGFzIGNhbmNlbERyYWcgfSBmcm9tICcuL2RyYWcnXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXREcm9wTW9kZShzOiBTdGF0ZSwgcGllY2U/OiBjZy5QaWVjZSk6IHZvaWQge1xuICBzLmRyb3Btb2RlID0ge1xuICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICBwaWVjZVxuICB9O1xuICBjYW5jZWxEcmFnKHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuY2VsRHJvcE1vZGUoczogU3RhdGUpOiB2b2lkIHtcbiAgcy5kcm9wbW9kZSA9IHtcbiAgICBhY3RpdmU6IGZhbHNlXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcm9wKHM6IFN0YXRlLCBlOiBjZy5Nb3VjaEV2ZW50KTogdm9pZCB7XG4gIGlmICghcy5kcm9wbW9kZS5hY3RpdmUpIHJldHVybjtcblxuICBib2FyZC51bnNldFByZW1vdmUocyk7XG4gIGJvYXJkLnVuc2V0UHJlZHJvcChzKTtcblxuICBjb25zdCBwaWVjZSA9IHMuZHJvcG1vZGUucGllY2U7XG5cbiAgaWYgKHBpZWNlKSB7XG4gICAgcy5waWVjZXMuYTAgPSBwaWVjZTtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHV0aWwuZXZlbnRQb3NpdGlvbihlKTtcbiAgICBjb25zdCBkZXN0ID0gcG9zaXRpb24gJiYgYm9hcmQuZ2V0S2V5QXREb21Qb3MoXG4gICAgICBwb3NpdGlvbiwgYm9hcmQud2hpdGVQb3YocyksIHMuZG9tLmJvdW5kcygpKTtcbiAgICBpZiAoZGVzdCkgYm9hcmQuZHJvcE5ld1BpZWNlKHMsICdhMCcsIGRlc3QpO1xuICB9XG4gIHMuZG9tLnJlZHJhdygpO1xufVxuIl19","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"./util\");\nconst board_1 = require(\"./board\");\nconst util = require(\"./util\");\nfunction render(s) {\n    const asWhite = board_1.whitePov(s), posToTranslate = s.dom.relative ? util.posToTranslateRel : util.posToTranslateAbs(s.dom.bounds()), translate = s.dom.relative ? util.translateRel : util.translateAbs, boardEl = s.dom.elements.board, pieces = s.pieces, curAnim = s.animation.current, anims = curAnim ? curAnim.plan.anims : {}, fadings = curAnim ? curAnim.plan.fadings : {}, curDrag = s.draggable.current, squares = computeSquareClasses(s), samePieces = {}, sameSquares = {}, movedPieces = {}, movedSquares = {}, piecesKeys = Object.keys(pieces);\n    let k, p, el, pieceAtKey, elPieceName, anim, fading, pMvdset, pMvd, sMvdset, sMvd;\n    el = boardEl.firstChild;\n    while (el) {\n        k = el.cgKey;\n        if (isPieceNode(el)) {\n            pieceAtKey = pieces[k];\n            anim = anims[k];\n            fading = fadings[k];\n            elPieceName = el.cgPiece;\n            if (el.cgDragging && (!curDrag || curDrag.orig !== k)) {\n                el.classList.remove('dragging');\n                translate(el, posToTranslate(util_1.key2pos(k), asWhite));\n                el.cgDragging = false;\n            }\n            if (!fading && el.cgFading) {\n                el.cgFading = false;\n                el.classList.remove('fading');\n            }\n            if (pieceAtKey) {\n                if (anim && el.cgAnimating && elPieceName === pieceNameOf(pieceAtKey)) {\n                    const pos = util_1.key2pos(k);\n                    pos[0] += anim[2];\n                    pos[1] += anim[3];\n                    el.classList.add('anim');\n                    translate(el, posToTranslate(pos, asWhite));\n                }\n                else if (el.cgAnimating) {\n                    el.cgAnimating = false;\n                    el.classList.remove('anim');\n                    translate(el, posToTranslate(util_1.key2pos(k), asWhite));\n                    if (s.addPieceZIndex)\n                        el.style.zIndex = posZIndex(util_1.key2pos(k), asWhite);\n                }\n                if (elPieceName === pieceNameOf(pieceAtKey) && (!fading || !el.cgFading)) {\n                    samePieces[k] = true;\n                }\n                else {\n                    if (fading && elPieceName === pieceNameOf(fading)) {\n                        el.classList.add('fading');\n                        el.cgFading = true;\n                    }\n                    else {\n                        if (movedPieces[elPieceName])\n                            movedPieces[elPieceName].push(el);\n                        else\n                            movedPieces[elPieceName] = [el];\n                    }\n                }\n            }\n            else {\n                if (movedPieces[elPieceName])\n                    movedPieces[elPieceName].push(el);\n                else\n                    movedPieces[elPieceName] = [el];\n            }\n        }\n        else if (isSquareNode(el)) {\n            const cn = el.className;\n            if (squares[k] === cn)\n                sameSquares[k] = true;\n            else if (movedSquares[cn])\n                movedSquares[cn].push(el);\n            else\n                movedSquares[cn] = [el];\n        }\n        el = el.nextSibling;\n    }\n    for (const sk in squares) {\n        if (!sameSquares[sk]) {\n            sMvdset = movedSquares[squares[sk]];\n            sMvd = sMvdset && sMvdset.pop();\n            const translation = posToTranslate(util_1.key2pos(sk), asWhite);\n            if (sMvd) {\n                sMvd.cgKey = sk;\n                translate(sMvd, translation);\n            }\n            else {\n                const squareNode = util_1.createEl('square', squares[sk]);\n                squareNode.cgKey = sk;\n                translate(squareNode, translation);\n                boardEl.insertBefore(squareNode, boardEl.firstChild);\n            }\n        }\n    }\n    for (const j in piecesKeys) {\n        k = piecesKeys[j];\n        p = pieces[k];\n        anim = anims[k];\n        if (!samePieces[k]) {\n            pMvdset = movedPieces[pieceNameOf(p)];\n            pMvd = pMvdset && pMvdset.pop();\n            if (pMvd) {\n                pMvd.cgKey = k;\n                if (pMvd.cgFading) {\n                    pMvd.classList.remove('fading');\n                    pMvd.cgFading = false;\n                }\n                const pos = util_1.key2pos(k);\n                if (s.addPieceZIndex)\n                    pMvd.style.zIndex = posZIndex(pos, asWhite);\n                if (anim) {\n                    pMvd.cgAnimating = true;\n                    pMvd.classList.add('anim');\n                    pos[0] += anim[2];\n                    pos[1] += anim[3];\n                }\n                translate(pMvd, posToTranslate(pos, asWhite));\n            }\n            else {\n                const pieceName = pieceNameOf(p), pieceNode = util_1.createEl('piece', pieceName), pos = util_1.key2pos(k);\n                pieceNode.cgPiece = pieceName;\n                pieceNode.cgKey = k;\n                if (anim) {\n                    pieceNode.cgAnimating = true;\n                    pos[0] += anim[2];\n                    pos[1] += anim[3];\n                }\n                translate(pieceNode, posToTranslate(pos, asWhite));\n                if (s.addPieceZIndex)\n                    pieceNode.style.zIndex = posZIndex(pos, asWhite);\n                boardEl.appendChild(pieceNode);\n            }\n        }\n    }\n    for (const i in movedPieces)\n        removeNodes(s, movedPieces[i]);\n    for (const i in movedSquares)\n        removeNodes(s, movedSquares[i]);\n}\nexports.default = render;\nfunction isPieceNode(el) {\n    return el.tagName === 'PIECE';\n}\nfunction isSquareNode(el) {\n    return el.tagName === 'SQUARE';\n}\nfunction removeNodes(s, nodes) {\n    for (const i in nodes)\n        s.dom.elements.board.removeChild(nodes[i]);\n}\nfunction posZIndex(pos, asWhite) {\n    let z = 2 + (pos[1] - 1) * 8 + (8 - pos[0]);\n    if (asWhite)\n        z = 67 - z;\n    return z + '';\n}\nfunction pieceNameOf(piece) {\n    return `${piece.color} ${piece.role}`;\n}\nfunction computeSquareClasses(s) {\n    const squares = {};\n    let i, k;\n    if (s.lastMove && s.highlight.lastMove)\n        for (i in s.lastMove) {\n            addSquare(squares, s.lastMove[i], 'last-move');\n        }\n    if (s.check && s.highlight.check)\n        addSquare(squares, s.check, 'check');\n    if (s.selected) {\n        addSquare(squares, s.selected, 'selected');\n        if (s.movable.showDests) {\n            const dests = s.movable.dests && s.movable.dests[s.selected];\n            if (dests)\n                for (i in dests) {\n                    k = dests[i];\n                    addSquare(squares, k, 'move-dest' + (s.pieces[k] ? ' oc' : ''));\n                }\n            const pDests = s.premovable.dests;\n            if (pDests)\n                for (i in pDests) {\n                    k = pDests[i];\n                    addSquare(squares, k, 'premove-dest' + (s.pieces[k] ? ' oc' : ''));\n                }\n        }\n    }\n    const premove = s.premovable.current;\n    if (premove)\n        for (i in premove)\n            addSquare(squares, premove[i], 'current-premove');\n    else if (s.predroppable.current)\n        addSquare(squares, s.predroppable.current.key, 'current-premove');\n    const o = s.exploding;\n    if (o)\n        for (i in o.keys)\n            addSquare(squares, o.keys[i], 'exploding' + o.stage);\n    return squares;\n}\nfunction addSquare(squares, key, klass) {\n    if (squares[key])\n        squares[key] += ' ' + klass;\n    else\n        squares[key] = klass;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL3JlbmRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLGlDQUEwQztBQUMxQyxtQ0FBa0M7QUFDbEMsK0JBQThCO0FBZ0I5QixTQUF3QixNQUFNLENBQUMsQ0FBUTtJQUNyQyxNQUFNLE9BQU8sR0FBWSxnQkFBUSxDQUFDLENBQUMsQ0FBQyxFQUNwQyxjQUFjLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsRUFDakcsU0FBUyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUNsRSxPQUFPLEdBQWdCLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEtBQUssRUFDM0MsTUFBTSxHQUFjLENBQUMsQ0FBQyxNQUFNLEVBQzVCLE9BQU8sR0FBNEIsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQ3RELEtBQUssR0FBZ0IsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUN0RCxPQUFPLEdBQWdCLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFDMUQsT0FBTyxHQUE0QixDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFDdEQsT0FBTyxHQUFrQixvQkFBb0IsQ0FBQyxDQUFDLENBQUMsRUFDaEQsVUFBVSxHQUFlLEVBQUUsRUFDM0IsV0FBVyxHQUFnQixFQUFFLEVBQzdCLFdBQVcsR0FBZ0IsRUFBRSxFQUM3QixZQUFZ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QUFPLENBQUM7QUFDakIsQ0FBQztBQUVELFNBQVMsU0FBUyxDQUFDLE9BQXNCLEVBQUUsR0FBVyxFQUFFLEtBQWE7SUFDbkUsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDO1FBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxLQUFLLENBQUM7O1FBQ3pDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7QUFDNUIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9zdGF0ZSdcbmltcG9ydCB7IGtleTJwb3MsIGNyZWF0ZUVsIH0gZnJvbSAnLi91dGlsJ1xuaW1wb3J0IHsgd2hpdGVQb3YgfSBmcm9tICcuL2JvYXJkJ1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuL3V0aWwnXG5pbXBvcnQgeyBBbmltQ3VycmVudCwgQW5pbVZlY3RvcnMsIEFuaW1WZWN0b3IsIEFuaW1GYWRpbmdzIH0gZnJvbSAnLi9hbmltJ1xuaW1wb3J0IHsgRHJhZ0N1cnJlbnQgfSBmcm9tICcuL2RyYWcnXG5pbXBvcnQgKiBhcyBjZyBmcm9tICcuL3R5cGVzJ1xuXG4vLyBgJGNvbG9yICRyb2xlYFxudHlwZSBQaWVjZU5hbWUgPSBzdHJpbmc7XG5cbmludGVyZmFjZSBTYW1lUGllY2VzIHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9XG5pbnRlcmZhY2UgU2FtZVNxdWFyZXMgeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH1cbmludGVyZmFjZSBNb3ZlZFBpZWNlcyB7IFtwaWVjZU5hbWU6IHN0cmluZ106IGNnLlBpZWNlTm9kZVtdIH1cbmludGVyZmFjZSBNb3ZlZFNxdWFyZXMgeyBbY2xhc3NOYW1lOiBzdHJpbmddOiBjZy5TcXVhcmVOb2RlW10gfVxuaW50ZXJmYWNlIFNxdWFyZUNsYXNzZXMgeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVxuXG4vLyBwb3J0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vdmVsb2NlL2xpY2hvYmlsZS9ibG9iL21hc3Rlci9zcmMvanMvY2hlc3Nncm91bmQvdmlldy5qc1xuLy8gaW4gY2FzZSBvZiBidWdzLCBibGFtZSBAdmVsb2NlXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZW5kZXIoczogU3RhdGUpOiB2b2lkIHtcbiAgY29uc3QgYXNXaGl0ZTogYm9vbGVhbiA9IHdoaXRlUG92KHMpLFxuICBwb3NUb1RyYW5zbGF0ZSA9IHMuZG9tLnJlbGF0aXZlID8gdXRpbC5wb3NUb1RyYW5zbGF0ZVJlbCA6IHV0aWwucG9zVG9UcmFuc2xhdGVBYnMocy5kb20uYm91bmRzKCkpLFxuICB0cmFuc2xhdGUgPSBzLmRvbS5yZWxhdGl2ZSA/IHV0aWwudHJhbnNsYXRlUmVsIDogdXRpbC50cmFuc2xhdGVBYnMsXG4gIGJvYXJkRWw6IEhUTUxFbGVtZW50ID0gcy5kb20uZWxlbWVudHMuYm9hcmQsXG4gIHBpZWNlczogY2cuUGllY2VzID0gcy5waWVjZXMsXG4gIGN1ckFuaW06IEFuaW1DdXJyZW50IHwgdW5kZWZpbmVkID0gcy5hbmltYXRpb24uY3VycmVudCxcbiAgYW5pbXM6IEFuaW1WZWN0b3JzID0gY3VyQW5pbSA/IGN1ckFuaW0ucGxhbi5hbmltcyA6IHt9LFxuICBmYWRpbmdzOiBBbmltRmFkaW5ncyA9IGN1ckFuaW0gPyBjdXJBbmltLnBsYW4uZmFkaW5ncyA6IHt9LFxuICBjdXJEcmFnOiBEcmFnQ3VycmVudCB8IHVuZGVmaW5lZCA9IHMuZHJhZ2dhYmxlLmN1cnJlbnQsXG4gIHNxdWFyZXM6IFNxdWFyZUNsYXNzZXMgPSBjb21wdXRlU3F1YXJlQ2xhc3NlcyhzKSxcbiAgc2FtZVBpZWNlczogU2FtZVBpZWNlcyA9IHt9LFxuICBzYW1lU3F1YXJlczogU2FtZVNxdWFyZXMgPSB7fSxcbiAgbW92ZWRQaWVjZXM6IE1vdmVkUGllY2VzID0ge30sXG4gIG1vdmVkU3F1YXJlczogTW92ZWRTcXVhcmVzID0ge30sXG4gIHBpZWNlc0tleXM6IGNnLktleVtdID0gT2JqZWN0LmtleXMocGllY2VzKSBhcyBjZy5LZXlbXTtcbiAgbGV0IGs6IGNnLktleSxcbiAgcDogY2cuUGllY2UgfCB1bmRlZmluZWQsXG4gIGVsOiBjZy5QaWVjZU5vZGUgfCBjZy5TcXVhcmVOb2RlLFxuICBwaWVjZUF0S2V5OiBjZy5QaWVjZSB8IHVuZGVmaW5lZCxcbiAgZWxQaWVjZU5hbWU6IFBpZWNlTmFtZSxcbiAgYW5pbTogQW5pbVZlY3RvciB8IHVuZGVmaW5lZCxcbiAgZmFkaW5nOiBjZy5QaWVjZSB8IHVuZGVmaW5lZCxcbiAgcE12ZHNldDogY2cuUGllY2VOb2RlW10sXG4gIHBNdmQ6IGNnLlBpZWNlTm9kZSB8IHVuZGVmaW5lZCxcbiAgc012ZHNldDogY2cuU3F1YXJlTm9kZVtdLFxuICBzTXZkOiBjZy5TcXVhcmVOb2RlIHwgdW5kZWZpbmVkO1xuXG4gIC8vIHdhbGsgb3ZlciBhbGwgYm9hcmQgZG9tIGVsZW1lbnRzLCBhcHBseSBhbmltYXRpb25zIGFuZCBmbGFnIG1vdmVkIHBpZWNlc1xuICBlbCA9IGJvYXJkRWwuZmlyc3RDaGlsZCBhcyBjZy5QaWVjZU5vZGUgfCBjZy5TcXVhcmVOb2RlO1xuICB3aGlsZSAoZWwpIHtcbiAgICBrID0gZWwuY2dLZXk7XG4gICAgaWYgKGlzUGllY2VOb2RlKGVsKSkge1xuICAgICAgcGllY2VBdEtleSA9IHBpZWNlc1trXTtcbiAgICAgIGFuaW0gPSBhbmltc1trXTtcbiAgICAgIGZhZGluZyA9IGZhZGluZ3Nba107XG4gICAgICBlbFBpZWNlTmFtZSA9IGVsLmNnUGllY2U7XG4gICAgICAvLyBpZiBwaWVjZSBub3QgYmVpbmcgZHJhZ2dlZCBhbnltb3JlLCByZW1vdmUgZHJhZ2dpbmcgc3R5bGVcbiAgICAgIGlmIChlbC5jZ0RyYWdnaW5nICYmICghY3VyRHJhZyB8fCBjdXJEcmFnLm9yaWcgIT09IGspKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWdnaW5nJyk7XG4gICAgICAgIHRyYW5zbGF0ZShlbCwgcG9zVG9UcmFuc2xhdGUoa2V5MnBvcyhrKSwgYXNXaGl0ZSkpO1xuICAgICAgICBlbC5jZ0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyByZW1vdmUgZmFkaW5nIGNsYXNzIGlmIGl0IHN0aWxsIHJlbWFpbnNcbiAgICAgIGlmICghZmFkaW5nICYmIGVsLmNnRmFkaW5nKSB7XG4gICAgICAgIGVsLmNnRmFkaW5nID0gZmFsc2U7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhZGluZycpO1xuICAgICAgfVxuICAgICAgLy8gdGhlcmUgaXMgbm93IGEgcGllY2UgYXQgdGhpcyBkb20ga2V5XG4gICAgICBpZiAocGllY2VBdEtleSkge1xuICAgICAgICAvLyBjb250aW51ZSBhbmltYXRpb24gaWYgYWxyZWFkeSBhbmltYXRpbmcgYW5kIHNhbWUgcGllY2VcbiAgICAgICAgLy8gKG90aGVyd2lzZSBpdCBjb3VsZCBhbmltYXRlIGEgY2FwdHVyZWQgcGllY2UpXG4gICAgICAgIGlmIChhbmltICYmIGVsLmNnQW5pbWF0aW5nICYmIGVsUGllY2VOYW1lID09PSBwaWVjZU5hbWVPZihwaWVjZUF0S2V5KSkge1xuICAgICAgICAgIGNvbnN0IHBvcyA9IGtleTJwb3Moayk7XG4gICAgICAgICAgcG9zWzBdICs9IGFuaW1bMl07XG4gICAgICAgICAgcG9zWzFdICs9IGFuaW1bM107XG4gICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYW5pbScpO1xuICAgICAgICAgIHRyYW5zbGF0ZShlbCwgcG9zVG9UcmFuc2xhdGUocG9zLCBhc1doaXRlKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZWwuY2dBbmltYXRpbmcpIHtcbiAgICAgICAgICBlbC5jZ0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW0nKTtcbiAgICAgICAgICB0cmFuc2xhdGUoZWwsIHBvc1RvVHJhbnNsYXRlKGtleTJwb3MoayksIGFzV2hpdGUpKTtcbiAgICAgICAgICBpZiAocy5hZGRQaWVjZVpJbmRleCkgZWwuc3R5bGUuekluZGV4ID0gcG9zWkluZGV4KGtleTJwb3MoayksIGFzV2hpdGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNhbWUgcGllY2U6IGZsYWcgYXMgc2FtZVxuICAgICAgICBpZiAoZWxQaWVjZU5hbWUgPT09IHBpZWNlTmFtZU9mKHBpZWNlQXRLZXkpICYmICghZmFkaW5nIHx8ICFlbC5jZ0ZhZGluZykpIHtcbiAgICAgICAgICBzYW1lUGllY2VzW2tdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkaWZmZXJlbnQgcGllY2U6IGZsYWcgYXMgbW92ZWQgdW5sZXNzIGl0IGlzIGEgZmFkaW5nIHBpZWNlXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGlmIChmYWRpbmcgJiYgZWxQaWVjZU5hbWUgPT09IHBpZWNlTmFtZU9mKGZhZGluZykpIHtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2ZhZGluZycpO1xuICAgICAgICAgICAgZWwuY2dGYWRpbmcgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAobW92ZWRQaWVjZXNbZWxQaWVjZU5hbWVdKSBtb3ZlZFBpZWNlc1tlbFBpZWNlTmFtZV0ucHVzaChlbCk7XG4gICAgICAgICAgICBlbHNlIG1vdmVkUGllY2VzW2VsUGllY2VOYW1lXSA9IFtlbF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBubyBwaWVjZTogZmxhZyBhcyBtb3ZlZFxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmIChtb3ZlZFBpZWNlc1tlbFBpZWNlTmFtZV0pIG1vdmVkUGllY2VzW2VsUGllY2VOYW1lXS5wdXNoKGVsKTtcbiAgICAgICAgZWxzZSBtb3ZlZFBpZWNlc1tlbFBpZWNlTmFtZV0gPSBbZWxdO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChpc1NxdWFyZU5vZGUoZWwpKSB7XG4gICAgICBjb25zdCBjbiA9IGVsLmNsYXNzTmFtZTtcbiAgICAgIGlmIChzcXVhcmVzW2tdID09PSBjbikgc2FtZVNxdWFyZXNba10gPSB0cnVlO1xuICAgICAgZWxzZSBpZiAobW92ZWRTcXVhcmVzW2NuXSkgbW92ZWRTcXVhcmVzW2NuXS5wdXNoKGVsKTtcbiAgICAgIGVsc2UgbW92ZWRTcXVhcmVzW2NuXSA9IFtlbF07XG4gICAgfVxuICAgIGVsID0gZWwubmV4dFNpYmxpbmcgYXMgY2cuUGllY2VOb2RlIHwgY2cuU3F1YXJlTm9kZTtcbiAgfVxuXG4gIC8vIHdhbGsgb3ZlciBhbGwgc3F1YXJlcyBpbiBjdXJyZW50IHNldCwgYXBwbHkgZG9tIGNoYW5nZXMgdG8gbW92ZWQgc3F1YXJlc1xuICAvLyBvciBhcHBlbmQgbmV3IHNxdWFyZXNcbiAgZm9yIChjb25zdCBzayBpbiBzcXVhcmVzKSB7XG4gICAgaWYgKCFzYW1lU3F1YXJlc1tza10pIHtcbiAgICAgIHNNdmRzZXQgPSBtb3ZlZFNxdWFyZXNbc3F1YXJlc1tza11dO1xuICAgICAgc012ZCA9IHNNdmRzZXQgJiYgc012ZHNldC5wb3AoKTtcbiAgICAgIGNvbnN0IHRyYW5zbGF0aW9uID0gcG9zVG9UcmFuc2xhdGUoa2V5MnBvcyhzayBhcyBjZy5LZXkpLCBhc1doaXRlKTtcbiAgICAgIGlmIChzTXZkKSB7XG4gICAgICAgIHNNdmQuY2dLZXkgPSBzayBhcyBjZy5LZXk7XG4gICAgICAgIHRyYW5zbGF0ZShzTXZkLCB0cmFuc2xhdGlvbik7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc3Qgc3F1YXJlTm9kZSA9IGNyZWF0ZUVsKCdzcXVhcmUnLCBzcXVhcmVzW3NrXSkgYXMgY2cuU3F1YXJlTm9kZTtcbiAgICAgICAgc3F1YXJlTm9kZS5jZ0tleSA9IHNrIGFzIGNnLktleTtcbiAgICAgICAgdHJhbnNsYXRlKHNxdWFyZU5vZGUsIHRyYW5zbGF0aW9uKTtcbiAgICAgICAgYm9hcmRFbC5pbnNlcnRCZWZvcmUoc3F1YXJlTm9kZSwgYm9hcmRFbC5maXJzdENoaWxkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyB3YWxrIG92ZXIgYWxsIHBpZWNlcyBpbiBjdXJyZW50IHNldCwgYXBwbHkgZG9tIGNoYW5nZXMgdG8gbW92ZWQgcGllY2VzXG4gIC8vIG9yIGFwcGVuZCBuZXcgcGllY2VzXG4gIGZvciAoY29uc3QgaiBpbiBwaWVjZXNLZXlzKSB7XG4gICAgayA9IHBpZWNlc0tleXNbal07XG4gICAgcCA9IHBpZWNlc1trXSE7XG4gICAgYW5pbSA9IGFuaW1zW2tdO1xuICAgIGlmICghc2FtZVBpZWNlc1trXSkge1xuICAgICAgcE12ZHNldCA9IG1vdmVkUGllY2VzW3BpZWNlTmFtZU9mKHApXTtcbiAgICAgIHBNdmQgPSBwTXZkc2V0ICYmIHBNdmRzZXQucG9wKCk7XG4gICAgICAvLyBhIHNhbWUgcGllY2Ugd2FzIG1vdmVkXG4gICAgICBpZiAocE12ZCkge1xuICAgICAgICAvLyBhcHBseSBkb20gY2hhbmdlc1xuICAgICAgICBwTXZkLmNnS2V5ID0gaztcbiAgICAgICAgaWYgKHBNdmQuY2dGYWRpbmcpIHtcbiAgICAgICAgICBwTXZkLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhZGluZycpO1xuICAgICAgICAgIHBNdmQuY2dGYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwb3MgPSBrZXkycG9zKGspO1xuICAgICAgICBpZiAocy5hZGRQaWVjZVpJbmRleCkgcE12ZC5zdHlsZS56SW5kZXggPSBwb3NaSW5kZXgocG9zLCBhc1doaXRlKTtcbiAgICAgICAgaWYgKGFuaW0pIHtcbiAgICAgICAgICBwTXZkLmNnQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICBwTXZkLmNsYXNzTGlzdC5hZGQoJ2FuaW0nKTtcbiAgICAgICAgICBwb3NbMF0gKz0gYW5pbVsyXTtcbiAgICAgICAgICBwb3NbMV0gKz0gYW5pbVszXTtcbiAgICAgICAgfVxuICAgICAgICB0cmFuc2xhdGUocE12ZCwgcG9zVG9UcmFuc2xhdGUocG9zLCBhc1doaXRlKSk7XG4gICAgICB9XG4gICAgICAvLyBubyBwaWVjZSBpbiBtb3ZlZCBvYmo6IGluc2VydCB0aGUgbmV3IHBpZWNlXG4gICAgICAvLyBhc3N1bWVzIHRoZSBuZXcgcGllY2UgaXMgbm90IGJlaW5nIGRyYWdnZWRcbiAgICAgIGVsc2Uge1xuXG4gICAgICAgIGNvbnN0IHBpZWNlTmFtZSA9IHBpZWNlTmFtZU9mKHApLFxuICAgICAgICBwaWVjZU5vZGUgPSBjcmVhdGVFbCgncGllY2UnLCBwaWVjZU5hbWUpIGFzIGNnLlBpZWNlTm9kZSxcbiAgICAgICAgcG9zID0ga2V5MnBvcyhrKTtcblxuICAgICAgICBwaWVjZU5vZGUuY2dQaWVjZSA9IHBpZWNlTmFtZTtcbiAgICAgICAgcGllY2VOb2RlLmNnS2V5ID0gaztcbiAgICAgICAgaWYgKGFuaW0pIHtcbiAgICAgICAgICBwaWVjZU5vZGUuY2dBbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICAgIHBvc1swXSArPSBhbmltWzJdO1xuICAgICAgICAgIHBvc1sxXSArPSBhbmltWzNdO1xuICAgICAgICB9XG4gICAgICAgIHRyYW5zbGF0ZShwaWVjZU5vZGUsIHBvc1RvVHJhbnNsYXRlKHBvcywgYXNXaGl0ZSkpO1xuXG4gICAgICAgIGlmIChzLmFkZFBpZWNlWkluZGV4KSBwaWVjZU5vZGUuc3R5bGUuekluZGV4ID0gcG9zWkluZGV4KHBvcywgYXNXaGl0ZSk7XG5cbiAgICAgICAgYm9hcmRFbC5hcHBlbmRDaGlsZChwaWVjZU5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIHJlbW92ZSBhbnkgZWxlbWVudCB0aGF0IHJlbWFpbnMgaW4gdGhlIG1vdmVkIHNldHNcbiAgZm9yIChjb25zdCBpIGluIG1vdmVkUGllY2VzKSByZW1vdmVOb2RlcyhzLCBtb3ZlZFBpZWNlc1tpXSk7XG4gIGZvciAoY29uc3QgaSBpbiBtb3ZlZFNxdWFyZXMpIHJlbW92ZU5vZGVzKHMsIG1vdmVkU3F1YXJlc1tpXSk7XG59XG5cbmZ1bmN0aW9uIGlzUGllY2VOb2RlKGVsOiBjZy5QaWVjZU5vZGUgfCBjZy5TcXVhcmVOb2RlKTogZWwgaXMgY2cuUGllY2VOb2RlIHtcbiAgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdQSUVDRSc7XG59XG5mdW5jdGlvbiBpc1NxdWFyZU5vZGUoZWw6IGNnLlBpZWNlTm9kZSB8IGNnLlNxdWFyZU5vZGUpOiBlbCBpcyBjZy5TcXVhcmVOb2RlIHtcbiAgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdTUVVBUkUnO1xufVxuXG5mdW5jdGlvbiByZW1vdmVOb2RlcyhzOiBTdGF0ZSwgbm9kZXM6IEhUTUxFbGVtZW50W10pOiB2b2lkIHtcbiAgZm9yIChjb25zdCBpIGluIG5vZGVzKSBzLmRvbS5lbGVtZW50cy5ib2FyZC5yZW1vdmVDaGlsZChub2Rlc1tpXSk7XG59XG5cbmZ1bmN0aW9uIHBvc1pJbmRleChwb3M6IGNnLlBvcywgYXNXaGl0ZTogYm9vbGVhbik6IHN0cmluZyB7XG4gIGxldCB6ID0gMiArIChwb3NbMV0gLSAxKSAqIDggKyAoOCAtIHBvc1swXSk7XG4gIGlmIChhc1doaXRlKSB6ID0gNjcgLSB6O1xuICByZXR1cm4geiArICcnO1xufVxuXG5mdW5jdGlvbiBwaWVjZU5hbWVPZihwaWVjZTogY2cuUGllY2UpOiBzdHJpbmcge1xuICByZXR1cm4gYCR7cGllY2UuY29sb3J9ICR7cGllY2Uucm9sZX1gO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlU3F1YXJlQ2xhc3NlcyhzOiBTdGF0ZSk6IFNxdWFyZUNsYXNzZXMge1xuICBjb25zdCBzcXVhcmVzOiBTcXVhcmVDbGFzc2VzID0ge307XG4gIGxldCBpOiBhbnksIGs6IGNnLktleTtcbiAgaWYgKHMubGFzdE1vdmUgJiYgcy5oaWdobGlnaHQubGFzdE1vdmUpIGZvciAoaSBpbiBzLmxhc3RNb3ZlKSB7XG4gICAgYWRkU3F1YXJlKHNxdWFyZXMsIHMubGFzdE1vdmVbaV0sICdsYXN0LW1vdmUnKTtcbiAgfVxuICBpZiAocy5jaGVjayAmJiBzLmhpZ2hsaWdodC5jaGVjaykgYWRkU3F1YXJlKHNxdWFyZXMsIHMuY2hlY2ssICdjaGVjaycpO1xuICBpZiAocy5zZWxlY3RlZCkge1xuICAgIGFkZFNxdWFyZShzcXVhcmVzLCBzLnNlbGVjdGVkLCAnc2VsZWN0ZWQnKTtcbiAgICBpZiAocy5tb3ZhYmxlLnNob3dEZXN0cykge1xuICAgICAgY29uc3QgZGVzdHMgPSBzLm1vdmFibGUuZGVzdHMgJiYgcy5tb3ZhYmxlLmRlc3RzW3Muc2VsZWN0ZWRdO1xuICAgICAgaWYgKGRlc3RzKSBmb3IgKGkgaW4gZGVzdHMpIHtcbiAgICAgICAgayA9IGRlc3RzW2ldO1xuICAgICAgICBhZGRTcXVhcmUoc3F1YXJlcywgaywgJ21vdmUtZGVzdCcgKyAocy5waWVjZXNba10gPyAnIG9jJyA6ICcnKSk7XG4gICAgICB9XG4gICAgICBjb25zdCBwRGVzdHMgPSBzLnByZW1vdmFibGUuZGVzdHM7XG4gICAgICBpZiAocERlc3RzKSBmb3IgKGkgaW4gcERlc3RzKSB7XG4gICAgICAgIGsgPSBwRGVzdHNbaV07XG4gICAgICAgIGFkZFNxdWFyZShzcXVhcmVzLCBrLCAncHJlbW92ZS1kZXN0JyArIChzLnBpZWNlc1trXSA/ICcgb2MnIDogJycpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29uc3QgcHJlbW92ZSA9IHMucHJlbW92YWJsZS5jdXJyZW50O1xuICBpZiAocHJlbW92ZSkgZm9yIChpIGluIHByZW1vdmUpIGFkZFNxdWFyZShzcXVhcmVzLCBwcmVtb3ZlW2ldLCAnY3VycmVudC1wcmVtb3ZlJyk7XG4gIGVsc2UgaWYgKHMucHJlZHJvcHBhYmxlLmN1cnJlbnQpIGFkZFNxdWFyZShzcXVhcmVzLCBzLnByZWRyb3BwYWJsZS5jdXJyZW50LmtleSwgJ2N1cnJlbnQtcHJlbW92ZScpO1xuXG4gIGNvbnN0IG8gPSBzLmV4cGxvZGluZztcbiAgaWYgKG8pIGZvciAoaSBpbiBvLmtleXMpIGFkZFNxdWFyZShzcXVhcmVzLCBvLmtleXNbaV0sICdleHBsb2RpbmcnICsgby5zdGFnZSk7XG5cbiAgcmV0dXJuIHNxdWFyZXM7XG59XG5cbmZ1bmN0aW9uIGFkZFNxdWFyZShzcXVhcmVzOiBTcXVhcmVDbGFzc2VzLCBrZXk6IGNnLktleSwga2xhc3M6IHN0cmluZyk6IHZvaWQge1xuICBpZiAoc3F1YXJlc1trZXldKSBzcXVhcmVzW2tleV0gKz0gJyAnICsga2xhc3M7XG4gIGVsc2Ugc3F1YXJlc1trZXldID0ga2xhc3M7XG59XG4iXX0=","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js!./chessground.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"/*\\n * Chessground base css properties.\\n *\\n * You need to include the css files in themes folder in order to have the\\n * board and pieces displayed!\\n */\\n\\n.cg-wrap {\\n    width: 320px;\\n    height: 320px;\\n    position: relative;\\n    display: block;\\n}\\n\\ncg-helper {\\n    position: absolute;\\n    width: 12.5%;\\n    padding-bottom: 12.5%;\\n    display: table; /* hack: round to full pixel size in chrome */\\n    bottom: 0;\\n}\\n\\ncg-container {\\n    position: absolute;\\n    width: 800%;\\n    height: 800%;\\n    display: block;\\n    bottom: 0;\\n}\\n\\ncg-board {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%;\\n    -webkit-user-select: none;\\n    -moz-user-select: none;\\n    -ms-user-select: none;\\n    user-select: none;\\n    line-height: 0;\\n    background-size: cover;\\n    cursor: pointer;\\n}\\ncg-board square {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 12.5%;\\n    height: 12.5%;\\n    pointer-events: none;\\n}\\ncg-board square.move-dest {\\n    background: radial-gradient(rgba(20, 85, 30, 0.5) 22%, #208530 0, rgba(0, 0, 0, 0.3) 0, rgba(0, 0, 0, 0) 0);\\n    pointer-events: auto;\\n}\\ncg-board square.premove-dest {\\n    background: radial-gradient(rgba(20, 30, 85, 0.5) 22%, #203085 0, rgba(0, 0, 0, 0.3) 0, rgba(0, 0, 0, 0) 0);\\n}\\ncg-board square.oc.move-dest {\\n    background: radial-gradient(transparent 0%, transparent 80%, rgba(20, 85, 0, 0.3) 80%);\\n}\\ncg-board square.oc.premove-dest {\\n    background: radial-gradient(transparent 0%, transparent 80%, rgba(20, 30, 85, 0.2) 80%);\\n}\\ncg-board square.move-dest:hover {\\n    background: rgba(20, 85, 30, 0.3);\\n}\\ncg-board square.premove-dest:hover {\\n    background: rgba(20, 30, 85, 0.2);\\n}\\ncg-board square.last-move {\\n    will-change: transform;\\n    background-color: rgba(155, 199, 0, 0.41);\\n}\\ncg-board square.selected {\\n    background-color: rgba(20, 85, 30, 0.5);\\n}\\ncg-board square.check {\\n    background: radial-gradient(ellipse at center, rgba(255, 0, 0, 1) 0%, rgba(231, 0, 0, 1) 25%, rgba(169, 0, 0, 0) 89%, rgba(158, 0, 0, 0) 100%);\\n}\\ncg-board square.current-premove {\\n    background-color: rgba(20, 30, 85, 0.5);\\n}\\n.cg-wrap piece {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 12.5%;\\n    height: 12.5%;\\n    background-size: cover;\\n    z-index: 2;\\n    will-change: transform;\\n    pointer-events: none;\\n}\\ncg-board piece.dragging {\\n    cursor: move;\\n    z-index: 9;\\n}\\ncg-board piece.anim {\\n    z-index: 8;\\n}\\ncg-board piece.fading {\\n    z-index: 1;\\n    opacity: 0.5;\\n}\\n.cg-wrap square.move-dest:hover {\\n    background-color: rgba(20, 85, 30, 0.3);\\n}\\n.cg-wrap piece.ghost {\\n    opacity: 0.3;\\n}\\n.cg-wrap svg {\\n    overflow: hidden;\\n    position: relative;\\n    top: 0px;\\n    left: 0px;\\n    width: 100%;\\n    height: 100%;\\n    pointer-events: none;\\n    z-index: 2;\\n    opacity: 0.6;\\n}\\n.cg-wrap svg image {\\n    opacity: 0.5;\\n}\\n.cg-wrap coords {\\n    position: absolute;\\n    display: flex;\\n    pointer-events: none;\\n    opacity: 0.8;\\n/*    font-size: 9px; Hide from CSS, so it is set by the PgnViewerJS */\\n}\\n.cg-wrap coords.ranks {\\n    right: -15px;\\n    top: 0;\\n    flex-flow: column-reverse;\\n    height: 100%;\\n    width: 12px;\\n}\\n.cg-wrap coords.ranks.black {\\n    flex-flow: column;\\n}\\n.cg-wrap coords.files {\\n    bottom: -16px;\\n    left: 0;\\n    flex-flow: row;\\n    width: 100%;\\n    height: 16px;\\n    text-transform: uppercase;\\n    text-align: center;\\n}\\n.cg-wrap coords.files.black {\\n    flex-flow: row-reverse;\\n}\\n.cg-wrap coords coord {\\n    flex: 1 1 auto;\\n}\\n.cg-wrap coords.ranks coord {\\n    transform: translateY(39%);\\n}\\n\\n@media (min-width: 800px){\\n    cg-resize{\\n        display:block;\\n        position:absolute;\\n        right:-9px;\\n        bottom:-9px;\\n        width:22px;\\n        height:22px;\\n        cursor:nwse-resize}\\n    cg-resize::before,cg-resize::after{\\n        background:#000;\\n        content:'';\\n        position:absolute;\\n        width:12px;\\n        height:1px}\\n    cg-resize::before{\\n        width:5px;\\n        transform:translate(7px, 8px) rotate(-45deg)}\\n    cg-resize::after{\\n        transform:translate(1px, 6px) rotate(-45deg)}\\n    cg-resize:hover{\\n        border-radius:50%;\\n        background:rgba(214,79,0,0.5)}\\n    .resizing cg-resize{\\n        border-radius:50%;\\n        background:rgba(98,153,36,0.5)}\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js!./theme.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"/*\\n * Board\\n */\\n.blue .cg-wrap {\\n  background-image: url(/img/board/blue.svg);\\n}\\n.brown .cg-wrap {\\n  background-image: url(/img/board/brown.svg);\\n}\\n.zeit .cg-wrap {\\n  background-image: url(/img/board/zeit.svg);\\n}\\n.chesscom .cg-wrap {\\n  background-image: url(/img/board/chesscom.svg);\\n}\\n.informator .cg-wrap {\\n  background-image: url(/img/board/informator.svg);\\n}\\n.sportverlag .cg-wrap {\\n  background-image: url(/img/board/sportverlag.svg);\\n}\\n.beyer .cg-wrap {\\n  background-image: url(/img/board/beyer.svg);\\n}\\n.falken .cg-wrap {\\n  background-image: url(/img/board/falken.svg);\\n}\\n.green .cg-wrap {\\n  background-image: url(/img/board/green.svg);\\n}\\n\\n/*\\n * Board\\n */\\n.merida  cg-board piece.pawn.white {\\n  background-image: url('/img/chesspieces/merida-svg/wP.svg');\\n}\\n.merida  cg-board piece.bishop.white {\\n  background-image: url('/img/chesspieces/merida-svg/wB.svg');\\n}\\n.merida  cg-board piece.knight.white {\\n  background-image: url('/img/chesspieces/merida-svg/wN.svg');\\n}\\n.merida  cg-board piece.rook.white {\\n  background-image: url('/img/chesspieces/merida-svg/wR.svg');\\n}\\n.merida  cg-board piece.queen.white {\\n  background-image: url('/img/chesspieces/merida-svg/wQ.svg');\\n}\\n.merida  cg-board piece.king.white {\\n  background-image: url('/img/chesspieces/merida-svg/wK.svg');\\n}\\n.merida  cg-board piece.pawn.black {\\n  background-image: url('/img/chesspieces/merida-svg/bP.svg');\\n}\\n.merida  cg-board piece.bishop.black {\\n  background-image: url('/img/chesspieces/merida-svg/bB.svg');\\n}\\n.merida  cg-board piece.knight.black {\\n  background-image: url('/img/chesspieces/merida-svg/bN.svg');\\n}\\n.merida  cg-board piece.rook.black {\\n  background-image: url('/img/chesspieces/merida-svg/bR.svg');\\n}\\n.merida  cg-board piece.queen.black {\\n  background-image: url('/img/chesspieces/merida-svg/bQ.svg');\\n}\\n.merida  cg-board piece.king.black {\\n  background-image: url('/img/chesspieces/merida-svg/bK.svg');\\n}\\n\\n/* Wikipedia */\\n.wikipedia  cg-board piece.pawn.white {\\n  background-image: url('/img/chesspieces/wikipedia/wP.png');\\n}\\n.wikipedia  cg-board piece.bishop.white {\\n  background-image: url('/img/chesspieces/wikipedia/wB.png');\\n}\\n.wikipedia  cg-board piece.knight.white {\\n  background-image: url('/img/chesspieces/wikipedia/wN.png');\\n}\\n.wikipedia  cg-board piece.rook.white {\\n  background-image: url('/img/chesspieces/wikipedia/wR.png');\\n}\\n.wikipedia  cg-board piece.queen.white {\\n  background-image: url('/img/chesspieces/wikipedia/wQ.png');\\n}\\n.wikipedia cg-board piece.king.white {\\n  background-image: url('/img/chesspieces/wikipedia/wK.png');\\n}\\n.wikipedia cg-board piece.pawn.black {\\n  background-image: url('/img/chesspieces/wikipedia/bP.png');\\n}\\n.wikipedia cg-board piece.bishop.black {\\n  background-image: url('/img/chesspieces/wikipedia/bB.png');\\n}\\n.wikipedia cg-board piece.knight.black {\\n  background-image: url('/img/chesspieces/wikipedia/bN.png');\\n}\\n.wikipedia cg-board piece.rook.black {\\n  background-image: url('/img/chesspieces/wikipedia/bR.png');\\n}\\n.wikipedia cg-board piece.queen.black {\\n  background-image: url('/img/chesspieces/wikipedia/bQ.png');\\n}\\n.wikipedia cg-board piece.king.black {\\n  background-image: url('/img/chesspieces/wikipedia/bK.png');\\n}\\n/* Alpha */\\n.alpha cg-board piece.pawn.white {\\n  background-image: url('/img/chesspieces/alpha/wP.png');\\n}\\n.alpha cg-board piece.bishop.white {\\n  background-image: url('/img/chesspieces/alpha/wB.png');\\n}\\n.alpha cg-board piece.knight.white {\\n  background-image: url('/img/chesspieces/alpha/wN.png');\\n}\\n.alpha cg-board piece.rook.white {\\n  background-image: url('/img/chesspieces/alpha/wR.png');\\n}\\n.alpha cg-board piece.queen.white {\\n  background-image: url('/img/chesspieces/alpha/wQ.png');\\n}\\n.alpha cg-board piece.king.white {\\n  background-image: url('/img/chesspieces/alpha/wK.png');\\n}\\n.alpha cg-board piece.pawn.black {\\n  background-image: url('/img/chesspieces/alpha/bP.png');\\n}\\n.alpha cg-board piece.bishop.black {\\n  background-image: url('/img/chesspieces/alpha/bB.png');\\n}\\n.alpha  cg-board piece.knight.black {\\n  background-image: url('/img/chesspieces/alpha/bN.png');\\n}\\n.alpha  cg-board piece.rook.black {\\n  background-image: url('/img/chesspieces/alpha/bR.png');\\n}\\n.alpha  cg-board piece.queen.black {\\n  background-image: url('/img/chesspieces/alpha/bQ.png');\\n}\\n.alpha  cg-board piece.king.black {\\n  background-image: url('/img/chesspieces/alpha/bK.png');\\n}\\n/* Beyer */\\n.beyer  cg-board piece.pawn.white {\\n  background-image: url('/img/chesspieces/beyer/wP.png');\\n}\\n.beyer  cg-board piece.bishop.white {\\n  background-image: url('/img/chesspieces/beyer/wB.png');\\n}\\n.beyer  cg-board piece.knight.white {\\n  background-image: url('/img/chesspieces/beyer/wN.png');\\n}\\n.beyer  cg-board piece.rook.white {\\n  background-image: url('/img/chesspieces/beyer/wR.png');\\n}\\n.beyer  cg-board piece.queen.white {\\n  background-image: url('/img/chesspieces/beyer/wQ.png');\\n}\\n.beyer  cg-board piece.king.white {\\n  background-image: url('/img/chesspieces/beyer/wK.png');\\n}\\n.beyer  cg-board piece.pawn.black {\\n  background-image: url('/img/chesspieces/beyer/bP.png');\\n}\\n.beyer  cg-board piece.bishop.black {\\n  background-image: url('/img/chesspieces/beyer/bB.png');\\n}\\n.beyer  cg-board piece.knight.black {\\n  background-image: url('/img/chesspieces/beyer/bN.png');\\n}\\n.beyer  cg-board piece.rook.black {\\n  background-image: url('/img/chesspieces/beyer/bR.png');\\n}\\n.beyer  cg-board piece.queen.black {\\n  background-image: url('/img/chesspieces/beyer/bQ.png');\\n}\\n.beyer  cg-board piece.king.black {\\n  background-image: url('/img/chesspieces/beyer/bK.png');\\n}\\n/* Case */\\n.case  cg-board piece.pawn.white {\\n  background-image: url('/img/chesspieces/case/wP.png');\\n}\\n.case  cg-board piece.bishop.white {\\n  background-image: url('/img/chesspieces/case/wB.png');\\n}\\n.case  cg-board piece.knight.white {\\n  background-image: url('/img/chesspieces/case/wN.png');\\n}\\n.case  cg-board piece.rook.white {\\n  background-image: url('/img/chesspieces/case/wR.png');\\n}\\n.case  cg-board piece.queen.white {\\n  background-image: url('/img/chesspieces/case/wQ.png');\\n}\\n.case  cg-board piece.king.white {\\n  background-image: url('/img/chesspieces/case/wK.png');\\n}\\n.case  cg-board piece.pawn.black {\\n  background-image: url('/img/chesspieces/case/bP.png');\\n}\\n.case  cg-board piece.bishop.black {\\n  background-image: url('/img/chesspieces/case/bB.png');\\n}\\n.case  cg-board piece.knight.black {\\n  background-image: url('/img/chesspieces/case/bN.png');\\n}\\n.case  cg-board piece.rook.black {\\n  background-image: url('/img/chesspieces/case/bR.png');\\n}\\n.case  cg-board piece.queen.black {\\n  background-image: url('/img/chesspieces/case/bQ.png');\\n}\\n.case  cg-board piece.king.black {\\n  background-image: url('/img/chesspieces/case/bK.png');\\n}\\n/* Chesscom */\\n.chesscom  cg-board piece.pawn.white {\\n  background-image: url('/img/chesspieces/chesscom/wp.png');\\n}\\n.chesscom  cg-board piece.bishop.white {\\n  background-image: url('/img/chesspieces/chesscom/wb.png');\\n}\\n.chesscom  cg-board piece.knight.white {\\n  background-image: url('/img/chesspieces/chesscom/wn.png');\\n}\\n.chesscom  cg-board piece.rook.white {\\n  background-image: url('/img/chesspieces/chesscom/wr.png');\\n}\\n.chesscom  cg-board piece.queen.white {\\n  background-image: url('/img/chesspieces/chesscom/wq.png');\\n}\\n.chesscom  cg-board piece.king.white {\\n  background-image: url('/img/chesspieces/chesscom/wk.png');\\n}\\n.chesscom  cg-board piece.pawn.black {\\n  background-image: url('/img/chesspieces/chesscom/bp.png');\\n}\\n.chesscom  cg-board piece.bishop.black {\\n  background-image: url('/img/chesspieces/chesscom/bb.png');\\n}\\n.chesscom  cg-board piece.knight.black {\\n  background-image: url('/img/chesspieces/chesscom/bn.png');\\n}\\n.chesscom  cg-board piece.rook.black {\\n  background-image: url('/img/chesspieces/chesscom/br.png');\\n}\\n.chesscom  cg-board piece.queen.black {\\n  background-image: url('/img/chesspieces/chesscom/bq.png');\\n}\\n.chesscom  cg-board piece.king.black {\\n  background-image: url('/img/chesspieces/chesscom/bk.png');\\n}\\n/* Condal */\\n.condal  cg-board piece.pawn.white {\\n  background-image: url('/img/chesspieces/condal/wP.png');\\n}\\n.condal  cg-board piece.bishop.white {\\n  background-image: url('/img/chesspieces/condal/wB.png');\\n}\\n.condal  cg-board piece.knight.white {\\n  background-image: url('/img/chesspieces/condal/wN.png');\\n}\\n.condal  cg-board piece.rook.white {\\n  background-image: url('/img/chesspieces/condal/wR.png');\\n}\\n.condal  cg-board piece.queen.white {\\n  background-image: url('/img/chesspieces/condal/wQ.png');\\n}\\n.condal  cg-board piece.king.white {\\n  background-image: url('/img/chesspieces/condal/wK.png');\\n}\\n.condal  cg-board piece.pawn.black {\\n  background-image: url('/img/chesspieces/condal/bP.png');\\n}\\n.condal  cg-board piece.bishop.black {\\n  background-image: url('/img/chesspieces/condal/bB.png');\\n}\\n.condal  cg-board piece.knight.black {\\n  background-image: url('/img/chesspieces/condal/bN.png');\\n}\\n.condal  cg-board piece.rook.black {\\n  background-image: url('/img/chesspieces/condal/bR.png');\\n}\\n.condal  cg-board piece.queen.black {\\n  background-image: url('/img/chesspieces/condal/bQ.png');\\n}\\n.condal  cg-board piece.king.black {\\n  background-image: url('/img/chesspieces/condal/bK.png');\\n}\\n/* Leipzig */\\n.leipzig  cg-board piece.pawn.white {\\n  background-image: url('/img/chesspieces/leipzig/wP.png');\\n}\\n.leipzig  cg-board piece.bishop.white {\\n  background-image: url('/img/chesspieces/leipzig/wB.png');\\n}\\n.leipzig  cg-board piece.knight.white {\\n  background-image: url('/img/chesspieces/leipzig/wN.png');\\n}\\n.leipzig  cg-board piece.rook.white {\\n  background-image: url('/img/chesspieces/leipzig/wR.png');\\n}\\n.leipzig  cg-board piece.queen.white {\\n  background-image: url('/img/chesspieces/leipzig/wQ.png');\\n}\\n.leipzig  cg-board piece.king.white {\\n  background-image: url('/img/chesspieces/leipzig/wK.png');\\n}\\n.leipzig  cg-board piece.pawn.black {\\n  background-image: url('/img/chesspieces/leipzig/bP.png');\\n}\\n.leipzig  cg-board piece.bishop.black {\\n  background-image: url('/img/chesspieces/leipzig/bB.png');\\n}\\n.leipzig  cg-board piece.knight.black {\\n  background-image: url('/img/chesspieces/leipzig/bN.png');\\n}\\n.leipzig  cg-board piece.rook.black {\\n  background-image: url('/img/chesspieces/leipzig/bR.png');\\n}\\n.leipzig  cg-board piece.queen.black {\\n  background-image: url('/img/chesspieces/leipzig/bQ.png');\\n}\\n.leipzig  cg-board piece.king.black {\\n  background-image: url('/img/chesspieces/leipzig/bK.png');\\n}\\n/* Maya */\\n.maya  cg-board piece.pawn.white {\\n  background-image: url('/img/chesspieces/maya/wP.png');\\n}\\n.maya  cg-board piece.bishop.white {\\n  background-image: url('/img/chesspieces/maya/wB.png');\\n}\\n.maya  cg-board piece.knight.white {\\n  background-image: url('/img/chesspieces/maya/wN.png');\\n}\\n.maya  cg-board piece.rook.white {\\n  background-image: url('/img/chesspieces/maya/wR.png');\\n}\\n.maya  cg-board piece.queen.white {\\n  background-image: url('/img/chesspieces/maya/wQ.png');\\n}\\n.maya  cg-board piece.king.white {\\n  background-image: url('/img/chesspieces/maya/wK.png');\\n}\\n.maya  cg-board piece.pawn.black {\\n  background-image: url('/img/chesspieces/maya/bP.png');\\n}\\n.maya  cg-board piece.bishop.black {\\n  background-image: url('/img/chesspieces/maya/bB.png');\\n}\\n.maya  cg-board piece.knight.black {\\n  background-image: url('/img/chesspieces/maya/bN.png');\\n}\\n.maya  cg-board piece.rook.black {\\n  background-image: url('/img/chesspieces/maya/bR.png');\\n}\\n.maya  cg-board piece.queen.black {\\n  background-image: url('/img/chesspieces/maya/bQ.png');\\n}\\n.maya  cg-board piece.king.black {\\n  background-image: url('/img/chesspieces/maya/bK.png');\\n}\\n/* USCF */\\n.uscf  cg-board piece.pawn.white {\\n  background-image: url('/img/chesspieces/uscf/wP.png');\\n}\\n.uscf  cg-board piece.bishop.white {\\n  background-image: url('/img/chesspieces/uscf/wB.png');\\n}\\n.uscf  cg-board piece.knight.white {\\n  background-image: url('/img/chesspieces/uscf/wN.png');\\n}\\n.uscf  cg-board piece.rook.white {\\n  background-image: url('/img/chesspieces/uscf/wR.png');\\n}\\n.uscf  cg-board piece.queen.white {\\n  background-image: url('/img/chesspieces/uscf/wQ.png');\\n}\\n.uscf  cg-board piece.king.white {\\n  background-image: url('/img/chesspieces/uscf/wK.png');\\n}\\n.uscf  cg-board piece.pawn.black {\\n  background-image: url('/img/chesspieces/uscf/bP.png');\\n}\\n.uscf  cg-board piece.bishop.black {\\n  background-image: url('/img/chesspieces/uscf/bB.png');\\n}\\n.uscf  cg-board piece.knight.black {\\n  background-image: url('/img/chesspieces/uscf/bN.png');\\n}\\n.uscf  cg-board piece.rook.black {\\n  background-image: url('/img/chesspieces/uscf/bR.png');\\n}\\n.uscf  cg-board piece.queen.black {\\n  background-image: url('/img/chesspieces/uscf/bQ.png');\\n}\\n.uscf  cg-board piece.king.black {\\n  background-image: url('/img/chesspieces/uscf/bK.png');\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js!./pgnvjs.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"div.whole:focus {\\n    /* The following suppresses the outline of the element that has the focus. Only when\\n       that focus is set, the keyboard mappings work. You may of course enable the outline\\n       for debugging purposes. */\\n    outline: 0;\\n}\\n\\nspan.whiteHeader:before {\\n    content: \\\" White: \\\";\\n}\\n\\nspan.blackHeader:before {\\n    content: \\\" Black: \\\";\\n}\\n\\nspan.restHeader:before { content: \\\" (\\\"}\\nspan.restHeader:after { content: \\\")\\\"}\\n\\ndiv.layout-left.whole, div.layout-right.whole {\\n    display: flex;\\n    flex-flow: row wrap;\\n}\\n\\ndiv.layout-left > .headers, div.layout-right > headers {\\n    flex: 1 100%;\\n}\\n\\ndiv.moves {\\n    /* overflow-y: auto; */\\n    padding: 10px;\\n}\\ndiv.layout-left > .moves, div.layout-right > .moves {\\n    position: relative;\\n    /*flex: 1 40%;*/\\n}\\n\\ndiv.layout-left > .moves, div.layout-right > .moves, div.layout-top > .moves, div.layout-bottom > .moves {\\n    overflow-y: auto;\\n}\\n\\ndiv.layout-right > .moves {\\n    order: 1;\\n}\\n\\ndiv.layout-right > .outerBoard {\\n    order: 2;\\n    /* flex: 1 1 auto; */\\n}\\n\\ndiv.layout-bottom.whole {\\n    display: flex;\\n    flex-flow: column wrap;\\n}\\n\\ndiv.layout-bottom > .outerBoard {\\n    order: 2;\\n}\\n\\ndiv.layout-top-left > .outerBoard {\\n    float: left;\\n    margin-right: 10px;\\n}\\n\\ndiv.layout-bottom-left > .outerBoard {\\n    float: left;\\n    margin-right: 10px;\\n    /* display: table-cell;\\n    vertical-align: bottom; */\\n}\\n\\ndiv.layout-top-right > .outerBoard {\\n    float: right;\\n    margin-left: 10px;\\n}\\n\\n/* Not found any trick that allows to use baseline, bottom, ... with float: left|right */\\ndiv.layout-bottom-right > .outerBoard {\\n    float: right;\\n    margin-left: 10px;\\n}\\n\\ndiv.layout-left > .outerBoard div.edit .gray, div.buttons .gray {\\n    -webkit-filter: grayscale(100%);\\n    -moz-filter: grayscale(100%);\\n    filter: grayscale(100%);\\n}\\n\\n/** Font Awesome buttons (see http://fontawesome.io/) */\\n\\n.fen {\\n    /* width: 96%; */\\n    height: 30px;\\n    min-height: 30px;\\n    padding: 2px;\\n    font-family: monospace;\\n}\\n\\ndiv.error {\\n    color: red;\\n}\\ndiv.buttons > i.button, div.edit > i.button {\\n    font-size: 16px;\\n    line-height: 1.4em;\\n    color: #71a0df;\\n    background-color: white;\\n    background-image: none;\\n     margin: 5px;\\n    padding: 4px;\\n    border: solid lightgrey 1px;\\n    border-radius: 4px;\\n}\\n\\ndiv.buttons > i.button.selected, div.edit > i.button.selected, .nagMenu.selected {\\n    color: #fff;\\n    background-color: #71a0df;\\n}\\n\\ndiv.nagMenu {\\n    border: 1px grey dotted;\\n    display: none;\\n    width: 600px;\\n}\\n\\ndiv.nagMenu a {\\n    text-decoration: none;\\n}\\n\\ndiv.nagMove, div.nagObservation, div.nagPosition {\\n    display: flex;\\n    flex-direction: column;\\n    flex-basis: 33.3%;\\n    text-align: left;\\n    flex-wrap: wrap;\\n}\\n\\n.nagMove i, .nagPosition i, .nagObservation i {\\n    display: flex!important;\\n    cursor: pointer;\\n    transition: 0.13s;\\n    align-items: center;\\n    margin: 2px;\\n}\\n\\n.nagMove i::before, .nagPosition i::before, .nagObservation i::before {\\n    content: attr(data-symbol);\\n    /* font-size: 1.2em; */\\n    font-style: normal;\\n    font-weight: bold;\\n    display: block;\\n    width: 30px;\\n    text-align: center;\\n    background: #f3f3f3;\\n    padding: 2px 2px;\\n    margin-right: 6px;\\n    transition: 0.13s;\\n}\\n\\na.active i::before {\\n    background: #71a0df!important;\\n    color: #fff!important;\\n}\\n\\n.nagMove i:hover, .nagPosition i:hover, .nagObservation i:hover {\\n    background: #efefef;\\n    color: #71a0df;\\n}\\n\\n/* Necessary fixes for examples  */\\nbutton.ui-multiselect {\\n    background-image: none;\\n    background-color: white;\\n}\\n\\nul.ui-multiselect-checkboxes > li {\\n    margin-bottom: 0px;\\n}\\n\\nselect.nag {\\n    width: 80px;\\n}\\n\\n\\ndiv.buttons > i.button:hover,div.edit > i.button:hover  {\\n    cursor: pointer;\\n    border: solid dimgrey 1px;\\n}\\n\\n/** The following are all font-awesome buttons.\\n  Where known, I have added their short names (to find them later again). **/\\ndiv.buttons > .button.flipper.default:before { /* fa-adjust */\\n    content: \\\"\\\\f042\\\";\\n}\\ndiv.buttons > .button.first.default:before { /* fa-fast-backward */\\n    content: \\\"\\\\f049\\\";\\n}\\ndiv.buttons > .button.prev.default:before {    /* fa-step-backward */\\n    content: \\\"\\\\f048\\\";\\n}\\ndiv.buttons > .button.next.default:before {    /* fa-step-forward */\\n    content: \\\"\\\\f051\\\";\\n}\\ndiv.buttons > .button.last.default:before {    /* fa-fast-forward */\\n    content: \\\"\\\\f050\\\";\\n}\\ndiv.buttons > .button.play.default:before {    /* fa-play-circle */\\n    content: \\\"\\\\f144\\\";\\n}\\ndiv.buttons > .button.stop.default:before {     /* fa-pause */\\n    content: \\\"\\\\f04c\\\";\\n}\\n\\ndiv.edit > .button.promoteVar.default:before { /* hand-o-up */\\n    content: \\\"\\\\f0a6\\\";\\n}\\ndiv.edit > .button.deleteMoves.default:before { /* scissors  */ \\n    content: \\\"\\\\f0c4\\\";\\n}\\n\\n.button.fa-times {\\n   color: red;\\n}\\n\\n.button.fa-times:hover {\\n    border: red 2px solid;\\n}\\n\\ntextarea.pgn {\\n    padding: 2px;\\n    border: 1px solid grey;\\n    width: 96%;\\n    height: 100px;\\n    font-family: monospace;\\n}\\n\\n/* Green buttons. */\\ndiv.buttons.green > .button, div.edit.green > .button {\\n    color: green;\\n    border: solid lightgrey 1px;\\n    border-radius: 4px;\\n}\\n/* Blue buttons. */\\ndiv.buttons.blue > .button, div.edit.blue > .button {\\n    color: blue;\\n    border: solid lightgrey 1px;\\n    border-radius: 4px;\\n}\\n\\n.ui-widget {\\n    font-size: 1em;\\n}\\n\\ndiv.commentRadio label {\\n    display: inline;\\n}\\ndiv.comment > textarea.comment {\\n    font-family: monospace;\\n    width: 96%;\\n    height: 50px;\\n    padding: 2px;\\n}\\n\\n.moves a {\\n    text-decoration: underline;\\n}\\n\\n.moves .move a.yellow {\\n    background-color: rgba(255, 255, 153, 1.0);\\n}\\n\\n.moves .move a {\\n    text-decoration: none;\\n    border: 1px solid transparent;\\n}\\n\\n.moves .move a:hover {\\n    border: 1px yellow dotted;\\n    background-color: rgba(255, 255, 153, 1.0);\\n    cursor: crosshair;\\n}\\n\\n.moves .move {\\n    font-size: 16px;\\n    font-family: Georgia, \\\"Bitstream Charter\\\", serif;;\\n    color: black;\\n    font-weight: 700;\\n    line-height: 24px;\\n}\\n\\n.moves .move.var {\\n    font-weight: 500;\\n}\\n\\n.moves .variation {\\n    font-size: 100%;\\n    display: block;\\n    padding: 5px;\\n}\\n.moves .variation:before {\\n    content: ' ( ';\\n}\\n\\n.moves .variation .variation:before {\\n    content: ' ( ';\\n}\\n\\n.moves .variation .variation {\\n    font-size: 90%;\\n    padding-left: 10px;\\n    padding-right: 10px;\\n}\\n\\n.moves .variation .variation:after {\\n    content: ' ) ';\\n}\\n\\n.moves .variation:after {\\n    content: ' ) ';\\n}\\n\\n.moves > .varblock .white:before {\\n    display: inline;\\n}\\n\\n.moves .move .comment {\\n    color: green;\\n    font-weight: 500;\\n}\\n\\n.moves .move .comment.timeTiny {\\n    font-weight: 300;\\n    font-size: 60%;\\n}\\n\\n.moves .move .comment.timeLarge {\\n}\\n\\n.moves .move .timeNormal {\\n    font-weight: 400;\\n    font-size: 80%;\\n}\\n\\n.moves .white:before {\\n    content: '\\\\A';\\n    display: inline-block;\\n}\\n\\n/* Pattern of the Chess.com similar */\\n/* board */\\n.chesscom.whole {\\n    /*    border: 2px solid #404040; */\\n    border: 2px gray solid;\\n    display: flex;\\n    flex-flow: row wrap;\\n}\\n\\n.chesscom .headers {\\n    font-family: \\\"Lucida Grande\\\", Verdana, Arial, \\\"Bitstream Vera Sans\\\", sans-serif;\\n    font-size: 18px;\\n/*    padding: 15px;*/\\n    background-color: #f3f3f3;\\n    font-weight: bold;\\n    flex: 1 100%;\\n}\\n\\n.chesscom .headers > .whiteHeader:before {\\n    content: \\\"\\\";\\n}\\n\\n.chesscom .headers > .whiteHeader {\\n    display: inline-block;\\n    padding-top: 10px;\\n    padding-left: 10px;\\n}\\n\\n.chesscom .headers > .blackHeader:before {\\n    content: \\\"  vs. \\\";\\n}\\n\\n.chesscom .headers > .blackHeader {\\n    display: inline-block;\\n    padding-top: 10px;\\n    padding-left: 10px;\\n}\\n.chesscom .headers > .restHeader {\\n    display: block;\\n    padding-left: 10px;\\n    padding-bottom: 10px;\\n    font-weight: 500;\\n    font-size: 80%;\\n}\\n\\n.chesscom .players {\\n    font-weight: 900;\\n}\\n\\n.chesscom .outerBoard {\\n    /* float: left; */\\n    width: 388px;\\n}\\n\\n/* .chesscom .movesScroller {\\n    padding: 3px 3px;\\n    font-size: 13px;\\n    font-family: \\\"Trebuchet MS\\\", Arial, sans-serif;\\n    font-weight: bold;\\n    border-right: 2px solid #f3f3f3;\\n    background: #ffffff;\\n    vertical-align: baseline;\\n    text-align: left;\\n    overflow: auto;\\n} */\\n\\n\\n.moves {\\n    /*  position: relative;\\n    overflow-y: auto;*/\\n    padding: 10px;\\n}\\n\\n.chesscom .endBoard {\\n    clear: both;\\n}\\n.chesscom .moves a {\\n    text-decoration: none;\\n}\\n\\n/**\\n  CHESSGROUND changes.\\n  */\\n \\n.cg-wrap.coords-inner {\\n    margin-bottom: 0px;\\n    margin-right: 0px;\\n}\\n.cg-wrap {\\n    margin-bottom: 15px;\\n    margin-right: 15px;\\n}\\n.cg-wrap.coords-inner coords.ranks {\\n    right: -2px;\\n}\\n.cg-wrap.coords-inner coords.files {\\n    bottom: 2px;\\n    left: 2px;\\n    text-align: left;\\n}\\n.cg-wrap coords.files {\\n    text-transform: none;\\n}\\n\\n/* board and colorMarker */\\n.boardAnd {\\n    /*\\n    display: grid;\\n    grid-template-columns: 400px 40px;\\n    */\\n}\\n\\n.board {\\n    /*order: 2;*/\\n}\\n\\n.colorMarker {\\n    width: 20px; height: 20px;\\n    border-color: black;\\n    border-width: 2px;\\n    border-style: double;\\n    margin: 10px;\\n    /*order: 1; */\\n}\\n\\n.colorMarker.circle {\\n    border-radius: 10px;\\n}\\n\\n.colorMarker.circle-big {\\n    border-radius: 20px;\\n    width: 40px; height: 40px;\\n}\\n\\n.colorMarker.circle-small {\\n    border-radius: 5px;\\n    width: 10px; height: 10px;\\n}\\n\\n.cm-black {\\n    background-color: black;\\n}\\n\\n.cm-white {\\n    background-color: white;\\n}\\n\\n.cm-big {\\n    width: 40px; height: 40px;   \\n}\\n\\n.cm-small {\\n    width: 10px; height: 10px;\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? Object(arguments[i]) : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import _typeof from '@babel/runtime/helpers/esm/typeof';\nimport _objectSpread from '@babel/runtime/helpers/esm/objectSpread';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray';\nimport _toArray from '@babel/runtime/helpers/esm/toArray';\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray';\n\nvar consoleLogger = {\n  type: 'logger',\n  log: function log(args) {\n    this.output('log', args);\n  },\n  warn: function warn(args) {\n    this.output('warn', args);\n  },\n  error: function error(args) {\n    this.output('error', args);\n  },\n  output: function output(type, args) {\n    var _console;\n\n    /* eslint no-console: 0 */\n    if (console && console[type]) (_console = console)[type].apply(_console, _toConsumableArray(args));\n  }\n};\n\nvar Logger =\n/*#__PURE__*/\nfunction () {\n  function Logger(concreteLogger) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Logger);\n\n    this.init(concreteLogger, options);\n  }\n\n  _createClass(Logger, [{\n    key: \"init\",\n    value: function init(concreteLogger) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.prefix = options.prefix || 'i18next:';\n      this.logger = concreteLogger || consoleLogger;\n      this.options = options;\n      this.debug = options.debug;\n    }\n  }, {\n    key: \"setDebug\",\n    value: function setDebug(bool) {\n      this.debug = bool;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this.forward(args, 'log', '', true);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return this.forward(args, 'warn', '', true);\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return this.forward(args, 'error', '');\n    }\n  }, {\n    key: \"deprecate\",\n    value: function deprecate() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n    }\n  }, {\n    key: \"forward\",\n    value: function forward(args, lvl, prefix, debugOnly) {\n      if (debugOnly && !this.debug) return null;\n      if (typeof args[0] === 'string') args[0] = \"\".concat(prefix).concat(this.prefix, \" \").concat(args[0]);\n      return this.logger[lvl](args);\n    }\n  }, {\n    key: \"create\",\n    value: function create(moduleName) {\n      return new Logger(this.logger, _objectSpread({}, {\n        prefix: \"\".concat(this.prefix, \":\").concat(moduleName, \":\")\n      }, this.options));\n    }\n  }]);\n\n  return Logger;\n}();\n\nvar baseLogger = new Logger();\n\nvar EventEmitter =\n/*#__PURE__*/\nfunction () {\n  function EventEmitter() {\n    _classCallCheck(this, EventEmitter);\n\n    this.observers = {};\n  }\n\n  _createClass(EventEmitter, [{\n    key: \"on\",\n    value: function on(events, listener) {\n      var _this = this;\n\n      events.split(' ').forEach(function (event) {\n        _this.observers[event] = _this.observers[event] || [];\n\n        _this.observers[event].push(listener);\n      });\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, listener) {\n      if (!this.observers[event]) return;\n\n      if (!listener) {\n        delete this.observers[event];\n        return;\n      }\n\n      this.observers[event] = this.observers[event].filter(function (l) {\n        return l !== listener;\n      });\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (this.observers[event]) {\n        var cloned = [].concat(this.observers[event]);\n        cloned.forEach(function (observer) {\n          observer.apply(void 0, args);\n        });\n      }\n\n      if (this.observers['*']) {\n        var _cloned = [].concat(this.observers['*']);\n\n        _cloned.forEach(function (observer) {\n          observer.apply(observer, [event].concat(args));\n        });\n      }\n    }\n  }]);\n\n  return EventEmitter;\n}();\n\n// http://lea.verou.me/2016/12/resolve-promises-externally-with-this-one-weird-trick/\nfunction defer() {\n  var res;\n  var rej;\n  var promise = new Promise(function (resolve, reject) {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n}\nfunction makeString(object) {\n  if (object == null) return '';\n  /* eslint prefer-template: 0 */\n\n  return '' + object;\n}\nfunction copy(a, s, t) {\n  a.forEach(function (m) {\n    if (s[m]) t[m] = s[m];\n  });\n}\n\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n\n  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n    var key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n    object = object[key];\n  }\n\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift())\n  };\n}\n\nfunction setPath(object, path, newValue) {\n  var _getLastOfPath = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath.obj,\n      k = _getLastOfPath.k;\n\n  obj[k] = newValue;\n}\nfunction pushPath(object, path, newValue, concat) {\n  var _getLastOfPath2 = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath2.obj,\n      k = _getLastOfPath2.k;\n\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\nfunction getPath(object, path) {\n  var _getLastOfPath3 = getLastOfPath(object, path),\n      obj = _getLastOfPath3.obj,\n      k = _getLastOfPath3.k;\n\n  if (!obj) return undefined;\n  return obj[k];\n}\nfunction getPathWithDefaults(data, defaultData, key) {\n  var value = getPath(data, key);\n\n  if (value !== undefined) {\n    return value;\n  } // Fallback to default values\n\n\n  return getPath(defaultData, key);\n}\nfunction deepExtend(target, source, overwrite) {\n  /* eslint no-restricted-syntax: 0 */\n  for (var prop in source) {\n    if (prop in target) {\n      // If we reached a leaf string in target or source then replace with source or skip depending on the 'overwrite' switch\n      if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {\n        if (overwrite) target[prop] = source[prop];\n      } else {\n        deepExtend(target[prop], source[prop], overwrite);\n      }\n    } else {\n      target[prop] = source[prop];\n    }\n  }\n\n  return target;\n}\nfunction regexEscape(str) {\n  /* eslint no-useless-escape: 0 */\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\n/* eslint-disable */\n\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\n/* eslint-enable */\n\nfunction escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, function (s) {\n      return _entityMap[s];\n    });\n  }\n\n  return data;\n}\nvar isIE10 = typeof window !== 'undefined' && window.navigator && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1;\n\nvar ResourceStore =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(ResourceStore, _EventEmitter);\n\n  function ResourceStore(data) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n\n    _classCallCheck(this, ResourceStore);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ResourceStore).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this)); // <=IE10 fix (unable to call parent constructor)\n    }\n\n    _this.data = data || {};\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    return _this;\n  }\n\n  _createClass(ResourceStore, [{\n    key: \"addNamespaces\",\n    value: function addNamespaces(ns) {\n      if (this.options.ns.indexOf(ns) < 0) {\n        this.options.ns.push(ns);\n      }\n    }\n  }, {\n    key: \"removeNamespaces\",\n    value: function removeNamespaces(ns) {\n      var index = this.options.ns.indexOf(ns);\n\n      if (index > -1) {\n        this.options.ns.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(lng, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var path = [lng, ns];\n      if (key && typeof key !== 'string') path = path.concat(key);\n      if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n      }\n\n      return getPath(this.data, path);\n    }\n  }, {\n    key: \"addResource\",\n    value: function addResource(lng, ns, key, value) {\n      var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n        silent: false\n      };\n      var keySeparator = this.options.keySeparator;\n      if (keySeparator === undefined) keySeparator = '.';\n      var path = [lng, ns];\n      if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        value = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      setPath(this.data, path, value);\n      if (!options.silent) this.emit('added', lng, ns, key, value);\n    }\n  }, {\n    key: \"addResources\",\n    value: function addResources(lng, ns, resources) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n        silent: false\n      };\n\n      /* eslint no-restricted-syntax: 0 */\n      for (var m in resources) {\n        if (typeof resources[m] === 'string' || Object.prototype.toString.apply(resources[m]) === '[object Array]') this.addResource(lng, ns, m, resources[m], {\n          silent: true\n        });\n      }\n\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"addResourceBundle\",\n    value: function addResourceBundle(lng, ns, resources, deep, overwrite) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n        silent: false\n      };\n      var path = [lng, ns];\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        deep = resources;\n        resources = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      var pack = getPath(this.data, path) || {};\n\n      if (deep) {\n        deepExtend(pack, resources, overwrite);\n      } else {\n        pack = _objectSpread({}, pack, resources);\n      }\n\n      setPath(this.data, path, pack);\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"removeResourceBundle\",\n    value: function removeResourceBundle(lng, ns) {\n      if (this.hasResourceBundle(lng, ns)) {\n        delete this.data[lng][ns];\n      }\n\n      this.removeNamespaces(ns);\n      this.emit('removed', lng, ns);\n    }\n  }, {\n    key: \"hasResourceBundle\",\n    value: function hasResourceBundle(lng, ns) {\n      return this.getResource(lng, ns) !== undefined;\n    }\n  }, {\n    key: \"getResourceBundle\",\n    value: function getResourceBundle(lng, ns) {\n      if (!ns) ns = this.options.defaultNS; // COMPATIBILITY: remove extend in v2.1.0\n\n      if (this.options.compatibilityAPI === 'v1') return _objectSpread({}, {}, this.getResource(lng, ns));\n      return this.getResource(lng, ns);\n    }\n  }, {\n    key: \"getDataByLanguage\",\n    value: function getDataByLanguage(lng) {\n      return this.data[lng];\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.data;\n    }\n  }]);\n\n  return ResourceStore;\n}(EventEmitter);\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor: function addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle: function handle(processors, value, key, options, translator) {\n    var _this = this;\n\n    processors.forEach(function (processor) {\n      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nvar checkedLoadedFor = {};\n\nvar Translator =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(Translator, _EventEmitter);\n\n  function Translator(services) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Translator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Translator).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this)); // <=IE10 fix (unable to call parent constructor)\n    }\n\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, _assertThisInitialized(_this));\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    _this.logger = baseLogger.create('translator');\n    return _this;\n  }\n\n  _createClass(Translator, [{\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng) {\n      if (lng) this.language = lng;\n    }\n  }, {\n    key: \"exists\",\n    value: function exists(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n      var resolved = this.resolve(key, options);\n      return resolved && resolved.res !== undefined;\n    }\n  }, {\n    key: \"extractFromKey\",\n    value: function extractFromKey(key, options) {\n      var nsSeparator = options.nsSeparator || this.options.nsSeparator;\n      if (nsSeparator === undefined) nsSeparator = ':';\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var namespaces = options.ns || this.options.defaultNS;\n\n      if (nsSeparator && key.indexOf(nsSeparator) > -1) {\n        var parts = key.split(nsSeparator);\n        if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n        key = parts.join(keySeparator);\n      }\n\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      return {\n        key: key,\n        namespaces: namespaces\n      };\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(keys, options) {\n      var _this2 = this;\n\n      if (_typeof(options) !== 'object' && this.options.overloadTranslationOptionHandler) {\n        /* eslint prefer-rest-params: 0 */\n        options = this.options.overloadTranslationOptionHandler(arguments);\n      }\n\n      if (!options) options = {}; // non valid keys handling\n\n      if (keys === undefined || keys === null\n      /* || keys === ''*/\n      ) return '';\n      if (!Array.isArray(keys)) keys = [String(keys)]; // separators\n\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator; // get namespace(s)\n\n      var _this$extractFromKey = this.extractFromKey(keys[keys.length - 1], options),\n          key = _this$extractFromKey.key,\n          namespaces = _this$extractFromKey.namespaces;\n\n      var namespace = namespaces[namespaces.length - 1]; // return key on CIMode\n\n      var lng = options.lng || this.language;\n      var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n\n      if (lng && lng.toLowerCase() === 'cimode') {\n        if (appendNamespaceToCIMode) {\n          var nsSeparator = options.nsSeparator || this.options.nsSeparator;\n          return namespace + nsSeparator + key;\n        }\n\n        return key;\n      } // resolve from store\n\n\n      var resolved = this.resolve(keys, options);\n      var res = resolved && resolved.res;\n      var resUsedKey = resolved && resolved.usedKey || key;\n      var resExactUsedKey = resolved && resolved.exactUsedKey || key;\n      var resType = Object.prototype.toString.apply(res);\n      var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n      var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays; // object\n\n      var handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n      var handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n\n      if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === 'string' && resType === '[object Array]')) {\n        if (!options.returnObjects && !this.options.returnObjects) {\n          this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n          return this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, options) : \"key '\".concat(key, \" (\").concat(this.language, \")' returned an object instead of string.\");\n        } // if we got a separator we loop over children - else we just return object as is\n        // as having it set to false means no hierarchy so no lookup for nested values\n\n\n        if (keySeparator) {\n          var resTypeIsArray = resType === '[object Array]';\n          var copy$$1 = resTypeIsArray ? [] : {}; // apply child translation on a copy\n\n          /* eslint no-restricted-syntax: 0 */\n\n          var newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n\n          for (var m in res) {\n            if (Object.prototype.hasOwnProperty.call(res, m)) {\n              var deepKey = \"\".concat(newKeyToUse).concat(keySeparator).concat(m);\n              copy$$1[m] = this.translate(deepKey, _objectSpread({}, options, {\n                joinArrays: false,\n                ns: namespaces\n              }));\n              if (copy$$1[m] === deepKey) copy$$1[m] = res[m]; // if nothing found use orginal value as fallback\n            }\n          }\n\n          res = copy$$1;\n        }\n      } else if (handleAsObjectInI18nFormat && typeof joinArrays === 'string' && resType === '[object Array]') {\n        // array special treatment\n        res = res.join(joinArrays);\n        if (res) res = this.extendTranslation(res, keys, options);\n      } else {\n        // string, empty or null\n        var usedDefault = false;\n        var usedKey = false; // fallback value\n\n        if (!this.isValidLookup(res) && options.defaultValue !== undefined) {\n          usedDefault = true;\n\n          if (options.count !== undefined) {\n            var suffix = this.pluralResolver.getSuffix(lng, options.count);\n            res = options[\"defaultValue\".concat(suffix)];\n          }\n\n          if (!res) res = options.defaultValue;\n        }\n\n        if (!this.isValidLookup(res)) {\n          usedKey = true;\n          res = key;\n        } // save missing\n\n\n        var updateMissing = options.defaultValue && options.defaultValue !== res && this.options.updateMissing;\n\n        if (usedKey || usedDefault || updateMissing) {\n          this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? options.defaultValue : res);\n          var lngs = [];\n          var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n\n          if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n            for (var i = 0; i < fallbackLngs.length; i++) {\n              lngs.push(fallbackLngs[i]);\n            }\n          } else if (this.options.saveMissingTo === 'all') {\n            lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n          } else {\n            lngs.push(options.lng || this.language);\n          }\n\n          var send = function send(l, k) {\n            if (_this2.options.missingKeyHandler) {\n              _this2.options.missingKeyHandler(l, namespace, k, updateMissing ? options.defaultValue : res, updateMissing, options);\n            } else if (_this2.backendConnector && _this2.backendConnector.saveMissing) {\n              _this2.backendConnector.saveMissing(l, namespace, k, updateMissing ? options.defaultValue : res, updateMissing, options);\n            }\n\n            _this2.emit('missingKey', l, namespace, k, res);\n          };\n\n          if (this.options.saveMissing) {\n            var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n\n            if (this.options.saveMissingPlurals && needsPluralHandling) {\n              lngs.forEach(function (l) {\n                var plurals = _this2.pluralResolver.getPluralFormsOfKey(l, key);\n\n                plurals.forEach(function (p) {\n                  return send([l], p);\n                });\n              });\n            } else {\n              send(lngs, key);\n            }\n          }\n        } // extend\n\n\n        res = this.extendTranslation(res, keys, options, resolved); // append namespace if still key\n\n        if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = \"\".concat(namespace, \":\").concat(key); // parseMissingKeyHandler\n\n        if (usedKey && this.options.parseMissingKeyHandler) res = this.options.parseMissingKeyHandler(res);\n      } // return\n\n\n      return res;\n    }\n  }, {\n    key: \"extendTranslation\",\n    value: function extendTranslation(res, key, options, resolved) {\n      var _this3 = this;\n\n      if (this.i18nFormat && this.i18nFormat.parse) {\n        res = this.i18nFormat.parse(res, options, resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n          resolved: resolved\n        });\n      } else if (!options.skipInterpolation) {\n        // i18next.parsing\n        if (options.interpolation) this.interpolator.init(_objectSpread({}, options, {\n          interpolation: _objectSpread({}, this.options.interpolation, options.interpolation)\n        })); // interpolate\n\n        var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n        if (this.options.interpolation.defaultVariables) data = _objectSpread({}, this.options.interpolation.defaultVariables, data);\n        res = this.interpolator.interpolate(res, data, options.lng || this.language, options); // nesting\n\n        if (options.nest !== false) res = this.interpolator.nest(res, function () {\n          return _this3.translate.apply(_this3, arguments);\n        }, options);\n        if (options.interpolation) this.interpolator.reset();\n      } // post process\n\n\n      var postProcess = options.postProcess || this.options.postProcess;\n      var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n\n      if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n        res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? _objectSpread({\n          i18nResolved: resolved\n        }, options) : options, this);\n      }\n\n      return res;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(keys) {\n      var _this4 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var found;\n      var usedKey; // plain key\n\n      var exactUsedKey; // key with context / plural\n\n      var usedLng;\n      var usedNS;\n      if (typeof keys === 'string') keys = [keys]; // forEach possible key\n\n      keys.forEach(function (k) {\n        if (_this4.isValidLookup(found)) return;\n\n        var extracted = _this4.extractFromKey(k, options);\n\n        var key = extracted.key;\n        usedKey = key;\n        var namespaces = extracted.namespaces;\n        if (_this4.options.fallbackNS) namespaces = namespaces.concat(_this4.options.fallbackNS);\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var needsContextHandling = options.context !== undefined && typeof options.context === 'string' && options.context !== '';\n        var codes = options.lngs ? options.lngs : _this4.languageUtils.toResolveHierarchy(options.lng || _this4.language, options.fallbackLng);\n        namespaces.forEach(function (ns) {\n          if (_this4.isValidLookup(found)) return;\n          usedNS = ns;\n\n          if (!checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] && _this4.utils && _this4.utils.hasLoadedNamespace && !_this4.utils.hasLoadedNamespace(usedNS)) {\n            checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] = true;\n\n            _this4.logger.warn(\"key \\\"\".concat(usedKey, \"\\\" for namespace \\\"\").concat(usedNS, \"\\\" for languages \\\"\").concat(codes.join(', '), \"\\\" won't get resolved as namespace was not yet loaded\"), 'This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n          }\n\n          codes.forEach(function (code) {\n            if (_this4.isValidLookup(found)) return;\n            usedLng = code;\n            var finalKey = key;\n            var finalKeys = [finalKey];\n\n            if (_this4.i18nFormat && _this4.i18nFormat.addLookupKeys) {\n              _this4.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n            } else {\n              var pluralSuffix;\n              if (needsPluralHandling) pluralSuffix = _this4.pluralResolver.getSuffix(code, options.count); // fallback for plural if context not found\n\n              if (needsPluralHandling && needsContextHandling) finalKeys.push(finalKey + pluralSuffix); // get key for context if needed\n\n              if (needsContextHandling) finalKeys.push(finalKey += \"\".concat(_this4.options.contextSeparator).concat(options.context)); // get key for plural if needed\n\n              if (needsPluralHandling) finalKeys.push(finalKey += pluralSuffix);\n            } // iterate over finalKeys starting with most specific pluralkey (-> contextkey only) -> singularkey only\n\n\n            var possibleKey;\n            /* eslint no-cond-assign: 0 */\n\n            while (possibleKey = finalKeys.pop()) {\n              if (!_this4.isValidLookup(found)) {\n                exactUsedKey = possibleKey;\n                found = _this4.getResource(code, ns, possibleKey, options);\n              }\n            }\n          });\n        });\n      });\n      return {\n        res: found,\n        usedKey: usedKey,\n        exactUsedKey: exactUsedKey,\n        usedLng: usedLng,\n        usedNS: usedNS\n      };\n    }\n  }, {\n    key: \"isValidLookup\",\n    value: function isValidLookup(res) {\n      return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(code, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n      return this.resourceStore.getResource(code, ns, key, options);\n    }\n  }]);\n\n  return Translator;\n}(EventEmitter);\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nvar LanguageUtil =\n/*#__PURE__*/\nfunction () {\n  function LanguageUtil(options) {\n    _classCallCheck(this, LanguageUtil);\n\n    this.options = options;\n    this.whitelist = this.options.whitelist || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n\n  _createClass(LanguageUtil, [{\n    key: \"getScriptPartFromCode\",\n    value: function getScriptPartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return null;\n      var p = code.split('-');\n      if (p.length === 2) return null;\n      p.pop();\n      return this.formatLanguageCode(p.join('-'));\n    }\n  }, {\n    key: \"getLanguagePartFromCode\",\n    value: function getLanguagePartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return code;\n      var p = code.split('-');\n      return this.formatLanguageCode(p[0]);\n    }\n  }, {\n    key: \"formatLanguageCode\",\n    value: function formatLanguageCode(code) {\n      // http://www.iana.org/assignments/language-tags/language-tags.xhtml\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n        var p = code.split('-');\n\n        if (this.options.lowerCaseLng) {\n          p = p.map(function (part) {\n            return part.toLowerCase();\n          });\n        } else if (p.length === 2) {\n          p[0] = p[0].toLowerCase();\n          p[1] = p[1].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        } else if (p.length === 3) {\n          p[0] = p[0].toLowerCase(); // if lenght 2 guess it's a country\n\n          if (p[1].length === 2) p[1] = p[1].toUpperCase();\n          if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n          if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n        }\n\n        return p.join('-');\n      }\n\n      return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n    }\n  }, {\n    key: \"isWhitelisted\",\n    value: function isWhitelisted(code) {\n      if (this.options.load === 'languageOnly' || this.options.nonExplicitWhitelist) {\n        code = this.getLanguagePartFromCode(code);\n      }\n\n      return !this.whitelist || !this.whitelist.length || this.whitelist.indexOf(code) > -1;\n    }\n  }, {\n    key: \"getFallbackCodes\",\n    value: function getFallbackCodes(fallbacks, code) {\n      if (!fallbacks) return [];\n      if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n      if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n      if (!code) return fallbacks[\"default\"] || []; // asume we have an object defining fallbacks\n\n      var found = fallbacks[code];\n      if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n      if (!found) found = fallbacks[this.formatLanguageCode(code)];\n      if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n      if (!found) found = fallbacks[\"default\"];\n      return found || [];\n    }\n  }, {\n    key: \"toResolveHierarchy\",\n    value: function toResolveHierarchy(code, fallbackCode) {\n      var _this = this;\n\n      var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n      var codes = [];\n\n      var addCode = function addCode(c) {\n        if (!c) return;\n\n        if (_this.isWhitelisted(c)) {\n          codes.push(c);\n        } else {\n          _this.logger.warn(\"rejecting non-whitelisted language code: \".concat(c));\n        }\n      };\n\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n        if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n        if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n      } else if (typeof code === 'string') {\n        addCode(this.formatLanguageCode(code));\n      }\n\n      fallbackCodes.forEach(function (fc) {\n        if (codes.indexOf(fc) < 0) addCode(_this.formatLanguageCode(fc));\n      });\n      return codes;\n    }\n  }]);\n\n  return LanguageUtil;\n}();\n\n/* eslint-disable */\n\nvar sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'id', 'ja', 'jbo', 'ka', 'kk', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nvar _rulesPluralsTypes = {\n  1: function _(n) {\n    return Number(n > 1);\n  },\n  2: function _(n) {\n    return Number(n != 1);\n  },\n  3: function _(n) {\n    return 0;\n  },\n  4: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  5: function _(n) {\n    return Number(n === 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n  },\n  6: function _(n) {\n    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n  },\n  7: function _(n) {\n    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  8: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n  },\n  9: function _(n) {\n    return Number(n >= 2);\n  },\n  10: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n  },\n  11: function _(n) {\n    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n  },\n  12: function _(n) {\n    return Number(n % 10 != 1 || n % 100 == 11);\n  },\n  13: function _(n) {\n    return Number(n !== 0);\n  },\n  14: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n  },\n  15: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  16: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n  },\n  17: function _(n) {\n    return Number(n == 1 || n % 10 == 1 ? 0 : 1);\n  },\n  18: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n  },\n  19: function _(n) {\n    return Number(n == 1 ? 0 : n === 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n  },\n  20: function _(n) {\n    return Number(n == 1 ? 0 : n === 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n  },\n  21: function _(n) {\n    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n  },\n  22: function _(n) {\n    return Number(n === 1 ? 0 : n === 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3);\n  }\n};\n/* eslint-enable */\n\nfunction createRules() {\n  var rules = {};\n  sets.forEach(function (set) {\n    set.lngs.forEach(function (l) {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\n\nvar PluralResolver =\n/*#__PURE__*/\nfunction () {\n  function PluralResolver(languageUtils) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, PluralResolver);\n\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n    this.rules = createRules();\n  }\n\n  _createClass(PluralResolver, [{\n    key: \"addRule\",\n    value: function addRule(lng, obj) {\n      this.rules[lng] = obj;\n    }\n  }, {\n    key: \"getRule\",\n    value: function getRule(code) {\n      return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n    }\n  }, {\n    key: \"needsPlural\",\n    value: function needsPlural(code) {\n      var rule = this.getRule(code);\n      return rule && rule.numbers.length > 1;\n    }\n  }, {\n    key: \"getPluralFormsOfKey\",\n    value: function getPluralFormsOfKey(code, key) {\n      var _this = this;\n\n      var ret = [];\n      var rule = this.getRule(code);\n      if (!rule) return ret;\n      rule.numbers.forEach(function (n) {\n        var suffix = _this.getSuffix(code, n);\n\n        ret.push(\"\".concat(key).concat(suffix));\n      });\n      return ret;\n    }\n  }, {\n    key: \"getSuffix\",\n    value: function getSuffix(code, count) {\n      var _this2 = this;\n\n      var rule = this.getRule(code);\n\n      if (rule) {\n        // if (rule.numbers.length === 1) return ''; // only singular\n        var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n        var suffix = rule.numbers[idx]; // special treatment for lngs only having singular and plural\n\n        if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n          if (suffix === 2) {\n            suffix = 'plural';\n          } else if (suffix === 1) {\n            suffix = '';\n          }\n        }\n\n        var returnSuffix = function returnSuffix() {\n          return _this2.options.prepend && suffix.toString() ? _this2.options.prepend + suffix.toString() : suffix.toString();\n        }; // COMPATIBILITY JSON\n        // v1\n\n\n        if (this.options.compatibilityJSON === 'v1') {\n          if (suffix === 1) return '';\n          if (typeof suffix === 'number') return \"_plural_\".concat(suffix.toString());\n          return returnSuffix();\n        } else if (\n        /* v2 */\n        this.options.compatibilityJSON === 'v2') {\n          return returnSuffix();\n        } else if (\n        /* v3 - gettext index */\n        this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n          return returnSuffix();\n        }\n\n        return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n      }\n\n      this.logger.warn(\"no plural rule found for: \".concat(code));\n      return '';\n    }\n  }]);\n\n  return PluralResolver;\n}();\n\nvar Interpolator =\n/*#__PURE__*/\nfunction () {\n  function Interpolator() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Interpolator);\n\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n\n    this.format = options.interpolation && options.interpolation.format || function (value) {\n      return value;\n    };\n\n    this.init(options);\n  }\n  /* eslint no-param-reassign: 0 */\n\n\n  _createClass(Interpolator, [{\n    key: \"init\",\n    value: function init() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!options.interpolation) options.interpolation = {\n        escapeValue: true\n      };\n      var iOpts = options.interpolation;\n      this.escape = iOpts.escape !== undefined ? iOpts.escape : escape;\n      this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n      this.useRawValueToEscape = iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n      this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n      this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n      this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n      this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n      this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');\n      this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');\n      this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator ? iOpts.nestingOptionsSeparator : iOpts.nestingOptionsSeparator || ',';\n      this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n      this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false; // the regexp\n\n      this.resetRegExp();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      if (this.options) this.init(this.options);\n    }\n  }, {\n    key: \"resetRegExp\",\n    value: function resetRegExp() {\n      // the regexp\n      var regexpStr = \"\".concat(this.prefix, \"(.+?)\").concat(this.suffix);\n      this.regexp = new RegExp(regexpStr, 'g');\n      var regexpUnescapeStr = \"\".concat(this.prefix).concat(this.unescapePrefix, \"(.+?)\").concat(this.unescapeSuffix).concat(this.suffix);\n      this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n      var nestingRegexpStr = \"\".concat(this.nestingPrefix, \"(.+?)\").concat(this.nestingSuffix);\n      this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n    }\n  }, {\n    key: \"interpolate\",\n    value: function interpolate(str, data, lng, options) {\n      var _this = this;\n\n      var match;\n      var value;\n      var replaces;\n      var defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n\n      function regexSafe(val) {\n        return val.replace(/\\$/g, '$$$$');\n      }\n\n      var handleFormat = function handleFormat(key) {\n        if (key.indexOf(_this.formatSeparator) < 0) {\n          var path = getPathWithDefaults(data, defaultData, key);\n          return _this.alwaysFormat ? _this.format(path, undefined, lng) : path;\n        }\n\n        var p = key.split(_this.formatSeparator);\n        var k = p.shift().trim();\n        var f = p.join(_this.formatSeparator).trim();\n        return _this.format(getPathWithDefaults(data, defaultData, k), f, lng, options);\n      };\n\n      this.resetRegExp();\n      var missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n      replaces = 0; // unescape if has unescapePrefix/Suffix\n\n      /* eslint no-cond-assign: 0 */\n\n      while (match = this.regexpUnescape.exec(str)) {\n        value = handleFormat(match[1].trim());\n\n        if (value === undefined) {\n          if (typeof missingInterpolationHandler === 'function') {\n            var temp = missingInterpolationHandler(str, match, options);\n            value = typeof temp === 'string' ? temp : '';\n          } else {\n            this.logger.warn(\"missed to pass in variable \".concat(match[1], \" for interpolating \").concat(str));\n            value = '';\n          }\n        } else if (typeof value !== 'string' && !this.useRawValueToEscape) {\n          value = makeString(value);\n        }\n\n        str = str.replace(match[0], regexSafe(value));\n        this.regexpUnescape.lastIndex = 0;\n        replaces++;\n\n        if (replaces >= this.maxReplaces) {\n          break;\n        }\n      }\n\n      replaces = 0; // regular escape on demand\n\n      while (match = this.regexp.exec(str)) {\n        value = handleFormat(match[1].trim());\n\n        if (value === undefined) {\n          if (typeof missingInterpolationHandler === 'function') {\n            var _temp = missingInterpolationHandler(str, match, options);\n\n            value = typeof _temp === 'string' ? _temp : '';\n          } else {\n            this.logger.warn(\"missed to pass in variable \".concat(match[1], \" for interpolating \").concat(str));\n            value = '';\n          }\n        } else if (typeof value !== 'string' && !this.useRawValueToEscape) {\n          value = makeString(value);\n        }\n\n        value = this.escapeValue ? regexSafe(this.escape(value)) : regexSafe(value);\n        str = str.replace(match[0], value);\n        this.regexp.lastIndex = 0;\n        replaces++;\n\n        if (replaces >= this.maxReplaces) {\n          break;\n        }\n      }\n\n      return str;\n    }\n  }, {\n    key: \"nest\",\n    value: function nest(str, fc) {\n      var _this2 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var match;\n      var value;\n\n      var clonedOptions = _objectSpread({}, options);\n\n      clonedOptions.applyPostProcessor = false; // avoid post processing on nested lookup\n\n      delete clonedOptions.defaultValue; // assert we do not get a endless loop on interpolating defaultValue again and again\n      // if value is something like \"myKey\": \"lorem $(anotherKey, { \"count\": {{aValueInOptions}} })\"\n\n      function handleHasOptions(key, inheritedOptions) {\n        var sep = this.nestingOptionsSeparator;\n        if (key.indexOf(sep) < 0) return key;\n        var c = key.split(new RegExp(\"\".concat(sep, \"[ ]*{\")));\n        var optionsString = \"{\".concat(c[1]);\n        key = c[0];\n        optionsString = this.interpolate(optionsString, clonedOptions);\n        optionsString = optionsString.replace(/'/g, '\"');\n\n        try {\n          clonedOptions = JSON.parse(optionsString);\n          if (inheritedOptions) clonedOptions = _objectSpread({}, inheritedOptions, clonedOptions);\n        } catch (e) {\n          this.logger.warn(\"failed parsing options string in nesting for key \".concat(key), e);\n          return \"\".concat(key).concat(sep).concat(optionsString);\n        } // assert we do not get a endless loop on interpolating defaultValue again and again\n\n\n        delete clonedOptions.defaultValue;\n        return key;\n      } // regular escape on demand\n\n\n      while (match = this.nestingRegexp.exec(str)) {\n        var formatters = [];\n        /**\n         * If there is more than one parameter (contains the format separator). E.g.:\n         *   - t(a, b)\n         *   - t(a, b, c)\n         *\n         * And those parameters are not dynamic values (parameters do not include curly braces). E.g.:\n         *   - Not t(a, { \"key\": \"{{variable}}\" })\n         *   - Not t(a, b, {\"keyA\": \"valueA\", \"keyB\": \"valueB\"})\n         */\n\n        var doReduce = false;\n\n        if (match[0].includes(this.formatSeparator) && !/{.*}/.test(match[1])) {\n          var _match$1$split$map = match[1].split(this.formatSeparator).map(function (elem) {\n            return elem.trim();\n          });\n\n          var _match$1$split$map2 = _toArray(_match$1$split$map);\n\n          match[1] = _match$1$split$map2[0];\n          formatters = _match$1$split$map2.slice(1);\n          doReduce = true;\n        }\n\n        value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions); // is only the nesting key (key1 = '$(key2)') return the value without stringify\n\n        if (value && match[0] === str && typeof value !== 'string') return value; // no string to include or empty\n\n        if (typeof value !== 'string') value = makeString(value);\n\n        if (!value) {\n          this.logger.warn(\"missed to resolve \".concat(match[1], \" for nesting \").concat(str));\n          value = '';\n        }\n\n        if (doReduce) {\n          value = formatters.reduce(function (v, f) {\n            return _this2.format(v, f, options.lng, options);\n          }, value.trim());\n        } // Nested keys should not be escaped by default #854\n        // value = this.escapeValue ? regexSafe(utils.escape(value)) : regexSafe(value);\n\n\n        str = str.replace(match[0], value);\n        this.regexp.lastIndex = 0;\n      }\n\n      return str;\n    }\n  }]);\n\n  return Interpolator;\n}();\n\nfunction remove(arr, what) {\n  var found = arr.indexOf(what);\n\n  while (found !== -1) {\n    arr.splice(found, 1);\n    found = arr.indexOf(what);\n  }\n}\n\nvar Connector =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(Connector, _EventEmitter);\n\n  function Connector(backend, store, services) {\n    var _this;\n\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, Connector);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Connector).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this)); // <=IE10 fix (unable to call parent constructor)\n    }\n\n    _this.backend = backend;\n    _this.store = store;\n    _this.services = services;\n    _this.languageUtils = services.languageUtils;\n    _this.options = options;\n    _this.logger = baseLogger.create('backendConnector');\n    _this.state = {};\n    _this.queue = [];\n\n    if (_this.backend && _this.backend.init) {\n      _this.backend.init(services, options.backend, options);\n    }\n\n    return _this;\n  }\n\n  _createClass(Connector, [{\n    key: \"queueLoad\",\n    value: function queueLoad(languages, namespaces, options, callback) {\n      var _this2 = this;\n\n      // find what needs to be loaded\n      var toLoad = [];\n      var pending = [];\n      var toLoadLanguages = [];\n      var toLoadNamespaces = [];\n      languages.forEach(function (lng) {\n        var hasAllNamespaces = true;\n        namespaces.forEach(function (ns) {\n          var name = \"\".concat(lng, \"|\").concat(ns);\n\n          if (!options.reload && _this2.store.hasResourceBundle(lng, ns)) {\n            _this2.state[name] = 2; // loaded\n          } else if (_this2.state[name] < 0) ; else if (_this2.state[name] === 1) {\n            if (pending.indexOf(name) < 0) pending.push(name);\n          } else {\n            _this2.state[name] = 1; // pending\n\n            hasAllNamespaces = false;\n            if (pending.indexOf(name) < 0) pending.push(name);\n            if (toLoad.indexOf(name) < 0) toLoad.push(name);\n            if (toLoadNamespaces.indexOf(ns) < 0) toLoadNamespaces.push(ns);\n          }\n        });\n        if (!hasAllNamespaces) toLoadLanguages.push(lng);\n      });\n\n      if (toLoad.length || pending.length) {\n        this.queue.push({\n          pending: pending,\n          loaded: {},\n          errors: [],\n          callback: callback\n        });\n      }\n\n      return {\n        toLoad: toLoad,\n        pending: pending,\n        toLoadLanguages: toLoadLanguages,\n        toLoadNamespaces: toLoadNamespaces\n      };\n    }\n  }, {\n    key: \"loaded\",\n    value: function loaded(name, err, data) {\n      var _name$split = name.split('|'),\n          _name$split2 = _slicedToArray(_name$split, 2),\n          lng = _name$split2[0],\n          ns = _name$split2[1];\n\n      if (err) this.emit('failedLoading', lng, ns, err);\n\n      if (data) {\n        this.store.addResourceBundle(lng, ns, data);\n      } // set loaded\n\n\n      this.state[name] = err ? -1 : 2; // consolidated loading done in this run - only emit once for a loaded namespace\n\n      var loaded = {}; // callback if ready\n\n      this.queue.forEach(function (q) {\n        pushPath(q.loaded, [lng], ns);\n        remove(q.pending, name);\n        if (err) q.errors.push(err);\n\n        if (q.pending.length === 0 && !q.done) {\n          // only do once per loaded -> this.emit('loaded', q.loaded);\n          Object.keys(q.loaded).forEach(function (l) {\n            if (!loaded[l]) loaded[l] = [];\n\n            if (q.loaded[l].length) {\n              q.loaded[l].forEach(function (ns) {\n                if (loaded[l].indexOf(ns) < 0) loaded[l].push(ns);\n              });\n            }\n          });\n          /* eslint no-param-reassign: 0 */\n\n          q.done = true;\n\n          if (q.errors.length) {\n            q.callback(q.errors);\n          } else {\n            q.callback();\n          }\n        }\n      }); // emit consolidated loaded event\n\n      this.emit('loaded', loaded); // remove done load requests\n\n      this.queue = this.queue.filter(function (q) {\n        return !q.done;\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(lng, ns, fcName) {\n      var _this3 = this;\n\n      var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 350;\n      var callback = arguments.length > 5 ? arguments[5] : undefined;\n      if (!lng.length) return callback(null, {}); // noting to load\n\n      return this.backend[fcName](lng, ns, function (err, data) {\n        if (err && data\n        /* = retryFlag */\n        && tried < 5) {\n          setTimeout(function () {\n            _this3.read.call(_this3, lng, ns, fcName, tried + 1, wait * 2, callback);\n          }, wait);\n          return;\n        }\n\n        callback(err, data);\n      });\n    }\n    /* eslint consistent-return: 0 */\n\n  }, {\n    key: \"prepareLoading\",\n    value: function prepareLoading(languages, namespaces) {\n      var _this4 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = arguments.length > 3 ? arguments[3] : undefined;\n\n      if (!this.backend) {\n        this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n        return callback && callback();\n      }\n\n      if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      var toLoad = this.queueLoad(languages, namespaces, options, callback);\n\n      if (!toLoad.toLoad.length) {\n        if (!toLoad.pending.length) callback(); // nothing to load and no pendings...callback now\n\n        return null; // pendings will trigger callback\n      }\n\n      toLoad.toLoad.forEach(function (name) {\n        _this4.loadOne(name);\n      });\n    }\n  }, {\n    key: \"load\",\n    value: function load(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {}, callback);\n    }\n  }, {\n    key: \"reload\",\n    value: function reload(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {\n        reload: true\n      }, callback);\n    }\n  }, {\n    key: \"loadOne\",\n    value: function loadOne(name) {\n      var _this5 = this;\n\n      var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n      var _name$split3 = name.split('|'),\n          _name$split4 = _slicedToArray(_name$split3, 2),\n          lng = _name$split4[0],\n          ns = _name$split4[1];\n\n      this.read(lng, ns, 'read', undefined, undefined, function (err, data) {\n        if (err) _this5.logger.warn(\"\".concat(prefix, \"loading namespace \").concat(ns, \" for language \").concat(lng, \" failed\"), err);\n        if (!err && data) _this5.logger.log(\"\".concat(prefix, \"loaded namespace \").concat(ns, \" for language \").concat(lng), data);\n\n        _this5.loaded(name, err, data);\n      });\n    }\n  }, {\n    key: \"saveMissing\",\n    value: function saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n\n      if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n        this.logger.warn(\"did not save key \\\"\".concat(key, \"\\\" for namespace \\\"\").concat(namespace, \"\\\" as the namespace was not yet loaded\"), 'This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        return;\n      } // ignore non valid keys\n\n\n      if (key === undefined || key === null || key === '') return;\n\n      if (this.backend && this.backend.create) {\n        this.backend.create(languages, namespace, key, fallbackValue, null\n        /* unused callback */\n        , _objectSpread({}, options, {\n          isUpdate: isUpdate\n        }));\n      } // write to store to avoid resending\n\n\n      if (!languages || !languages[0]) return;\n      this.store.addResource(languages[0], namespace, key, fallbackValue);\n    }\n  }]);\n\n  return Connector;\n}(EventEmitter);\n\nfunction get() {\n  return {\n    debug: false,\n    initImmediate: true,\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false,\n    // string or array of namespaces\n    whitelist: false,\n    // array with whitelisted languages\n    nonExplicitWhitelist: false,\n    load: 'all',\n    // | currentOnly | languageOnly\n    preload: false,\n    // array with preload languages\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n    partialBundledLanguages: false,\n    // allow bundling certain languages that are not remotely fetched\n    saveMissing: false,\n    // enable to send missing values\n    updateMissing: false,\n    // enable to update default values if different from translated value (only useful on initial development, or when keeping code as source of truth)\n    saveMissingTo: 'fallback',\n    // 'current' || 'all'\n    saveMissingPlurals: true,\n    // will save all forms not only singular key\n    missingKeyHandler: false,\n    // function(lng, ns, key, fallbackValue) -> override if prefer on handling\n    missingInterpolationHandler: false,\n    // function(str, match)\n    postProcess: false,\n    // string or array of postProcessor names\n    postProcessPassResolved: false,\n    // pass resolved object into 'options.i18nResolved' for postprocessor\n    returnNull: true,\n    // allows null value as valid translation\n    returnEmptyString: true,\n    // allows empty string value as valid translation\n    returnObjects: false,\n    joinArrays: false,\n    // or string to join array\n    returnedObjectHandler: false,\n    // function(key, value, options) triggered if key returns object but returnObjects is set to false\n    parseMissingKeyHandler: false,\n    // function(key) parsed a key that was not found in t() before returning\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      var ret = {};\n      if (_typeof(args[1]) === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n\n      if (_typeof(args[2]) === 'object' || _typeof(args[3]) === 'object') {\n        var options = args[3] || args[2];\n        Object.keys(options).forEach(function (key) {\n          ret[key] = options[key];\n        });\n      }\n\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: function format(value, _format, lng, options) {\n        return value;\n      },\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      // prefixEscaped: '{{',\n      // suffixEscaped: '}}',\n      // unescapeSuffix: '',\n      unescapePrefix: '-',\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      // nestingPrefixEscaped: '$t(',\n      // nestingSuffixEscaped: ')',\n      // defaultVariables: undefined // object that can have values to interpolate on - extends passed in interpolation data\n      maxReplaces: 1000 // max replaces to prevent endless loop\n\n    }\n  };\n}\n/* eslint no-param-reassign: 0 */\n\nfunction transformOptions(options) {\n  // create namespace object if namespace is passed in as string\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS]; // extend whitelist with cimode\n\n  if (options.whitelist && options.whitelist.indexOf('cimode') < 0) {\n    options.whitelist = options.whitelist.concat(['cimode']);\n  }\n\n  return options;\n}\n\nfunction noop() {}\n\nvar I18n =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(I18n, _EventEmitter);\n\n  function I18n() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n    _classCallCheck(this, I18n);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(I18n).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this)); // <=IE10 fix (unable to call parent constructor)\n    }\n\n    _this.options = transformOptions(options);\n    _this.services = {};\n    _this.logger = baseLogger;\n    _this.modules = {\n      external: []\n    };\n\n    if (callback && !_this.isInitialized && !options.isClone) {\n      // https://github.com/i18next/i18next/issues/879\n      if (!_this.options.initImmediate) {\n        _this.init(options, callback);\n\n        return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n      }\n\n      setTimeout(function () {\n        _this.init(options, callback);\n      }, 0);\n    }\n\n    return _this;\n  }\n\n  _createClass(I18n, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      this.options = _objectSpread({}, get(), this.options, transformOptions(options));\n      this.format = this.options.interpolation.format;\n      if (!callback) callback = noop;\n\n      function createClassOnDemand(ClassOrObject) {\n        if (!ClassOrObject) return null;\n        if (typeof ClassOrObject === 'function') return new ClassOrObject();\n        return ClassOrObject;\n      } // init services\n\n\n      if (!this.options.isClone) {\n        if (this.modules.logger) {\n          baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n        } else {\n          baseLogger.init(null, this.options);\n        }\n\n        var lu = new LanguageUtil(this.options);\n        this.store = new ResourceStore(this.options.resources, this.options);\n        var s = this.services;\n        s.logger = baseLogger;\n        s.resourceStore = this.store;\n        s.languageUtils = lu;\n        s.pluralResolver = new PluralResolver(lu, {\n          prepend: this.options.pluralSeparator,\n          compatibilityJSON: this.options.compatibilityJSON,\n          simplifyPluralSuffix: this.options.simplifyPluralSuffix\n        });\n        s.interpolator = new Interpolator(this.options);\n        s.utils = {\n          hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n        };\n        s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options); // pipe events from backendConnector\n\n        s.backendConnector.on('*', function (event) {\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n\n        if (this.modules.languageDetector) {\n          s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n          s.languageDetector.init(s, this.options.detection, this.options);\n        }\n\n        if (this.modules.i18nFormat) {\n          s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n          if (s.i18nFormat.init) s.i18nFormat.init(this);\n        }\n\n        this.translator = new Translator(this.services, this.options); // pipe events from translator\n\n        this.translator.on('*', function (event) {\n          for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        this.modules.external.forEach(function (m) {\n          if (m.init) m.init(_this2);\n        });\n      }\n\n      if (!this.modules.languageDetector && !this.options.lng) {\n        this.logger.warn('init: no languageDetector is used and no lng is defined');\n      } // append api\n\n\n      var storeApi = ['getResource', 'addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n      storeApi.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store;\n\n          return (_this2$store = _this2.store)[fcName].apply(_this2$store, arguments);\n        };\n      });\n      var deferred = defer();\n\n      var load = function load() {\n        _this2.changeLanguage(_this2.options.lng, function (err, t) {\n          _this2.isInitialized = true;\n\n          _this2.logger.log('initialized', _this2.options);\n\n          _this2.emit('initialized', _this2.options);\n\n          deferred.resolve(t); // not rejecting on err (as err is only a loading translation failed warning)\n\n          callback(err, t);\n        });\n      };\n\n      if (this.options.resources || !this.options.initImmediate) {\n        load();\n      } else {\n        setTimeout(load, 0);\n      }\n\n      return deferred;\n    }\n    /* eslint consistent-return: 0 */\n\n  }, {\n    key: \"loadResources\",\n    value: function loadResources(language) {\n      var _this3 = this;\n\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var usedCallback = callback;\n      var usedLng = typeof language === 'string' ? language : this.language;\n      if (typeof language === 'function') usedCallback = language;\n\n      if (!this.options.resources || this.options.partialBundledLanguages) {\n        if (usedLng && usedLng.toLowerCase() === 'cimode') return usedCallback(); // avoid loading resources for cimode\n\n        var toLoad = [];\n\n        var append = function append(lng) {\n          if (!lng) return;\n\n          var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);\n\n          lngs.forEach(function (l) {\n            if (toLoad.indexOf(l) < 0) toLoad.push(l);\n          });\n        };\n\n        if (!usedLng) {\n          // at least load fallbacks in this case\n          var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n          fallbacks.forEach(function (l) {\n            return append(l);\n          });\n        } else {\n          append(usedLng);\n        }\n\n        if (this.options.preload) {\n          this.options.preload.forEach(function (l) {\n            return append(l);\n          });\n        }\n\n        this.services.backendConnector.load(toLoad, this.options.ns, usedCallback);\n      } else {\n        usedCallback(null);\n      }\n    }\n  }, {\n    key: \"reloadResources\",\n    value: function reloadResources(lngs, ns, callback) {\n      var deferred = defer();\n      if (!lngs) lngs = this.languages;\n      if (!ns) ns = this.options.ns;\n      if (!callback) callback = noop;\n      this.services.backendConnector.reload(lngs, ns, function (err) {\n        deferred.resolve(); // not rejecting on err (as err is only a loading translation failed warning)\n\n        callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"use\",\n    value: function use(module) {\n      if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n      if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n\n      if (module.type === 'backend') {\n        this.modules.backend = module;\n      }\n\n      if (module.type === 'logger' || module.log && module.warn && module.error) {\n        this.modules.logger = module;\n      }\n\n      if (module.type === 'languageDetector') {\n        this.modules.languageDetector = module;\n      }\n\n      if (module.type === 'i18nFormat') {\n        this.modules.i18nFormat = module;\n      }\n\n      if (module.type === 'postProcessor') {\n        postProcessor.addPostProcessor(module);\n      }\n\n      if (module.type === '3rdParty') {\n        this.modules.external.push(module);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng, callback) {\n      var _this4 = this;\n\n      this.isLanguageChangingTo = lng;\n      var deferred = defer();\n      this.emit('languageChanging', lng);\n\n      var done = function done(err, l) {\n        if (l) {\n          _this4.language = l;\n          _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n\n          _this4.translator.changeLanguage(l);\n\n          _this4.isLanguageChangingTo = undefined;\n\n          _this4.emit('languageChanged', l);\n\n          _this4.logger.log('languageChanged', l);\n        } else {\n          _this4.isLanguageChangingTo = undefined;\n        }\n\n        deferred.resolve(function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n        if (callback) callback(err, function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n      };\n\n      var setLng = function setLng(l) {\n        if (l) {\n          if (!_this4.language) {\n            _this4.language = l;\n            _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n          }\n\n          if (!_this4.translator.language) _this4.translator.changeLanguage(l);\n          if (_this4.services.languageDetector) _this4.services.languageDetector.cacheUserLanguage(l);\n        }\n\n        _this4.loadResources(l, function (err) {\n          done(err, l);\n        });\n      };\n\n      if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n        setLng(this.services.languageDetector.detect());\n      } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n        this.services.languageDetector.detect(setLng);\n      } else {\n        setLng(lng);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"getFixedT\",\n    value: function getFixedT(lng, ns) {\n      var _this5 = this;\n\n      var fixedT = function fixedT(key, opts) {\n        var options;\n\n        if (_typeof(opts) !== 'object') {\n          for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n            rest[_key3 - 2] = arguments[_key3];\n          }\n\n          options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n        } else {\n          options = _objectSpread({}, opts);\n        }\n\n        options.lng = options.lng || fixedT.lng;\n        options.lngs = options.lngs || fixedT.lngs;\n        options.ns = options.ns || fixedT.ns;\n        return _this5.t(key, options);\n      };\n\n      if (typeof lng === 'string') {\n        fixedT.lng = lng;\n      } else {\n        fixedT.lngs = lng;\n      }\n\n      fixedT.ns = ns;\n      return fixedT;\n    }\n  }, {\n    key: \"t\",\n    value: function t() {\n      var _this$translator;\n\n      return this.translator && (_this$translator = this.translator).translate.apply(_this$translator, arguments);\n    }\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      var _this$translator2;\n\n      return this.translator && (_this$translator2 = this.translator).exists.apply(_this$translator2, arguments);\n    }\n  }, {\n    key: \"setDefaultNamespace\",\n    value: function setDefaultNamespace(ns) {\n      this.options.defaultNS = ns;\n    }\n  }, {\n    key: \"hasLoadedNamespace\",\n    value: function hasLoadedNamespace(ns) {\n      var _this6 = this;\n\n      if (!this.isInitialized) {\n        this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n        return false;\n      }\n\n      if (!this.languages || !this.languages.length) {\n        this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n        return false;\n      }\n\n      var lng = this.languages[0];\n      var fallbackLng = this.options ? this.options.fallbackLng : false;\n      var lastLng = this.languages[this.languages.length - 1]; // we're in cimode so this shall pass\n\n      if (lng.toLowerCase() === 'cimode') return true;\n\n      var loadNotPending = function loadNotPending(l, n) {\n        var loadState = _this6.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n\n        return loadState === -1 || loadState === 2;\n      }; // loaded -> SUCCESS\n\n\n      if (this.hasResourceBundle(lng, ns)) return true; // were not loading at all -> SEMI SUCCESS\n\n      if (!this.services.backendConnector.backend) return true; // failed loading ns - but at least fallback is not pending -> SEMI SUCCESS\n\n      if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n      return false;\n    }\n  }, {\n    key: \"loadNamespaces\",\n    value: function loadNamespaces(ns, callback) {\n      var _this7 = this;\n\n      var deferred = defer();\n\n      if (!this.options.ns) {\n        callback && callback();\n        return Promise.resolve();\n      }\n\n      if (typeof ns === 'string') ns = [ns];\n      ns.forEach(function (n) {\n        if (_this7.options.ns.indexOf(n) < 0) _this7.options.ns.push(n);\n      });\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"loadLanguages\",\n    value: function loadLanguages(lngs, callback) {\n      var deferred = defer();\n      if (typeof lngs === 'string') lngs = [lngs];\n      var preloaded = this.options.preload || [];\n      var newLngs = lngs.filter(function (lng) {\n        return preloaded.indexOf(lng) < 0;\n      }); // Exit early if all given languages are already preloaded\n\n      if (!newLngs.length) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n\n      this.options.preload = preloaded.concat(newLngs);\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"dir\",\n    value: function dir(lng) {\n      if (!lng) lng = this.languages && this.languages.length > 0 ? this.languages[0] : this.language;\n      if (!lng) return 'rtl';\n      var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam'];\n      return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) >= 0 ? 'rtl' : 'ltr';\n    }\n    /* eslint class-methods-use-this: 0 */\n\n  }, {\n    key: \"createInstance\",\n    value: function createInstance() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      return new I18n(options, callback);\n    }\n  }, {\n    key: \"cloneInstance\",\n    value: function cloneInstance() {\n      var _this8 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n      var mergedOptions = _objectSpread({}, this.options, options, {\n        isClone: true\n      });\n\n      var clone = new I18n(mergedOptions);\n      var membersToCopy = ['store', 'services', 'language'];\n      membersToCopy.forEach(function (m) {\n        clone[m] = _this8[m];\n      });\n      clone.services = _objectSpread({}, this.services);\n      clone.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      clone.translator = new Translator(clone.services, clone.options);\n      clone.translator.on('*', function (event) {\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n\n        clone.emit.apply(clone, [event].concat(args));\n      });\n      clone.init(mergedOptions, callback);\n      clone.translator.options = clone.options; // sync options\n\n      clone.translator.backendConnector.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      return clone;\n    }\n  }]);\n\n  return I18n;\n}(EventEmitter);\n\nvar i18next = new I18n();\n\nexport default i18next;\n","import _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _typeof from '@babel/runtime/helpers/esm/typeof';\n\nvar arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\nfunction defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\n\nfunction addQueryString(url, params) {\n  if (params && _typeof(params) === 'object') {\n    var queryString = '',\n        e = encodeURIComponent; // Must encode data\n\n    for (var paramName in params) {\n      queryString += '&' + e(paramName) + '=' + e(params[paramName]);\n    }\n\n    if (!queryString) {\n      return url;\n    }\n\n    url = url + (url.indexOf('?') !== -1 ? '&' : '?') + queryString.slice(1);\n  }\n\n  return url;\n} // https://gist.github.com/Xeoncross/7663273\n\n\nfunction ajax(url, options, callback, data, cache) {\n  if (data && _typeof(data) === 'object') {\n    if (!cache) {\n      data['_t'] = new Date();\n    } // URL encoded form data must be in querystring format\n\n\n    data = addQueryString('', data).slice(1);\n  }\n\n  if (options.queryStringParams) {\n    url = addQueryString(url, options.queryStringParams);\n  }\n\n  try {\n    var x;\n\n    if (XMLHttpRequest) {\n      x = new XMLHttpRequest();\n    } else {\n      x = new ActiveXObject('MSXML2.XMLHTTP.3.0');\n    }\n\n    x.open(data ? 'POST' : 'GET', url, 1);\n\n    if (!options.crossDomain) {\n      x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    }\n\n    x.withCredentials = !!options.withCredentials;\n\n    if (data) {\n      x.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    }\n\n    if (x.overrideMimeType) {\n      x.overrideMimeType(\"application/json\");\n    }\n\n    var h = options.customHeaders;\n    h = typeof h === 'function' ? h() : h;\n\n    if (h) {\n      for (var i in h) {\n        x.setRequestHeader(i, h[i]);\n      }\n    }\n\n    x.onreadystatechange = function () {\n      x.readyState > 3 && callback && callback(x.responseText, x);\n    };\n\n    x.send(data);\n  } catch (e) {\n    console && console.log(e);\n  }\n}\n\nfunction getDefaults() {\n  return {\n    loadPath: '/locales/{{lng}}/{{ns}}.json',\n    addPath: '/locales/add/{{lng}}/{{ns}}',\n    allowMultiLoading: false,\n    parse: JSON.parse,\n    parsePayload: function parsePayload(namespace, key, fallbackValue) {\n      return _defineProperty({}, key, fallbackValue || '');\n    },\n    crossDomain: false,\n    ajax: ajax\n  };\n}\n\nvar Backend =\n/*#__PURE__*/\nfunction () {\n  function Backend(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Backend);\n\n    this.init(services, options);\n    this.type = 'backend';\n  }\n\n  _createClass(Backend, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.services = services;\n      this.options = defaults(options, this.options || {}, getDefaults());\n    }\n  }, {\n    key: \"readMulti\",\n    value: function readMulti(languages, namespaces, callback) {\n      var loadPath = this.options.loadPath;\n\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath(languages, namespaces);\n      }\n\n      var url = this.services.interpolator.interpolate(loadPath, {\n        lng: languages.join('+'),\n        ns: namespaces.join('+')\n      });\n      this.loadUrl(url, callback);\n    }\n  }, {\n    key: \"read\",\n    value: function read(language, namespace, callback) {\n      var loadPath = this.options.loadPath;\n\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath([language], [namespace]);\n      }\n\n      var url = this.services.interpolator.interpolate(loadPath, {\n        lng: language,\n        ns: namespace\n      });\n      this.loadUrl(url, callback);\n    }\n  }, {\n    key: \"loadUrl\",\n    value: function loadUrl(url, callback) {\n      var _this = this;\n\n      this.options.ajax(url, this.options, function (data, xhr) {\n        if (xhr.status >= 500 && xhr.status < 600) return callback('failed loading ' + url, true\n        /* retry */\n        );\n        if (xhr.status >= 400 && xhr.status < 500) return callback('failed loading ' + url, false\n        /* no retry */\n        );\n        var ret, err;\n\n        try {\n          ret = _this.options.parse(data, url);\n        } catch (e) {\n          err = 'failed parsing ' + url + ' to json';\n        }\n\n        if (err) return callback(err, false);\n        callback(null, ret);\n      });\n    }\n  }, {\n    key: \"create\",\n    value: function create(languages, namespace, key, fallbackValue) {\n      var _this2 = this;\n\n      if (typeof languages === 'string') languages = [languages];\n      var payload = this.options.parsePayload(namespace, key, fallbackValue);\n      languages.forEach(function (lng) {\n        var url = _this2.services.interpolator.interpolate(_this2.options.addPath, {\n          lng: lng,\n          ns: namespace\n        });\n\n        _this2.options.ajax(url, _this2.options, function (data, xhr) {//const statusCode = xhr.status.toString();\n          // TODO: if statusCode === 4xx do log\n        }, payload);\n      });\n    }\n  }]);\n\n  return Backend;\n}();\n\nBackend.type = 'backend';\n\nexport default Backend;\n","/*\n * Timer.src: A periodic timer for Node.src and the browser.\n *\n * Copyright (c) 2012 Arthur Klepchukov, Jarvis Badgley, Florian Schäfer\n * Licensed under the BSD license (BSD_LICENSE.txt)\n *\n * Version: 0.0.1\n *\n */\n\nlet timeStringToMilliseconds = function(timeString) {\n    if (typeof timeString === 'string') {\n\n        if (isNaN(parseInt(timeString, 10))) {\n            timeString = '1' + timeString;\n        }\n\n        var match = timeString\n            .replace(/[^a-z0-9\\.]/g, '')\n            .match(/(?:(\\d+(?:\\.\\d+)?)(?:days?|d))?(?:(\\d+(?:\\.\\d+)?)(?:hours?|hrs?|h))?(?:(\\d+(?:\\.\\d+)?)(?:minutes?|mins?|m\\b))?(?:(\\d+(?:\\.\\d+)?)(?:seconds?|secs?|s))?(?:(\\d+(?:\\.\\d+)?)(?:milliseconds?|ms))?/);\n\n        if (match[0]) {\n            return parseFloat(match[1] || 0) * 86400000 +  // days\n                parseFloat(match[2] || 0) * 3600000 +   // hours\n                parseFloat(match[3] || 0) * 60000 +     // minutes\n                parseFloat(match[4] || 0) * 1000 +      // seconds\n                parseInt(match[5] || 0, 10);            // milliseconds\n        }\n\n        if (!isNaN(parseInt(timeString, 10))) {\n            return parseInt(timeString, 10);\n        }\n    }\n\n    if (typeof timeString === 'number') {\n        return timeString;\n    }\n\n    return 0;\n};\n\nlet  millisecondsToTicks = function(milliseconds, resolution) {\n    return parseInt(milliseconds / resolution, 10) || 1;\n};\n\n\nfunction Timer(resolution) {\n\n    if (this instanceof Timer === false) {\n        return new Timer(resolution);\n    }\n\n    this._notifications = [];\n    this._resolution = timeStringToMilliseconds(resolution) || 1000;\n    this._running = false;\n    this._ticks = 0;\n    this._timer = null;\n    this._drift = 0;\n}\n\nTimer.prototype = {\n    start: function () {\n        var self = this;\n        if (!this._running) {\n            this._running = !this._running;\n            setTimeout(function loopsyloop() {\n                self._ticks++;\n                for (var i = 0, l = self._notifications.length; i < l; i++) {\n                    if (self._notifications[i] && self._ticks % self._notifications[i].ticks === 0) {\n                        self._notifications[i].callback.call(self._notifications[i], { ticks: self._ticks, resolution: self._resolution });\n                    }\n                }\n                if (self._running) {\n                    self._timer = setTimeout(loopsyloop, self._resolution + self._drift);\n                    self._drift = 0;\n                }\n            }, this._resolution + this._drift);\n            this._drift = 0;\n        }\n        return this;\n    },\n    stop: function () {\n        if (this._running) {\n            this._running = !this._running;\n            clearTimeout(this._timer);\n        }\n        return this;\n    },\n    reset: function () {\n        this.stop();\n        this._ticks = 0;\n        return this;\n    },\n    clear: function () {\n        this.reset();\n        this._notifications = [];\n        return this;\n    },\n    ticks: function () {\n        return this._ticks;\n    },\n    resolution: function () {\n        return this._resolution;\n    },\n    running: function () {\n        return this._running;\n    },\n    bind: function (when, callback) {\n        if (when && callback) {\n            var ticks = millisecondsToTicks(timeStringToMilliseconds(when), this._resolution);\n            this._notifications.push({\n                ticks: ticks,\n                callback: callback\n            });\n        }\n        return this;\n    },\n    unbind: function (callback) {\n        if (!callback) {\n            this._notifications = [];\n        } else {\n            for (var i = 0, l = this._notifications.length; i < l; i++) {\n                if (this._notifications[i] && this._notifications[i].callback === callback) {\n                    this._notifications.splice(i, 1);\n                }\n            }\n        }\n        return this;\n    },\n    drift: function (timeDrift) {\n        this._drift = timeDrift;\n        return this;\n    }\n};\n\nTimer.prototype.every = Timer.prototype.bind;\nTimer.prototype.after = function (when, callback) {\n    var self = this;\n    Timer.prototype.bind.call(self, when, function fn () {\n        Timer.prototype.unbind.call(self, fn);\n        callback.apply(this, arguments);\n    });\n    return this;\n};\n\nexport default Timer;\n","import i18next  from 'i18next';\nimport { Utils, pgnReader } from '@mliebelt/pgn-reader';\nimport { Chessground } from 'chessground';\nimport Timer from './Timer';\nimport Mousetrap from 'mousetrap';\nimport swal from 'sweetalert';\n\n/**\n * This implements the base function that is used to display a board, a whole game\n * or even allow to play it.\n * See the other functions and their implementation how to use the building blocks\n * of pgnBase to build new functionality. The configuration here is the super-set\n * of all the configurations of the other functions.\n */\nlet pgnBase = function (boardId, configuration) {\n    // Section defines the variables needed everywhere.\n    const VERSION = \"0.9.7\";\n    let that = {};\n    let utils = new Utils();\n    // Sets the default parameters for all modes. See individual functions for individual overwrites\n    let defaults = {\n        width: '320px',\n        showCoords: true,\n        orientation: 'white',\n        position: 'start',\n        showFen: false,\n        layout: 'top',\n        headers: true,\n        timerTime: 700,\n        locale: 'en',\n        movable: {free: false},\n        highlight: {lastMove: true},\n        viewOnly: true,\n        hideMovesBefore: false,\n        colorMarker: null,\n        showResult: false,\n        timeAnnotation: 'none',\n        notation: 'short'\n    };\n    that.promMappings = {q: 'queen', r: 'rook', b: 'bishop', n: 'knight'};\n    that.configuration = Object.assign(Object.assign(defaults, PgnBaseDefaults), configuration);\n    that.mypgn = pgnReader(that.configuration);\n    let game = that.mypgn.game;     // Use the same instance from chess.src\n    let theme = that.configuration.theme || 'default';\n    that.configuration.markup = (typeof boardId) == \"object\";\n    let hasMarkup = function () {\n        return that.configuration.markup;\n    };\n    let hasMode = function (mode) {\n        return that.configuration.mode === mode;\n    };\n    let possibleMoves = function () {\n        return that.mypgn.possibleMoves(game);\n    };\n    let board;              // Will be set later, but has to be a known variable\n    // IDs needed for styling and adressing the HTML elements, only used if no markup is done by the user\n    if (!hasMarkup()) {\n        var headersId = boardId + 'Headers';\n        var innerBoardId = boardId + 'Inner';\n        var movesId = boardId + 'Moves';\n        var buttonsId = boardId + 'Button';\n        var fenId = boardId + \"Fen\";\n        var colorMarkerId = innerBoardId + 'ColorMarker';\n    } else { // will be filled later\n        var innerBoardId;\n        var headersId;\n        var movesId;\n        var buttonsId;\n        var fenId;\n        var colorMarkerId;\n\n    }\n\n    if (that.configuration.locale) {\n        that.configuration.locale = that.configuration.locale.replace(/_/g, \"-\");\n        i18next.loadLanguages(that.configuration.locale, (err, t) => {\n        });\n    }\n\n    if (that.configuration.position) { // Allow early correction\n        if (that.configuration.position !== 'start') {\n            let tokens = that.configuration.position.split(/\\s+/);\n            if (tokens.length == 4) {\n                that.configuration.position += ' 1 1';\n            }\n        }\n    }\n\n    /**\n     * Allow logging of error to HTML.\n     */\n    function logError(str) {\n        let node = document.createElement(\"DIV\");\n        const textnode = document.createTextNode(str);\n        node.appendChild(textnode);\n        that.errorDiv.appendChild(node);\n    }\n\n    /**\n     * Adds a class to an element.\n     */\n    function addClass(elementOrId, className) {\n        let ele = utils.pvIsElement(elementOrId) ? elementOrId : document.getElementById(elementOrId);\n        if (!ele) return;\n        if (ele.classList) {\n            ele.classList.add(className);\n        } else {\n            ele.className += ' ' + className;\n        }\n    }\n\n    /**\n     * Remove a class from an element.\n     */\n    function removeClass(elementOrId, className) {\n        let ele = utils.pvIsElement(elementOrId) ? elementOrId : document.getElementById(elementOrId);\n        if (ele === null) return;\n        if (ele.classList) {\n            ele.classList.remove(className);\n        } else {\n            ele.className = ele.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n        }\n    }\n\n    /**\n     * Inserts an element after targetElement\n     * @param {*} newElement the element to insert\n     * @param {*} targetElement the element after to insert\n     */\n    function insertAfter(newElement, targetElement) {\n        const parent = targetElement.parentNode;\n        if (parent.lastChild == targetElement) {\n            parent.appendChild(newElement);\n        } else {\n            parent.insertBefore(newElement, targetElement.nextSibling);\n        }\n    }\n\n    /**\n     * Adds an event listener to the DOM element.\n     */\n    function addEventListener(elementOrId, event, func) {\n        let ele = utils.pvIsElement(elementOrId) ? elementOrId : document.getElementById(elementOrId);\n        if (ele === null) return;\n        ele.addEventListener(event, func);\n    }\n\n    function toggleColorMarker() {\n        let ele = document.getElementById(colorMarkerId);\n        if (!ele) return;\n        if (ele.classList.contains('cm-black')) {\n            ele.classList.remove('cm-black');\n        } else {\n            ele.classList.add('cm-black');\n        }\n    }\n\n    /**\n     * Scroll if element is not visible\n     * @param element the element to show by scrolling\n     */\n    function scrollToView(element) {\n        function scrollParentToChild(parent, child) {\n            let parentRect = parent.getBoundingClientRect();\n            // What can you see?\n            let parentViewableArea = {\n                height: parent.clientHeight,\n                width: parent.clientWidth\n            };\n\n            // Where is the child\n            let childRect = child.getBoundingClientRect();\n            // Is the child viewable?\n            let isViewable = (childRect.top >= parentRect.top) && (childRect.top <= parentRect.top + parentViewableArea.height);\n\n            // if you can't see the child try to scroll parent\n            if (!isViewable) {\n                // scroll by offset relative to parent\n                parent.scrollTop = (childRect.top + parent.scrollTop) - parentRect.top;\n            }\n        }\n\n        const node = element;\n        const movesNode = node.parentElement;\n        scrollParentToChild(movesNode, node);\n    }\n\n    /**\n     * Called when the piece is released. Here should be the logic for calling all\n     * pgn enhancement.\n     * @param from the source\n     * @param to the destination\n     * @param meta additional parameters (not used at the moment)\n     */\n    const onSnapEnd = async function (from, to, meta) {\n        //console.log(\"Move from: \" + from + \" To: \" + to + \" Meta: \" + JSON.stringify(meta, null, 2));\n        //board.set({fen: game.fen()});\n        const cur = that.currentMove;\n        let primMove = {from: from, to: to};\n        if ((that.mypgn.game.get(from).type == 'p') && ((to.substring(1, 2) == '8') || (to.substring(1, 2) == '1'))) {\n            let sel = await swal(\"Select the promotion figure\", {\n                buttons: {\n                    queen: {text: \"Queen\", value: 'q'},\n                    rook: {text: \"Rook\", value: 'r'},\n                    bishop: {text: \"Bishop\", value: 'b'},\n                    knight: {text: 'Knight', value: 'n'}\n                }\n            });\n            primMove.promotion = sel;\n            //primMove.promotion = 'q'    // Here a real selection should stand!!\n        }\n        that.currentMove = that.mypgn.addMove(primMove, cur);\n        const move = that.mypgn.getMove(that.currentMove);\n        if (primMove.promotion) {\n            let pieces = {};\n            pieces[to] = null;\n            board.setPieces(pieces);\n            pieces[to] = {color: (move.turn == 'w' ? 'white' : 'black'), role: that.promMappings[primMove.promotion]};\n            board.setPieces(pieces);\n        }\n        if (move.notation.ep) {\n            let ep_field = to[0] + from[1];\n            let pieces = {};\n            pieces[ep_field] = null;\n            board.setPieces(pieces);\n        }\n        if (moveSpan(that.currentMove) === null) {\n            generateMove(that.currentMove, null, move, move.prev, document.getElementById(movesId), []);\n        }\n        unmarkMark(that.currentMove);\n        updateUI(that.currentMove);\n        let col = move.turn == 'w' ? 'black' : 'white';\n        board.set({\n            movable: Object.assign({}, board.state.movable, {color: col, dests: possibleMoves(game)}),\n            check: game.in_check()\n        });\n        //makeMove(null, that.currentMove, move.fen);\n        let fenView = document.getElementById(fenId);\n        if (fenView) {\n            fenView.value = move.fen;\n        }\n        toggleColorMarker();\n    };\n\n    // Utility function for generating general HTML elements with id, class (with theme)\n    function createEle(kind, id, clazz, my_theme, father) {\n        const ele = document.createElement(kind);\n        if (id) {\n            ele.setAttribute(\"id\", id);\n        }\n        if (clazz) {\n            if (my_theme) {\n                ele.setAttribute(\"class\", my_theme + \" \" + clazz);\n            } else {\n                ele.setAttribute(\"class\", clazz);\n            }\n        }\n        if (father) {\n            father.appendChild(ele);\n        }\n        return ele;\n    }\n\n    // Internationionalize the figures in SAN\n    function i18nSan(san) {\n        function i18nFig(fig, locale) {\n            return i18next.t(\"chess:\" + fig, { lng: locale});\n        }\n        let locale = that.configuration.locale;\n        if (! locale) return san;\n        let new_san = san;\n        if ( ! (san.match(/^[a-h]x/) || san.match(/^[a-h]\\d/) ) ) {\n            let move_fig = i18nFig(san[0], locale);\n            new_san = san.replace(san[0], move_fig);\n        }\n        let m = new_san.match(/=([QRNB])/);\n        if (m) {\n            new_san = new_san.replace(m[1], i18nFig(m[1], locale));\n        }\n        return new_san;\n    }\n\n    /**\n     * Generates all HTML elements needed for display of the (playing) board and\n     * the moves. Generates that in dependence of the theme\n     */\n    const generateHTML = function () {\n        // Utility function for generating buttons divs\n        function addButton(pair, buttonDiv) {\n            const l_theme = (['green', 'blue'].indexOf(theme) >= 0) ? theme : 'default';\n            const button = createEle(\"i\", buttonsId + pair[0], \"button fa \" + pair[1], l_theme, buttonDiv);\n            const title = i18next.t(\"buttons:\" + pair[0], {lng: that.configuration.locale});\n            document.getElementById(buttonsId + pair[0]).setAttribute(\"title\", title);\n            return button;\n        }\n\n        // Generates the view buttons (only)\n        const generateViewButtons = function (buttonDiv) {\n            [[\"flipper\", \"fa-adjust\"], [\"first\", \"fa-fast-backward\"], [\"prev\", \"fa-step-backward\"],\n                [\"next\", \"fa-step-forward\"], [\"play\", \"fa-play-circle\"], [\"last\", \"fa-fast-forward\"]].forEach(function (entry) {\n                addButton(entry, buttonDiv);\n            });\n        };\n        // Generates the edit buttons (only)\n        const generateEditButtons = function (buttonDiv) {\n            [[\"promoteVar\", \"fa-hand-o-up\"], [\"deleteMoves\", \"fa-scissors\"]].forEach(function (entry) {\n                addButton(entry, buttonDiv);\n                //but.className = but.className + \" gray\"; // just a test, worked.\n                // only gray out if not usable, check that later.\n            });\n            [[\"pgn\", \"fa-print\"], ['nags', 'fa-cog']].forEach(function (entry) {\n                addButton(entry, buttonDiv);\n            });\n        };\n\n        // Generate 3 rows, similar to lichess in studies\n        let generateNagMenu = function (nagEle) {\n            let generateRow = function (array, rowClass, nagEle) {\n                let generateLink = function (link, nagDiv) {\n                    let generateIcon = function (icon, myLink) {\n                        let ele = createEle('i', null, null, theme, myLink);\n                        let i = that.mypgn.NAGS[icon] || '';\n                        ele.setAttribute(\"data-symbol\", i);\n                        ele.setAttribute(\"data-value\", icon);\n                        ele.textContent = i18next.t('nag:$' + icon + \"_menu\", {lng: that.configuration.locale});\n                    };\n                    let myLink = createEle('a', null, null, theme, myDiv);\n                    generateIcon(link, myLink);\n                    myLink.addEventListener(\"click\", function () {\n                        function updateMoveSAN(moveIndex) {\n                            let move = that.mypgn.getMove(moveIndex);\n                            let san = i18nSan(that.mypgn.sanWithNags(move));\n                            document.querySelector(\"#\" + movesId + moveIndex + \" > a\").textContent = san;\n                        }\n\n                        this.classList.toggle(\"active\");\n                        let iNode = this.firstChild;\n                        that.mypgn.changeNag('$' + iNode.getAttribute('data-value'), that.currentMove, this.classList.contains('active'));\n                        updateMoveSAN(that.currentMove);\n                    });\n                };\n                let myDiv = createEle('div', null, rowClass, theme, nagEle);\n                array.forEach(ele => generateLink(ele, myDiv));\n            };\n            generateRow([1, 2, 3, 4, 5, 6, 7, 146], 'nagMove', nagEle);\n            generateRow([10, 13, 14, 15, 16, 17, 18, 19], 'nagPosition', nagEle);\n            generateRow([22, 40, 36, 132, 136, 32, 44, 140], 'nagObservation', nagEle);\n        };\n        const generateCommentDiv = function (commentDiv) {\n            const radio = createEle(\"div\", null, \"commentRadio\", theme, commentDiv);\n            const mc = createEle(\"input\", null, \"moveComment\", theme, radio);\n            mc.type = \"radio\";\n            mc.value = \"move\";\n            mc.name = \"radio\";\n            createEle(\"label\", null, \"labelMoveComment\", theme, radio).appendChild(document.createTextNode(\"Move\"));\n            const mb = createEle(\"input\", null, \"beforeComment\", theme, radio);\n            mb.type = \"radio\";\n            mb.value = \"before\";\n            mb.name = \"radio\";\n            createEle(\"label\", null, \"labelBeforeComment\", theme, radio).appendChild(document.createTextNode(\"Before\"));\n            const ma = createEle(\"input\", null, \"afterComment\", theme, radio);\n            ma.type = \"radio\";\n            ma.value = \"after\";\n            ma.name = \"radio\";\n            createEle(\"label\", null, \"labelAfterComment\", theme, radio).appendChild(document.createTextNode(\"After\"));\n            createEle(\"textarea\", null, \"comment\", theme, commentDiv);\n        };\n        if (hasMarkup()) {\n            if (boardId.header) {\n                headersId = boardId.header; // Real header will be built later\n                addClass(headersId, 'headers');\n            }\n            if (boardId.inner) {\n                innerBoardId = boardId.inner;\n                addClass(innerBoardId, 'board');\n            }\n            if (boardId.button) {\n                buttonsId = boardId.button;\n                addClass(buttonsId, 'buttons');\n                const buttonsDiv = document.getElementById(buttonsId);\n                generateViewButtons(buttonsDiv);\n            }\n            if (boardId.moves) {\n                movesId = boardId.moves;\n                addClass(movesId, 'moves');\n            }\n            if (boardId.editButton) {\n                const editButtonsBoardDiv = document.getElementById(boardId.editButton);\n                generateEditButtons(editButtonsBoardDiv);\n            }\n        } else {\n            const divBoard = document.getElementById(boardId);\n            if (divBoard == null) {\n                return;\n            } else {\n                // ensure that the board is empty before filling it\n                while (divBoard.childNodes.length > 0) {\n                    divBoard.removeChild(divBoard.childNodes[0]);\n                }\n            }\n            divBoard.classList.add(theme);\n            divBoard.classList.add('whole');\n            divBoard.setAttribute('tabindex', '0');\n            // Add layout for class if configured\n            if (that.configuration.layout) {\n                divBoard.classList.add('layout-' + that.configuration.layout);\n            }\n            // Add an error div to show errors\n            that.errorDiv = createEle(\"div\", boardId + \"Error\", 'error', null, divBoard);\n            createEle(\"div\", headersId, \"headers\", theme, divBoard);\n            const outerInnerBoardDiv = createEle(\"div\", null, \"outerBoard\", null, divBoard);\n            let boardAndDiv = createEle('div', null, 'boardAnd', theme, outerInnerBoardDiv);\n            if (that.configuration.boardSize) {\n                outerInnerBoardDiv.style.width = that.configuration.boardSize;\n            }\n            if (that.configuration.width || that.configuration.boardSize) {\n                let size = that.configuration.width ? that.configuration.width : that.configuration.boardSize;\n                //boardAndDiv.style.display = 'grid';\n                boardAndDiv.style.gridTemplateColumns = size + ' 40px';\n            }\n            let topInnerBoardDiv = createEle(\"div\", null, \"topInnerBoard\", theme, boardAndDiv);\n            let topTime = createEle(\"span\", null, \"topTime\", theme, topInnerBoardDiv);\n            const innerBoardDiv = createEle(\"div\", innerBoardId, \"board\", theme, boardAndDiv);\n            let bottomInnerBoardDiv = createEle(\"div\", null, \"bottomInnerBoard\", theme, boardAndDiv);\n            let bottomTime = createEle(\"div\", null, \"bottomTime\", theme, bottomInnerBoardDiv);\n            if (that.configuration.colorMarker && (!hasMode('print'))) {\n                createEle(\"div\", colorMarkerId, 'colorMarker' + \" \" + that.configuration.colorMarker, theme, boardAndDiv);\n            }\n            if (hasMode('view') || hasMode('edit')) {\n                const buttonsBoardDiv = createEle(\"div\", buttonsId, \"buttons\", theme, outerInnerBoardDiv);\n                generateViewButtons(buttonsBoardDiv);\n            }\n            if ((hasMode('edit') || hasMode('view')) && (that.configuration.showFen)) {\n                const fenDiv = createEle(\"textarea\", fenId, \"fen\", theme, outerInnerBoardDiv);\n                addEventListener(fenId, 'mousedown', function (e) {\n                    e = e || window.event;\n                    e.preventDefault();\n                    this.select();\n                });\n                if (hasMode('edit')) {\n                    document.getElementById(fenId).onpaste = function (e) {\n                        const pastedData = e.originalEvent.clipboardData.getData('text');\n                        // console.log(pastedData);\n                        that.configuration.position = pastedData;\n                        that.configuration.pgn = '';\n                        pgnEdit(boardId, that.configuration);\n                    };\n                } else {\n                    document.getElementById(fenId).readonly = true;\n                }\n                let fenSize = that.configuration.width ? that.configuration.width : that.configuration.boardSize;\n                document.getElementById(fenId).style.width = fenSize;\n            }\n            if (hasMode('print') || hasMode('view') || hasMode('edit')) {\n                // Ensure that moves are scrollable (by styling CSS) when necessary\n                // To be scrollable, the height of the element has to be set\n                // TODO: Find a way to set the height, if all other parameters denote that it had to be set:\n                // scrollable == true; layout == left|right\n                const movesDiv = createEle(\"div\", movesId, \"moves\", null, divBoard);\n\n                if (that.configuration.movesWidth) {\n                    movesDiv.style.width = that.configuration.movesWidth;\n                }\n                else if (that.configuration.width) {\n                    movesDiv.style.width = that.configuration.width;\n                }\n                if (that.configuration.movesHeight) {\n                    movesDiv.style.height = that.configuration.movesHeight;\n                }\n            }\n            if (hasMode('edit')) {\n                const editButtonsBoardDiv = createEle(\"div\", \"edit\" + buttonsId, \"edit\", theme, divBoard);\n                generateEditButtons(editButtonsBoardDiv);\n                let nagMenu = createEle('div', 'nagMenu' + buttonsId, 'nagMenu', theme, divBoard);\n                generateNagMenu(nagMenu);\n                const pgnDiv = createEle(\"textarea\", \"pgn\" + buttonsId, \"pgn\", theme, divBoard);\n                const commentBoardDiv = createEle(\"div\", \"comment\" + buttonsId, \"comment\", theme, divBoard);\n                generateCommentDiv(commentBoardDiv);\n                // Bind the paste key ...\n                addEventListener(\"pgn\" + buttonsId, 'mousedown', function (e) {\n                    e = e || window.event;\n                    e.preventDefault();\n                    e.target.select();\n                });\n                document.getElementById(\"pgn\" + buttonsId).onpaste = function (e) {\n                    const pastedData = e.originalEvent.clipboardData.getData('text');\n                    that.configuration.pgn = pastedData;\n                    pgnEdit(boardId, that.configuration);\n                };\n            }\n            const endDiv = createEle(\"div\", null, \"endBoard\", null, divBoard);\n        }\n    };\n\n    /**\n     * Generate the board that uses the unique innerBoardId and the part of the configuration\n     * that is for the board only. Returns the resulting object (as reference for others).\n     * @returns {Window.ChessBoard} the board object that may play the moves later\n     */\n    const generateBoard = function () {\n        function copyBoardConfiguration(source, target, keys) {\n            utils.pvEach(keys, function (key) {\n                if (typeof source[key] != \"undefined\") {\n                    target[key] = source[key];\n                }\n            });\n        }\n\n        // Default values of the board, if not overwritten by the given configuration\n        let boardConfiguration = {coordsInner: true, coordsFactor: 1.0, disableContextMenu: true,\n            drawable: {\n                onChange: (shapes) => {\n                    let move = that.mypgn.getMove(that.currentMove)\n                    that.mypgn.setShapes(move, shapes);\n                }\n            }};\n\n        copyBoardConfiguration(that.configuration, boardConfiguration,\n            ['position', 'orientation', 'showCoords', 'pieceTheme', 'draggable',\n                'coordsInner', 'coordsFactor', 'width', 'movable', 'viewOnly', 'highlight', 'boardSize',\n                'rankFontSize']);\n        // board = new ChessBoard(innerBoardId, boardConfiguration);\n        // Allow Chessground to be resizable\n        boardConfiguration.resizable = true;\n        if (typeof boardConfiguration.showCoords != 'undefined') {\n            boardConfiguration.coordinates = boardConfiguration.showCoords;\n        }\n        boardConfiguration.fen = boardConfiguration.position;\n        const el = document.getElementById(innerBoardId);\n        if (typeof that.configuration.pieceStyle != 'undefined') {\n            el.className += \" \" + that.configuration.pieceStyle;\n        }\n        if (boardConfiguration.boardSize) {\n            boardConfiguration.width = boardConfiguration.boardSize;\n        }\n        let currentWidth = parseInt(boardConfiguration.width);\n        let moduloWidth = currentWidth % 8;\n        let smallerWidth = currentWidth - moduloWidth;\n        // Ensure that boardWidth is a multiply of 8\n        boardConfiguration.width = \"\" + smallerWidth +\"px\";\n        board = Chessground(el, boardConfiguration);\n        //console.log(\"Board width: \" + board.width);\n        if (boardConfiguration.width) {\n            el.style.width = boardConfiguration.width;\n            el.style.height = boardConfiguration.width;\n            let fontSize = null;\n            if (boardConfiguration.rankFontSize) {\n                fontSize = boardConfiguration.rankFontSize;\n            } else {\n                // Set the font size related to the board (factor 28), ensure at least 8px font\n                fontSize = Math.max(8, Math.round(parseInt(boardConfiguration.width.slice(0, -2)) / 28 * boardConfiguration.coordsFactor));\n            }\n            el.style.fontSize = `${fontSize}px`;\n            document.body.dispatchEvent(new Event('chessground.resize'));\n        }\n        if (boardConfiguration.coordsInner) {\n            el.classList.add('coords-inner');\n        }\n        if (hasMode('edit')) {\n            game.load(boardConfiguration.position);\n            let toMove = (game.turn() == 'w') ? 'white' : 'black';\n            board.set({\n                movable: Object.assign({}, board.state.movable, {color: toMove, dests: possibleMoves(game)}),\n                turnColor: toMove, check: game.in_check()\n            });\n        }\n        if (that.configuration.colorMarker) {\n            if ( (that.configuration.position != 'start') &&\n                (that.configuration.position.split(' ')[1] == 'b') ) {\n                let ele = document.getElementById(colorMarkerId);\n                if (ele) {\n                    ele.classList.add('cm-black');\n                }\n            }\n        }\n        return board;\n    };\n\n    const moveSpan = function (i) {\n        return document.getElementById(movesId + i);\n    };\n\n    /**\n     * Generates one move from the current position.\n     * @param currentCounter the current move counter (should be redundant, because\n     *      the move itself should know its move counter)\n     * @param game the chess game that helps find the position\n     * @param move the current move  generated by reading the PGN (or playing on the board)\n     * @param prevCounter the previous counter (have to check that)\n     * @param movesDiv the div that contains the current moves\n     * @param varStack if empty no current variation (main line), else contains the divs of the variations played currently\n     * @return {*} the current counter which may the next prev counter\n     */\n    const generateMove = function (currentCounter, game, move, prevCounter, movesDiv, varStack) {\n        /**\n         * Comments are generated inline, there is no special block rendering\n         * possible for them.\n         * @param comment the comment to render as span\n         * @param clazz class parameter appended to differentiate different comments\n         * @returns {HTMLElement} the new created span with the comment as text\n         */\n        const generateCommentSpan = function (comment, clazz) {\n            const span = createEle('span', null, \"comment \" + clazz);\n            if (comment && (typeof comment == \"string\")) {\n                span.appendChild(document.createTextNode(\" \" + comment + \" \"));\n            }\n            return span;\n        };\n\n        const append_to_current_div = function (index, span, movesDiv, varStack) {\n            if (varStack.length == 0) {\n                if (typeof index == \"number\") {\n                    insertAfter(span, moveSpan(index));\n                } else {\n                    movesDiv.appendChild(span);\n                }\n            } else {\n                varStack[varStack.length - 1].appendChild(span);\n            }\n        };\n        function localBoard(id, configuration) {\n            let base = pgnBase(id, Object.assign({headers: false, mode: 'board'}, configuration));\n            base.generateHTML();\n            base.generateBoard();\n        }\n        // Ignore null moves\n        if (move === null || (move === undefined)) {\n            return prevCounter;\n        }\n        let clAttr = \"move\";\n        if (move.variationLevel > 0) {\n            clAttr = clAttr + \" var var\" + move.variationLevel;\n        }\n        if (move.turn == 'w') {\n            clAttr = clAttr + \" white\";\n        }\n        const span = createEle(\"span\", movesId + currentCounter, clAttr);\n        if (that.mypgn.startVariation(move)) {\n            const varDiv = createEle(\"div\", null, \"variation\");\n            if (varStack.length == 0) {\n                // This is the head of the current variation\n                let varHead = null;\n                if (typeof move.prev == \"number\") {\n                    varHead = that.mypgn.getMove(move.prev).next;\n                } else {\n                    varHead = 0;\n                }\n                moveSpan(varHead).appendChild(varDiv);\n                // movesDiv.appendChild(varDiv);\n            } else {\n                varStack[varStack.length - 1].appendChild(varDiv);\n            }\n            varStack.push(varDiv);\n            //span.appendChild(document.createTextNode(\" ( \"));\n        }\n        span.appendChild(generateCommentSpan(move.commentMove, \"moveComment\"));\n        if ((move.turn == 'w') || (that.mypgn.startMainLine(move)) || (that.mypgn.startVariation(move)) || (that.mypgn.afterMoveWithVariation(move))) {\n            const mn = move.moveNumber;\n            const num = createEle('span', null, \"moveNumber\", null, span);\n            num.appendChild(document.createTextNode(\"\" + mn + ((move.turn == 'w') ? \". \" : \"... \")));\n        }\n        span.appendChild(generateCommentSpan(move.commentBefore, \"beforeComment\"));\n        const link = createEle('a', null, null, null, span);\n        const san = i18nSan(that.mypgn.sanWithNags(move));\n        const text = document.createTextNode(san);\n        link.appendChild(text);\n        span.appendChild(document.createTextNode(\" \"));\n        if (that.configuration.timeAnnotation != 'none' && move.commentDiag && move.commentDiag.clock) {\n            let cl_time = move.commentDiag.clock.value;\n            let cl_class = that.configuration.timeAnnotation.class || 'timeNormal';\n            let clock_span = generateCommentSpan(cl_time, cl_class);\n            if (that.configuration.timeAnnotation.colorClass) {\n                clock_span.style = \"color: \" + that.configuration.timeAnnotation.colorClass;\n            }\n            span.appendChild(clock_span);\n        }\n        span.appendChild(generateCommentSpan(move.commentAfter, \"afterComment\"));\n        append_to_current_div(move.prev, span, movesDiv, varStack);\n        //movesDiv.appendChild(span);\n        if (that.mypgn.endVariation(move)) {\n            //span.appendChild(document.createTextNode(\" ) \"));\n            varStack.pop();\n        }\n        addEventListener(moveSpan(currentCounter), 'click', function (event) {\n            makeMove(that.currentMove, currentCounter, move.fen);\n            event.stopPropagation();\n        });\n        if (that.mypgn.has_diagram_nag(move)) {\n            const diaID = boardId + \"dia\" + currentCounter;\n            const diaDiv = createEle('div', diaID);\n            span.appendChild(diaDiv);\n            that.configuration.position = move.fen;\n            localBoard(diaID, that.configuration);\n        }\n        return currentCounter;\n    };\n\n    /**\n     * Unmark all marked moves, mark the next one.\n     * @param next the next move number\n     */\n    function unmarkMark(next) {\n        const moveASpan = function (i) {\n            return document.querySelector('#' + movesId + i + '> a');\n        };\n\n        removeClass(document.querySelector('#' + movesId + \" a.yellow\"), 'yellow');\n        addClass(moveASpan(next), 'yellow');\n    }\n\n    /**\n     * Check which buttons should be grayed out\n     */\n    const updateUI = function (next) {\n        let elements = document.querySelectorAll(\"div.buttons .gray\");\n        utils.pvEach(elements, function (ele) {\n            removeClass(ele, 'gray');\n        });\n        const move = that.mypgn.getMove(next);\n        if (next === null) {\n            [\"prev\", \"first\"].forEach(function (name) {\n                addClass(document.querySelector(\"div.buttons .\" + name), 'gray');\n            });\n        }\n        if ((next !== null) && (typeof move.next != \"number\")) {\n            [\"next\", \"play\", \"last\"].forEach(function (name) {\n                addClass(document.querySelector(\"div.buttons .\" + name), 'gray');\n            });\n        }\n        // Update the drop-down for NAGs\n        try {\n            if (move === undefined) {\n                return;\n            }\n            let nagMenu = document.querySelector('#nagMenu' + buttonsId);\n            document.querySelectorAll('#nagMenu' + buttonsId + ' a.active').forEach(function (act) {\n                act.classList.toggle('active');\n            });\n            let nags = move.nag || [];\n            nags.forEach(function (eachNag) {\n                document.querySelector('#nagMenu' + buttonsId + ' [data-value=\"' + eachNag.substring(1) + '\"]')\n                    .parentNode.classList.toggle('active');\n            });\n        } catch (err) {\n\n        }\n\n    };\n\n    /**\n     * Plays the move that is already in the notation on the board.\n     * @param curr the current move number\n     * @param next the move to take now\n     * @param fen the fen of the move to make\n     */\n    const makeMove = function (curr, next, fen) {\n        /**\n         * Fills the comment field depending on which and if a comment is filled for that move.\n         */\n        function fillComment(moveNumber) {\n            let myMove = that.mypgn.getMove(moveNumber);\n            if (!~myMove) return;\n            if (myMove.commentAfter) {\n                document.querySelector('#' + boardId + \" input.afterComment\").checked = true;\n                document.querySelector('#' + boardId + \" textarea.comment\").value = myMove.commentAfter;\n            } else if (myMove.commentBefore) {\n                document.querySelector('#' + boardId + \" input.beforeComment\").checked = true;\n                document.querySelector('#' + boardId + \" textarea.comment\").value = myMove.commentBefore;\n            } else if (myMove.commentMove) {\n                document.querySelector('#' + boardId + \" input.moveComment\").checked = true;\n                document.querySelector('#' + boardId + \" textarea.comment\").value = myMove.commentMove;\n            } else {\n                document.querySelector('#' + boardId + \" textarea.comment\").value = \"\";\n            }\n        }\n\n        function handlePromotion(aMove) {\n            if (!aMove) return;\n            if (aMove.notation.promotion) {\n                let promPiece = aMove.notation.promotion.substring(1, 2).toLowerCase();\n                let pieces = {};\n                pieces[aMove.to] =\n                    {\n                        role: that.mypgn.PROMOTIONS[promPiece],\n                        color: (aMove.turn == 'w' ? 'white' : 'black')\n                    };\n                board.setPieces(pieces);\n            }\n        }\n\n        function getShapes(commentDiag) {\n            function colOfDiag(color) {\n                const colors = {Y: 'yellow', R: 'red', B: 'blue', G: 'green'};\n                return colors[color];\n            }\n\n            let arr = [];\n            if ((commentDiag !== undefined) && (commentDiag !== null)) {\n                if (commentDiag.colorArrows) {\n                    for (let i = 0; i < commentDiag.colorArrows.length; i++) {\n                        let comm = commentDiag.colorArrows[i];\n                        arr.push({\n                            orig: comm.substring(1, 3),\n                            dest: comm.substring(3, 5),\n                            brush: colOfDiag(comm.substring(0, 1))\n                        });\n                    }\n                }\n                if (commentDiag.colorFields) {\n                    for (let i = 0; i < commentDiag.colorFields.length; i++) {\n                        let comm = commentDiag.colorFields[i];\n                        arr.push({orig: comm.substring(1, 3), brush: colOfDiag(comm.substring(0, 1))});\n                    }\n                }\n            }\n            return arr;\n        }\n\n        //console.log(\"Marke move: Curr \" + curr + \" Next \" + next + \" FEN \" + fen);\n        //board.set({fen: fen});\n        let myMove = that.mypgn.getMove(next);\n        let myFen = myMove ? myMove.fen : fen;\n        if (!myFen) { // fen not given, take start position\n            myFen = that.configuration.position == 'start' ? 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1' : that.configuration.position;\n        }\n        if (myMove) {\n            board.set({fen: myFen, lastMove: [myMove.from, myMove.to]});\n        } else {\n            board.set({fen: myFen, lastMove: []});\n        }\n        handlePromotion(myMove);\n        if (myMove) {\n            board.setShapes(getShapes(myMove.commentDiag));\n        }\n        game.load(myFen);\n        unmarkMark(next);\n        that.currentMove = next;\n        if (next) {\n            scrollToView(moveSpan(next));\n        }\n        if (hasMode('edit')) {\n            let col = game.turn() == 'w' ? 'white' : 'black';\n            board.set({\n                movable: Object.assign({}, board.state.movable, {color: col, dests: possibleMoves(game)}),\n                turnColor: col, check: game.in_check()\n            });\n            if (next) {\n                fillComment(next);\n            }\n        } else if (hasMode('view')) {\n            let col = game.turn() == 'w' ? 'white' : 'black';\n            board.set({\n                movable: Object.assign({}, board.state.movable, {color: col}),\n                turnColor: col, check: game.in_check()\n            });\n        }\n        let fenView = document.getElementById(fenId);\n        if (fenView) {\n            fenView.value = fen;\n        }\n        toggleColorMarker();\n        updateUI(next);\n    };\n\n    /**\n     * Generates the HTML (for the given moves). Includes the following: move number,\n     * link to FEN (position after move)\n     */\n    const generateMoves = function (board) {\n        try {\n            that.mypgn.load_pgn();\n        } catch (err) {\n            if (typeof err.location != \"undefined\") {\n                const sta = err.location.start.offset;\n                let pgnStr = that.configuration.pgn;\n                logError(\"Offset: \" + sta);\n                logError(\"PGN: \" + pgnStr);\n                logError(err.message);\n            } else {\n                let pgnStr = that.configuration.pgn;\n                logError(\"PGN: \" + pgnStr);\n                logError(err);\n            }\n        }\n        //TODO: Move the whole block to `pgn.src` and do the compuation there.\n        // This should already be finished after load_pgn\n        // if (that.configuration.startPlay && that.configuration.hideMovesBefore) {\n        //     let new_fen = that.mypgn.deleteMovesBefore(that.configuration.startPlay);\n        //     let new_pgn = that.mypgn.write_pgn();\n        //     that.configuration.startPlay = null;\n        //     that.configuration.hideMovesBefore = false;\n        //     that.configuration.pgn = new_pgn;\n        //     that.configuration.position = new_fen;\n        //     that.mypgn.load_pgn();\n        // }\n        let myMoves = that.mypgn.getMoves();\n        if (that.configuration.position == 'start') {\n            game.reset();\n        } else {\n            game.load(that.configuration.position);\n        }\n        if (board !== null) {\n            board.set({fen: game.fen()});\n        }\n        let fenField = document.getElementById(fenId);\n        if (utils.pvIsElement(fenField)) {\n            fenField.value = game.fen();\n        }\n\n        /**\n         * Generate a useful notation for the headers, allow for styling. First a version\n         * that just works.\n         */\n        const generateHeaders = function () {\n            let tags = that.mypgn.getTags();\n            if (that.configuration.headers == false || (utils.pvIsEmpty(tags))) {\n                let hd = document.getElementById(headersId);\n                hd.parentNode.removeChild(hd);\n                return;\n            }\n            let div_h = document.getElementById(headersId);\n            let white = createEle('span', null, \"whiteHeader\", theme, div_h);\n            if (tags.White) {\n                white.appendChild(document.createTextNode(tags.White + \" \"));\n            }\n            //div_h.appendChild(document.createTextNode(\" - \"));\n            let black = createEle('span', null, \"blackHeader\", theme, div_h);\n            if (tags.Black) {\n                black.appendChild(document.createTextNode(\" \" + tags.Black));\n            }\n            let rest = \"\";\n            const appendHeader = function (result, header, separator) {\n                if (header) {\n                    if (result.length > 0) {\n                        result += separator;\n                    }\n                    result += header;\n                }\n                return result;\n            };\n            [tags.Event, tags.Site, tags.Round, tags.Date,\n                tags.ECO, tags.Result].forEach(function (header) {\n                rest = appendHeader(rest, header, \" | \");\n            });\n            const restSpan = createEle(\"span\", null, \"restHeader\", theme, div_h);\n            restSpan.appendChild(document.createTextNode(rest));\n\n        };\n\n        // Bind the necessary functions to move the pieces.\n        const bindFunctions = function () {\n            const bind_key = function (key, to_call) {\n                let key_ID;\n                if (hasMarkup()) {\n                    key_ID = \"#\" + boardId.moves;\n                } else {\n                    key_ID = \"#\" + boardId + \",#\" + boardId + \"Moves\";\n                }\n                const form = document.querySelector(key_ID);\n                Mousetrap(form).bind(key, function (evt) {\n                    to_call();\n                    evt.stopPropagation();\n                });\n            };\n            const nextMove = function () {\n                let fen = null;\n                if ((typeof that.currentMove == 'undefined') || (that.currentMove === null)) {\n                    fen = that.mypgn.getMove(0).fen;\n                    makeMove(null, 0, fen);\n                } else {\n                    const next = that.mypgn.getMove(that.currentMove).next;\n                    if (typeof next == 'undefined') return;\n                    fen = that.mypgn.getMove(next).fen;\n                    makeMove(that.currentMove, next, fen);\n                }\n            };\n            const prevMove = function () {\n                let fen = null;\n                if ((typeof that.currentMove == 'undefined') || (that.currentMove == null)) {\n                    /*fen = that.mypgn.getMove(0).fen;\n                     makeMove(null, 0, fen);*/\n                }\n                else {\n                    const prev = that.mypgn.getMove(that.currentMove).prev;\n                    if ((typeof prev === 'undefined') || (prev == null)) {\n                        firstMove();\n                    } else {\n                        fen = that.mypgn.getMove(prev).fen;\n                        makeMove(that.currentMove, prev, fen);\n                    }\n                }\n            };\n            const firstMove = function () {\n                makeMove(null, null, null);\n            };\n            const timer = new Timer(10);\n            timer.bind(that.configuration.timerTime, function () {\n                nextMove();\n            });\n            addEventListener(buttonsId + 'flipper', 'click', function () {\n                board.toggleOrientation();\n            });\n            addEventListener(buttonsId + 'next', 'click', function () {\n                nextMove();\n            });\n            addEventListener(buttonsId + 'prev', 'click', function () {\n                prevMove();\n            });\n            addEventListener(buttonsId + 'first', 'click', function () {\n                firstMove();\n            });\n            addEventListener(buttonsId + 'last', 'click', function () {\n                const fen = that.mypgn.getMove(that.mypgn.getMoves().length - 1).fen;\n                makeMove(that.currentMove, that.mypgn.getMoves().length - 1, fen);\n            });\n            let togglePgn = function () {\n                const pgnButton = document.getElementById(buttonsId + \"pgn\");\n                const pgnText = document.getElementById(boardId + \" .outerpgn\");\n                document.getElementById(buttonsId + \"pgn\").classList.toggle('selected');\n                if (document.getElementById(buttonsId + \"pgn\").classList.contains('selected')) {\n                    const str = computePgn();\n                    showPgn(str);\n                    document.querySelector(\"#\" + boardId + \" .pgn\").style.display = 'block'; //slideDown(700, \"linear\");\n                } else {\n                    document.querySelector(\"#\" + boardId + \" .pgn\").style.display = 'none';\n                }\n            };\n            let toggleNagMenu = function () {\n                let nagMenu = document.getElementById(buttonsId + 'nags').classList.toggle('selected');\n                if (document.getElementById(buttonsId + 'nags').classList.contains('selected')) {\n                    document.getElementById('nagMenu' + buttonsId).style.display = 'flex';\n                } else {\n                    document.getElementById('nagMenu' + buttonsId).style.display = 'none';\n                }\n            };\n            if (hasMode('edit')) { // only relevant functions for edit mode\n                addEventListener(buttonsId + \"pgn\", 'click', function () {\n                    togglePgn();\n                });\n                addEventListener(buttonsId + 'nags', 'click', function () {\n                    toggleNagMenu();\n                });\n                addEventListener(buttonsId + \"deleteMoves\", 'click', function () {\n                    const prev = that.mypgn.getMove(that.currentMove).prev;\n                    const fen = that.mypgn.getMove(prev).fen;\n                    that.mypgn.deleteMove(that.currentMove);\n                    //document.getElementById(movesId).innerHtml = \"\";\n                    let myNode = document.getElementById(movesId);\n                    while (myNode.firstChild) {\n                        myNode.removeChild(myNode.firstChild);\n                    }\n                    regenerateMoves(that.mypgn.getMoves());\n                    makeMove(null, prev, fen);\n                });\n                addEventListener(buttonsId + \"promoteVar\", 'click', function () {\n                    let curr = that.currentMove;\n                    that.mypgn.promoteMove(that.currentMove);\n                    //document.getElementById(movesId).html(\"\");\n                    let myNode = document.getElementById(movesId);\n                    while (myNode.firstChild) {\n                        myNode.removeChild(myNode.firstChild);\n                    }\n                    regenerateMoves(that.mypgn.getOrderedMoves());\n                    let fen = that.mypgn.getMove(curr).fen;\n                    makeMove(null, that.currentMove, fen);\n                });\n                document.querySelector('#' + boardId + ' .pgn').style.display = 'none';\n                document.querySelector('#comment' + buttonsId + \" textarea.comment\").onchange = function () {\n                    function commentText() {\n                        return \" \" + document.querySelector('#' + 'comment' + buttonsId + \" textarea.comment\").value + \" \";\n                    }\n\n                    let text = commentText();\n                    let checked = document.querySelector('#' + \"comment\" + buttonsId + \" :checked\");\n                    checked = checked ? checked.value : \"after\";\n                    moveSpan(that.currentMove).querySelector(\".\" + checked + \"Comment\").textContent = text;\n                    if (checked === \"after\") {\n                        that.mypgn.getMove(that.currentMove).commentAfter = text;\n                    } else if (checked === \"before\") {\n                        that.mypgn.getMove(that.currentMove).commentBefore = text;\n                    } else if (checked === \"move\") {\n                        that.mypgn.getMove(that.currentMove).commentMove = text;\n                    }\n                };\n                const rad = [\"moveComment\", \"beforeComment\", \"afterComment\"];\n                const prevComment = null;\n                for (let i = 0; i < rad.length; i++) {\n                    document.querySelector('#' + 'comment' + buttonsId + \" .\" + rad[i]).onclick = function () {\n                        const checked = this.value;\n                        let text;\n                        if (checked === \"after\") {\n                            text = that.mypgn.getMove(that.currentMove).commentAfter;\n                        } else if (checked === \"before\") {\n                            text = that.mypgn.getMove(that.currentMove).commentBefore;\n                        } else if (checked === \"move\") {\n                            text = that.mypgn.getMove(that.currentMove).commentMove;\n                        }\n                        document.querySelector('#' + boardId + \" textarea.comment\").value = text;\n                    };\n                }\n            }\n\n            function togglePlay() {\n                timer.running() ? timer.stop() : timer.start();\n                const playButton = document.getElementById(buttonsId + 'play');\n                const clString = playButton.getAttribute('class');\n                if (clString.indexOf('play') < 0) { // has the stop button\n                    clString = clString.replace('stop', 'play');\n                } else {\n                    clString = clString.replace('play', 'stop');\n                }\n                playButton.setAttribute('class', clString);\n            }\n\n            bind_key(\"left\", prevMove);\n            bind_key(\"right\", nextMove);\n            //bind_key(\"space\", togglePlay);\n            addEventListener(buttonsId + 'play', 'click', function () {\n                togglePlay();\n            });\n\n        };\n\n        const computePgn = function () {\n            return that.mypgn.write_pgn();\n        };\n\n        const showPgn = function (val) {\n            document.getElementById('pgn' + buttonsId).textContent = val;\n        };\n\n        /**\n         * Regenerate the moves div, may be used the first time (DIV is empty)\n         * or later (moves have changed).\n         */\n        const regenerateMoves = function (myMoves) {\n            const movesDiv = document.getElementById(movesId);\n            let prev = null;\n            const varStack = [];\n            let firstMove = 0;\n            for (let i = firstMove; i < myMoves.length; i++) {\n                if (!that.mypgn.isDeleted(i)) {\n                    const move = myMoves[i];\n                    prev = generateMove(move.index, game, move, prev, movesDiv, varStack);\n                }\n            }\n        };\n        regenerateMoves(myMoves);\n        bindFunctions();\n        generateHeaders();\n\n        /**\n         * Allows to add functions after having generated the moves. Used currently for setting start position.\n         */\n        function postGenerateMoves() {\n            if (that.configuration.startPlay && !that.configuration.hideMovesBefore) {\n                let move = that.mypgn.findMove(that.configuration.startPlay)\n                if (move === undefined) {\n                    logError('Could not find startPlay: ' + that.configuration.startPlay);\n                    return;\n                }\n                makeMove(move.prev, move.index, move.fen);\n                unmarkMark(move.index);\n            }\n\n            if (that.configuration.showResult) {\n                // find the result from the header\n                let endGame = that.mypgn.getEndGame();\n                // Insert it as new span\n                let span = createEle(\"span\", movesId + \"Result\", \"move\", theme,\n                    document.getElementById(movesId));\n                span.innerHTML = endGame ? endGame : \"*\";\n\n            }\n        }\n\n        postGenerateMoves();\n    };\n    let ret = {\n        // PUBLIC API\n        chess: game,\n        board: board,\n        getPgn: function () {\n            return that.mypgn;\n        },\n        generateHTML: generateHTML,\n        generateBoard: generateBoard,\n        generateMoves: generateMoves,\n        onSnapEnd: onSnapEnd\n    };\n    return ret;\n};\n\nexport default pgnBase;","import i18next  from 'i18next';\nimport i18nextXHRBackend from 'i18next-xhr-backend';\nimport i18nextLocalStorageCache from 'i18next-localstorage-cache';\nimport smoothscroll from 'smoothscroll-polyfill';\nimport pgnBase from \"./pgnvjs\";\n\nimport './css/chessground.css';\nimport './css/theme.css';\nimport './css/pgnvjs.css';\n\nlet GLOB_SCHED = {};\n// kick off the polyfill!\nsmoothscroll.polyfill();\n\n/**\n * Schedules a call, ensures that the result of that call is given back.\n * @param loc the given local, or not defined (default: en)\n * @param func the function that should be called after having loaded the locale.\n * @returns the result of the function call\n */\nGLOB_SCHED.schedule = function (loc, func) {\n    let my_res = null;\n    let myLoc = (typeof loc != 'undefined') ? loc : 'en';\n    if (i18next.hasResourceBundle(myLoc)) {\n        my_res = func.call(null);\n    } else {\n        i18next.loadLanguages(myLoc, (err, t) => {\n            my_res = func.call(null);\n        });\n    }\n    return my_res;\n};\n\n// Users of PgnViewerJS may redefine some defaults by defining globally the var `PgnBaseDefaults.\n// This will be merged then with the defaults defined by the app itself.\nif (!window.PgnBaseDefaults) {\n    window.PgnBaseDefaults = {};\n}\n// Holds defined pgnBase objects to allow test specs\nwindow.pgnTestRegistry = {};\n\n// Anonymous function, has not to be visible from the outside\n// Does all the initialization stuff only needed once, here mostly internationalization.\nlet initI18n = function () {\n    let localPath = function () {\n        if (window.PgnBaseDefaults.localPath) {\n            return window.PgnBaseDefaults.localPath;\n        }\n        let jsFileLocation = document.querySelector('script[src*=pgnv]').src;  // the src file path\n        let index = jsFileLocation.indexOf('pgnv');\n        console.log(\"Local path: \" + jsFileLocation.substring(0, index));\n        return jsFileLocation.substring(0, index);   // the father of the src folder\n    };\n    let localesPattern = window.PgnBaseDefaults.localesPattern || 'locales/{{ns}}-{{lng}}.json';\n    let loadPath = window.PgnBaseDefaults.loadPath || (localPath() + localesPattern);\n    let i18n_option = {\n        backend: {loadPath: loadPath},\n        cache: {enabled: true},\n        fallbackLng: 'en',\n        ns: ['chess', 'nag', 'buttons'],\n        defaultNS: 'chess',\n        debug: false\n    };\n    i18next.use(i18nextXHRBackend).use(i18nextLocalStorageCache).init(i18n_option, (err, t) => {\n    });\n};\ninitI18n();\n\n\n/**\n * Defines the utility function just to display the board including the moves\n * read-only. It allows to play through the game, but not to change or adapt it.\n * @param boardId the unique ID per HTML page\n * @param configuration the configuration for chess, board and pgn.\n *      See the configuration of `pgnBoard` for the board configuration. Relevant for pgn is:\n *   pgn: the pgn as single string, or empty string (default)\n * @returns {{base, board}} base: all utility functions available, board: reference to Chessground\n */\nlet pgnView = function (boardId, configuration) {\n    return GLOB_SCHED.schedule(configuration.locale,\n        () => {\n            let base = pgnBase(boardId, Object.assign({mode: 'view'}, configuration));\n            base.generateHTML();\n            let b = base.generateBoard();\n            base.generateMoves(b);\n            return {\n                base,\n                board: b\n            };\n        });\n};\n\n/**\n * Defines a utility function just to display a board (only). There are some similar\n * parameters to `pgnView`, but some are not necessary.\n * @param boardId needed for the inclusion of the board itself\n * @param configuration object with the attributes:\n *  position: 'start' or FEN string\n *  orientation: 'black' or 'white' (default)\n *  showCoords: false or true (default)\n *  pieceStyle: some of alpha, uscf, wikipedia (from chessboardjs) or\n *              merida-svg (default), case, leipzip, maya, condal (from ChessTempo)\n *              or chesscom (from chess.com) (as string)\n *  pieceTheme: allows to adapt the path to the pieces, default is 'img/chesspieces/alpha/{piece}.png'\n *          Normally not changed by clients\n *  theme: (only CSS related) some of zeit, blue, chesscom, ... (as string)\n */\nlet pgnBoard = function (boardId, configuration) {\n    return GLOB_SCHED.schedule(\n        configuration.locale,\n        () => {\n            let base = pgnBase(boardId, Object.assign({headers: false, mode: 'board'}, configuration));\n            base.generateHTML();\n            let board = base.generateBoard();\n            return {\n                base,\n                board\n            };\n        });\n};\n\n/**\n * Defines a utility function to get a full-fledged editor for PGN. Allows\n * to make moves, play forward and backward, try variations, ...\n * This functionality should sit on top of the normal pgnView functionality,\n * and should allow to \"use\" in some way the generated PGN at the end.\n * @param boardId the unique ID of the board (per HTML pagew)\n * @param configuration the configuration of everything. See pgnBoard and\n *      pgnView for some of the parameters. Additional parameters could be:\n *    allowVariants: false or true (default)\n *    allowComments: false or true (default)\n *    allowAnnotations: false or true (default)\n */\nlet pgnEdit = function (boardId, configuration) {\n    return GLOB_SCHED.schedule(configuration.locale, () => {\n        let base = pgnBase(boardId, Object.assign(\n            {\n                showFen: true, mode: 'edit',\n                movable: {\n                    free: false,\n                    events: {\n                        after: function (orig, dest, meta) {\n                            base.onSnapEnd(orig, dest, meta);\n                        }\n                    }\n                },\n                viewOnly: false\n            },\n            configuration));\n        base.generateHTML();\n        let board = base.generateBoard();\n        base.generateMoves(board);\n        return { base, board };\n    });\n};\n\n/**\n * Defines a utility function to get a printable version of a game, enriched\n * by diagrams, comments, ... Does  not allow to replay the game (no buttons),\n * disables all editing functionality.\n * @param boardId the unique ID of the board (per HTML page)\n * @param configuration the configuration, mainly here the board style and position.\n * Rest will be ignored.\n */\nlet pgnPrint = function (boardId, configuration) {\n    return GLOB_SCHED.schedule(configuration.locale, () => {\n        let base = pgnBase(boardId, Object.assign({showCoords: false, mode: 'print'}, configuration));\n        base.generateHTML();\n        base.generateMoves(null);\n        return base;\n    });\n};\n\nGLOB_SCHED.schedule(\"fr\", () => {\n    console.log(i18next.t(\"nag:$18\", { lng: 'fr'}));\n});\n\n/*let my_div2 = document.createElement('div');\nmy_div2.classList.add(\"merida\");\nmy_div2.classList.add(\"blue\");\ndocument.style = \"--cg-coord-color-white:#DEE3E6; --cg-coord-color-black:#788a94; --cg-coord-shadow:none;\";\ndocument.body.appendChild(my_div2);\nChessground(my_div2, {coordinates: true});*/\n\nexport { pgnBoard, pgnEdit, pgnBase, pgnPrint, pgnView };"],"sourceRoot":""}